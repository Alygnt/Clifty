"use strict";Vue.component("data-privacy",{_scopeId:"data-v-68af1a69",owCSS:"[data-v-68af1a69]{box-sizing:border-box}.privacy-wrapper[data-v-68af1a69]{height:100vh;background:#fff}.privacy-wrapper h1.title[data-v-68af1a69]{font-size:24px;font-weight:500;line-height:32px;padding:16px;margin:0 0 24px}.privacy-wrapper .dp-settings[data-v-68af1a69]{padding-top:56px;position:relative}.privacy-wrapper .dp-settings ul[data-v-68af1a69]{margin:0;padding:0 0 0 16px}.privacy-wrapper .dp-settings ul li[data-v-68af1a69]{list-style-type:none}.privacy-wrapper .dp-settings ul li a[data-v-68af1a69]{display:block}.privacy-wrapper .dp-settings .manageData-wrapper h1.title[data-v-68af1a69]{font-size:24px;font-weight:500;line-height:32px;padding:16px 40px 16px 16px;margin:0}.privacy-wrapper .dp-settings .manageData-wrapper p.subtitle[data-v-68af1a69]{padding:0 40px 0 16px;margin:0 0 24px;color:#707070;font-size:14px;line-height:20px}.privacy-wrapper .dp-settings .manageData-wrapper p.subtitle a[data-v-68af1a69],.privacy-wrapper .dp-settings .manageData-wrapper p.subtitle a[data-v-68af1a69]:focus,.privacy-wrapper .dp-settings .manageData-wrapper p.subtitle a[data-v-68af1a69]:hover{color:#0076ff;text-decoration:none}.privacy-wrapper .header[data-v-68af1a69]{border:none!important;box-shadow:none!important}.privacy-wrapper .dialog .dialog-container[data-v-68af1a69]{bottom:0;top:auto}.privacy-wrapper .dialog-button-cancel[data-v-68af1a69]{border-color:#c12b2d!important}.block_msg[data-v-68af1a69]{position:absolute;top:0;bottom:0;height:40px;line-height:normal;left:0;right:0;margin:auto;text-align:center;padding:0 16px}.list-wrapper[data-v-68af1a69]{position:relative;padding:16px 30px 20px 0;border-bottom:1px solid rgba(0,0,0,.08)}.list-wrapper .title[data-v-68af1a69]{font-size:16px;line-height:24px;color:#000;font-weight:500}.list-wrapper .subtitle[data-v-68af1a69]{color:rgba(0,0,0,.8);font-size:14px;line-height:20px}.list-wrapper .list-icon[data-v-68af1a69]{position:absolute;right:16px;top:0;bottom:0;height:23px;margin:auto}",render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"privacy-wrapper"},[t.owRegistry["sso-app-header"]?a("sso-app-header",{attrs:{title:t.pageTitle},on:{back:t.handleBack}}):t._e(),t._v(" "),!1===t.block_view?a("div",["intro"==t.screen?a("div",{staticClass:"dp-settings"},[t._m(0),t._v(" "),a("ul",[this.menuItems.notificationPreferencesEnabled?a("li",[a("a",{attrs:{id:"notificationPrefs"},on:{click:function(e){e.preventDefault(),t.handleOptions(e)}}},[a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"title"},[t._v("Manage notifications")]),t._v(" "),a("div",{staticClass:"subtitle"},[t._v("Set your preference for receiving messages")]),t._v(" "),a("div",{staticClass:"list-icon"},[a("ow-icon",{attrs:{name:"CHEVRON_RIGHT",width:"7.5",height:"12"}})],1)])])]):t._e(),t._v(" "),this.menuItems.manageDataEnabled?a("li",[a("a",{attrs:{id:"manageData"},on:{click:function(e){e.preventDefault(),t.handleOptions(e)}}},[a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"title"},[t._v("Manage your data")]),t._v(" "),a("div",{staticClass:"subtitle"},[t._v("Get a copy of your data or delete account")]),t._v(" "),a("div",{staticClass:"list-icon"},[a("ow-icon",{attrs:{name:"CHEVRON_RIGHT",width:"7.5",height:"12"}})],1)])])]):t._e()])]):t._e(),t._v(" "),"preferences"==t.screen?a("div",{staticClass:"dp-settings"},[a("sso-notification-prefs",{on:{handleSave:t.handleSave,setstate:t.setState}})],1):t._e(),t._v(" "),"manage-data"==t.screen?a("div",{staticClass:"dp-settings"},[a("div",{staticClass:"manageData-wrapper"},[a("h1",{staticClass:"title"},[t._v("Manage your data")]),t._v(" "),a("p",{staticClass:"subtitle"},[t._v("\n\t\t\t\t\t\tYour data is always secure and used only to give you a suitable experience. You can visit the app menu to read our Privacy Policy for more details.")]),t._v(" "),a("ul",[-1<this.menuItems.manageDataItems.indexOf("request_data")?a("li",[a("a",{attrs:{id:"request_data"},on:{click:function(e){e.preventDefault(),t.handleOptions(e)}}},[a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"title"},[t._v("Request Data")]),t._v(" "),a("div",{staticClass:"subtitle"},[t._v("Get your data in CSV file (easy to view)")]),t._v(" "),a("div",{staticClass:"list-icon"},[a("ow-icon",{attrs:{name:"CHEVRON_RIGHT",width:"7.5",height:"12"}})],1)])])]):t._e(),t._v(" "),-1<this.menuItems.manageDataItems.indexOf("migrate_data")?a("li",[a("a",{attrs:{id:"migrate_data"},on:{click:function(e){e.preventDefault(),t.handleOptions(e)}}},[a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"title"},[t._v("Migrate Data")]),t._v(" "),a("div",{staticClass:"subtitle"},[t._v("Get your data in JSON file (easy to import)")]),t._v(" "),a("div",{staticClass:"list-icon"},[a("ow-icon",{attrs:{name:"CHEVRON_RIGHT",width:"7.5",height:"12"}})],1)])])]):t._e(),t._v(" "),a("a",{attrs:{id:"del_account"},on:{click:function(e){e.preventDefault(),t.handleOptions(e)}}},[a("div",{staticClass:"list-wrapper"},[a("div",{staticClass:"title"},[t._v("Delete Account")]),t._v(" "),a("div",{staticClass:"subtitle"},[t._v("Your account will be deactivated immediately")]),t._v(" "),a("div",{staticClass:"list-icon"},[a("ow-icon",{attrs:{name:"CHEVRON_RIGHT",width:"7.5",height:"12"}})],1)])])])])]):t._e(),t._v(" "),"delete-acc"==t.screen?a("div",{staticClass:"dp-settings"},[a("sso-delete-account",{on:{handleDelAcc:t.handleDelAcc,handleCancelDel:t.handleCancelDel}})],1):t._e(),t._v(" "),t.owRegistry["ow-dialog"]?a("ow-dialog",{attrs:{hidden:t.req_dialogHidden,dialogContent:t.req_dialogContent,theme:t.custom,skin:"custom"},on:{handleOk:t.req_handleDialogOk,handleCancel:t.req_handleDialogCancel}}):t._e(),t._v(" "),t.owRegistry["ow-dialog"]?a("ow-dialog",{attrs:{hidden:t.migrate_dialogHidden,dialogContent:t.migrate_dialogContent,theme:t.custom,skin:"custom"},on:{handleOk:t.migrate_handleOk,handleCancel:t.migrate_handleCancel}}):t._e(),t._v(" "),t.owRegistry["ow-dialog"]?a("ow-dialog",{attrs:{hidden:t.del_dialogHidden,dialogContent:t.del_dialogContent,skin:"custom",alignBtns:"rows",reverse:t.reverse_btns},on:{handleOk:t.del_handleOk,handleCancel:t.del_handleDialogCancel}}):t._e(),t._v(" "),t.owRegistry["ow-dialog"]?a("ow-dialog",{attrs:{hidden:t.interuptorHidden,dialogContent:t.InteruptorContent,skin:"custom",icon:!0,iconURL:t.icon.url},on:{handleOk:t.interuptorOk}}):t._e(),t._v(" "),t.owRegistry["ow-dot-loader"]&&t.ajaxInProgress?a("ow-dot-loader",{attrs:{lighter:"true"}}):t._e(),t._v(" "),t.owRegistry["ow-ajax"]?a("ow-ajax",{attrs:{trigger:t.getconfig,url:"/gatekeeper-api/gdpr/config",method:"get"},on:{success:t.getSuccessCB,error:t.getErrorCB}}):t._e(),t._v(" "),t.owRegistry["ow-ajax"]?a("ow-ajax",{attrs:{trigger:t.startMD,url:"/gatekeeper-api/gdpr/manage_data",body:t.getrequestTypeData,method:"POST"},on:{success:t.getSuccessCB,error:t.getErrorCB}}):t._e(),t._v(" "),t.owRegistry["ow-toast"]?a("ow-toast",{style:t.toastStyle,attrs:{toastType:t.toast.type,content:t.toast.content,showToast:t.toast.show,position:"bottom"},on:{close:t.closeToast}}):t._e()],1):t._e()],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.block_view,expression:"block_view"}],staticClass:"block_msg"},[t._v("\n\t\t"+t._s(t.blockview_msg)+"\n\t")])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",{staticClass:"title"},[e._v("Data and privacy"),a("br"),e._v(" settings")])}],name:"data-privacy",data:function(){return{pageTitle:"",got_config:!1,getconfig:"dormant",startMD:"dormant",reverse_btns:!1,ajaxInProgress:null,manageDataMessages:{},req_dialogHidden:!0,migrate_dialogHidden:!0,del_dialogHidden:!0,dialogOkHidden:!0,interuptorHidden:!0,interuptor_content:{},delete_success:!1,block_view:!1,blockview_msg:"",menuItems:{},requestTypeData:{requestType:null},icon:{url:""},icons:{success:"https://olawebcdn.com/images/v1/gdpr/success.svg",failure:"https://olawebcdn.com/images/v1/gdpr/failure.svg",credit:"https://olawebcdn.com/images/v1/gdpr/credit_error.svg"},user:{email:"",emailPresent:!1,emailVerified:!1},toast:{show:!1,type:"blackbg",content:""},toastStyle:{width:"90%",padding:"8px",opacity:.95,"border-radius":"3px","box-shadow":"0 2px 4px 0 rgba(0, 0, 0, 0.24)"}}},watch:{screen:function(e){"intro"===e&&(this.req_dialogHidden=!0,this.migrate_dialogHidden=!0,this.interuptorHidden=!0),"manage-data"===e&&(this.interuptorHidden=!0,this.del_dialogHidden=!0,this.pageTitle=""),"delete-acc"===e&&(this.interuptorHidden=!0)}},computed:{trackingParams:function(){var e={OS:this.getOS(),scot:new Fingerprint({canvas:!0}).get()};return Object.assign({web_metadata:JSON.stringify(e)},window.owConfig.dataFromApp)},getrequestTypeData:function(){return this.requestTypeData},req_dialogContent:function(){return{heading:"Send a request?",type:"cta",message:this.manageDataMessages.GET_HTML,okText:"SEND",cancelText:"CANCEL",cancelEnabled:!0}},migrate_dialogContent:function(){return{heading:"Send a request?",type:"cta",message:this.manageDataMessages.GET_JSON,okText:"SEND",cancelText:"CANCEL",cancelEnabled:!0}},del_dialogContent:function(){return{heading:"Are you sure?",type:"cta",message:this.manageDataMessages.DELETE_ACCOUNT,okText:"DELETE YOUR ACCOUNT",cancelText:"DO NOT DELETE",cancelEnabled:!0}},InteruptorContent:function(){return{heading:this.interuptor_content.title,type:"cta",message:this.interuptor_content.message,okText:"OK",cancelEnabled:!1}},mobileOS:function(){var e=this.getMobileOperatingSystem();return-1<["android","ios"].indexOf(e)?e:"android"},screen:function(){return this.$route.params&&this.$route.params.screen||"intro"}},created:function(){this.$router.replace({path:"/data-privacy/intro"})},mounted:function(){try{window.history.replaceState({},location.href,location.href)}catch(e){console.log("Error in replacing history")}this.screen="intro",this.getconfig="fire",this.ajaxInProgress="get_config",this.loadOWComponent("sso-app-header","components/sso-app-header.695bbdae.js"),this.loadOWComponent("sso-notification-prefs","components/sso-notification-prefs.11979b79.js"),this.loadOWComponent("sso-delete-account","components/sso-delete-account.24d27135.js"),this.loadOWComponent("ow-dialog","ow-components/ow-dialog.1d6b98d4.js")},methods:{setState:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},getMobileOperatingSystem:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"ios":"unknown"},handleOptions:function(e){if(this.got_config)switch(e.currentTarget.id){case"notificationPrefs":this.screen="preferences",this.$router.push({path:"/data-privacy/preferences"}),this.trackingParams.response="success",this.trackingParams.reason=void 0,this.trackEvent({eventName:"notification_prefs_clicked",eventValue:this.trackingParams}),this.clearResponse();break;case"manageData":this.screen="manage-data",this.$router.push({path:"/data-privacy/manage-data"}),this.trackingParams.response="success",this.trackingParams.reason=void 0,this.trackEvent({eventName:"manage_data_clicked",eventValue:this.trackingParams}),this.clearResponse();break;case"request_data":this.requestData();break;case"migrate_data":this.migrateData();break;case"del_account":this.checkUserEmail()?this.trackingParams.response="failure":(this.screen="delete-acc",this.$router.push({path:"/data-privacy/delete-acc"}),this.trackingParams.response="success"),this.trackEvent({eventName:"delete_account_clicked",eventValue:this.trackingParams}),this.clearResponse()}else this.toast={show:!0,type:"warning",content:"Something went wrong. Try again."}},handleBack:function(){"intro"!==this.screen?("ios"===this.getOS()?("manage-data"!==this.screen&&"preferences"!==this.screen||this.$router.replace({path:"/data-privacy/intro"}),"delete-acc"===this.screen&&this.$router.replace({path:"/data-privacy/manage-data"})):this.$router.go(-1),this.req_dialogHidden=!0,this.migrate_dialogHidden=!0,"delete-acc"===this.screen?this.screen="manage-data":this.screen="intro"):window.location="back:selfServe"},checkUserEmail:function(){return this.user.emailPresent?!this.user.emailVerified&&(this.interuptor_content={title:"Email ID is not verified",message:"Please verify your email ID in your account settings to make a request. You can also write to dpo@olaride.uk"},this.interuptorHidden=!1,this.icon.url=this.icons.failure,this.trackingParams.reason=this.interuptor_content.title,!0):(this.interuptor_content={title:"No email ID has been linked",message:"Please visit account settings to add and verify your email ID. You can then make your request."},this.interuptorHidden=!1,this.icon.url=this.icons.failure,this.trackingParams.reason=this.interuptor_content.title,!0)},clearResponse:function(){this.trackingParams.response=void 0,this.trackingParams.reason=void 0},requestData:function(){this.checkUserEmail()?this.trackingParams.response="failure":(this.req_dialogHidden=!1,this.trackingParams.response="success"),this.trackEvent({eventName:"request_data_clicked",eventValue:this.trackingParams}),this.clearResponse()},migrateData:function(){this.checkUserEmail()?this.trackingParams.response="failure":(this.migrate_dialogHidden=!1,this.trackingParams.response="success"),this.trackEvent({eventName:"migrate_data_clicked",eventValue:this.trackingParams}),this.clearResponse()},migrate_handleCancel:function(){this.migrate_dialogHidden=!0},req_handleDialogCancel:function(){this.req_dialogHidden=!0},req_handleDialogOk:function(){this.ajaxInProgress="manage_data",this.requestTypeData.requestType="GET_HTML",this.startMD="fire",this.req_dialogHidden=!0},handleDialogDataOk:function(){this.dialogOkHidden=!0},del_handleOk:function(){this.requestTypeData.requestType="DELETE_ACCOUNT",this.startMD="fire",this.del_dialogHidden=!0,this.ajaxInProgress="manage_data",this.reverse_btns=!1},handleCancelDel:function(){"ios"===this.getOS()?this.$router.replace({path:"/data-privacy/manage-data"}):this.$router.go(-1),this.screen="manage-data"},handleDelAcc:function(){this.trackingParams.response="success",this.trackEvent({eventName:"delete_account_page_confirmed",eventValue:this.trackingParams}),this.clearResponse(),this.reverse_btns=!0,this.del_dialogHidden=!1},del_handleDialogCancel:function(){this.del_dialogHidden=!0,this.screen="manage-data"},interuptorOk:function(){this.delete_success?window.location="back:selfServe":(this.interuptor_content={},this.icon.url="",this.interuptorHidden=!0,this.requestTypeData.requestType=null)},migrate_handleOk:function(){this.ajaxInProgress="manage_data",this.requestTypeData.requestType="GET_JSON",this.startMD="fire",this.migrate_dialogHidden=!0,this.trackEvent({eventName:"migrate_data_popup_clicked",eventValue:this.trackingParams})},getSuccessCB:function(e){switch(console.log(e),this.data=e.response&&e.response.data,this.error=e.response&&e.response.error,this.ajaxInProgress){case"get_config":null!==this.data&&null===this.error?(this.getconfig="dormant",this.data=JSON.parse(JSON.stringify(this.data)),this.user.email=this.data.email,this.user.emailPresent=this.data.emailPresent,this.user.emailVerified=this.data.emailVerified,this.manageDataMessages=this.data.manageDataMessages,this.menuItems=this.data.menuItems,this.got_config=!0):"NOT_WHITELISTED"===this.error.code&&(this.block_view=!0,this.blockview_msg=this.error.message);break;case"manage_data":this.startMD="dormant",this.screen="manage-data",null!=this.data?(this.trackingParams.response="success",this.trackEvent({eventName:this.requestTypeData.requestType,eventValue:this.trackingParams}),this.clearResponse(),this.icon.url=this.icons.success,this.interuptor_content=this.data,"DELETE_ACCOUNT"===this.requestTypeData.requestType&&(this.mediaRef&&window.OlaJSNativeBridge&&window.OlaJSNativeBridge.removeAppEventListener(this.mediaRef),this.mediaRef=window.OlaJSNativeBridge&&window.OlaJSNativeBridge.addAppEventListener("social_media_notification_preference_change","",{tracking:!1}),this.delete_success=!0)):(this.trackingParams={response:this.error.message},"OLA_CREDIT"===this.error.code?(this.trackingParams.code=this.error.code,this.icon.url=this.icons.credit):(this.trackingParams={response:"failure"},this.trackingParams.message=this.error.message,this.icon.url=this.icons.failure),this.trackEvent({eventName:this.requestTypeData.requestType,eventValue:this.trackingParams}),this.clearResponse(),this.interuptor_content=this.error),this.interuptorHidden=!1}this.ajaxInProgress=null},getErrorCB:function(e){(this.ajaxInProgress=null)==e.response&&(this.block_view=!0,this.blockview_msg=e.xhr.response.message),this.error=e.response&&e.response.error},closeToast:function(){this.toast={show:!1,type:"",content:""}}}});
//# sourceMappingURL=../sourcemap/pages/data-privacy.d6846e78.js.map
