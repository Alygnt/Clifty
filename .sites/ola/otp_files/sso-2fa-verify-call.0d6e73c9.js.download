"use strict";Vue.component("sso-2fa-verify-call",{_scopeId:"data-v-58503798",owCSS:".fade-enter-active[data-v-58503798],.fade-leave-active[data-v-58503798]{transition:opacity 1s}.fade-enter[data-v-58503798],.fade-leave-to[data-v-58503798]{opacity:0}.intro[data-v-58503798]{text-align:center;position:absolute;top:0;left:0;bottom:0;right:0;overflow:auto;max-width:483px;margin:0 auto}.screen[data-v-58503798]{position:relative;top:45%;transform:translateY(-45%)}.img-wrapper[data-v-58503798]{position:relative;padding-bottom:32px;display:inline-block;vertical-align:middle;width:150px;height:150px}.cta-wrapper[data-v-58503798]{position:absolute;bottom:16px;width:100%}.content[data-v-58503798]{width:90%;margin:0 auto;padding-top:11px}.title[data-v-58503798]{font-size:20px;color:#242424;padding-bottom:8px}.info[data-v-58503798],.title[data-v-58503798]{font-weight:500;line-height:1.33;text-align:center}.info[data-v-58503798]{font-size:18px;letter-spacing:-.5px;color:#000}.call-wrapper[data-v-58503798]{display:inline-block;position:absolute;top:76px;left:71px;width:29px;height:29px;transform:rotate(0deg)}.call[data-v-58503798]{box-sizing:border-box;-moz-box-sizing:border-box;display:block;width:100%;height:100%;position:absolute;bottom:0;left:0;border-color:#6bb03b;border-style:solid;border-width:4px 4px 0 0;border-radius:0 100% 0 0;opacity:1;animation-duration:1.2s;-o-animation-duration:1.2s;-moz-animation-duration:1.2s;-webkit-animation-duration:1.2s;animation-iteration-count:infinite;-o-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite}.inner-circle[data-v-58503798]{height:13px;width:13px;animation-name:inner-circle}.circle[data-v-58503798]{width:21px;height:21px;animation-name:circle}.outer-circle[data-v-58503798]{animation-name:outer-circle}.tick[data-v-58503798]{opacity:0;transition:.5s ease-in-out;display:inline-block;position:absolute;top:65%;left:36%;transform:scale(0) translateY(-50%);transition-delay:.3s}.tick.show[data-v-58503798]{transform:scale(1) translateY(-50%);opacity:1}.verifying-call[data-v-58503798]{z-index:1}.verified-call[data-v-58503798],.verifying-call[data-v-58503798]{display:inline-block;position:absolute;top:50%;transform:translate(-50%,-50%)}.verifying-call.show[data-v-58503798]{transform:scale(1);opacity:1}.verified-call.show[data-v-58503798]{transform:scale(1) translate(-50%,-50%);opacity:1}@keyframes inner-circle{0%,22%{opacity:.4}23%{opacity:1}}@keyframes circle{0%,44%{opacity:.4}45%{opacity:1}}@keyframes outer-circle{0%,66%{opacity:.4}67%{opacity:1}}@media screen and (max-height:470px){.info[data-v-58503798]{font-size:12px}}@media screen and (min-width:500px){.intro[data-v-58503798]{position:relative;padding:25px;text-align:center;margin:8% auto 16px;width:372px;border-radius:4px;background-color:#fff;box-shadow:0 2px 4px 0 rgba(0,0,0,.1);min-height:265px}.screen[data-v-58503798]{top:auto;transform:none}}",render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"intro"},[t.ivrInfo&&"failed"!==t.ivrInfo.status?e("div",{staticClass:"screen"},[e("div",{staticClass:"img-wrapper"},[e("transition",{attrs:{name:"fade"}},[t.ivrInfo&&-1<["waiting","initiated","WAITING","INITIATED"].indexOf(t.ivrInfo.status)?e("div",{staticClass:"verifying-call"},[t.ivrInfo&&-1<["waiting","initiated","WAITING","INITIATED"].indexOf(t.ivrInfo.status)?e("img",{attrs:{src:"images/2fa/call.png",srcset:"images/2fa/call.png 1x, images/2fa/call@2x.png 2x, images/2fa/call@3x.png 3x",width:"150",height:"150"}}):t._e(),t._v(" "),e("div",{staticClass:"call-wrapper"},[e("div",{staticClass:"call outer-circle"}),t._v(" "),e("div",{staticClass:"call circle"}),t._v(" "),e("div",{staticClass:"call inner-circle"})])]):t._e()]),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.ivrInfo&&t.ivrInfo.status&&"success"===t.ivrInfo.status.toLowerCase()?e("div",{staticClass:"verified-call"},[e("img",{attrs:{src:"images/2fa/call-verified.png",srcset:"images/2fa/call-verified@2x.png 2x, images/2fa/call-verified@3x.png 3x",width:"150",height:"150"}}),t._v(" "),e("div",{staticClass:"tick",class:{show:t.ivrInfo&&"success"===t.ivrInfo.status.toLowerCase()}},[t.owRegistry["ow-icon"]?e("ow-icon",{attrs:{name:"2FA_TICK",width:"45",height:"45",opacity:"1"}}):t._e()],1)]):t._e()])],1),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"info"},[t._v(t._s(t.content.info))])])]):t._e(),t._v(" "),e("ow-ajax",{attrs:{trigger:t.checkIvrStatus,url:t.url,method:"POST",body:t.checkIvrStatusRequest},on:{success:t.getSuccessCB,error:t.getErrorCB}}),t._v(" "),t.owRegistry["ow-polling"]?e("ow-polling",{attrs:{active:t.pollingActive,id:"ivrStatusPoller",maxLimit:t.ivrWaitingInterval,async:""},on:{action:t.pollStatus,timeout:t.handlePollingTimeout}}):t._e()],1)},staticRenderFns:[],name:"sso2faVerifyCall",data:function(){return{content:{info:"Please attend the incoming call to confirm your identity â€¦"},checkIvrStatus:"dormant",pollInterval:1e3,isPolling:!1,pollingActive:!1,ivrWaitingInterval:window.owConfig.ivr.waitingInterval}},props:{iframe:Boolean,verificationId:String,captcha:Object,returnurl:String,partner:Boolean,mfaInfo:Object,ivrInfo:Object,trackingParams:Object,platform:String,app_version:String},computed:{url:function(){return this.partner?"/api/partner/mfa/ivr/status":"/api/mfa/ivr/status"},checkIvrStatusRequest:function(){return{mfaId:this.mfaInfo&&this.mfaInfo.mfaId,verificationId:this.verificationId,ssid:this.ivrInfo&&this.ivrInfo.ssid,platform:this.platform,app_version:this.app_version,captchaInfo:{fingerPrint:this.captcha.fingerPrint,storageId:this.captcha.storageId}}}},mounted:function(){this.startPolling()},methods:{startPolling:function(){this.isPolling||(this.pollingActive=!0,this.isPolling=!0)},stopPolling:function(){this.pollingActive=!1,this.isPolling=!1},pollStatus:function(){this.ivrInfo&&this.ivrInfo.status&&"success"!==this.ivrInfo.status.toLowerCase()&&(this.checkIvrStatus="fire",this.ajaxInProgress="check_ivr_status")},getSuccessCB:function(t){this.checkIvrStatus="dormant",this.ajaxInProgress=null,t.response.error&&t.response.error.status&&"failure"===t.response.error.status.toLowerCase()?(this.toast={show:!0,type:"warning",content:t.response.error.message,showTime:1e4},this.$emit("setstate",{screen:"login"}),this.$emit("showtoast",this.toast)):(this.$emit("setstate",{ivrInfo:t.response&&t.response.data}),t.response.data&&t.response.data.status?"success"===t.response.data.status.toLowerCase()&&(this.stopPolling(),this.redirectToNext(t)):t.response.error&&t.response.error.status&&-1<["failure","failed"].indexOf(t.response.error.status.toLowerCase())&&(this.toast={show:!0,type:"warning",content:window.owConfig.ivr.timeoutMessage,showTime:1e4},t.response.error.config&&"LOGIN"===t.response.error.config.nextAction&&this.$emit("setstate",{screen:"login"}),this.$emit("showtoast",this.toast),this.stopPolling()))},getErrorCB:function(t){this.checkIvrStatus="dormant",this.ajaxInProgress=null,t.response.error&&t.response.error.status&&-1<["failure","failed"].indexOf(t.response.error.status.toLowerCase())&&(this.toast={show:!0,type:"warning",content:t.response.error.message,showTime:1e4},this.$emit("setstate",{screen:"login"}),this.$emit("showtoast",this.toast))},redirectToNext:function(t){this.partner?this.$emit("setstate",{screen:"permission",partnerInfo:t.response.data.partnerInfo}):this.returnurl?this.returnurl&&-1<window.owConfig.domainList.indexOf(this.extractHostname(this.returnurl))?window.location.href=this.returnurl:this.toast={show:!0,type:"warning",content:"Invalid domain"}:this.iframe&&parent.postMessage(t.response&&t.response.data,"*")},handlePollingTimeout:function(){this.toast={show:!0,type:"warning",content:window.owConfig.ivr.timeoutMessage,showTime:1e4},this.$emit("setstate",{screen:"login"}),this.$emit("showtoast",this.toast)}}});
//# sourceMappingURL=../sourcemap/components/sso-2fa-verify-call.0d6e73c9.js.map
