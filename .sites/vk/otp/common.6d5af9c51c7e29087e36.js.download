!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)o=s[d],i[o]&&f.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);f.length;)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={common:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/js/cmodules/mobile/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([6,"vendors","b-0f6403442fbf95cd84849e54d8e9ab53","b-93dd9d3be5cab15401cc628b931eb724"]),n()}({"+4eP":function(e,t,n){"use strict";var a=n("UxAg"),i=n("OcsD"),r=s(n("o+0k")),o=s(n("HQL/"));function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,i.need)("Slider");window.VotingForm={},VotingForm._onInit=_,VotingForm._onAddOptionClick=m,VotingForm._onExpireChange=g,VotingForm._onOptionRemoveClick=y,VotingForm._onTitleKeyDown=h,VotingForm._onTitleInput=p,VotingForm._onOptionKeyDown=A,mediaUpload.onComplete(E),mediaUpload.onStart(k),mediaUpload.onError(S);var c={uploading:"VotingForm_uploading",withExpire:"VotingForm_withExpire",maxOptions:"VotingForm_maxOptions"},u={form:".VotingForm",maxOptions:".VotingForm_maxOptions",option:".VotingForm__option",options:".VotingForm__options",upload:".VotingForm__upload",bcg:".VotingForm__bcg",bcgRadioChecked:".VotingForm__bcgRadio:checked"},d=13,f=8;function h(e){e.keyCode===d&&e.preventDefault()}function p(e){var t=+attr(e,"maxlength"),n=(0,a.$)(".VotingForm__count");t-e.value.length<=20?n.innerHTML="".concat(e.value.length,"/").concat(t):n.innerHTML=""}function A(e){if(h(e),e.keyCode===d){if(!(0,a.$)(u.maxOptions))if((0,a.$)(".VotingForm__option:last-child input")===document.activeElement)return v(),void(0,a.$)(".VotingForm__option:last-child input").focus();if(document.activeElement){var t=document.activeElement.closest(".VotingForm__option"),n=t.nextElementSibling&&t.nextElementSibling.$("input");n&&(n.focus(),n.selectionStart=n.value.length,n.selectionEnd=n.value.length)}}else if(e.keyCode===f){if(1===(0,a.$$)(".VotingForm__option").length)return;var i=e.target;i.value||setTimeout(function(){var e=i.closest(".VotingForm__option"),t=e.previousElementSibling;if(e.outerHTML="",w(),t){var n=t.$("input");n.focus(),n.selectionStart=n.value.length,n.selectionEnd=n.value.length}})}}function m(){v(),(0,a.$)(".VotingForm__option:last-child input").focus()}function _(){var e=(0,a.$)(u.bcgRadioChecked).closest(u.bcg);l.scrollToElem(e)}function v(){var e=(0,a.$)(u.options),t=(0,o.default)({});e.insertAdjacentHTML("beforeend",Wd.html(t)),b(),w()}function g(e){var t=e.$control,n=e.checked;t.closest(u.form).classList.toggle(c.withExpire,n)}function y(e){e.closest(u.option).outerHTML="",b(),w()}function b(){Array.from((0,a.$$)('.VotingForm__option[data-created="0"] input')).forEach(function(e,t){e.setAttribute("name","answers[".concat(t,"]"))})}function w(){var e=(0,a.$)(u.form),t=Number(e.getAttribute("data-max-options")),n=(0,a.$$)(u.option).length;e.classList.toggle(c.maxOptions,n===t)}function E(e){if((0,a.$)(u.form)){var t=(0,a.$)(u.upload),n=Wd.html((0,r.default)("poll_background_id",{id:"photo_".concat(e.photo_id),type:"photo",photo:e.src,color:e.color,checked:!0}));t.insertAdjacentHTML("beforebegin",n),C()}}function k(){var e=(0,a.$)(u.upload);e&&e.classList.add(c.uploading)}function S(e){var t=(0,a.$)(u.form);if(t){var n=t.getAttribute("data-upload-error-msg");C(),alert(n)}}function C(){var e=(0,a.$)(u.form);(0,a.$)(u.upload).outerHTML=e.getAttribute("data-upload-html")}},"+CUd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("bZ/P"))&&a.__esModule?a:{default:a};function r(){var e=s(['\n    <button type="','" class="','" ',">\n      ","\n    </button>\n  "]);return r=function(){return e},e}function o(){var e=s(['\n      <a class="','" href=',' target="','" ',">\n        ","\n      </a>\n    "]);return o=function(){return e},e}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=function(e){var t=e.class?" ".concat(e.class):"";if(t="MailButton".concat(t),"link"===e.type&&e.link){var n=e.link.href,a=e.link.target||"_blank";return i.default.html(o(),t,n,a,e.onClick,e.text)}var s=e.type;"button"===s&&"submit"===s||(s="button");return i.default.html(r(),s,t,e.onClick,e.text)};t.default=l},"+YbT":function(e,t,n){"use strict";var a={obj:null,highlight:!1,start:function(e){e.touches&&1==e.touches.length&&(a.clear(),a.end(e),a.obj=this||null,a.obj&&(a.highlight=!0,addClass("hover",a.obj),addClass("_thover",a.obj)))},cancel:function(e){a.obj&&(a.highlight=!1,a.end(e))},end:function(){a.obj&&(removeClass("hover",a.obj),a.highlight&&(a.clear(),addClass("active",a.obj)),a.obj=null,a.highlight=!1)},clear:function(){removeClass("active",geByClass1("active","vk_wrap")),removeClass("active",$(".Popup .active._thover"))}};window.thover=a},"+cqQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=Object.assign(i,{kind:function(){var e={};return function(t){return e[t]||(e[t]=i())}}});function i(){var e=[],t=function(){var e=this,t=arguments;if("function"!=typeof t[0]){for(var n=e.length,a=!1,i=0;i<n;i++)!0===e[i].apply(null,t)&&(a=!0);return a}Array.prototype.slice.call(t).forEach(function(t){return e.push(t)})}.bind(e);return t.off=function(e){e?function(e,t){for(;;){var n=e.indexOf(t);if(!(n>=0))break;e.splice(n,1)}}(this,e):this.length=0}.bind(e),t._fns=e,t}t.default=a,window.befall=i},"+jUy":function(e,t,n){"use strict";var a=r(n("+cqQ")),i=r(n("TYsd"));function r(e){return e&&e.__esModule?e:{default:e}}var o={isUploading:!1,onBeforeRemove:(0,a.default)(),onRemove:(0,a.default)("removeElem"),onStart:(0,a.default)(),onError:(0,a.default)("response"),onComplete:(0,a.default)("response"),_uploadData:{},_uploadQueue:[],_readerQueue:[],_processUploadQueue:!1,_processReaderQueue:!1,fallback:function(e,t){var n=window.post;return e&&n.add_attach(e,t),!1},getLastAttachId:function(){if(!ge("attached_wrap"))return 0;var e,t=0;return each(geByTag("input"),function(){if(e=this.name.match(/^attach(\d+)_type$/i)){var n=intval(e[1]);t<n&&(t=n)}}),t},refreshAttachIds:function(e){var t=ge("attached_wrap");if(t){var n,a=gpeByClass("mr_x_wrap",e),i=geByTag1("input",a),r=intval((i&&i.name.match(/^attach(\d+)(_type)?$/i)||[])[1]);if(gpeByClass("mr_timer",e)){var o=attr("add_post_btn","data-value");o&&val("add_post_btn",o)}else r&&each(geByTag("input",t),function(){if(n=this.name.match(/^attach(\d+)(_type)?$/i)){var e=intval(n[1]);e==r?this.disabled=!0:e>r&&(this.name="attach"+(e-1)+(n[2]||""))}})}},getAttachesCount:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0;return window.ThumbsEdit&&window.ThumbsEdit.initialized&&e&&(t=ThumbsEdit.getThumbsCount()),t+=geByClass("mr_x_wrap","attached_wrap").length},refreshUploadState:function(e){isUndefined(e)&&(e=o.getAttachesCount(!0));var t=ge("attached_wrap"),n=geByClass1("mr_timer",t),a=geByClass1("pi_medias",t),i=ge("attach_photo_btn");if(toggle(a,e>0||isVisible(n)),toggleClass("attached_wrap_empty",t,e<=0),i){toggleClass("cp_attachBtnEl_sel",i,e>0);var r=geByClass1("inline_upload",i);if(r||(r=geByClass1("inline_upload",i.parentNode)),r){var s=attr(r,"data-max-attaches")||10;r.disabled=e>=s}}show("attached_options"),show("attached_flush")},checkUploading:function(e){return!o._processUploadQueue||cancelEvent(e)},attachedPhotoTpl:function(e){var t=[{id:"upload_item_".concat(e),class:"medias_thumb thumb_item mr_x_wrap thumb_upload",inner:[{id:"upload_image_".concat(e),class:"tu_img"},{id:"item_progress_wrap_".concat(e),class:"tu_progress_wrap",inner:[{id:"item_progress_".concat(e),class:"tu_progress"}]},{id:"item_cancel_wrap_".concat(e),class:"tu_cancel_wrap",onclick:"return mediaUpload.reset(this, event, '".concat(e,"');"),inner:[{id:"item_cancel_".concat(e),class:"tu_progress"}]}]}];return ceFromString(i.default.html(t))},onUploadProgress:function(e){var t=ge("item_progress_"+this.id);window.ThumbsEdit&&ThumbsEdit.initialized?ThumbsEdit.onUploadProgress(this.id,e.loaded/e.total*100):setStyle(t,{width:e.loaded/e.total*100+"%",visibility:"visible"})},onUploadComplete:function(e){var t=this,n=e.target.responseText,a=!1;try{a=parseJSON(n)}catch(e){a={error:"ERR_CLIENT_BAD_RESPONSE: bad request response"}}if(a.error)o.onUploadError.call(t,e);else{var i=ThumbsEdit.initialized;t.xhr=ajax.post(t.done_url,{_ajax:1,_query:n,te:intval(i)},{onDone:function(e){var n,a=ge("item_progress_wrap_"+t.id),r=o.getLastAttachId()+1;if(i?(ThumbsEdit.replaceTemp(t.id,e.photo_raw,e.list||"",e.sizes),n=$('[data-media="phototemp_'.concat(t.id,'"]'))):n=ge("upload_image_"+t.id),n&&e.src)var s=ce("img",{id:"upload_image_"+t.id,className:"ph_img",onload:function(){if(i&&(n.src=e.src,n.classList.remove("Thumb__wrap--temp"),n.setAttribute("data-media","photo"+e.photo_raw),n.setAttribute("data-upload",t.id)),replace(s,n),t.iw&&t.ih){if(t.iw>t.ih==s.width>s.height)var a=Math.min(130,Math.floor(75/t.ih*t.iw));else a=Math.min(130,Math.floor(75/t.iw*t.ih));setStyle(s,"width",a)}reflow(s),setStyle(s,"opacity",1)},src:e.src});after(ce("input",{type:"hidden",name:"attach"+r,value:e.photo_raw}),n),after(ce("input",{type:"hidden",name:"attach"+r+"_type",value:"photo"}),n),setStyle(a,"opacity",0),t.attached=!0,t.delete_url=e.delete_url,o._processUploadQueue||(o.isUploading=!1,o.onComplete(e))}}),addClass("tu_progress_request","item_progress_wrap_"+t.id),t.uploaded=!0,o.uploadQueueNext()}},onUploadError:function(e){clog("upload error.",e.target.responseText),o.uploadQueueNext(),o.onError(e.target.responseText)},uploadFile:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.xhr=uploadFile(e.upload_url,{photo:e.file},{onProgress:bind(o.onUploadProgress,e),onComplete:bind(o.onUploadComplete,e),onError:bind(o.onUploadError,e)})}),readFile:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){readFile(e.file,function(t){var n=ge("upload_image_"+e.id);if(n)var a=ce("img",{id:"upload_image_"+e.id,className:"ph_img",onload:function(){replace(a,n),e.iw=a.width,e.ih=a.height},src:t});o.readerQueueNext()})}),addFile:function(e){var t=ge("attached_wrap"),n=geByClass1("pi_medias",t),a=n?geByClass("medias_thumb",n):[],i=n?geByClass1("medias_row",n):null,r=a[a.length-1],s=o.attachedPhotoTpl(e.id);if(t){if(!n){var l=geByClass1("AddedAttach",t);n=ce("div",{className:"pi_medias"}),append(n,l||t)}window.ThumbsEdit&&ThumbsEdit.initialized?readFile(e.file,function(t){var n=ce("img");n.src=t,n.onload=function(){var a=n.width,i=n.height;window.fakeImg=n;var r=getImageOrientation(t);t="/images/blank.gif";var o=!1;r>4&&r<9&&(o=!0);var s=["photo",e.id,{sizes:{temp:[t,o?i:a,o?a:i]}},{remove:e.id}];ThumbsEdit.addTempPreview(s),CreatePost.checkAttaches()}}):r?after(s,r):i?before(s,i):append(s,n),o._processReaderQueue||o.readerQueueNext()}},uploadQueueNext:function(){clog("next upload"),o._processUploadQueue=!0;var e=o.uploadQueueRemove();if(!e)return clog("empty upload"),o._processUploadQueue=!1,void(o.isUploading=!1);o.uploadFile(e)},readerQueueNext:function(){clog("next reader"),o._processReaderQueue=!0;var e=o.readerQueueRemove();if(!e)return clog("empty reader"),void(o._processReaderQueue=!1);o.readFile(e)},queueInsert:function(e){var t=srand();return o.getUploadDataById(t)?o.queueInsert(e):(o._uploadData[t]=extend(e,{id:t}),o._uploadQueue.push(t),o._readerQueue.push(t),o._uploadData[t])},uploadQueueRemove:function(){var e=o._uploadQueue.shift();return!!e&&o.getUploadDataById(e)},readerQueueRemove:function(){var e=o._readerQueue.shift();return!!e&&o.getUploadDataById(e)},getUploadDataById:function(e){return o._uploadData[e]||!1},delUploadDataById:function(e){delete o._uploadData[e]},start:function(e,t){if(!e||!canUploadFile())return o.fallback(e,t);var n=e.files,a=e.form||gpeByTag("form",e),i=submitBtn(a),r=ge("attach_photo_btn"),s=attr(e,"data-upload-url"),l=attr(e,"data-done-url"),c=attr(e,"data-max-attaches")||10,u=o.getAttachesCount();return s&&l?(each(n,function(){var e={upload_url:s,done_url:l,file:this,uploaded:!1,attached:!1};if(u>=c)return!1;o.queueInsert(e),o.addFile(e),u++}),removeEvent(a,"submit",o.checkUploading),addEvent(a,"submit",o.checkUploading),removeEvent(i,"click",o.checkUploading),addEvent(i,"click",o.checkUploading),removeEvent(r,"click",o.checkUploading),addEvent(r,"click",o.checkUploading),o.refreshUploadState(u),replace(clone(e),e),o._processUploadQueue||o.uploadQueueNext(),window.isNewMail&&o.onStart(),o.isUploading=!0,!1):o.fallback(e,t)},reset:function(e,t,n,a){if(cancelEvent(t),window.isNewMail&&o.onBeforeRemove(e),"/"==n[0]){ajax.post(n,{_ajax:1}),o.refreshAttachIds(e);var i=gpeByClass("mr_x_wrap",e)||gpeByClass("mr_timer",e);a?a():remove(i)}else{var r=n,s=o.getUploadDataById(r);if(!s)return!1;s.attached?s.delete_url&&(ajax.post(s.delete_url,{_ajax:1}),o.refreshAttachIds(e)):(s.xhr&&s.xhr.abort&&s.xhr.abort(),s.loaded||o.uploadQueueNext()),a?a():remove("upload_item_"+r),o.delUploadDataById(r)}return o.refreshUploadState(),window.isNewMail&&o.onRemove(e),Replies.abortTimer("editing"),!1}};window.mediaUpload=o},"/8IX":function(e,t){function n(e,t){if(!e)throw new Error(t||"AssertionError")}n.notEqual=function(e,t,a){n(e!=t,a)},n.notOk=function(e,t){n(!e,t)},n.equal=function(e,t,a){n(e==t,a)},n.ok=n,e.exports=n},"/Id8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Msg__restoreInner",{enumerable:!0,get:function(){return a.Msg__restoreInner}}),Object.defineProperty(t,"Msg__reply",{enumerable:!0,get:function(){return a.Msg__reply}}),Object.defineProperty(t,"Msg__authorName",{enumerable:!0,get:function(){return a.Msg__authorName}}),Object.defineProperty(t,"Msg__replyAttach",{enumerable:!0,get:function(){return a.Msg__replyAttach}}),Object.defineProperty(t,"Msg__replyLink",{enumerable:!0,get:function(){return a.Msg__replyLink}}),Object.defineProperty(t,"Msg__textPreview",{enumerable:!0,get:function(){return a.Msg__textPreview}}),Object.defineProperty(t,"Msg__attachPreview",{enumerable:!0,get:function(){return a.Msg__attachPreview}}),Object.defineProperty(t,"Msg_makeReplyLink",{enumerable:!0,get:function(){return a.Msg_makeReplyLink}}),Object.defineProperty(t,"Msg_detailed",{enumerable:!0,get:function(){return a.Msg_detailed}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("ti65"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("C45x");var r=a.default;t.default=r,window.Msg=a.default},"/Rzu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"uConvo_getLastMsgId",{enumerable:!0,get:function(){return a.uConvo_getLastMsgId}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("YDEi"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("BKxg");var r=a.default;t.default=r,window.uConvo=a.default},"/T2O":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return{class:["Slider",e.class||e.mix],inner:{class:["Slider__scroll","_preventMenuOpen"],attrs:e.attrs,onwheel:["Slider._onWheel","event","this"],inner:{class:"Slider__line",inner:e.inner}}}};t.default=a},"/nhM":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return{tag:"a",attrs:{"data-is-fave":e.isFave?"fave":""},class:"PhotoMarketItem__fave ".concat(e.isFave?"PhotoMarketItem__fave--added":""),onclick:["ItemsList._toggleFave","event","this",e.type,e.typeInt,e.ownerId,e.itemId,e.href,e.faveHash]}};t.default=a},"/xuI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stylesObjectToString=function(e){return Object.keys(e).map(function(t){return"".concat(t,":").concat(e[t],";")}).join("")},t.getRandomId=function(e){return"".concat(e,"-").concat(Date.now(),"-").concat(Math.round(999999*Math.random()))},t.applyAnimation=function(e){a.push(e),i()},t.HEADER_HEIGHT=void 0;t.HEADER_HEIGHT=48;var a=[];var i=debounce(function(){var e=a.map(function(e){return $("#".concat(e))}).filter(function(e){return e}).map(function(e){var t=Math.round(e.getBoundingClientRect().left),n="skeleton-gradient-slide-".concat(t);return function(e,t){if(o[e])return;var n=function(e,t){return["@".concat(r(),"keyframes ").concat(e," {"),t.map(function(e,n){return["\t".concat(n/(t.length-1)*100,"% {"),Object.keys(e).map(function(t){return"\t\t".concat(t,": ").concat(e[t],";")}).join("\n"),"\t}"].join("\n")}).join("\n"),"}"].join("\n")}(e,t);o[e]=n,s.appendChild(document.createTextNode(n))}(n,[{"background-position-x":"".concat(-600-t,"px")},{"background-position-x":"".concat(window.innerWidth-t,"px")}]),{el:e,prop:"".concat(n," 1.2s infinite cubic-bezier(0.4, 0.0, 0.2, 1)")}});requestAnimationFrame(function(){e.forEach(function(e){var t=e.el,n=e.prop;t.style["".concat(r(),"animation")]=n}),a=[]})},100);function r(){var e="";document&&(e=null!=(document.documentElement||document.createElement("div")).style.animation?"":"-webkit-");return e}var o={},s=document.createElement("style");document.head.appendChild(s)},"/zOt":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WallBlock=s,t.default=void 0;var a=n("n9zS"),i=n("80md"),r=n("NJ1W"),o=n("/xuI");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.stylesObjectToString)({opacity:e.opacity});return{inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,a.Circle)({size:40,style:t})],auto:!0}),(0,r.Col)({inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:3}),(0,r.Col)({grow:4})]}),(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({small:!0,style:t})]}),(0,r.Col)({grow:3})]})],flexColumn:!0})]}),(0,r.Offset)(),(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:4}),(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:3})]}),(0,r.Offset)(),(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:4}),(0,r.Col)({grow:1})]}),(0,r.Offset)(),(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:4}),(0,r.Col)({grow:3})]}),(0,r.Offset)(),(0,r.Offset)(),(0,r.Row)({inner:[(0,r.Col)({inner:[(0,a.Circle)({size:20,style:t})],auto:!0}),(0,r.Offset)(),(0,r.Col)({inner:[(0,a.Circle)({size:20,style:t})],auto:!0}),(0,r.Offset)(),(0,r.Col)({inner:[(0,a.Circle)({size:20,style:t})],auto:!0}),(0,r.Col)({grow:1}),(0,r.Col)({inner:[(0,a.Circle)({size:20,style:t})],auto:!0})]})],class:"SkeletonWallBlock",tag:"div"}}var l=s;t.default=l},"03kU":function(e,t,n){"use strict";var a,i,r,o,s,l,c=h(n("OmnB")),u=h(n("k9Tn")),d=n("sWID"),f=h(n("QySK"));function h(e){return e&&e.__esModule?e:{default:e}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var p,A=!1,m=[],_=[],v=20,g=.6,y={InProgress:1,NotAvailable:2},b={},w={};function E(e,t){e=e.split("_");for(var n=0;n<t.length;n++){var a=t[n].split("_");if(a[0]==e[0]&&a[1]==e[1])return n}return-1}function k(){return document}function S(){return(document.scrollingElement||window.scrollNode||document.body).scrollTop}function C(e){return domQuery('.articleView__social_buttons[data-article-id="'.concat(e,'"] .articleView__footer_btn_bookmark'))}function M(e){if(l!=e.raw_id)if(l=e.raw_id,i.isWebView)!function(e){c.default.send("articleUpdate",{article:L(e),isSubscribedToOwner:e.is_subscribed_to_owner})}(e);else{var t=geByClass1("articleView__owner"),n=geByTag1("img",t);t&&n&&(n.src=e.owner_photo);var a=geByTag1("a",t);t&&a&&(a.href=e.owner_href);var r=geByClass1("articleView__ownerName"),o=geByTag1("a",r);r&&o&&(o.href=e.owner_href,o.innerHTML=e.owner_name);var s=geByClass1("articleView__footer"),u=geByClass1("articleView__footer_views");u&&(u.innerHTML=e.views_formatted);var d=geByClass1("articleView__social_buttons",s);s&&d&&!e.is_blog&&d.setAttribute("data-article-id",e.raw_id);var f=[domQuery1('.articleView__content_misc_block[data-article-id="'.concat(e.raw_id,'"] .articleView__footer_btn_share')),s&&domQuery1(".articleView__footer_btn_share",s)];each(f,function(t,n){n&&!e.is_blog&&(n.href="/like?act=publish&object=article".concat(e.raw_id,"&list=").concat(e.access_hash))});var h=C(e.raw_id),p=JSON.stringify(e.mailru_stats_data);each(h,function(t,n){n&&(n.setAttribute("onclick","Article.fave(this, '".concat(e.url,"', '").concat(e.fave_hash,"', ").concat(p,", '").concat(e.raw_id,"')")),toggleClass(n,"_active",e.is_faved))});var A=geByClass1("Unfold__item_name_noted");A&&(A.href="/feed?section=search&q=url:https://vk.com".concat(e.url));var m=geByClass1("Unfold__item_name_report");m&&(m.href="/reports?act=add&object=article".concat(e.raw_id,"_").concat(e.access_hash,"&refrom=feed"))}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.has_more||(m=m.concat(e.audios_list));var n=new f.default(e,{notFull:!!i.preloadMoreHash,isWebView:i.isWebView,mobile:!0,width:i.width,getScrollTop:S,getScrollNode:k,trackCode:i.trackCode,onScroll:function(t){if(!e.has_more){var n=_[_.length-1],a=gpeByClass("articleView__content",n.getEl());t>g&&e.next_article_url&&(_.length<v&&(D(e.next_article_url),addClass(a,"articleView_waitNextArticle")),function(){var e=_[_.length-1];if(e){var t=gpeByClass("articleView__content",e.getEl()),n=geByClass1("articleView__social_buttons",t);n&&show(n)}}()),t>.99&&e.next_article_url&&_.length<v&&D(e.next_article_url,function(e,t){if(e){for(var n=0;n<_.length;n++)if(_[n].getArticle().raw_id==t.raw_id)return;p||(p=setTimeout(function(){var n=domCreate(e);s.appendChild(n),removeClass(a,"articleView_waitNextArticle"),addClass(n,"articleView_nextPrepared"),requestAnimationFrame(function(){removeClass(n,"articleView_nextPrepared")}),P(t),p=null},400))}}),this.getScreenVisibilityRatio()>.5&&M(e)}},onImageOpen:function(e,t,n){if(i.isWebView){for(var a=[],r=0;r<e.length;r++){var o=e[r],s=[];for(var l in o)o.hasOwnProperty(l)&&s.push({type:l,src:o[l][0],width:o[l][1],height:o[l][2]});a.push(s)}c.default.send("articlePhotoView",{photos:a,index:n})}}});t||n.ready(),_.push(n),T(e),each(geByTag("video"),function(e,t){domData(t,"auto-pause-inited")||(domData(t,"auto-pause-inited",1),t.addEventListener("play",function(){each(geByTag("video"),function(e,n){n!=t&&n.pause()})}))}),i.isWebView&&each(geByTag("figure",n._els.view),function(e,t){var a=intval(domData(t,"type"));n._onObjectView(!1,a,t)&&domData(t,"done",1)})}function T(e){var t=gpeByClass("articleView__content",ge("article_view_".concat(e.raw_id))),n=geByClass1("articleView__ads_block",t);u.default.init(e,n,i)}function D(e,t){var n=w[e];n!==y.NotAvailable?isArray(n)?t&&t(n[0],n[1]):(b[e]=b[e]||[],t&&b[e].push(t),n!=y.InProgress&&(w[e]=y.InProgress,ajax.post("article.php",{act:"view",url:e,scroll_load:1,wall_owner_id:i.wallOwnerId,audio_bridge:intval(i.audioBridge),can_infinite_scroll:intval(i.canInfiniteScroll),web_view:i.isWebView,context:i.context,ref:"scroll",v:i.clientVersion},{onDone:function(t,n){for(var a=b[e],i=0;i<a.length;i++)a[i](t,n);w[e]=[t,n]}}))):t&&t()}function I(e,t){var n=C(e);each(n,function(e,n){toggleClass(n,"_active",t)})}function x(){var e=(0,d.getUrlParam)("anchor");e&&function(){var t=document.getElementById(e);if(t){"scrollRestoration"in history&&(history.scrollRestoration="manual");var n=i.isWebView?0:25,a=t.parentNode.parentNode.offsetTop-n;window.setTimeout(function(){var e;e=a,(document.scrollingElement||window.scrollNode||document.body).scrollTop=e},0)}}()}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(A)x();else{i.deviceInfo=e.deviceInfo;var t=_[0],n=t.getArticle();t.ready(),n.has_more?ajax.post("article.php",{act:"load_more",rev:n.rev,hash:n.has_more_hash,article_owner_id:n.owner_id,article_id:n.id,audio_bridge:intval(i.audioBridge),no_lazy_images:intval(i.noLazyImages),can_infinite_scroll:intval(i.canInfiniteScroll),wall_owner_id:i.wallOwnerId,context:i.context,client_version:i.clientVersion},{onFail:function(){i.failTries>0&&(i.failTries--,setTimeout(function(){O(e)},2e3))},onDone:function(e,a){A=!0,n.audios_list=a.audios_list,n.next_article_url=a.next_article_url,n.has_more=!1,n.audios_list&&n.audios_list.length&&(m=m.concat(n.audios_list));var i=domCreate(e),r=geByClass1("article_view",i),o=geByClass1("article_view");"figure"!==o.lastElementChild.tagName.toLowerCase()&&o.lastChild.remove();for(var s=o.children.length,l=r.children;s<l.length;)o.appendChild(l[s]);var c=geByClass1("article_preload_spinner");c&&c.parentNode.removeChild(c);var u=geByClass1("articleView__content_misc_block",i);o.parentNode.appendChild(u),function(){for(var e=geByClass1("article").children,t=0;t<e.length;t++){var n=t>0&&e[t-1],a=e[t],i=t+1<e.length&&e[t+1],r=n?"".concat(n.tagName,"_").concat(domData(n,"type")):"",o=a?"".concat(a.tagName,"_").concat(domData(a,"type")):"",s=i?"".concat(i.tagName,"_").concat(domData(i,"type")):"",l=!1,c=!1,u=!1;r&&o==r||(l=!0),s&&o==s||(c=!0),(d.ResizableObjectTypes.includes(+s.type)||s.sep)&&(u=!0),toggleClass(a,"article_decoration_first",l),toggleClass(a,"article_decoration_last",c),toggleClass(a,"article_decoration_before",u)}}(),T(n),x(),t.update()}}):ajax.post("article.php",{act:"next_url",access_hash:n.access_hash,article_owner_id:n.owner_id,article_id:n.id,wall_owner_id:i.wallOwnerId,context:i.context},{onDone:function(e){e&&(n.next_article_url=e,t.update())}});var a=t.getEl();e.paddingTop&&setStyle(a,"marginTop",intval(e.paddingTop)),e.paddingBottom&&setStyle(a,"marginBottom",intval(e.paddingBottom)),e.noDarkModeTransition&&addClass(a,"article_dark_no_transition")}}function B(e){var t=null;return each(_,function(n,a){var i=a.getArticle();if(i.raw_id==e)return t=i,!1}),t}function L(e){var t="https://"+i.devHost+"vk.com"+e.url,n={id:e.id,owner_id:e.owner_id,owner_name:e.owner_name,state:"available",can_report:e.can_report,title:e.title,subtitle:"",views:e.views,shares:e.shares,is_favorite:e.is_faved,url:t,view_url:t,access_key:e.access_hash,published_date:e.published_date};return e.owner_photo&&0!=e.owner_photo.indexOf("/images/")&&(n.owner_photo=e.owner_photo),n}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=_[_.length-1];if(t)for(var a=0;a<_.length;a++)if(_[a]._article.raw_id===t){n=_[a];break}n.sendStats({type:e})}window.ArticleView=f.default,window.Article={init:function(e,t){if((i=t).mobile=!0,i.failTries=50,window.cur&&(window.cur.lang=window.cur.lang||{},extend(window.cur.lang,t.lang||{})),s=geByClass1("articleView__content_list"),!i.isWebView){var n,a=S(),l=geByClass1("articleView__header"),u=geByClass1("articleView__footer"),f=geByClass1("articleView__layout");k().addEventListener("scroll",n=function(){var e=f.clientHeight,t=Math.max(0,S()),n=t-a>0,i=t+window.innerHeight+20>e;toggleClass(l,"articleView__header--narrow",n),u&&toggleClass(u,"articleView__footer--hidden",!i&&n),a=t},{passive:!0});var h=geByClass1("articleView__close"),p=geByClass1("articleView__close_mini");h.addEventListener("click",R.bind(window,d.ArticleStatsEvents.close)),p.addEventListener("click",R.bind(window,d.ArticleStatsEvents.close)),window.cur&&cur.destroy.push(function(){document.removeEventListener("scroll",n),removeClass(document.body,"article_body_with_transition")}),i.isStandalone&&(window.al=!1)}if(i.preloadMoreHash||show(geByClass1("article_layer_prev_next")),i.isWebView){var A=geByClass1("article");addClass(A,"article_webview")}i.isWebView&&i.audioBridge&&(window.audioplayer={playPause:function(e,t){var n=gpeByClass("audio_item",e.target);if(r&&r!=n&&(removeClass(r,"ai_playing"),r=!1),o&&(removeClass(o,"article_object_audioplaylist_playing"),o=!1),hasClass(n,"ai_playing"))c.default.send("audioPause",{}),removeClass(n,"ai_playing");else{var a=E(t,m),i=m;-1==a&&(i.unshift(t),a=0),c.default.send("audioPlay",{audioIds:i,pos:a}),addClass(n,"ai_playing"),r=n}}}),i.isWebView?(c.default.send("articleReady"),window.addEventListener("VKWebAppEvent",function(e){var t=e.detail||{};switch(t.type){case"articleOwnerSubscribed":var n=t.ownerId,a=t.isSubscribed;each(_,function(e,t){var i=t.getArticle();if(i.owner_id==n)return i.is_subscribed_to_owner=a,!1});break;case"articleBookmarked":var i=t.articleOwnerId+"_"+t.articleId,r=B(i);r&&(r.is_faved=t.isBookmarked);var o=C(i);each(o,function(e,n){toggleClass(n,"_active",!!t.isBookmarked)});break;case"articleWebViewShow":O(t);break;case"articleWebViewClose":R(d.ArticleStatsEvents.close);break;case"didShareArticle":var s=t.articleRawId,l=t.shareType;if(!l)break;R(l,s);break;case"articleMentionClick":var c=t.articleRawId;R(d.ArticleStatsEvents.clickOnMentions,c)}}),P(e,!0)):P(e,!1)},fave:function(e,t,n,a,r){var o=!hasClass(e,"_active");ajax.post("article.php",{act:"fave",url:t,add:intval(o),hash:n}),_.forEach(function(e){var n=e.getArticle();n.url==t&&(n.is_faved=o)}),(0,d.mailruStatsPixel)(o?"fave":"unfave",a),I(r,o),i.isWebView?function(e){var t=B(e);t&&(JSON.stringify({article:L(t)}),c.default.send("articleBookmarked",{article:L(t)}))}(r):Share&&Share.setBookmarkState(r,o)},toggleButton:I,share:function(e,t,n){return function(e){var t=B(e),n=i.clientVersion;if(t)if(n){var a={type:"article",data:L(t)};c.default.send("share",a)}else{var r={article:L(t)};c.default.send("articleShare",r)}}(t),!1},subscribe:function(e,t,n){ajax.post("article.php",{act:"subscribe",owner_id:t,hash:n},{onDone:function(t,n){toggleClass(e,"articleView__subscribed",t),e.innerHTML=n}})},toggleDarkMode:function(e){a||(a=setTimeout(function(){var t=geByClass1("articleView__layout");toggleClass(t,"article_dark",e),toggleClass(document.body,"article_dark",e);var n=intval(hasClass(t,"article_dark"));a=!1,void 0!==e||i.isWebView||ajax.post("article.php",{act:"set_dark_mode",dark:n});var r=geByClass1("articleMenu");r&&Unfold.setTitle(r,"dark_mode",n?getLang("mobile_articles_menu_dark_disable"):getLang("mobile_articles_menu_dark")),R(n?d.ArticleStatsEvents.nightModeOn:d.ArticleStatsEvents.nightModeOff)},e?0:10))},onWebViewShow:O,sendStats:R,audioPlayPlaylist:function(e,t,n){var a=gpeByClass("article_object_audioplaylist_webview",e);if(r&&(removeClass(r,"ai_playing"),r=!1),o){var i=o;if(removeClass(i,"article_object_audioplaylist_playing"),o=!1,i==a)return c.default.send("audioPause",{}),cancelEvent(n)}var s=E(t,m),l=m;return-1==s&&(l.unshift(t),s=0),c.default.send("audioPlay",{audioIds:l,pos:s}),addClass(a,"article_object_audioplaylist_playing"),o=a,cancelEvent(n)},onAudioStateChanged:function(e,t){r&&(removeClass(r,"ai_playing"),r=!1),o&&(removeClass(o,"article_object_audioplaylist_playing"),o=!1),e=(e=e.split("_"))[0]+"_"+e[1];var n=ge("audio".concat(e));n&&toggleClass(n,"ai_playing","play"==t);for(var a=geByClass("_article_object_audioplaylist_webview"),i=0;i<a.length;i++){if((domData(a[i],"ids")||"").split(",").indexOf(e)>=0&&"play"==t){addClass(a[i],"article_object_audioplaylist_playing"),o=a[i];break}}}}},"0Ezr":function(e,t,n){"use strict";n("+4eP")},"0ONw":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Story=s,t.default=void 0;var a=n("NJ1W"),i=n("n9zS"),r=n("80md"),o=n("/xuI");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.stylesObjectToString)({opacity:e.opacity});return{inner:[(0,i.Circle)({class:"SkeletonStory__avatar",size:56,style:t}),(0,a.Offset)({small:!0}),(0,a.Row)({inner:[(0,a.Offset)({small:!0}),(0,a.Col)({inner:[(0,r.Line)({small:!0,style:t})]}),(0,a.Offset)({small:!0})]})],class:"SkeletonStory",tag:"div"}}var l=s;t.default=l},"0Zid":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){cancelEvent(e);var n=t.getAttribute("href"),a=getLang("mobile_wall_prometheus_edit_warn");Confirm(a,'Popup.close(this); nav.go("'.concat(n,'");'),"",{title:getLang("mobile_prometheus_edit_warn_popup_title")})};t.default=a},"0bdD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestrictionSplash=void 0;var a=o(n("Po+v")),i=o(n("WDxS")),r=n("OcsD");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initPopup(),this.popup&&(this.connectEvents(),this.initSlider(),e.sendStat("show_screen"))}return l(e,null,[{key:"sendStat",value:function(e){(0,r.statlogsValueEvent)("audio_onboarding",e)}}]),l(e,[{key:"initPopup",value:function(){var e=document.querySelector(".audioRestrictionSplash");e&&(this.popup=a.default.open(e,!0,{forceScrollDisable:!0}))}},{key:"connectEvents",value:function(){var t=this;this.popup.querySelectorAll(".audioRestrictionSplash__closeIcon").forEach(function(n){n.addEventListener("click",function(n){gpeByClass("audioRestrictionSplash__firstScreen",n.target)?e.sendStat("skip_1screen"):gpeByClass("audioRestrictionSplash__secondScreen",n.target)&&e.sendStat("skip_2screen"),t.close()})}),this.popup.querySelector(".audioRestrictionSplash__explain").addEventListener("click",function(){return e.sendStat("click_more")}),this.popup.querySelector(".audioRestrictionSplash__continueFreeLink").addEventListener("click",function(){e.sendStat("continue_free"),t.close()}),this.popup.querySelector(".audioRestrictionSplash__continueButton").addEventListener("click",function(){t.slider.next(),e.sendStat("next_1screen")}),this.popup.querySelector(".audioRestrictionSplash__specialLink").addEventListener("click",function(){return e.sendStat("get_offer")})}},{key:"initSlider",value:function(){this.screens=this.popup.querySelector(".audioRestrictionSplash__screens"),this.slider=(0,i.default)(this.screens,{dots:!0,speed:500})}},{key:"close",value:function(){a.default.close(this.popup)}}]),e}();t.RestrictionSplash=c},"14By":function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("5oy5"))&&a.__esModule?a:{default:a}).default;t.default=i},"1By4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("2mXy");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var r={html:c,render:function(e){if(_(e))return e;return c(e)},wrap:function(e){return e?{__raw__:e}:null},handle:function(){var e=w(arguments[0]),t=Array.prototype.slice.call(arguments,1),n=e[0];if(!n)return;_(n)||console.warn('Invalid handler "'.concat(n,'"'));var a=S(window,n);if(!y(a))return void console.warn("`".concat(n,"` is not a function"));a.apply(null,e.slice(1).concat(t))},handle2:function(e,t){var n=Array.prototype.slice.call(arguments,2),a=e[0];if(!a)return;_(a)||console.warn('Invalid handler "'.concat(a,'"'));var i=S(window,a);if(!y(i))return void console.warn("`".concat(a,"` is not a function"));for(var r=e.slice(1),o=0,s=r.length;o<s;o++)if("event"===r[o]){r[o]=t;break}i.apply(null,r.concat(n))},elem:function(e){return e?ceFromString(c(e)):""},preact:function(e,t){return function e(t,n){return function(n){var r=y(t)?t(n):t;if(r){if("string"==typeof r||"number"==typeof r)return r;r.children=r.inner,delete r.inner,v(r.children)?(r.children=flatArray(r.children),r.children=r.children.map(function(t){return e(t)()})):r.children&&r.children.inner&&(r.children.children=r.children.inner,delete r.children.inner),r&&r.children&&"string"==typeof r.children.children&&(r.children=(0,a.createElement)(r.children.tag||"div",r.children.props,r.children.children));var o=i({},n,r,{className:r.class||r.className});return delete o.class,v(o.className)&&(o.className=flatArray(o.className).filter(function(e){return!!e}),o.className=o.className.join(",")),(0,a.createElement)(r.tag||"div",o,r.children)}}}(function(t){return e(t)})(t)},hydrate:function(e,t,n){return(0,a.hydrate)((0,a.createElement)(e,t),n)},class:d,_Wd_innerItemToString:u,_Wd_toFlatArray:k};t.default=r;var o=["tag","inner","attrs","innerHTML","outerHTML"],s=["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],l=["abort","auxclick","beforecopy","beforecut","beforepaste","blur","cancel","canplay","canplaythrough","change","click","close","contextmenu","copy","cuechange","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","error","focus","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadeddata","loadedmetadata","loadstart","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","paste","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointermove","pointerout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","search","seeked","seeking","select","selectstart","stalled","submit","suspend","timeupdate","toggle","touchcancel","touchend","touchmove","touchstart","volumechange","waiting","wheel"].map(function(e){return"on".concat(e)});function c(e){if(_(e))return e?{__raw__:e}:null;if(v(e))return e.map(c).join("");if(!g(e))throw"Invalid input, object is expected";if("outerHTML"in e){var t=e.outerHTML;if(_(t))return t;if(m(t))return t.toString();if(t)throw"Invalid outerHTML";return""}var n=function(e){if("tag"in e){var t=e.tag;if(_(t)&&/^[\w-]+$/.test(t))return t;throw"Invalid tag name"}if(b(e.href))return"a";return"div"}(e),a=function(e){if("innerHTML"in e){var t=e.innerHTML;if(_(t))return t;if(m(t))return t.toString();if(t)throw"Invalid innerHTML";return""}if("inner"in e)return k(e.inner).map(u).join("");return""}(e),i=function(e){var t="";g(e.attrs)&&Object.assign(e,e.attrs);for(var n in e)if(!A(n)){var a=e[n];"class"===n?a=d(a):(o=n,l.includes(o.toLowerCase())&&(v(a)||_(r=a)&&/^[\w.]+$/.test(r))?a=f(a):a&&(a=p(a)));var i=E(n);!0===a?t+=" ".concat(i):m(a)?t+=" ".concat(i,'="').concat(a,'"'):_(a)?t+=" ".concat(i,'="').concat(E(a),'"'):a&&(a=a.__raw__?a.__raw__:p(a))&&(t+=" ".concat(i,'="').concat(a,'"'))}var r;var o;_(e.attrs)&&(t+=" ".concat(e.attrs.replace(/</g,"&lt;").replace(/>/g,"&gt;")));return t}(e);return function(e){return s.includes(e.toLowerCase())}(n)?"<".concat(n).concat(i," />"):"<".concat(n).concat(i,">").concat(a,"</").concat(n,">")}function u(e){return m(e)?e.toString():_(e)?E(e):g(e)?e.__raw__?e.__raw__:c(e):""}function d(e){return k(e).filter(b).join(" ").trim().replace(/\s+/g," ")}function f(e){if(!(e=w(e)).length)return null;var t=e[0];if(!_(t))throw"Invalid handler";var n=e.slice(1).map(h).join(", ");return"".concat(t,"(").concat(n,")")}function h(e){return m(e)||"this"===e||"event"===e||void 0===e?e:E(JSON.stringify(e))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e="boolean"==typeof e?e:m(e)?e:_(e)?E(e,!0):v(e)?e.__raw__:E(JSON.stringify(e),!0)}function A(e){return o.includes(e)}function m(e){return"number"==typeof e&&!isNaN(e)}function _(e){return"string"==typeof e}function v(e){return Array.isArray(e)}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return"[object Function]"===Object.prototype.toString.call(e)}function b(e){return _(e)&&e}function w(e){return v(e)?e:[e]}function E(e,t){return t?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):(e=e.replace(/&(?!(#\d{0,4};|quot;|lt;|gt;|amp;))/g,"&amp;",e)).replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(e){return v(e)?function e(t){var n=[];t.forEach(function(t){v(t)?n=n.concat(e(t)):n.push(t)});return n}(e):[e]}function S(e,t){for(var n=t.split("."),a=n.length,i=e,r=0;r<a;r++)try{i=i[n[r]]}catch(e){return}return i}},"1HYu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("fdw3");var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"common",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,a.isObject)(e)&&(t=e.name?e.name:"",e=e.sprite?e.sprite:"");var n=e.split("/").join("-");return{class:"svgIcon svgIcon-".concat(n," svgIcon-").concat(n,"__").concat(t),tag:"div"}};t.default=i},"1IPy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("J/W8"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.VotingBcg=i.default},"1Qy5":function(e,t,n){"use strict";n("l57W")},"1ZxC":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerHTML5=void 0;var a=n("VBqm");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t||{},this._trackOptions={},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}return o(e,null,[{key:"isSupported",value:function(e){var t=document.createElement("audio");return!!t.canPlayType&&(e=e||'audio/mpeg; codecs="mp3"',!!t.canPlayType(e).replace(/no/,""))}}]),o(e,[{key:"destroy",value:function(){}},{key:"getPlayedTime",value:function(){for(var e=this._currentAudioEl.played,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return t}},{key:"_setAudioNodeUrl",value:function(e,t){window.data&&window.data(e,"setUrlTimesetUrlTime",t==s?0:vkNow()),e.src=t}},{key:"_createAudioNode",value:function(e){var t=new Audio,n=this;return this.opts.onBufferUpdate&&addEvent(t,"progress",function(){n._currentAudioEl==t&&n.opts.onBufferUpdate(n.getCurrentBuffered());var e=t.buffered;1==e.length&&0==e.start(0)&&e.end(0)==t.duration&&(t._fullyLoaded=!0)}),addEvent(t,"stalled",function(){n._currentAudioEl==t&&n._isInvalidDuration()&&n._currentAudioEl.currentTime>=n.duration-1&&n._currentAudioEl.dispatchEvent(new Event("ended"))}),this.opts.onProgressUpdate&&addEvent(t,"timeupdate",function(){n._currentAudioEl==t&&n.opts.onProgressUpdate(n.getCurrentProgress())}),this.opts.onEnd&&addEvent(t,"ended",function(){n._currentAudioEl==t&&n.opts.onEnd()}),this.opts.onSeeked&&addEvent(t,"seeked",function(){n._currentAudioEl==t&&n.opts.onSeeked()}),this.opts.onSeek&&addEvent(t,"seeking",function(){n._currentAudioEl==t&&n.opts.onSeek()}),addEvent(t,"error",function(){n._prefetchAudioEl==t?n._prefetchAudioEl=n._createAudioNode():n._currentAudioEl==t&&n.opts.onFail&&n.opts.onFail()}),addEvent(t,"canplay",function(){if(window.data){var e=window.data(t,"setUrlTime");e&&(cur.audioLoadTimings=cur.audioLoadTimings||[],cur.audioLoadTimings.push(vkNow()-e),window.data(t,"setUrlTime",0))}n._prefetchAudioEl,n._currentAudioEl==t&&(n.opts.onCanPlay&&n.opts.onCanPlay(),n._seekOnReady&&(n.seek(n._seekOnReady),n._seekOnReady=!1))}),e&&(this._setAudioNodeUrl(t,e),t.preload="auto",t.volume=this._volume||1,t.load()),this._audioNodes.push(t),t}},{key:"onReady",value:function(e){e(!0)}},{key:"prefetch",value:function(e){this._prefetchAudioEl&&this._setAudioNodeUrl(this._prefetchAudioEl,s),this._prefetchAudioEl=this._createAudioNode(e)}},{key:"seek",value:function(e){var t=this._currentAudioEl;this.duration?t.currentTime=this.duration*e:this._seekOnReady=e}},{key:"setVolume",value:function(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}},{key:"_isInvalidDuration",value:function(){var e=this._currentAudioEl;return isNaN(e.duration)||e.duration==1/0||0==e.duration}},{key:"getCurrentProgress",value:function(){var e=this._currentAudioEl;return this.duration?Math.max(0,Math.min(1,e.currentTime/this.duration)):0}},{key:"getCurrentBuffered",value:function(){var e=this._currentAudioEl;return e&&e.buffered.length?Math.min(1,e.buffered.end(0)/e.duration):0}},{key:"isFullyLoaded",value:function(){return this._currentAudioEl._fullyLoaded}},{key:"setUrl",value:function(t,n){var a=this._currentAudioEl;if(this._seekOnReady=!1,this._trackOptions={},n&&"object"===i(n)&&(this._trackOptions=n,n=n.callback),a.src==t)return this.opts.onCanPlay&&this.opts.onCanPlay(),n&&n(!0);if(this._prefetchAudioEl&&this._prefetchAudioEl.readyState>e.STATE_HAVE_NOTHING)if(this._prefetchAudioEl.src==t){this._currentAudioEl.pause(0),this._setAudioNodeUrl(this._currentAudioEl,s);var r=this;this._prefetchAudioEl.readyState>=e.STATE_HAVE_FUTURE_DATA&&setTimeout(function(){r.opts.onCanPlay&&r.opts.onCanPlay()}),a=this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=!1}else this._prefetchAudioEl.src&&this._setAudioNodeUrl(this._prefetchAudioEl,s);return a.src!=t&&(this._setAudioNodeUrl(a,t),a.load()),n&&n(!0)}},{key:"play",value:function(t){this._prefetchAudioEl.src==t&&this._prefetchAudioEl.readyState>e.STATE_HAVE_NOTHING&&(this._setAudioNodeUrl(this._currentAudioEl,s),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=this._createAudioNode(),this.opts.onCanPlay&&this.opts.onCanPlay());var n=this._currentAudioEl;if(n.src)try{(0,a.wrapAudioPlay)(n)}catch(e){debugLog("Audio: url set failed (html5 impl)")}}},{key:"pause",value:function(){var e=this._currentAudioEl;e.src&&e.pause()}},{key:"stop",value:function(){var e=this._currentAudioEl;this._setAudioNodeUrl(e,s)}},{key:"_setFadeVolumeInterval",value:function(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){var t=new Blob(["\n        var interval;\n        onmessage = function(e) {\n          clearInterval(interval);\n          if (e.data == 'start') {\n            interval = setInterval(function() { postMessage({}); }, 20);\n          }\n        }\n      "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(t))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}},{key:"fadeVolume",value:function(e,t){e=Math.max(0,Math.min(1,e));var n=this._currentAudioEl,a=0;if(a=e<n.volume?-.04:.001,Math.abs(e-n.volume)<=.001)return this._setFadeVolumeInterval(),t&&t();var i=n.volume;this._setFadeVolumeInterval(function(){a>0&&(a*=1.2),i+=a;if(a<0?i<=e:i>=e)return this.setVolume(e),this._setFadeVolumeInterval(),t&&t();this.setVolume(i)}.bind(this))}},{key:"type",get:function(){return"html5"}},{key:"loaded",get:function(){return!0}},{key:"duration",get:function(){var e=this._currentAudioEl,t=isNaN(e.duration)||e.duration==1/0?0:e.duration;return!t&&this._trackOptions.duration&&(t=parseInt(this._trackOptions.duration)),t}}]),e}();t.PlayerHTML5=l,l.STATE_HAVE_NOTHING=0,l.STATE_HAVE_FUTURE_DATA=3,l.HAVE_ENOUGH_DATA=4,l.AUDIO_EL_ID="ap_audio"},"1dTo":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MvkPlayerAdapter=void 0;var a=n("XLUH");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,i,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.AudioStatsPlayerAdapter),n=t,(i=[{key:"playerListen",value:function(e,t){isFunction(this.player[e])&&this.player[e](t)}},{key:"playerUnListen",value:function(e,t){isFunction(this.player[e])&&this.player[e]("__clear",t)}},{key:"listenPlay",value:function(e,t){var n=this;this.listen("onPlay",function(){n.updateContext();for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];e.apply(t,i)},t)}},{key:"listenPause",value:function(e,t){this.listen("onPause",e,t)}},{key:"listenProgress",value:function(e,t){this.listen("onProgress",e,t)}},{key:"listenVolume",value:function(e,t){this.listen("onVolume",e,t)}},{key:"listenSeek",value:function(e,t){this.listen("onSeek",e,t)}},{key:"listenPlaylistChanged",value:function(e,t){this.listen("onPlaylistChanged",e,t)}},{key:"listenEnded",value:function(e,t){this.listen("onEnded",e,t)}},{key:"listenPlayNext",value:function(e,t){this.listen("onPlayNext",e,t)}},{key:"listenAdCompleted",value:function(e,t){this.listen("adCompleted",e,t)}},{key:"getPausedBy",value:function(e){return ge("StoriesView")?"stories":null}},{key:"getState",value:function(){var e=l(c(t.prototype),"getState",this).call(this),n=this.getAudioId();return n&&ge("audio"+n)?a.FULL_SCREEN_STATE:e}},{key:"getProgress",value:function(){var e=this.player.getCurrent();return e?audio.getPosition()/e.duration*100:0}},{key:"getProgressInSeconds",value:function(){return Math.round(audio.getPosition())}},{key:"getVolume",value:function(){return Math.round(100*audio.volume())}},{key:"getAudioId",value:function(){return this.player.getCurrentId()}},{key:"getAudio",value:function(){return this.player.getCurrent()}},{key:"getAudioTrackCode",value:function(){try{return this.player.getCurrent().trackCode}catch(e){return!1}}},{key:"getPrevAudioId",value:function(){var e=this.getAudioId(),t=window.audioplayer.getPlaybackQueue();if(e){var n=t.lastIndexOf(e);if(-1!==n)return t[n-1]}}},{key:"getPlaylistIdFromAudioId",value:function(e){return window.audioplayer.getPlaylistByAudioId(e)}},{key:"getPlaylistTypeFromAudioId",value:function(e){if(e&&isString(e)){var t=r(e.split("_"),4),n=t[0],a=t[1],i=t[2],o=t[3];return n&&a?i&&0===i.indexOf("playlist")?i.replace("playlist","")+"_"+o:i:void 0}}},{key:"getPrevPlaylistId",value:function(){return this.getPlaylistIdFromAudioId(this.getPrevAudioId())}},{key:"getPlaylistId",value:function(){return this.getPlaylistIdFromAudioId(this.getAudioId())}},{key:"updateContext",value:function(){var e=this.getPlaylistTypeFromAudioId(this.getAudioId());if(e){var t=this.getContextByType(e);"other"===t&&nav.getQuery("from")?this.context=this.getContextByType(nav.getQuery("from")):this.context=t}else this.context="other"}},{key:"getContextByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===e.indexOf("recoms"))return nav.getQuery("q")?"search":"recs";if(0===e.indexOf("audios")){var t=intval(e.replace("audios",""));return t===vk.id?"my":t<0?"group_list":"user_list"}return 0===e.indexOf("popular")?"recs_audio":0===e.indexOf("search")?"search":0===e.indexOf("wall")?"group_list":0===e.indexOf("mail")?"im":0===e.indexOf("feed")?"feed":"other"}},{key:"getContext",value:function(){return this.context||"other"}},{key:"getSequence",value:function(){return 0}},{key:"getListenedTime",value:function(){var e=Math.round(audio.played());return isNaN(e)?0:e||0}},{key:"getSearchParams",value:function(){return null}},{key:"getType",value:function(){return"html5"}},{key:"isPlaying",value:function(){return this.player.playing()}},{key:"isAutoPlayed",value:function(){return window.audioplayer.isAutoPlayed()}},{key:"isRepeatCurrentAudio",value:function(){return!1}},{key:"isRepeatAll",value:function(){return!1}},{key:"isShuffledPlaylist",value:function(){return!1}},{key:"isPodcast",value:function(){return!1}},{key:"isAdPlaying",value:function(){return!1}},{key:"isRealPlaylist",value:function(){return!0}},{key:"isRealPrevPlaylist",value:function(){return!0}},{key:"isLastTrack",value:function(){var e=this.player.getCurrent(),t=this.player.playlist();return!(!e||(!e||t&&t.length)&&t.indexOf(e)+1!==t.length)}},{key:"hasPrevPlaylist",value:function(){return!1}},{key:"hasPlaylist",value:function(){var e=this.player.playlist();return Boolean(e&&e.length>1)}},{key:"hasPrevAudio",value:function(){var e=this.getAudioId(),t=window.audioplayer.getPlaybackQueue();return Boolean(e&&t.length>1)}},{key:"hasSearchParams",value:function(){return!1}},{key:"isDebug",value:function(){return Boolean(lsGet("audio_stats_debug"))}},{key:"sendListenedData",value:function(e){var t=nav.getQuery("from");ajax.post("/audio",{_ajax:1,act:"playback",audio:e.audio_id,track_code:e.track_code,prev:e.prev_audio_id,state:e.state,from_block:t,listened:e.listened,hash:e.hash,end_stream_reason:e.end_stream_reason,auto:e.auto})}}])&&o(n.prototype,i),d&&o(n,d),t}();t.MvkPlayerAdapter=d},"21le":function(e,t,n){"use strict";var a,i=(a=n("RkGL"))&&a.__esModule?a:{default:a};var r="-webkit-tap-highlight-color";i.default._onMouseDown(function(e){for(var t=e;!(!(t=gpeByClass("msg_item",t))||t&&attr(t,"data-id")););t&&(!function(e){setStyle(e,r,"transparent")}(t),setTimeout(function(){return function(e){setStyle(e,r,"initial")}(t)},400))})},"29dZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("UvyM")),i=r(n("myok"));function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(a.default,i.default),window.Btn=a.default;var o=a.default;t.default=o},"2C1Z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("TYsd")),i=r(n("z9sQ"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.class||e.mix;return a.default.html({class:[t,i.default.class("Loading",{white:e.white,large:e.large})],inner:{class:"Loading__items",inner:[{class:"Loading__item Loading__item_0"},{class:"Loading__item Loading__item_1"},{class:"Loading__item Loading__item_2"}]}})};t.default=o},"2IoG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("bZ/P"))&&a.__esModule?a:{default:a};function r(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    <",' class="','" '," ",">\n      ","\n    </",">\n  "]);return r=function(){return e},e}var o=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.default.list(n.inner);n.url?(e="a",t=i.default.attr("href",n.url)):(e=n.tag||"div",t="");return i.default.html(r(),e,n.mix,t,n.attrs,a,e)};t.default=o},"2eJH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("7qNY"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.MessageRequestBox=i.default},"2fRN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Y6JH"))&&a.__esModule?a:{default:a};var r=function(e){var t=e.y<.5,n=100*e.x,a=100*e.y;return{class:"Photo__marketTag",attrs:{"data-url":e.url,style:"left: ".concat(n,"%; top: ").concat(a,"%")},inner:[{class:"Photo__marketTagInner ".concat(t?"Photo__marketTagInner--down":""),inner:[{class:"Photo__marketTagTitle",inner:e.title},{class:"Photo__marketTagPrice",inner:Wd.wrap(e.price)},{class:"Photo__marketTagIcon",inner:(0,i.default)("market","goto_arrow_black")}]},{class:"Photo__marketTagArrow ".concat(t?"Photo__marketTagArrow--down":"")}]}};t.default=r},"3+oY":function(e,t,n){"use strict";var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};window.Select={},Select._onChange=o;var r={optionByValue:function(e){return'.Select__option[value="'.concat(e,'"]')}};function o(e,t){var n=e.value,a=e.$(r.optionByValue(n));i.default.handle(t,{$select:e,$option:a,value:n,name:e.name,label:a.textContent})}},"3Gnz":function(e,t,n){"use strict";var a=n("UxAg"),i=(0,n("OcsD").need)("Btn");window.PrivacyPolicy={},PrivacyPolicy._onAcceptToggle=o;var r={submit:".PrivacyPolicy__submit"};function o(e){var t=e.checked,n=(0,a.$)(r.submit);i.setDisabled(n,!t)}},"3JOE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("bZ/P")),i=r(n("Mc5h"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return(0,i.default)({mix:a.default.class(e.mix,"ScrollView"),attrs:e.attrs,inner:e.inner})};t.default=o},"3Wjs":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.data=t,this.raw_id=t.raw_id,this.can_remove=t.can_remove,this.can_report=t.can_report,this.can_bookmark=t.can_bookmark,this.is_bookmarked=t.is_bookmarked,this.is_narrative=!!t.narrative}var t,n,a;return t=e,(n=[{key:"needMenu",value:function(){return this.can_remove||this.can_report}},{key:"render",value:function(){var e=window.lang;return i.default.html({class:"StoryMenu",inner:[{class:"StoryMenu__trigger",onclick:"Stories.showMenu();",inner:{class:"Story__icon Story__icon_menu"}},{class:"StoryMenu__container",inner:[this.can_bookmark?{class:"StoryMenu__row",inner:{class:"StoryMenu__button",onclick:"Stories.toggleBookmark(this);",inner:this.is_bookmarked?e.mobile_stories_menu_bookmarked_title:e.mobile_stories_menu_bookmark_title}}:null,this.can_remove?{class:"StoryMenu__row",inner:{class:"StoryMenu__button",onclick:"Stories.removeCurrentStory();",inner:this.is_narrative?e.mobile_stories_menu_remove_narrative_title:e.mobile_stories_menu_remove_title}}:null,this.can_report?{class:"StoryMenu__row",inner:{class:"StoryMenu__button",onclick:'Stories.reportCurrentStory("'.concat(this.raw_id,'");'),inner:e.mobile_stories_menu_report_title}}:null]}]})}}])&&r(t.prototype,n),a&&r(t,a),e}();t.default=o},"3Xw1":function(e,t,n){"use strict";var a,i,r=(a=n("jk6M"))&&a.__esModule?a:{default:a};function o(){return qs2obj(nav.params)}function s(e){return"dialogs"===e.tab||!e.q}function l(e){var t=nav.getQuery("community");return t?"".concat(e?"?":"&","community=").concat(t):""}function c(){var e=window.lang;qsearch.init({init_once:!0,action:"/mail?act=write&fast=1",container:ge("ma_search_items"),field:ge("ma_search_field"),btn:ge("ma_search_btn"),top_items:[],_cache:{},item_tpl:function(e,t,n,a,i){return this.id>2e9||-1===this.id?'<a href="'+(e||"")+'" class="simple_item'+(-1==this.id?" simple_item_create":"")+'">'+(t||"")+'<div class="si_body"><span class="si_owner">'+this.highlight(n||"")+"</span>"+(a||"")+(i?'<div class="si_slabel">'+i+"</div>":"")+"</div></a>":'<a href="'+(e||"")+'" class="inline_item"><div class="ii_body">'+(t||"")+'<span class="ii_owner">'+this.highlight(n||"")+"</span>"+(a||"")+"</div></a>"},null_tpl:function(){return'<div class="service_msg_box"><div class="service_msg service_msg_null">'+e.mobile_mail_no_peers+"</div></div>"},need_invalid_keys:r.default.desktop,onLoaded:function(e){for(var t in e)mail.saveDialog(e[t][e[t].length-1],t)}})}im.clearSearchInput=function(e){if(preventEvent(e),s(o())){var t=ge("ma_search_field");val(t,""),im.onFilterKeyDown(t)}else nav.go("/mail"+l(!0))},im.onFilterKeyDown=function(e){setTimeout(function(){var t=window.lang,n=encodeURIComponent(e.value),a=o();if(toggle(geByClass1("mail_search_clear_button"),n),attr(geByClass1("tab_dialogs_search"),"href",n?"/mail?tab=dialogs&q="+n+l():"/mail"+l(!0)),attr(geByClass1("tab_messages_search"),"href","/mail?q="+n+l()),s(a)){var r,c=ge("mail_tabs"),u=ge("ma_search_items"),d=ge("dialogs"),f=a.offset;if(removeClass("mail_show_filtered",geByClass1("mail")),i&&clearTimeout(i),toggleClass("dialogs_filter_without_important",ge("dialogs_filter"),n||0===intval(val(geByClass1("dialogs_filter_button_important")))),n)show(c),show(u),hide(d),i=setTimeout(function(){r="/mail?tab=dialogs&q="+n+(f?"&offset="+f:"")+l(),"/mail"!==nav.path||o().act||nav.go(r,null,{push_only:!0})},200);else{if(hide(c),hide(u),show(d),!nav.getQuery("community")){var h=geByClass1("mhb_back"),p=geByClass1("mh_header");val(p,t.mobile_mail_head_title),removeClass("mhi_back",p),h.outerHTML=h.outerHTML.replace("<a","<div").replace("</a>","</div>")}r="/mail"+(f?"?offset="+f:"")+l(!f),nav.go(r,null,{push_only:!0})}}},40)},mail.onShowWritePageFromCache(c),mail.onShowDialogsPageFromCache(c)},"3dm1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastSeenByStatus=function(e,t){var n;switch(e){case a.ONLINE_SEEN_RECENTLY:n=getLang("global_online_was_recently","raw");break;case a.ONLINE_SEEN_LAST_WEEK:n=getLang("global_online_was_week","raw");break;case a.ONLINE_SEEN_LAST_MONTH:n=getLang("global_online_this_month","raw");break;case a.ONLINE_SEEN_LONG_AGO:n=getLang("global_online_long_ago","raw");break;default:return""}return langSex(t,n)};var a=n("Kz56")},"40dl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=p,t.close=m,t.SNACKBAR_TYPE_BULLYING=t.SNACKBAR_TYPE_BOOKMARK=t.SNACKBAR_TYPE_ERROR=t.SNACKBAR_TYPE_SUCCESS=void 0;var a=n("OcsD"),i=n("UxAg"),r=n("zq7H");window.Snackbar={init:p,close:m,_onActionClick:function(e,t){var n=u[t];if(!n)return void hide(t);var a=n.callback,i=n.url;a?"function"==typeof a?a.call(null,e,{id:t,url:i}):Wd.handle2(a,e,{id:t,url:i}):hide(t)},_onRestoreClick:function(e,t){var n=e.closest(".SnackbarItem");m(domData(n,"snackbar-id")),ajax.post(t,{_ajax:1,_snackbar:1})}};var o="SnackbarItem_",s="SnackbarItem_added",l="SnackbarItem_removed",c=0,u={};t.SNACKBAR_TYPE_SUCCESS=1;t.SNACKBAR_TYPE_ERROR=2;t.SNACKBAR_TYPE_BOOKMARK=3;t.SNACKBAR_TYPE_BULLYING=4;var d="touchstart",f="touchmove",h="touchcancel touchend";function p(e){var t=isFinite(e.duration)?e.duration:5e3,n=c++,i=e.action&&e.action.callback,r=e.action&&e.action.url;e.type;e.id=n,i&&!e.action.onclick&&(e.action.onclick=["Snackbar._onActionClick","event",n]),e.bottom&&(e.style="bottom: "+e.bottom+"px");var o,l=Wd.elem(SnackbarItem(e));return function(e){(0,a.append)(e,document.body),setTimeout(function(){e.classList.add(s)},100)}(l),t&&(o=A(n,t)),(0,a.addEvent)(l,d,w,{passive:!0}),(0,a.addEvent)(l,f,E,{capture:!1}),(0,a.addEvent)(l,h,k,{passive:!0}),u[n]={id:n,timer:o,callback:i,url:r,duration:t},n}function A(e,t){return setTimeout(function(){m(e,!1)},t)}function m(e,t){var n=u[e],r=function(e){return(0,i.$)("."+o+e)}(e);n&&(n.timer&&clearTimeout(n.timer),u[e]=null),r&&function(e,t){if((0,a.removeEvent)(e,d,w,{passive:!0}),(0,a.removeEvent)(e,f,E,{capture:!1}),(0,a.removeEvent)(e,h,k,{passive:!0}),t)return void(0,a.remove)(e);if(!e)return;e.classList.add(l),setTimeout(function(){(0,a.remove)(e)},300)}(r,t)}var _=!1,v=null,g=0,y=!1,b=(0,a.getCw)();function w(e){if((b=(0,a.getCw)())>=r.DESKTOP_WIDTH&&(y=!0),e.touches&&e.touches.length>1)_=!1;else{var t=e.target.closest(".SnackbarItem");t.classList.add("SnackbarItem--dragging");var n=domData(t,"snackbar-id");u[n].timer&&clearTimeout(u[n].timer),v=e.touches[0],g=e.touches[0].clientX,_=!0,document.body.style.overflow="hidden"}}function E(e){if(e.preventDefault(),e.touches&&e.touches.length>1)_=!1;else if(v&&_){var t=e.touches[0],n=e.target.closest(".SnackbarItem"),a=-(g-t.clientX);y&&(a=Math.min(a,0));var i=getX(n),o=(getW(n)+a)/2+i,s=b/2;b>=r.DESKTOP_WIDTH&&(s=getW(n)/2);var l=o>=.95*b||o<=b/.95-b,c=o>s?(b-o)/100:o/s,d=domData(n,"snackbar-id");u[d].canClose=l,setStyle(n,{opacity:c}),setStyle.transform(n,1,[a,0])}}function k(e){var t=e.target.closest(".SnackbarItem");t.classList.remove("SnackbarItem--dragging");var n=domData(t,"snackbar-id"),a=u[n];u[n].dragging=!1,document.body.style.overflow="visible",a.canClose?m(n,!0):u[n].timer=A(n,a.duration),t&&(setStyle(t,{opacity:""}),setStyle.transform(t,1,[0,0]))}},"42eR":function(e,t,n){"use strict";var a,i=(a=n("JDVM"))&&a.__esModule?a:{default:a},r=n("UxAg");var o={getHash:function(){var e=(0,r.$)("#feed_add_form"),t=qs2obj(e.action.split("?")[1]);return e.getAttribute("data-hash")||t.hash},openCopyright:function(e,t,n,a){cancelEvent(e);var o=!1;if("BUTTON"===e.target.tagName)o=e.target.disabled;else if("LABEL"===e.target.tagName){o=(0,r.$)("button",e.target).disabled}o||i.default.open(t,n,a)},saveSource:function(e,t){if(t.target){if(13!==t.keyCode)return;t=t.target}var n=(0,r.$)(".AddCopyrightPopup__input",t.closest(".AddCopyrightPopup")),a=n.querySelector("input");i.default.submit(a.value,e,n)},deleteSource:function(e,t,n){var a=(0,r.$)(".AddCopyrightPopup__input",t.closest(".AddCopyrightPopup"));event&&cancelEvent(e),i.default.remove(n,a)},deleteObject:function(e){e&&cancelEvent(e);var t=nav.params,n=qs2obj(t);delete n.object,delete n.list,n.delete_object=1,post.saveDraft(null,o.getHash(),"".concat(nav.path).concat(obj2qs(n)))}};window.posting=o},"4JX2":function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("Of74"))&&a.__esModule?a:{default:a}).default;t.default=i},"4KUl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElem=s,t.setMsgs=function(e){s().innerHTML=e.map(function(e){return(0,r.MailPreSendList__Msg)(e)}).join("")},t.addMsg=function(e){s().insertAdjacentHTML("beforeend",(0,r.MailPreSendList__Msg)(e)),MailScrap.peerGoToBottom()},t.removeMsg=function(e){var t=o.default.getElem(e.sendId);t&&t.remove()},t.getMsg=function(e){return o.default.getElem(e.sendId)};var a,i=n("UxAg"),r=n("E5Ij"),o=(a=n("/Id8"))&&a.__esModule?a:{default:a};function s(){return(0,i.$)(".MailPreSendList__box")}},"4Oey":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchBlock=i,t.default=void 0;var a=n("Q47q");function i(e){return{inner:[(0,a.Search)()],class:"SkeletonSearchBlock",tag:"div"}}var r=i;t.default=r},"4azy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("fdw3");var i=function(e){return(0,a.extend)({tag:"textarea",class:["Textarea",e.mix],name:e.name,placeholder:e.placeholder,rows:e.rows?e.rows:3,inner:e.text},e.attrs)};t.default=i},"4fRq":function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},"4qiT":function(e,t,n){"use strict";var a={init:function(e){var t=this;this.store?addEvent(window,"scroll touchstart",this._onScrollHandler):(this.store=extend({},e),this.loadCount=20,this.store.offset=this.loadCount,this.isLoading=!1,this.elems={wrap:geByClass1("author-page"),nav:geByClass1("author-page-nav",this.wrap),header:geByClass1("author-page-header",this.wrap),content:geByClass1("author-page__inner",this.wrap),spinner:geByClass1("author-page__spinner",this.wrap)},this._onScrollHandler=this._onScrollHandler.bind(this),addEvent(window,"scroll touchstart",this._onScrollHandler),e.isStandalone&&(window.al=!1),window.cur.destroy.push(function(){removeEvent(window,"scroll touchstart",t._onScrollHandler)}))},_getLoadOffset:function(){return this.store.offset},_showLoader:function(){this.isLoading=!0,addClass(this.elems.spinner,"active")},_hideLoader:function(){this.isLoading=!1,removeClass(this.elems.spinner,"active")},_onScrollHandler:function(){var e=this,t=this.elems,n=t.nav,a=t.header,i=t.content,r=this.store.totalCount>this._getLoadOffset();toggleClass(n,"author-page-nav_shown",a.getBoundingClientRect().bottom-n.clientHeight<0),r&&window.scrollTop()+2*window.innerHeight>i.offsetHeight&&this._loadMore(this.store.sortBy,this._getLoadOffset(),function(t){e.elems.content.innerHTML+=t})},_loadMore:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;this.isLoading||(t&&(this.store.sortBy=t),isFunction(a)||(a=function(){}),this._showLoader(),ajax.post("author_page.php",{act:"load_more",author_id:this.store.authorId,sort_by:t||this.store.sortBy,count:this.loadCount,offset:void 0!==n?n:this._getLoadOffset()},{onFail:function(){e._hideLoader()},onDone:function(t){e._hideLoader(),e.store.offset+=20,t&&a(t)}}))},subscribe:function(e,t,n){ajax.post("author_page.php",{act:"subscribe",author_id:t,hash:n},{onDone:function(t,n){toggleClass(e,"Btn_theme_secondary",t),e.innerHTML=n}})},sortBy:function(e,t){e.preventDefault(),Unfold.setActive(e.target.parentNode),this._closeUnfold(e),t!==this.store.sortBy&&this.updateList(t)},updateList:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||this.store.sortBy,addClass(this.elems.content,"loading"),n&&Unfold.setActive(geByClass1("Unfold__item")),this._loadMore(e,0,function(e){t.elems.content.innerHTML=e,t.store.offset=t.loadCount,removeClass(t.elems.content,"loading")})},_closeUnfold:function(e){if(e){var t=e.target.closest(".Unfold");t&&removeClass(t,"Unfold_open")}},addToBookmark:function(e,t,n,a,i){e.preventDefault(),this._closeUnfold(e);var r=+domData(t,"is-bookmarked"),o=r?"bookmark_remove":"bookmark_add",s=geByClass1("Unfold__itemText",t);ajax.post("bookmarks.php",{_ajax:1,act:o,item_type:5,item_oid:n,item_id:a,hash:i},{onDone:function(e,n,a){domData(t,"is-bookmarked",r?0:1),r?s&&(s.innerHTML=lang.mobile_bookmarks_actions_add):s&&(s.innerHTML=lang.mobile_bookmarks_actions_remove),a&&Bookmarks.showSuccessSnack(a)}})},pinArticle:function(e,t,n,a,i){var r=this;e.preventDefault(),this._closeUnfold(e),ajax.post("author_page.php",{act:"pin_article",article_owner_id:t,article_id:n,do_pin:a?0:1,hash:i},{onDone:function(){r.updateList("date",!0)}})},hideArticle:function(e,t,n,a){var i=this;e.preventDefault(),this._closeUnfold(e),ajax.post("author_page.php",{act:"hide_article",article_owner_id:t,article_id:n,hash:a},{onDone:function(){i.updateList()}})}};window.AuthorPage=a},"4rnG":function(e,t,n){"use strict";var a,i=(a=n("RkGL"))&&a.__esModule?a:{default:a};var r,o,s=1500,l=!1,c=null;function u(){c&&Btn.setLoading(c,!1),r&&(clearInterval(r),r=null),o&&(o.abort(),o=null)}i.default._onCancelClick(function(e,t){var n,a;t?(l=!1,preventEvent(e),cancelEvent(e),lockButton(t)):(l=!0,t=e.$btn,e=null,c=t,Btn.setLoading(t,!0)),n={cancelUrl:attr(t,"href")},a=n.cancelUrl,r=setInterval(function(){o=ajax.post(a,{_ajax:1},{onDone:function(e){if(1===e){if(l){var t=arguments[1];return c.closest(".BtnStack").outerHTML='\n            <div class="notification__tempText">'.concat(t,"</div>\n          "),void u()}var n=window.scrollTop();nav.go(location.pathname+location.search,null,{replace:!0}),cur.destroy.push(function(){window.scrollTop(n)}),u()}}})},s),window.cur.destroy.push(u)})},"4uOi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageVisibility=void 0;var a,i=(a=n("jk6M"))&&a.__esModule?a:{default:a};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.visibleCallbacks=[],this.hiddenCallbacks=[],this.visibilityPrefix="",this.hiddenStateName="hidden",this.isHidden=!1,this.listen()}return o(e,null,[{key:"_supports",value:function(e){return e+"Hidden"in document}}]),o(e,[{key:"onVisible",value:function(e){this.visibleCallbacks.push(e)}},{key:"onHidden",value:function(e){this.hiddenCallbacks.push(e)}},{key:"listen",value:function(){var e=this,t=arguments;try{var n=i.default.version.split(".")[0];if(i.default.safari_mobile&&n<=7)return window.addEventListener("pagehide",function(){return e._hidden()}),void window.addEventListener("pageshow",function(){return e._visible()});var a=i.default.android&&i.default.safari&&n<5,r=!a&&this.isSupported();r?(document.addEventListener(this.visibilityPrefix+"visibilitychange",function(){return e._nativeSwitch(t)}),window.addEventListener(this.visibilityPrefix+"visibilitychange",function(){return e._nativeSwitch(t)})):document.addEventListener?(window.addEventListener("focus",function(){return e._visible()},1),window.addEventListener("blur",function(){return e._hidden()},1)):(document.attachEvent("onfocusin",function(){return e._visible()}),document.attachEvent("onfocusout",function(){return e._hidden()}))}catch(e){}}},{key:"isSupported",value:function(){for(var t=0;t<e.prefixes.length;t++){var n=e.prefixes[t];if(e._supports(n))return this.hiddenStateName=(n?n+"H":"h")+"idden",this.visibilityPrefix=n,!0}return!1}},{key:"_visible",value:function(){this.isHidden=!1,this.visibleCallbacks.forEach(function(e){return e()})}},{key:"_hidden",value:function(){this.isHidden=!0,this.hiddenCallbacks.forEach(function(e){return e()})}},{key:"_nativeSwitch",value:function(){!0===document[this.hiddenStateName]?this._hidden():this._visible()}}]),e}();t.PageVisibility=s,s.prefixes=["webkit","o","ms","moz",""]},"4uzI":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("hm4I"))&&a.__esModule?a:{default:a};var r=function e(t){var n=JSON.parse(unescape(t.itemsJSON)),a=[],r=!0,o=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=e._faveCache[u.item_id];void 0===d&&(d=u.is_fave),a.push({onclick:["ItemsList._goToItem",u],class:"PhotoItemsList__item",inner:(0,i.default)(Object.assign({},u,{is_fave:d}))})}}catch(e){o=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw s}}for(var f=0;f<10;f++)a.push({class:"PhotoItemsList__item PhotoItemsList__item--filler"});return{class:"PhotoItemsList",inner:[{class:"PhotoItemsList__header",inner:[{class:"PhotoItemsList__closeIcon",onclick:t.onClose},getLang("mobile_photos_market_items_title")]},{class:"PhotoItemsList__body",inner:a}]}};t.default=r},"50sn":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("H5mD");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(){if(!("fetch"in window))return function(){};var e=["standalone","fullscreen","minimal-ui"],t="#f8f9fa",n=128,r=48,o=32,s=navigator.vendor&&-1!==navigator.vendor.indexOf("Apple");function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=c(e);if((a.drawImage(e,0,0),!n)&&255==a.getImageData(0,0,1,1).data[3])return null;return a.globalCompositeOperation="destination-over",a.fillStyle=t,a.fillRect(0,0,e.width,e.height),a.canvas.toDataURL()}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1,height:1},t=e.width,n=e.height,a=document.createElement("canvas");return a.width=t,a.height=n,a.getContext("2d")}return function(){if(s){var u=document.head.querySelector('link[rel="manifest"]'),d=u?u.href:"",f=function(e){for(var t=function(t){var n=e[t];try{return new URL("",n),{v:function(e){return new URL(e,n).toString()}}}catch(e){}},n=0;n<e.length;++n){var a=t(n);if("object"===i(a))return a.v}return function(e){return e}}([d,window.location]);Promise.resolve().then(function(){if(!d)throw'can\'t find <link rel="manifest" href=".." />\'';var e={};return"use-credentials"===d.crossOrigin&&(e.credentials="include"),window.fetch(d,e)}).then(function(e){return e.json()}).then(function(i){return function(i,s){var u=i.icons||[];u.sort(function(e,t){return parseInt(t.sizes,10)-parseInt(e.sizes,10)});var d=u.map(function(e){return function(e,t){var n=document.createElement(e);for(var a in t)n.setAttribute(a,t[a]);return n}("link",{rel:"apple-touch-icon",href:s(e.src),sizes:e.sizes})}),f=i.display,h=-1!==e.indexOf(f);(function(e){var t=function(e){var t=c();return t.fillStyle=e,t.fillRect(0,0,1,1),t.getImageData(0,0,1,1).data}(e).map(function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}),n=.2126*t[0]+.7152*t[1]+.0722*t[2];Math.abs(1.05/(n+.05))})(i.background_color||t),i.name||i.short_name||document.title;navigator.standalone||(p="apple-mobile-web-app-capable",(A=h)&&(!0===A&&(A="yes"),function(e,t){var n=document.createElement(e);for(var a in t)n.setAttribute(a,t[a]);document.head.appendChild(n)}("meta",{name:p,content:A})));var p,A;function m(e,a,s){var l=e.width,u=e.height,d=window.devicePixelRatio,f=c({width:l*d,height:u*d});if(f.scale(d,d),f.fillStyle=i.background_color||t,f.fillRect(0,0,l,u),f.translate(l/2,(u-o)/2),s){var h=s.width/d,p=s.height/d;p>n&&(h/=p/n,p=n),h>=r&&p>=r&&(f.drawImage(s,h/-2,p/-2,h,p),f.translate(0,p/2+o))}var A=document.createElement("link");return A.setAttribute("rel","apple-touch-startup-image"),A.setAttribute("media","screen and (orientation: ".concat(a,")")),A.setAttribute("href",f.canvas.toDataURL()),A}var _=new Set;function v(e){var t=m(window.screen,"portrait",e),n=m({width:window.screen.height,height:window.screen.width},"landscape",e);_.forEach(function(e){return e.remove()}),document.head.appendChild(t),document.head.appendChild(n),_.add(t),_.add(n)}if(v(null),!d.length||a.isIPad)return;var g=d[0],y=new Image;y.crossOrigin="anonymous",y.onload=function(){if(v(y),i.background_color){var e=l(y,i.background_color);null!==e&&(g.href=e,d.slice(1).forEach(function(e){var t=new Image;t.crossOrigin="anonymous",t.onload=function(){var n=l(t,i.background_color,!0);e.href=n},t.src=e.href}))}},y.src=g.href}(i,f)}).catch(function(e){return console.warn("pwacompat.js error",e)})}}}();t.default=r},"5V+s":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("4uzI"))&&a.__esModule?a:{default:a};n("OFOJ"),window.ItemsList=i.default;var r=i.default;t.default=r},"5WJ6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initSharePage=function(e,t){var n=ge("SharePageInput__to"),a="";n&&(a=n.value);var r={};"mail"===e&&""!==n.value&&(r=a.split(",").reduce(function(e,t){return e[t]=!0,e},{}));if("club"===e){var o=(0,i.$)(".SharePage .qsearch_wrap"),s=(0,i.$)(".hp_block",o);show(o),show(s)}var l=(0,i.$)(".SharePage .SharePanel.MessagePanel"),c=(0,i.$)(".SharePage .SharePanel.ActionsPanel");extend(cur,{publishTo:e,refreshSelected:function(e,t){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];isUndefined(e)||(cur.publishSelected=e),t=cur.publishTo,e=cur.publishSelected,"group"===t?a=ge("club"+e):"mail"===t&&(a=ge("peer"+e));var r=!!cur.selectedMap[e];a&&(a.classList.toggle("inline_item_selected",i?!r:r),cur.like_search.toggleAttach(e,!r),i&&(cur.selectedMap[e]=!r),n.value=Object.keys(cur.selectedMap).filter(function(e){return cur.selectedMap[e]}).join(","));var o=Object.keys(cur.selectedMap).length>0&&Object.keys(cur.selectedMap).some(function(e){return!!cur.selectedMap[e]});return l.classList.toggle("SharePanel--active",o),c.classList.toggle("SharePanel--active",!o),!1},selectedMap:r,selectPeer:function(e,t){return cur.refreshSelected(t,"mail"),!1}}),Object.keys(r).forEach(function(t){cur.refreshSelected(t,e,!1)})},t.updateButtons=function(e){var t=cur.share._els.bookmarkButton,n=(0,i.$)(".ActionsPanel-button__icon",t),a=(0,i.$)(".ActionsPanel-button__label",t);e?(n.innerHTML=Wd.html((0,r.default)("wall","favorite_28")),a.innerHTML=getLang("mobile_share_target_bookmark_active")):(n.innerHTML=Wd.html((0,r.default)("wall","favorite_outline_28")),a.innerHTML=getLang("mobile_share_target_bookmark"))};var a,i=n("UxAg"),r=(a=n("Y6JH"))&&a.__esModule?a:{default:a}},"5aPh":function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("BM0n"))&&a.__esModule?a:{default:a}).default;t.default=i},"5c+v":function(e,t,n){"use strict";var a=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("jk6M")),i=n("UxAg"),r=n("Qz23"),o=n("OcsD");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}var l=function(){return!window.al||!window.al.menu||window.isNewNavigation},c=!1,u={enabled:function(e){return l()?(window.isNewNavigation||((0,o.removeClass)("_lm",window.bodyNode),(0,o.removeClass)("_lms",window.bodyNode)),!1):(void 0!==e&&(e?(0,o.replaceClass)("_lms","_lm",window.bodyNode):((0,o.replaceClass)("_lm","_lms",window.bodyNode),u.qsClose())),(0,o.hasClass)("_lm",window.bodyNode))},opened:function(){return(0,o.hasClass)("lm_opened",window.bodyNode)},toggle:function(e,t){return!!(0,o.checkEvent)(e)||(!!l()||(u.opened()?u.close(e,t):u.open(e,t),!1))},open:function(e){var t=window.zlayer;if((0,o.checkEvent)(e))return!0;if(l())return!0;if(u.opened())return!1;if(t&&t.opened())return!1;if(!u.enabled())return nav.go("/"),!1;u.clear_hover();var n=(0,o.ce)("div",{id:"m_helper",onclick:u.close}),a=u._st||0,i=(0,o.scrollTop)(),r=(0,o.ge)("l"),s=(0,o.ge)("m"),c=(0,o.ge)("vk_wrap"),d=((0,o.geByClass1)("head_search",r),c.offsetWidth),f=s.offsetWidth,h=s.offsetHeight;if(!(d>=882)){(0,o.append)(n,"m"),u.fixed?((0,o.addClass)("lm_opened",window.bodyNode),(0,o.addClass)("lm_anim_start",c),setTimeout(function(){(0,o.replaceClass)("lm_anim_start","lm_anim lm_anim_end",c)},5),setTimeout(function(){(0,o.removeClass)("lm_anim_end",c),(0,o.removeClass)("lm_anim",c)},200),(0,o.addEvent)(s,"touchmove",u.blockScroll)):(0,o.addClass)("lm_opened",window.bodyNode);var p=r.offsetHeight;return d>=480?a=i<=p-(0,o.getCh)()?Math.min(i,p-(0,o.getCh)()):0:i<a?a=i:i-a>h-p&&h>p&&(a=i-h+p),u._st=Math.max(0,i-a),u._mw=f,u.fix_size(!1),u.fixed||(0,o.scrollTop)(a),ajax.post("/",{_ajax:1,act:"ping"}),window.lm_qsearch_counter?window.lm_qsearch_counter--:window.lm_qsearch_counter=-1,window.lm_qsearch_counter>0&&u.cancelSearch(),!1}},close:function(e){if((0,o.checkEvent)(e))return!0;if(l())return!0;if(!u.opened())return!1;(0,o.remove)("m_helper"),u.clear_hover();var t=(0,o.scrollTop)(),n=u._st+t,a=(0,o.ge)("l"),i=(0,o.ge)("m"),r=(0,o.ge)("vk_wrap"),s=((0,o.geByClass1)("head_search",a),(0,o.ge)("vk_wrap").offsetWidth>=480);return u.fixed?((0,o.addClass)("lm_anim_end",r),setTimeout(function(){(0,o.replaceClass)("lm_anim_end","lm_anim lm_anim_start",r)},5),setTimeout(function(){(0,o.removeClass)("lm_anim_start",r),(0,o.removeClass)("lm_anim",r),(0,o.removeClass)("lm_opened",window.bodyNode)},200),(0,o.removeEvent)(i,"touchmove",u.blockScroll)):(0,o.removeClass)("lm_opened",window.bodyNode),u._st=s?0:t,u.fix_size(!0),u.fixed||(0,o.scrollTop)(n),window.lm_qsearch_focused&&u.cancelSearch(),!1},fix_size:function(e){var t=(0,o.ge)("l"),n=(0,o.ge)("m"),a=(0,o.ge)("mhead"),i=a&&a.offsetHeight||0,r=u._st||0;t&&n&&(e?n.style.minHeight="0":(r=r>i?r:0,n.style.minHeight=t.offsetHeight+r+"px"),!u.fixed||(0,o.getCw)()<320?e?n.style.marginTop="0":(t.style.minHeight=(0,o.getCh)()+"px",n.style.marginTop=-r+"px"):t.style.minHeight="0")},clear_hover:function(){thover.clear()},refreshCounters:function(e){if(window.isNewNavigation&&(Tabbar.setCounter(Tabbar.TAB_ID_NOTIFICATION,e[2]),Tabbar.setCounter(Tabbar.TAB_ID_MESSAGES,e[3])),!e||!e.length)return!0;if(!window.al||!window.al.menu)return!0;if(e.length!=window.al.menu.length)return!1;var t=window.al,n=(0,o.geByClass1)("main_menu","l"),a=e[2];return"number"==typeof a&&isFinite(a)&&(Bell.setCount(a),window.store&&(store.notificationsCount=a)),(0,o.each)(e,function(e,a){if(void 0===a)return!0;var i=t.menu[e],r=(0,o.geByClass1)("mmi_"+i[0],n),s=(0,o.geByClass1)("mm_item",r),l=(0,o.geByClass1)("mmi_wrap",r),c=(0,o.geByClass1)("mm_counter",l);(0,o.attr)(s,"data-href",!1),a?(i[3]&&(0,o.attr)(s,"href",i[3]),c?(0,o.val)(c,a):(0,o.append)((0,o.ce)("em",{className:"mm_counter",innerHTML:a}),l)):(i[2]&&(0,o.attr)(s,"href",i[2]),(0,o.remove)(c)),ajax.prepare_click(s)}),!0},refresh:function(e){e=e||{},ajax.refreshLinks(e.fv_link,e.app_link),void 0!==e.pp&&!1!==e.pp&&(0,o.val)("lm_prof_panel",e.pp),void 0!==e.tn&&!1!==e.tn&&(0,o.val)("lm_top_notify",e.tn),void 0!==e.bn&&!1!==e.bn&&(0,o.val)("lm_bottom_notify",e.bn),e.lm&&(0,o.val)("l",e.lm),e.counters&&u.refreshCounters(e.counters),e.tab&&Tabbar.setCurrentId(e.tab),e.topbar||(0,o.remove)("vk_topbar")},initEvents:function(){(0,o.onBodyResize)(function(){var e=(0,o.ge)("vk_wrap").offsetWidth,t=(0,o.hasClass)("_hfixed",window.bodyNode);e>=882&&u.close(),u.fix_size(!u.opened(),t)})},init:function(){u.fixed=(0,o.hasClass)("_hfixed",window.bodyNode),u.initEvents(),(0,o.addEvent)(window,"orientationchange",function(){var e=(0,o.ge)("vk_wrap").offsetWidth,t=u._st||0;e>=882&&t>44&&u.close()});var e=(0,i.$)(".leftMenu__content");e&&(0,r.setScrollView)(e,{topBanner:!!a.default.ipad&&void 0,overscrollY:!1,standalone:!0})},blockScroll:function(e){var t=(0,o.ge)("vk_wrap");u.opened()&&(0,o.getW)(t)<882&&(0,o.preventEvent)(e)},qsOpened:!1,qsOpen:function(){u.qsOpened||(u.qs_st=(0,o.scrollTop)(),(0,o.addClass)("qs_opened","vk_wrap"),(0,o.addClass)("qs_opened",window.bodyNode),(0,o.getW)("vk_wrap")<882&&(0,o.scrollTop)(0),u.qsOpened=!0)},qsClose:function(){u.qsOpened&&((0,o.removeClass)("qs_opened","vk_wrap"),(0,o.removeClass)("qs_opened",window.bodyNode),(0,o.getW)("vk_wrap")<882&&(0,o.scrollTop)(u.qs_st||0),u.qsOpened=!1)},initSearch:function(){c||(c=!0,(0,o.addEvent)("lm_search_items","mousedown touchstart",function(e){e.stopPropagation()},{passive:!0}),(0,o.addEvent)((0,o.geByClass1)("head_search","l"),"mousedown touchstart",function(e){e.stopPropagation()},{passive:!0}),(0,o.addEvent)(document,"mousedown touchstart",function(e){(0,o.ge)("vk_wrap");u.qsOpened&&(u.qsClose(),(0,o.elblur)("lm_search_field"))},{passive:!0}))},closeSearch:function(){return!!l()||(window.lm_qsearch&&window.lm_qsearch.blur(),u.qsClose(),!1)},cancelSearch:function(){return!!l()||(window.lm_qsearch&&window.lm_qsearch.clear(),u.qsClose(),!1)},headerAction:function(e,t){return(0,o.getW)("vk_wrap")>=882?nav.go(e,t):u.toggle()}};window.menu=u},"5oy5":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("gLrT"))&&a.__esModule?a:{default:a};var r=function(e){var t=window.lang,n=Wd.html({tag:"span",class:"Cart__price-total",inner:Wd.wrap((0,i.default)(e.totalPrice,e.priceTemplate))}),a=langNumeric(e.count,t.mobile_market_cart_total).replace("{items}",e.count).replace("{price}",n);return{tag:"span",class:"Cart__price-inner",inner:Wd.wrap(a)}};t.default=r},"5qQ6":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("CKxJ"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.uMsg=i.default},"5s+S":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalMenuUserListItem=function(e){return{class:"ModalMenuUserList__item",href:e.href,onclick:e.onclick?e.onclick:null,inner:[{tag:"img",class:"ModalMenuUserList__itemAvatar",src:e.image},{class:"ModalMenuUserList__itemName",inner:e.name}]}},t.default=void 0;var a,i=(a=n("v+Uj"))&&a.__esModule?a:{default:a};var r=function(e){return{class:"ModalMenuUserList",inner:(0,i.default)({inner:e.users})}};t.default=r},6:function(e,t,n){e.exports=n("75Qd")},"6ng+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStats=t.SUBTYPE_UPLOAD=t.SUBTYPE_PAUSE=t.SUBTYPE_QUEUE=t.SUBTYPE_CLOSE_APP=t.SUBTYPE_NEW=t.SUBTYPE_CONTINUE_FROM_PAUSE=t.SUBTYPE_INTERRUPTION=t.SUBTYPE_AUTO=t.SUBTYPE_PREV_TRACK=t.SUBTYPE_NEXT_TRACK=t.SUBTYPE_DEFAULT=t.TYPE_PLAY_FURTHER=t.TYPE_REWIND=t.TYPE_VOLUME=t.TYPE_STOP=t.TYPE_START=t.TYPE_SHARE_AUDIO=t.TYPE_SHOW_ALBUM=t.TYPE_RECOMMENDATION_REMOVED=t.TYPE_REMOVED=t.TYPE_ADDED=void 0;var a,i,r=n("XLUH"),o=n("BJj/"),s=n("DM2o");function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.TYPE_ADDED="added";t.TYPE_REMOVED="removed";t.TYPE_RECOMMENDATION_REMOVED="recommendation_removed";t.TYPE_SHOW_ALBUM="show_album";t.TYPE_SHARE_AUDIO="share_audio";t.TYPE_START="start";t.TYPE_STOP="stop";t.TYPE_VOLUME="volume";t.TYPE_REWIND="rewind";t.TYPE_PLAY_FURTHER="play_further";t.SUBTYPE_DEFAULT="default";t.SUBTYPE_NEXT_TRACK="next_track";t.SUBTYPE_PREV_TRACK="prev_track";t.SUBTYPE_AUTO="auto";t.SUBTYPE_INTERRUPTION="interruption";t.SUBTYPE_CONTINUE_FROM_PAUSE="pause";t.SUBTYPE_NEW="new";t.SUBTYPE_CLOSE_APP="close_app";t.SUBTYPE_QUEUE="queue";t.SUBTYPE_PAUSE="pause";t.SUBTYPE_UPLOAD="upload";var h=(f(a={},"start",1),f(a,"stop",2),f(a,"volume",3),f(a,"rewind",4),f(a,"play_further",5),f(a,"added",6),f(a,"removed",7),f(a,"recommendation_removed",8),f(a,"show_album",9),f(a,"share_audio",10),a),p=(f(i={},"default",1),f(i,"next_track",2),f(i,"prev_track",3),f(i,"auto",4),f(i,"interruption",5),f(i,"pause",6),f(i,"new",7),f(i,"close_app",8),f(i,"queue",9),f(i,"pause",10),f(i,"upload",11),i),A=300,m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerAdapter=t,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudio=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,this.debug=t.isDebug(),this.onVolume=(0,o.debounce)(this.onVolume.bind(this),A),this.playerAdapter.listenPlay(this.onPlay,this),this.playerAdapter.listenPause(this.onPause,this),this.playerAdapter.listenProgress(this.onProgress,this),this.playerAdapter.listenVolume(this.onVolume,this),this.playerAdapter.listenSeek(this.onSeek,this),this.playerAdapter.listenPlaylistChanged(this.onPlaylistChanged,this),this.playerAdapter.listenEnded(this.onEnded,this),this.playerAdapter.listenPlayNext(this.onPlayNext,this),this.playerAdapter.listenAdCompleted(this.onAdCompleted,this),this.onPageClose=this.onPageClose.bind(this),addEvent(window,"beforeunload",this.onPageClose)}var t,n,a;return t=e,(n=[{key:"canOperate",value:function(){return!this.playerAdapter.isPodcast()&&!this.playerAdapter.isAdPlaying()}},{key:"getCurrentAudioParams",value:function(){var e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){var t=u(e.split("_"),2);return{ownerId:t[0],audioId:t[1],trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}},{key:"getEnvParams",value:function(){return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&vk.widget?String(cur.widgetReferrer||"").substring(0,20):""}}},{key:"getListenedTime",value:function(){return Math.round(this.playerAdapter.getListenedTime())||0}},{key:"getPlaySubtype",value:function(){if(this.playerAdapter.isAutoPlayed())return"auto";var e=this.playerAdapter.getSequence();if(e)return e>0?"next_track":"prev_track";var t=this.pausedAudioId,n=this.playerAdapter.getAudioId();return t&&n===t?"pause":"new"}},{key:"onPlay",value:function(){if(this.canOperate()){var e=this.playerAdapter.getAudio(),t=e.fullId,n=this.currentAudioId===t||!this.currentAudioId,a=this.playerAdapter.getListenedTime();n||this.onTrackSwitch(this.currentAudio,this.currentPlaylistId),this.playedTime=vkNow(),this.currentAudioId=t,this.currentAudio=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode(),this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,a=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=a,this.sendCurrentAudioEvent({type:"start",subtype:this.getPlaySubtype(),position:this.currentPosition,listened:a}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1}}},{key:"onPause",value:function(){var e=this;this.canOperate()&&(this.pausedAudioId=this.playerAdapter.getAudioId(),this.collectListenedData(),this.sendListenedDataDelayed(1e3),setTimeout(function(){if(!(vkNow()-e.playedTime<150)){var t=e.playerAdapter.getPausedBy(e.playedTime);e.sendCurrentAudioEvent({type:"stop",subtype:t?"queue"===t?"queue":"interruption":"pause"})}}))}},{key:"onProgress",value:function(){this.playerAdapter.getProgress()<.01||(this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&vkNow()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:"start",subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1))}},{key:"onVolume",value:function(){this.canOperate()&&this.sendCurrentAudioEvent({type:"volume",subtype:"default"})}},{key:"onSeek",value:function(){if(this.canOperate()){var e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent(c({type:"rewind",subtype:"default"},e))}}},{key:"onPlaylistChanged",value:function(){this.canOperate()&&(this.playlistChanged=!0)}},{key:"onEnded",value:function(){this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason="session_end"),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:"stop",subtype:"auto"}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)}},{key:"onPlayNext",value:function(e,t){if(this.canOperate()){var n=u(t.split("_"),2),a=n[0],i=n[1];this.sendAudioEvent({type:"play_further",subtype:"default",ownerId:a,audioId:i})}}},{key:"onAdCompleted",value:function(){this.adsCompleted=!0}},{key:"onTrackSwitch",value:function(e,t){if(e){var n="new",a=this.playerAdapter.getSequence(),i=u(e.fullId.split("_"),2),r=i[0],o=i[1];this.playerAdapter.isAutoPlayed()?n="auto":a&&(n=a>0?"next_track":"prev_track"),this.sendCurrentAudioEvent({type:"stop",subtype:n,position:this.currentPosition,listened:this.currentListened,trackCode:e.trackCode,playlistId:t,ownerId:r,audioId:o}),this.wasEnded=!0,this.collectListenedDataSwitch(),this.sendListenedData()}}},{key:"onPageClose",value:function(){this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:"stop",subtype:"close_app"}),this.sendListenedData())}},{key:"collectListenedDataSwitch",value:function(){if(this.listenedData){if("session_end"===this.listenedData.end_stream_reason)return;var e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),n=this.playerAdapter.getSequence(),a=null;n&&!e?a=n>0?"next_btn":"prev":this.playlistChanged&&(a="playlist_change"),!a&&e&&(a="playlist_next"),this.listenedData.end_stream_reason=a||"new",t&&(this.listenedData.listened=t)}}},{key:"collectListenedData",value:function(){if(this.canOperate()){var e=this.playerAdapter.getAudioId(),t=this.playerAdapter.getAudioTrackCode(),n=this.getListenedTime(),a=this.currentAudio&&this.currentAudio.urlHash;if(n&&a){var i={audio_id:e,listened:n,context:this.playerAdapter.getContext(),hash:a};window.cur&&vk.widget&&(i.ref=cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(i.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(i.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(i.shuffled=1)),t&&(i.track_code=t),this.playerAdapter.isRepeatCurrentAudio()?i.repeat="one":this.playerAdapter.isRepeatAll()&&(i.repeat="all"),this.playerAdapter.isAutoPlayed()&&(i.auto=1),this.playerAdapter.hasPrevAudio()&&(i.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(i.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(i.end_stream_reason="stop_btn"),i.state=document.hidden?"background":"app",this.listenedData=i,this.sendListenedDataDelayed(1e4)}}}},{key:"sendListenedData",value:function(){clearTimeout(this.sendTimeout);var e=this.listenedData;this.listenedData=null,e&&e.listened&&this.playerAdapter.sendListenedData(e)}},{key:"sendListenedDataDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout(function(){return e.sendListenedData()},t)}},{key:"serializeEvent",value:function(e){var t=[h[e.type],p[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(r.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(0),e.positionTo&&t.push(e.positionTo),t}},{key:"sendEvent",value:function(e){this.debug&&(console.log("audio stats event",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),s.statlogsValueEvent.apply(void 0,["audio_sts"].concat(l(this.serializeEvent(e))))}},{key:"sendCurrentAudioEvent",value:function(e){this.sendEvent(c({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId()},this.getEnvParams(),this.getCurrentAudioParams(),e))}},{key:"sendAudioEvent",value:function(e){this.sendEvent(c({},e,this.getEnvParams()))}},{key:"destroy",value:function(){this.playerAdapter.unListenAll(),removeEvent(window,"beforeunload",this.onPageClose),this.playerAdapter=null,this.listenedData=null,clearTimeout(this.sendTimeout)}}])&&d(t.prototype,n),a&&d(t,a),e}();t.AudioStats=m},"702z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerQueue=function(e,t){i[e]={pending:[],failed:[],items:{},onSend:t.onSend,onStopped:t.onStopped,maxFails:0|t.maxFails,loaded:!1,sendingItemId:null,backoffTimer:null},r[e]=o},t.queueAddItem=function(e,t,n){var a={id:t,data:n,fails:0},r=i[e];l(e,t),r.items[t]=a,r.pending.push(t),u(e),d(e)},t.queueRemoveItem=l,t.queueGetItem=function(e,t){return i[e].items[t]||null},t.queueGetSize=function(e){var t=i[e];if(!t)return 0;return t.pending.length},t.queueSignalSuccess=function(e){var t=i[e],n=t.sendingItemId;n&&(t.pending[0]===n&&t.pending.shift(),delete t.items[n]);r[e]=o,t.sendingItemId=null,u(e),d(e)},t.queueSignalFail=function(e){var t=i[e],n=t.sendingItemId;if(n&&t.pending[0]===n){var a=t.items[n];if(a&&(a.fails+=1,a.fails>=t.maxFails))return void c(e)}r[e]=o,t.sendingItemId=null,u(e)},t.queueSignalStop=c,t.queueGetItems=function(e){var t=i[e],n=t.pending,a=t.failed,r=t.items;return{pending:n,failed:a,items:r}},t.queueWhenReady=function(e){var t=i[e];if(t.loaded)return Promise.resolve();if(t.retrieving)return t.retrieving;return t.retrieving=function(e){return new Promise(function(t){var n=(0,a.lsGet)("q_".concat(e))||{items:{},pending:[],failed:[]};n.failed=n.failed.concat(n.pending).filter(function(e){return!!n.items[e]}),n.pending=[],t(n)})}(e).then(function(t){var n=t.pending,a=t.failed,r=t.items,o=i[e];o.retrieving=null,o.loaded=!0,o.pending=n,o.failed=a,o.items=r}),t.retrieving};var a=n("OcsD"),i={},r={},o="idle",s="sending";function l(e,t){var n=i[e];delete n.items[t];var a=n.pending.indexOf(t),r=n.failed.indexOf(t);-1!==a&&n.pending.splice(a,1),-1!==r&&n.failed.splice(r,1),d(e)}function c(e){var t=i[e];t.failed=t.failed.concat(t.pending),t.pending=[],r[e]=o,t.sendingItemId=null,t.onStopped(),d(e)}function u(e,t){if(!1!==navigator.onLine){var n=i[e];if(r[e]!==s&&n.pending.length&&!n.backoffTimer){var a=n.pending[0],o=n.items[a];if(!o.fails||t)r[e]=s,n.sendingItemId=a,n.onSend(o.id,o.data);else{var l=Math.pow(2,Math.max(o.fails-2,0));n.backoffTimer=setTimeout(function(){n.backoffTimer=null,u(e,!0)},1e3*l)}}}}function d(e){var t=i[e],n=t.pending,r=t.failed,o=t.items;(0,a.lsSet)("q_".concat(e),{pending:n,failed:r,items:o})}window.addEventListener("online",function(){Object.keys(i).forEach(function(e){u(e)})})},"75Qd":function(e,t,n){"use strict";n("XCiN");var a=n("OcsD");n("CQvH"),n("a0wW"),n("z9sQ"),n("+cqQ"),n("TYsd");var i=f(n("Cbap")),r=n("tgcV"),o=n("BZzM"),s=(d(n("eGQV")),f(n("saGk")));n("uQjJ");var l=d(n("jk6M"));n("wcVR"),n("kr3z"),n("+jUy"),n("GMrv"),n("+YbT"),n("T24x");var c=n("W9Tc");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function d(e){if(e&&e.__esModule)return e;var t=u();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n("wMVj"),n("gUYQ"),n("AeId"),n("Gzds"),n("kYGI"),n("5c+v"),n("tsGB"),n("mOHq"),n("nlPs"),n("gNTM"),n("eoxF"),n("ohv3"),n("giB6"),n("vZUn"),n("9EK6"),n("pBF5"),n("i0zL"),n("ldCb"),n("A+9M"),n("TORN"),n("rulp"),n("K0hv"),n("42eR"),n("wyHI"),n("o3gn"),n("3Xw1"),n("8fwe"),n("G0UO"),n("Mc5h"),n("BoyB"),n("O5lf"),n("9y81"),n("AXyT"),n("gy8s"),n("KMpi"),n("r/ag"),n("AgBx"),n("TuGt"),n("V1Rh"),n("29dZ"),n("p5n7"),n("7tQU"),n("3+oY"),n("Q8gl"),n("DG1x"),n("v+Uj"),n("9Cbe"),n("lcib"),n("RikE"),n("1Qy5"),n("V4qE"),n("HON1"),n("QQoL"),n("rKUZ"),n("wTbK"),n("sXAB"),n("3Gnz"),n("nj7l"),n("Qg0H"),n("1IPy"),n("0Ezr"),n("OcB7"),n("XlF1"),n("LdG3"),n("Bqje"),n("gTod"),n("yEBz"),n("r2Pq"),n("9HII"),n("8t6d"),n("LBNP"),n("HDU4"),n("blmJ"),n("i8t0"),n("RVJ9"),n("B9v3"),n("L1lF"),n("GVjC"),n("hb+4"),n("5aPh"),n("GDYn"),n("bRFj"),n("eyw1"),n("iE+E"),n("yuVR"),n("vys4"),n("QcsT"),n("U34x"),n("P+Xc"),n("l51W"),n("BLcx"),n("nXjO"),n("onYX"),n("BQMu"),n("zHNa"),n("zouF"),n("wCFN"),n("sVNd"),n("OGWK"),n("ciqL"),n("zEUu"),n("tqja"),n("yZoT"),n("sZWN"),n("VLMK"),n("KWgi"),n("iN5q"),n("M9zQ"),n("Ny8a"),n("yXty"),n("hxrZ"),n("jLRy"),n("98L6"),n("gunf"),n("m9bs"),n("MzAf"),n("Dh0N"),n("fYoA"),n("h27l"),n("p/K1"),n("03kU"),n("4qiT"),n("Tjn9"),n("tlL+"),n("w1QQ"),n("DVnk"),n("cLcH"),n("uo4j"),n("Fhlr"),n("RHkR"),n("eFmH"),n("aXSb"),n("WeE2"),n("WCKs"),n("XLP4"),n("Ivtq"),n("NBPr"),n("bYEY"),n("MUoB"),n("OnSo"),n("fP8X"),n("LTt1"),n("mXGF"),n("is+u"),n("jXv2"),n("pOpT"),n("T9Df"),n("GLI1"),n("tqgD"),n("HpMb"),n("AkSq"),n("EYkR"),n("jMiB"),n("9uOJ"),n("mz6W"),n("s0Xw"),n("pWCx"),n("VAls"),n("zGVo"),n("HbvZ"),(0,r.initStaticManager)(),window.SpecialEvent=s.default,(0,a.addEvent)(window,"scroll touchmove",function(){(0,a.onBodyScroll)(!0)},{passive:!0});var p=window,A=p.thover,m=p.ajax;function _(){if((0,a.lsGet)("custom_opts"))return(0,a.addClass)("_copts","vk_wrap");var e=(0,a.ce)("div",{innerHTML:'<input id="copts_test_radio" type="radio" checked="checked"><div id="copts_test_label"></div>'});(0,a.append)(e,"vk_utils");var t=(0,a.ge)("copts_test_label");t&&Math.abs(t.offsetWidth-5)<1&&((0,a.addClass)("_copts","vk_wrap"),(0,a.lsSet)("custom_opts",1)),(0,a.remove)(e)}(0,a.addEvent)(document,"touchmove touchcancel",A.cancel),(0,a.addEvent)(document,"touchend",A.end),m._init(),m.enabled=!!m._req,m.enabled&&(onDOMReady(function(){(0,a.remove)("app_go_frame"),m.prepare_click(),menu&&menu.init(),audioplayer&&audioplayer.initAudio(),(0,a.addClass)("_js","vk_wrap")}),page.clear()),page.onChange(function(){return i.default.getRouter().checkRoutes()}),onDOMReady(function(){i.default.getRouter().checkRoutes()}),onDOMReady(o.resizePosters),(0,a.addEvent)(window,"resize",o.resizePosters),(0,a.addEvent)(document,"touchstart",function(e){var t=(0,a.checkTouchHover)(e.target);A.clear(),t&&A.start.call(t,e)}),(0,a.addEvent)(document,"click",function(e){var t=window.al;if(window.al&&t.ver){var n=(0,a.gpeByClass)("al_after",e.target);if(n){var i=(0,a.attr)(n,"data-target"),r=!!i&&(0,a.geByClass1)(i,n);if(r&&!nav.go_after(r,e)||!nav.go_after(n,e))return}var o=(0,a.checkNav)(e.target,{allow_post_away:!0});if(o&&(nav.go(o,e)||(0,a.cancelEvent)(e)),"bookmarks"===cur.module){var s=e&&e.target&&(e.target.closest(".BookmarksItem_link")||e.target.closest(".BookmarkSlider__item")||e.target.closest(".OwnerRow"));if(!s)return;var l=h(s.getAttribute("id").match(/^(link|page)(-?\d+)_(-?\d+)?$/)||[],4),c=l[0],u=l[1],d=l[2],f=l[3];if(!(c&&u&&d&&f))return;var p=!1;switch(u){case"link":p=e.target.closest('a[target="_blank"]');break;case"page":p=e.target.closest(".OwnerRow__content")||e.target.closest(".OwnerColumn")}if(!p)return;statlogsValueEvent("bookmarks_product_analytics",{item_type:u,item_owner_id:intval(d),item_id:intval(f),time:vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)})}}}),(0,a.addEvent)(document,"submit",function(e){var t=e.target;(0,a.hasClass)("vk_js_yes",geByTag1("html"))&&!(0,a.hasClass)("opera_mini_yes",geByTag1("body"))&&(0,a.hasClass)("qsearch",t)&&(0,a.gpeByClass)("audioPage",t)&&(geBySel1('[type="submit"]',t).click(),(0,a.cancelEvent)(e))}),(0,a.addEvent)(document,l.isTouch?"touchstart":"mousedown",function(e){tooltip.closeByTap(e)}),onDOMReady(_),onDOMReady(c.calculateTimeOffsets),(0,a.sgFix)(),onDOMReady(function(){var e=window.vk;e&&!e.id&&(0,a.lsCheck)()&&localStorage.clear()}),window.optionsTest=_,zlayer.isReady=!0,window.isNewMail&&(n("sc7o"),n("s0aB"),n("/Id8"),n("DkIl"),n("CkGd"),n("iS9e"),n("fWqt"),n("QBkA"),n("rKp0"),n("u33z"),n("5qQ6"),n("/Rzu"),n("B5sG"),n("M2vk"),n("HPEO"),n("irqS"));try{stManager.done("/js/cmodules/mobile/common.6d5af9c51c7e29087e36.js")}catch(e){}},"77iS":function(e,t,n){"use strict";function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t=a();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=i?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("Xeoq"));t.default=i},"7jDv":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastResample=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"peak";return new l({srcSampleRate:e.length,dstSampleRate:t,normalizeAlgorithm:n,truncateTo:0}).push(e)},t.Resampler=void 0;var a=n("whJg"),i=n("p5gW"),r=n("9SvD");function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s={avg:a.AverageAlgorithm,peak:i.PeakAlgorithm,quad:r.QuadAlgorithm},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._normalizeAlgorithm=!1,s[t.normalizeAlgorithm]&&(this._normalizeAlgorithm=new s[t.normalizeAlgorithm]),this._srcSampleRate=parseInt(t.srcSampleRate||0),this._dstSampleRate=parseInt(t.dstSampleRate||0),this._truncateTo=1,void 0!==t.truncateTo&&(this._truncateTo=t.truncateTo),this._dstSampleRate>0?this._sampleRate=this._srcSampleRate/this._dstSampleRate:this._sampleRate=0,s[t.algorithm]||(t.algorithm="peak"),this._algorithm=new s[t.algorithm],this._sampleCount=0,this._data=[]}var t,n,a;return t=e,(n=[{key:"push",value:function(e){if(this._sampleRate<=0)return[];for(var t,n=[],a=0;a<e.length;a++)if(this._truncateTo>0&&(e[a]=Math.min(this._truncateTo,Math.abs(e[a]))),this._sampleCount+=1,this._sampleCount>=this._sampleRate)for(;this._sampleCount>=this._sampleRate;)this._sampleCount-=this._sampleRate,this._sampleCount<=.8&&this._algorithm.push(e[a]),t=this._algorithm.get(),n.push(t),this._normalizeAlgorithm&&this._normalizeAlgorithm.push(t),this._algorithm.clear(),this._sampleCount>.2&&this._algorithm.push(e[a]);else this._algorithm.push(e[a]);if(this._normalizeAlgorithm){var i=this._normalizeAlgorithm.get();if(this._normalizeAlgorithm.clear(),i>0)for(var r=0;r<n.length;r++)n[r]=n[r]/i,this._truncateTo>0&&(n[r]=Math.min(this._truncateTo,Math.abs(n[r])))}return n}}])&&o(t.prototype,n),a&&o(t,a),e}();t.Resampler=l},"7jQU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"uTyping_getPeerTyping",{enumerable:!0,get:function(){return a.uTyping_getPeerTyping}}),Object.defineProperty(t,"uTyping_getNames",{enumerable:!0,get:function(){return a.uTyping_getNames}});var a=n("USu8")},"7lzo":function(e,t,n){"use strict";var a;((a=n("9CLW"))&&a.__esModule?a:{default:a}).default.onPostMessage(function(e){"waiterStart"!==e&&"3dsPage"!==e||document.activeElement&&document.activeElement.blur()})},"7qNY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("DiaP")),i=r(n("29dZ"));function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(a.default,{accept:function(e,t,n){i.default.setLoading(t,!0),ajaxRequest("/mail",{act:"mrs_accept",peer_id:n,hash:store.mail.hash.mrs},function(e){e.error&&i.default.setLoading(t,!1)},function(){i.default.setLoading(t,!1)})},reject:function(e,t,n){i.default.setLoading(t,!0),ajaxRequest("/mail",{act:"mrs_reject",peer_id:n,hash:store.mail.hash.mrs},function(e){e.error&&i.default.setLoading(t,!1)},function(){i.default.setLoading(t,!1)})}});var o=a.default;t.default=o},"7tQU":function(e,t,n){"use strict";var a=n("UxAg"),i=n("OcsD"),r=(0,i.need)("scrollToEl");(0,i.need)("page").onChange(s);var o={anchorByHash:function(e){return".Anchor#".concat(e)}};function s(e){if(e){var t=e.split("#")[1],n=t&&!~t.indexOf("=")&&(0,a.$)(o.anchorByHash(t));n&&r(n)}}},"80md":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Line=o,t.default=void 0;var a,i=n("/xuI"),r=(a=n("z9sQ"))&&a.__esModule?a:{default:a};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getRandomId)("skeleton-line"),n=(0,i.stylesObjectToString)({})+(e.style||""),a=[r.default.class("SkeletonLine",{small:e.small,header:e.header}),e.class].filter(function(e){return e}).join(" ");return(0,i.applyAnimation)(t),{id:t,class:a,style:n,tag:"div"}}var s=o;t.default=s},"82vK":function(e,t,n){"use strict";var a=n("UxAg"),i=c(n("+cqQ")),r=(n("jk6M"),c(n("AXyT"))),o=c(n("rKUZ")),s=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("NJSj"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){e.target.closest("a.convo__avatar")||(e.stopPropagation(),e.preventDefault(),s.default.onTap(t))}Object.assign(s.default,{onTap:(0,i.default)("url"),setOnline:function(e,t){(0,a.$$)(".convo_id_".concat(e," .convo__online")).forEach(function(e){e.outerHTML=(0,s.Convo__online)(t)})},setLastMsg:function(e,t,n){var i=n.dateShort,r=n.pending,o=n.failed;(0,a.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e){e.$(".convo__text").innerHTML=t,e.$(".convo__status").innerHTML=(0,s.Convo__rightStatus)({pending:r,failed:o}),r||o?(e.$(".convo__date").innerText="",e.$(".convo__unreadBox").hidden=!0):(e.$(".convo__date").innerText=i,e.$(".convo__unreadBox").hidden=!1)})},setTyping:function(e,t){(0,a.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e){var n=e.$(".convo__typing"),a=t.typing;if(t.typingCount&&(!0===a||Array.isArray(a))){var i=n.$(".typing"),r=i&&q.parseClass("typing",i.className);i&&r.animation===t.animation?o.default.setTyping(i,t):(e.classList.add("convo_typing"),n.innerHTML=(0,o.default)(t))}else n.innerHTML="",e.classList.remove("convo_typing")})},setUnreadCount:function(e,t){(0,a.$$)(".convo_last.convo_id_".concat(e)).forEach(function(e){var n=e.$(".Oval");e.classList.toggle("convo_unread",t>0),e.classList.toggle("convo_unreadOut",t<0),r.default.setValue(n,t)})},setImportant:function(e,t){(0,a.$$)(".convo_id_".concat(e)).forEach(function(e){e.classList.toggle("convo_important",t)})}}),s.default._onClick=u},"8ZMO":function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("iDzD"))&&a.__esModule?a:{default:a}).default;t.default=i},"8fwe":function(e,t,n){"use strict";var a=n("JDEo"),i=n("7jDv"),r=n("OcsD"),o=null,s=4;function l(e){for(var t=geByClass("audio-msg-track--wave-wrapper",e),n=0,a=0;a<t.length;a++){try{n=parseInt(window.getComputedStyle(t[a],null).getPropertyValue("width"))}catch(e){n=parseInt(t[a].currentStyle.width)}if(n>0)break}return n}function c(e,t){t=Math.round(t),e.length!=t&&(e=(0,i.fastResample)(e,t));for(var n="",a=0,r=0;r<e.length;r++)0===(a=Math.floor(8*e[r]*.95))&&(a=.5),n+="M"+(r*s+1)+","+(10-a)+"v"+2*a+"Z";return'<svg class="audio-msg-track--wave" width="'.concat(e.length*s,'px"><path d="').concat(n,'"></path></svg>')}function u(){for(var e=geByClass("audio-msg-track"),t=0;t<e.length;t++){var n=(0,r.attr)(e[t],"data-wave");(0,r.hasClass)(e[t],"audio-msg-player")&&t>0&&(n=(0,r.attr)(e[t-1],"data-wave"));var a=l(e[t]);if(n&&a){n=n.split(",");for(var i=geByClass("audio-msg-track--wave",e[t]),o=c(n,a/s),u=0;u<i.length;u++){var d=(0,r.ce)("div",{innerHTML:o}).firstChild;i[u].parentNode.replaceChild(d,i[u])}}}}function d(){return o||(o=new a.VoiceMessagePlayer({onListened:function(e){AudioMessagePlayer.events.emit("listened",e)}})),o}addEvent(window,"orientationchange",function(){return setTimeout(u,500)}),window.mail&&window.mail.onMessagesRepainted&&(onDOMReady(u),window.mail.onMessagesRepainted(u)),window.AudioMessagePlayer={loaded:!0,events:new EventEmitter,togglePlay:function(e,t){var n=d(),a=n.attachTo(e);!0===a?n.play():a.then(function(){n.play()})},detachPlayer:function(e){d().detach(e)},pauseGlobalMedia:function(){a.VoiceMessagePlayer.pauseGlobalMedia()},resumeGlobalMedia:function(){a.VoiceMessagePlayer.resumeGlobalMedia()},redrawWaves:u,getWave:c}},"8gd1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=n("W9Tc"),r=n("m0RZ"),o=n("W0P9"),s=(a=n("Xrg9"))&&a.__esModule?a:{default:a};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sw=t,this.SWClient=n,vk.id&&this.canBeEnabled().then(function(e){e&&(a.listenPermission(),a.loadEndpoint()&&a.update().then(a.checkMessageState.bind(a)))})}var t,n,a;return t=e,a=[{key:"getPermission",value:function(){return Notification.permission}}],(n=[{key:"cleanNotification",value:function(){this.sw.action("cleanNotification")}},{key:"canBeEnabled",value:function(){return Promise.resolve(this.isSupported())}},{key:"isSupported",value:function(){return"PushManager"in window&&"Notification"in window&&this.SWClient.isSupported()}},{key:"loadEndpoint",value:function(){return s.default.get("push_notifier_endpoint"+vk.id)||!1}},{key:"saveEndpoint",value:function(e){s.default.set("push_notifier_endpoint"+vk.id,e||!1)}},{key:"action",value:function(e,t){return this.sw.action(e,t)}},{key:"_needupdate",value:function(e){var t=Date.now(),n=this.loadEndpoint(),a=s.default.get("push_notifier_subscribed_ts"+vk.id),i=!1;return(n!==e.endpoint||!a||t-a>6e4)&&(s.default.set("push_notifier_subscribed_ts"+vk.id,t),i=!0),i}},{key:"listenPermission",value:function(){var e=this;(0,i.partConfigEnabled)("push_notifier")&&navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then(function(t){t.onchange=function(){return e.update()}})}},{key:"update",value:function(){var t=this;return this.updatePermission().then(function(n){return n===e.PUSH_NOTIFIER_PERMISSION_GRANTED?t.subscribe().catch(function(t){t!==e.SUBSCRIBE_ERROR_NETWORK&&t("can not update subscribe")}):Promise.reject("premession_not_granted")}).catch(o.error)}},{key:"updatePermission",value:function(){var t=e.getPermission();if(t!==e.PUSH_NOTIFIER_PERMISSION_GRANTED){var n=this.loadEndpoint();if(n)return this.unsubscribe(n).then(function(){return t})}return Promise.resolve(t)}},{key:"processSubscribe",value:function(t){return t.subscribe({userVisibleOnly:!0,applicationServerKey:(0,r.urlBase64ToUint8Array)(e.SERVER_KEY)})}},{key:"setupSubscription",value:function(){var t=this;return new Promise(function(n,a){var i=e.getPermission(),r=function(){t.subscribe(!0).then(function(){n()}).catch(function(){a()})};i!==e.PUSH_NOTIFIER_PERMISSION_DENIED?i!==e.PUSH_NOTIFIER_PERMISSION_GRANTED?i===e.PUSH_NOTIFIER_PERMISSION_DEFAULT&&t.requestPermission().then(function(t){t===e.PUSH_NOTIFIER_PERMISSION_GRANTED?r():a()}):r():a(e.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS)})}},{key:"subscribe",value:function(t){var n=this;return this.sw.getRegistration().then(function(e){var t=e.pushManager;return t.getSubscription().then(function(e){if(e){var a=e.expirationTime;return a&&Date.now()>a-432e6?n.unsubscribe(n.loadEndpoint()).then(function(){return n.processSubscribe(t)}):e}return n.processSubscribe(t)})}).then(function(a){return new Promise(function(i,r){if(t||n._needupdate(a)){var o=a.getKey("p256dh"),s=a.getKey("auth");window.ajax.post(e.SERVER_URL,{act:"a_subscribe",endpoint:a.endpoint,key:o?btoa(String.fromCharCode.apply(null,new Uint8Array(a.getKey("p256dh")))):null,token:s?btoa(String.fromCharCode.apply(null,new Uint8Array(a.getKey("auth")))):null},{onDone:function(e){e?(n.saveEndpoint(a.endpoint),i()):r()},onFail:function(){return r(e.SUBSCRIBE_ERROR_NETWORK),!0}})}else i()})})}},{key:"unsubscribe",value:function(t){var n=this;return this.sw.register().then(function(a){return a.pushManager.getSubscription().then(function(a){return a?a.unsubscribe().then(function(a){return a?new Promise(function(a,i){ajax.post(e.SERVER_URL,{act:"a_unsubscribe",endpoint:t},{onDone:function(e){e?(n.saveEndpoint(!1),a()):i()}})}):Promise.reject("ERROR: can not unsubscribe")}):(n.saveEndpoint(!1),Promise.reject("ERROR: no subscription"))})})}},{key:"requestPermission",value:function(){var t=e.getPermission();return t===e.PUSH_NOTIFIER_PERMISSION_DEFAULT?new Promise(function(e,t){var n=Notification.requestPermission(function(t){e(t)});n instanceof Promise&&n.then(e,t)}):Promise.resolve(t)}},{key:"checkMessageState",value:function(){var t=this;return new Promise(function(e){return setTimeout(e,5e3)}).then(function(){return t.action("getMessagesMetaData")}).then(function(t){return"object"===l(t)&&Object.keys(t).length?new Promise(function(n,a){window.ajax.post(e.SERVER_URL,{act:"a_update_messages_state",data:Object.entries(t)},{onDone:function(e){e?n(e):a("ERROR: act error")},onFail:function(){return a("ERROR: network error"),!0}})}):Promise.resolve({})}).then(function(e){try{return JSON.parse(e)}catch(e){return{}}}).then(function(e){return t.action("updateMessageNotifications",e)}).catch(function(e){return(0,o.error)(e)})}}])&&c(t.prototype,n),a&&c(t,a),e}();u.SERVER_KEY="BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",u.SERVER_URL="push_notifier",u.PUSH_NOTIFIER_PERMISSION_GRANTED="granted",u.PUSH_NOTIFIER_PERMISSION_DEFAULT="default",u.PUSH_NOTIFIER_PERMISSION_DENIED="denied",u.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS="BLOCKED_BY_BROWSER_SETTINGS",u.SUBSCRIBE_ERROR_NETWORK="SUBSCRIBE_ERROR_NETWORK";var d=u;t.default=d},"8kEl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Y6JH"))&&a.__esModule?a:{default:a};var r=function(e){return{class:"Photo__marketShowMoreButton",attrs:{"data-items-json":e.items},inner:[{class:"Photo__marketShowMoreButtonIcon",inner:(0,i.default)("market","market_16")},getLang("mobile_photos_show_market_items")]}};t.default=r},"8mQl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioQueue=void 0;var a,i=n("L9Nh"),r=(a=n("r/ag"))&&a.__esModule?a:{default:a},o=n("BFfX");function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=null,c=null,u=0,d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"connect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i.QueueManager.initialized){var n=window.audio.getCurrent(),a=!t&&l;n&&!a&&ajax.post("/audio",{act:"queue_params",audio_id:n.id,owner_id:n.ownerId,hash:n.actionHash},{onDone:function(t){var n=t&&t.queues&&t.queues[0];n&&e.subscribe(n)},onFail:function(){return u<2&&(u++,setTimeout(e.connect,5e3)),!0}})}}},{key:"update",value:function(t,n){if(t===l)if(n.failed)e.connect(!0);else for(var a=window.audio.playing(),i=0;i<n.events.length;i++){var r=n.events[i].data;if("start"===r.type&&window.audio.getDeviceId()!==r.uuid&&!e.startPlaybackBox&&a){window.audio.pause(),e.showMultipleStreamPopup(r);break}}}},{key:"showMultipleStreamPopup",value:function(t){var n=e.createPopup(t.device_name);r.default.open(n,!0,{oncloseCallback:function(){return e.startPlaybackBox=!1}}),document.querySelector(".AudioPopup__actionButton").addEventListener("click",function(){r.default.close()}),e.startPlaybackBox=!0}},{key:"subscribe",value:function(t){c&&clearTimeout(c),l=t.key,i.QueueManager.addQueue({key:t.key,ts:t.timestamp},function(n,a){return e.update(t.key,a)}),i.QueueManager.start(),c=setTimeout(function(){return e.connect(!0)},25e3)}},{key:"createPopup",value:function(e){return Wd.elem((0,o.AudioPopup)({title:getLang("mobile_audio_start_playback_title"),description:getLang("mobile_audio_start_playback_body").replace("{device_name}",e),action_button:{text:getLang("mobile_audio_continue")}}))}}],(n=null)&&s(t.prototype,n),a&&s(t,a),e}();t.AudioQueue=d,d.startPlaybackBox=!1},"8t6d":function(e,t,n){"use strict";var a=_(n("TYsd")),i=_(n("+cqQ")),r=_(n("WDxS")),o=_(n("jk6M")),s=n("fntf"),l=_(n("IXdz")),c=_(n("W12k")),u=n("LpA2"),d=function(e){if(e&&e.__esModule)return e;var t=m();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("t7Ww")),f=_(n("r/ag")),h=_(n("29dZ")),p=n("OcsD"),A=n("C13D");function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function _(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y={opened:!1,init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=extend({replace:!1,reply:!1,replyTo:!1,restore:!1,forceAuthorIndex:!0,isOpenNarrativeFromFeed:!1},n);var a=this._parseList(e).split("/"),i=g(a,3),r=i[0],o=i[1],s=i[2],l=r.split("_"),c=g(l,1),u=c[0];n&&n.narrativeId&&(u=n.narrativeId.toString()),this.initRaw=e,this.storyOwner=(0,p.intval)(u),this.storyRaw=r,this.storyExtra=s,this.storyList=o,this.extra=this.parseExtra(this.storyExtra),this.needAudioRestore=audio.playing(),this.Views={},this.popoutOpen=!1,this.slideTimer=null,this.createLayer(),this._initStore(),this.detectAutoplay().then(function(){t.isRestored?t._init():t._checkPreloadedList()?(t._initPreloadedList(),t._init()):t._requestList().then(function(e){var n=e.items,a=e.list;n&&(t.store.authors=n,t.store.listLoaded=!0,t.store.list=a,t.store.inited=!0,t._init())},function(){})})},parseExtra:function(e){var t={},n=String(e).split(";");for(var a in n)if(n.hasOwnProperty(a)){var i=g(n[a].split(":"),2),r=i[0],o=i[1];r&&o&&(t[r]=o)}return t},_checkPreloadedList:function(){return!!(window.store&&window.store.storiesLists&&window.store.storiesLists[this.storyList])},_initPreloadedList:function(){var e=window.store.storiesLists[this.storyList];e&&(this.store.authors=e,this.store.listLoaded=!0,this.store.list=this.storyList,this.store.inited=!0)},pushPreloadedList:function(e){var t=(0,p.parseJSON)(e);window.store||(window.store={}),window.store.storiesLists||(window.store.storiesLists={}),extend(window.store.storiesLists,t),window.store.stories||(window.store.stories={}),Object.keys(t).forEach(function(e){window.store&&window.store.storiesLayers&&window.store.storiesLayers.includes(e)||delete window.store.stories[e]})},_createMetaStory:function(){var e=this;(0,p.each)(this.store.authors,function(t,n){var a=n.items[n.items.length-1];a.isNarrativeMetaStory||n.items.push({type:"photo",raw_id:a.raw_id,preview:a.preview,preview_url:a.preview_url,narrative:a.narrative,photo_url:a.photo_url,isNarrativeMetaStory:!0,isOpenNarrativeFromFeed:e.params.isOpenNarrativeFromFeed})})},_init:function(){var e=this;this.createAuthors(),this.storyList.match(/narrative-?\d+_\d+/)&&this._createMetaStory();var t=this.getFirstStoryIndex();this.setCurrentStory(t);var n=this.getCurrentStory();this.params.restore||this.setHistory(n.raw_id,{nav_init:!0,replace:this.params.replace}),this.sliderEl=ge("StoriesSlider"),this.slider=(0,r.default)(this.sliderEl,{speed:300,startSlide:this.getCurrentAuthorIndex(),onSlideChange:function(t){t=e.slider&&(0,p.intval)(e.slider.getCurrentPos());var n=e.getCurrentAuthorIndex();e.getCurrentAuthor().data.is_groups||e.setAllAuthorStoriesReaded(n),clearTimeout(e.slideTimer),void 0!==t&&t!==n&&(e.markSeenAllOwners(),!1===e.isTap&&(t>n?e.sendAnalyticsEvent("go_to_next_author"):e.sendAnalyticsEvent("go_to_previous_author")),e.setCurrentAuthor(t),e.slideTimer=setTimeout(function(){e.renderStory()},300)),delete e.isTap},onSetup:function(){(0,p.addClass)(e.layer,"Stories_inited"),e.renderStory()}}),this.Authors&&1===this.Authors.length&&((0,p.addClass)(this.layer,"Stories_inited"),this.renderStory()),this.store.showViews&&this.showViews(n.raw_id,!0),this._initViewerSource(),this._sendOpeningEvents()},_initStore:function(){window.store||(window.store={stories:{},storiesLayers:[]}),window.store.stories||(window.store.stories={}),window.store.storiesLayers||(window.store.storiesLayers=[]),window.store.stories[this.storyList]&&window.store.stories[this.storyList].inited?(this.store=window.store.stories[this.storyList],this.isRestored=!0):(this.store={authors:[],listLoaded:!1,readedStories:{},_requests:[],viewers:{},questions:{},viewersState:{},replies:{},showMenu:!1,storyList:this.storyList,initRaw:this.initRaw,storyIndex:0,authorIndex:0,isReply:this.params.reply,replyTo:this.params.replyTo,inited:!1},window.store.stories[this.storyList]=this.store,this.isRestored=!1),this.params.restore||window.store.storiesLayers.push(this.store.storyList)},_initViewerSource:function(){var e=this._getSource();switch(e){case"reply":this.viewerSource="replies_list";break;case"feed":this.viewerSource=cur.module;break;default:this.viewerSource=e}},_sendOpeningEvents:function(){var e=this._getSource();if(e){var t;switch(e){case"narrative_story":t="narrative_open_stories";break;case"narrative_snippet":case"narrative_link":t="narrative_open";break;case"narrative_recommendations":t="narrative_other"}if(t&&this._sendNavigationStatEvents(t),"narrative_fave"===e){var n=(this.getCurrentStory()||{}).narrative||{},a=n.owner_id,i=n.id;if(!a||!i)return;statlogsValueEvent("bookmarks_product_analytics",{item_type:"narrative",item_owner_id:(0,p.intval)(a),item_id:(0,p.intval)(i),time:vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)})}}},_abortRequests:function(){isArray(this.store._requests)&&(0,p.each)(this.store._requests,function(e,t){t&&t.readyState<4&&t.abort()}),this.store._requests=[]},_saveRequest:function(e){this.store._requests.push(e)},getStore:function(){return this.store},setAllAuthorStoriesReaded:function(e){var t=this;this.store.authors[e].items.forEach(function(e){if(e.unread){var n=e.raw_id;e.track_code&&(n+="_"+e.track_code),t.store.readedStories[n]=!0}})},markSeenAllOwners:function(){var e=this.getCurrentAuthor().data,t=window.store.stories.groups;if(e.is_groups&&t){t.authors.forEach(function(e){return e.items.forEach(function(e){return e.unread=!1})});var n=t.authors.map(function(e){return e.author.id});ajax.post("stories.php",{_ajax:1,act:"mark_owners_seen",hash:this.store.authors[0].read_hash,owners_ids:n.join(",")});this._needFeedUpdate=!0}},togglePin:function(e,t){if(e){this._hideFeatureTooltip();var n=hasClass(e,"Story__pinBtn--unpin"),a=y.getCurrentAuthor();(0,p.toggleClass)(e,"Story__pinBtn--unpin",!n),ajax.post("stories.php",{_ajax:1,act:"toggle_pin",owner_id:t,need_pin:(0,p.intval)(!n),hash:this.store.authors[0].stories_pin_hash},{onDone:function(t){1!==t?(0,p.toggleClass)(e,"Story__pinBtn--unpin",n):a&&a.data&&a.data.author&&(a.data.author.isOwnerPinned=!n)}})}},createAuthors:function(){var e=this,t="";this.Authors=[];var n=this.getCurrentAuthorIndex();this.isRestored&&!this.params.forceAuthorIndex||(n=this.getFirstAuthorIndex());var a=this.store.authors[n],i=a.items[a.items.length-1].unread;if(this.extra)switch(this.extra.context){case"new":i=!0;break;case"all":i=!1}(0,p.each)(this.store.authors,function(n,a){var r=a.items;if(!n||!i||r[r.length-1].unread){var o=new s.StoryAuthor(n,a);e.Authors.push(o),t+=o.renderEmpty()}}),(0,p.val)((0,p.geByClass1)("Stories__authors",this.layer),t),this.authors=Array.from(geByClass("StoryAuthor",this.layer)),(0,p.each)(this.Authors,function(e,t){t.updateHeader()}),this.setCurrentAuthor(n)},getFirstStoryIndex:function(){var e=this,t=this.store.authors[this.getCurrentAuthorIndex()];if(this._hasContext("all"))return 0;if(!this._hasContext("new")){var n=t.items.findIndex(function(t){return t.raw_id===e.storyRaw});if(-1!==n)return n}return this.getCurrentStoryIndex()},getFirstAuthorIndex:function(){var e=this,t=this.store.authors.findIndex(function(t){return t.author.index===e.storyOwner});return-1!==t?t:0},getCurrentAuthorIndex:function(){return this.store.authorIndex},getCurrentStoryIndex:function(){return this.store.authors[this.getCurrentAuthorIndex()].index},getCurrentStory:function(){return this.store.authors[this.getCurrentAuthorIndex()].items[this.getCurrentStoryIndex()]},setCurrentAuthor:function(e){this.store.authorPrevIndex=this.store.authorIndex,this.store.authorIndex=e,this.updateCurrentAuthor()},setCurrentStory:function(e){this.store.authors[this.getCurrentAuthorIndex()].index=e},drawSiblingPreview:function(){for(var e=this.getCurrentAuthorIndex(),t=-2;t<=2;t++){var n=e+t;this.authors[n]&&n!==e&&this.drawPreview(this.authors[n])}},drawPreview:function(e){setStyle(e,"background-image","url(".concat(attr(e,"data-src"),")"))},updateCurrentAuthor:function(){var e=this.authors[this.store.authorIndex];(0,p.each)(this.authors,function(e,t){(0,p.removeClass)(t,"StoryAuthor_current")}),(0,p.addClass)(e,"StoryAuthor_current")},getSizes:function(){var e,t,n=window.innerHeight,a=window.innerWidth;return a<540?(e=a,t=n,zlayer.open(),zlayer.onResize=this.onResize.bind(this)):(e=Math.floor(Math.min(540,Math.max(320,.563*n))),t=Math.floor(1.78*e),(0,p.addClass)(document.body,"vk__story_open")),[e,t]},createLayer:function(){window.innerWidth<540?(zlayer.open(),zlayer.onResize=this.onResize.bind(this)):(0,p.addClass)(document.body,"vk__story_open"),y.opened=!0;var e=g(this.getSizes(),2),t=e[0],n=e[1];this.storyW=t;var i=a.default.html({id:"StoriesView",class:"Stories__layer _preventMenuOpen",style:"max-width: ".concat(t,"px; max-height: ").concat(n,"px"),inner:[{class:"Stories__loading",inner:{class:"Stories__loadingInner"}},{id:"StoriesSlider",class:"Stories__authors peppermint peppermint-inactive",ontouchmove:"Stories.onTouchMove(event);",inner:""},{class:"Stories__layerClose",inner:{class:"Story__icon Story__icon_close"},onclick:"return Stories.clickClose();"},{class:"Stories__popout"},{class:"Stories__flash",onclick:"Stories.hideFlashPopup()",inner:{class:"Stories__flashText"}},{class:"Stories__swipeText Stories__swipeText_top"}]});this.layer=(0,p.append)((0,p.ce)("div",{className:"Stories",innerHTML:i}),document.body),attr(this.layer,"ontouchmove","event.preventDefault();"),this.loader=(0,p.geByClass1)("Stories__loading",this.layer),this.popout=(0,p.geByClass1)("Stories__popout",this.layer),this.swipeTextTop=(0,p.geByClass1)("Stories__swipeText_top",this.layer)},onResize:function(){var e=ge("StoriesView"),t=g(this.getSizes(),2),n=t[0],a=t[1];attr(e,"style","max-width: ".concat(n,"px; max-height: ").concat(a,"px")),this.storyW=n,this.authors.forEach(function(e){setStyle(e,"width","".concat(n,"px"))}),this.Authors&&this.Authors.length>1&&this.slider&&this.slider.recalcWidth()},getWidth:function(){return this.storyW},renderStory:function(){var e=this.store.authorPrevIndex,t=this.getCurrentAuthorIndex(),n=this.authors[t],a=this.Authors[t];if(a.update(),!isNaN(e)&&e!==t){var i=this.Authors[e],r=this.authors[e];i.update();var o=i.renderEmpty(),s=ceFromString(o);replace(s,r)}var l=ceFromString(a.render());replace(l,n),this.authors=Array.from(geByClass("StoryAuthor",this.layer)),this.updateCurrentAuthor(),a.updateHeader(),this.onRender(),this.drawSiblingPreview(),"open"===this.extra.replies&&this.showViews(this.getCurrentStory().raw_id)},getCurrentAuthor:function(){var e=this.getCurrentAuthorIndex();return(this.Authors||[])[e]},getCurrentAuthorEl:function(){return this.getCurrentAuthor().authorElem},getAuthorElems:function(){return this.authors},prevStory:function(){var e=this;this.stopStory(),this.store.isStopped=!1,requestAnimationFrame(function(){var t=e.getCurrentStoryIndex(),n=e.getCurrentAuthorIndex();if(t-1<0)if(n-1<0)e.setCurrentStory(0),e.renderStory();else{e.slider.slideTo(n-1);var a=e.store.authors[n-1].items.length-1;e.setCurrentStory(a)}else e.setCurrentStory(t-1),e.renderStory()})},nextStory:function(e){var t=this;this.stopStory(),this.markSeenAllOwners(),this.store.isStopped=!1,requestAnimationFrame(function(){var n=t.store.authors[t.getCurrentAuthorIndex()],a=t.getCurrentStoryIndex(),i=t.getCurrentAuthorIndex(),r=n.items.length,o=t.Authors.length;r-1<=a?o-1<=i?requestAnimationFrame(function(){t.sendAnalyticsEvent("close_auto_by_time"),t.close()}):(e&&t.sendAnalyticsEvent("go_to_next_story_auto_by_time"),t.slider.slideTo(i+1),t.setCurrentStory(0)):(e&&t.sendAnalyticsEvent("go_to_next_story_auto_by_time"),t.setCurrentStory(a+1),t.renderStory())})},stopStory:function(){this.store.isStopped=!0,this.pauseStory()},pauseStory:function(e){var t=this.getCurrentAuthor();if(t){t.getCurrentStory();var n=t.getCountDown();e&&(0,p.addClass)(this.layer,"Stories_paused"),n&&n.pause()}},playStory:function(e){this.store.isStopped=!1;var t=this.getCurrentAuthor();if(t){t.getCurrentStory();var n=t.getCountDown();(0,p.removeClass)(this.layer,"Stories_paused"),n&&n.start()}},pauseAudio:function(){var e=window.audio;this.getCurrentStory().noSound||e&&e.pause()},restoreAudio:function(){var e=window.audio;this.needAudioRestore&&e&&e.play()},showMenu:function(){this.store.showMenu=!0,this._hideTooltips(),this.stopStory(),(0,p.addClass)(this.layer,"Stories_menuOpened")},hideMenu:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.store.showMenu=!1,(0,p.removeClass)(this.layer,"Stories_menuOpened"),e&&this.playStory()},showLoading:function(){var e=this;this.loader&&(clearTimeout(this.loaderTimer),this.loaderTimer=setTimeout(function(){show(e.loader)},100))},hideLoading:function(){this.loader&&(clearTimeout(this.loaderTimer),hide(this.loader))},onRepliesScroll:function(e,t){this.Views[t]&&(this.store.viewersState[t].repliesScrollLeft=e.target.scrollLeft)},showViews:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hideMenu(),this.store.showViews=!0,this.stopStory(),this._hideTooltips(),this.Views[e]){this.store.viewersState[e];var a=this.Views[e].render();this.popoutOpen=!0,(0,p.val)(this.popout,a);var i=(0,p.geByClass1)("Views__repliesBody",this.popout);i&&(i.scrollLeft=0),n||this.sendAnalyticsEvent("open_replies_list")}else{var r=this.store.viewersState[e],o=this.store.viewers[e];if(r&&o)return void this.createViews(e,n);this.showLoading(),this._requestFeedback(e).then(function(){t.markQuestionsAsViewed(),t.createViews(e,n),t.hideLoading()})}},markQuestionsAsViewed:function(){(this.getCurrentStory()||{}).isNewQuestions=!1,(0,p.removeClass)((0,p.geByClass1)("Story__stats"),"Story__stats_new_questions")},createViews:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.store.viewersState[e],a=new l.default(e),i=a.render();this.popoutOpen=!0,(0,p.val)(this.popout,i),this.Views[e]=a;var r=(0,p.geByClass1)("Views__repliesBody",this.popout);r&&(r.scrollLeft=n.repliesScrollLeft),t||this.sendAnalyticsEvent("open_replies_list")},hideViews:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.playStory(),this.store.showViews=!1,this.popoutOpen=!1,(0,p.val)(this.popout,"")},loadViews:function(e){var t=this,n=this.store.viewersState[e],a=n.loading,i=n.nextFrom;!a&&i&&(n.loading=!0,this.showLoading(),this._requestFeedback(e,i).then(function(){var a=new l.default(e),i=a.render();t.popoutOpen=!0;var r=(0,p.geByClass1)("Views__body",t.layer).scrollTop;(0,p.val)(t.popout,i),(0,p.geByClass1)("Views__body",t.layer).scrollTop=r,t.Views[e]=a,t.hideLoading(),n.loading=!1}))},showComment:function(){var e=this,t=this.authors[this.store.authorIndex],n=(0,p.geByClass1)("Story__commentTextarea",t);this.store.showComment=!0,this.stopStory(),(0,p.addClass)(this.layer,"Stories_commentOpened"),this._hideTooltips(),requestAnimationFrame(function(){e.sendAnalyticsEvent("comment_tap"),n&&n.focus()})},hideComment:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.store.showMenu=!1,(0,p.removeClass)(this.layer,"Stories_commentOpened"),e&&this.playStory()},onInputComment:function(e){var t=this.authors[this.store.authorIndex],n=(0,p.geByClass1)("Story__commentSend",t),a=(0,p.val)(e);(0,p.toggleClass)("Story__commentSend_active",n,!!a)},sendComment:function(){var e=this.authors[this.store.authorIndex],t=(0,p.geByClass1)("Story__commentTextarea",e),n=(0,p.geByClass1)("Story__commentSend",e),a=(0,p.val)(t);if(hasClass("Story__commentSend_active",n)){(0,p.val)(t,""),(0,p.removeClass)(n,"Story__commentSend_active");var i,r=this.getCurrentAuthorIndex(),o=this.getCurrentStory(),s=o.raw_id,l=o.narrative,c=this.store.authors[r],u=c.send_hash,d=c.author.id;i=l?"narrative".concat(l.raw_id):"story".concat(s),this._sendMessage(u,i,a,d),this.hideComment()}},showFlashPopup:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=1500;this.stopStory();var i=(0,p.geByClass1)("Stories__flash",this.layer);(0,p.val)((0,p.geByClass1)("Stories__flashText",i),e),setTimeout(function(){(0,p.addClass)(i,"Stories__flash_show")}),clearTimeout(this.flashTimer),clearTimeout(this.flashHideTimer),this.flashTimer=setTimeout(function(){(0,p.removeClass)(i,"Stories__flash_show"),t.flashHideTimer=setTimeout(function(){t.hideFlashPopup(n)},a)},a)},hideFlashPopup:function(e){e&&this.playStory(),clearTimeout(this.flashTimer),clearTimeout(this.flashHideTimer);var t=(0,p.geByClass1)("Stories__flash",this.layer);(0,p.removeClass)(t,"Stories__flash_show")},removeCurrentStory:function(){var e=this,t=window.lang,n=this.getCurrentAuthor();if(n){var a=n.getCurrentStory(),i=a.narrative?t.mobile_stories_delete_narrative:t.mobile_stories_delete_story;if(confirm(i.replace(/(<([^>]+)>)/gi,"\n"))){var r=n.data.remove_hash,o=a.can_remove,s=a.raw_id;if(o){this.pauseStory();var l=function(){e._requestFeedBlock(),a.isNarrativeSlide&&e.close(),0===e.getCurrentStoryIndex()?(e.close({closeAll:!1}),location.reload()):(e.store.authors[e.getCurrentAuthorIndex()].items.splice(e.getCurrentStoryIndex(),1),e.hideMenu(),e.prevStory())};if(a.narrative){var c=a.narrative,u=c.owner_id,d=c.id,f="".concat(u,"_").concat(d);this._requestRemoveNarrative(f,r).then(function(){l()},function(){})}else this._requestRemoveStory(s,r).then(function(){e.sendAnalyticsEvent("delete"),l()},function(){})}}}},onScrollViews:function(e,t){var n=this.store.viewersState[t],a=n.loading,i=n.nextFrom;if(!a&&i){e.scrollHeight-e.offsetHeight-400<=e.scrollTop&&this.loadViews(t)}},unMute:function(e,t){var n=this.getCurrentAuthor().story.getVideo();(0,p.cancelEvent)(t),n&&n.muted&&(n.muted=!1,(0,p.removeClass)(gpeByClass(s.VIDEO_MUTED_CLASS,e),s.VIDEO_MUTED_CLASS))},onTouchStart:function(e){var t=this,n=this.getCurrentAuthor().story;if(n&&"video"===n.getType()){var a=n.getVideo();if(a&&a.paused)return void(this.preventedTap=!0)}this.pauseStory(!0),this.isTap=!0,"touchstart"===e.type?(this.tapStartX=e.changedTouches[0].clientX,this.tapStartY=e.changedTouches[0].clientY):(this.tapStartX=e.clientX,this.tapStartY=e.clientY),clearTimeout(this.isTapTimer),this.isYmove=null,(0,p.removeClass)(this.layer,"Stories_touchMove"),this.isTapTimer=setTimeout(function(){t.isTap=!1,t.sendAnalyticsEvent("pause_long_tap")},200)},onTouchMove:function(e){var t=0,n=0;"touchmove"===e.type&&(t=this.tapStartX-e.changedTouches[0].clientX,n=this.tapStartY-e.changedTouches[0].clientY),null===this.isYmove&&(this.isYmove=Math.abs(t)<Math.abs(n),this.isYmove&&(0,p.addClass)(this.layer,"Stories_touchMove")),this.isYmove?this.onVerticalSwipe(-n/1.5):this.onVerticalSwipe(0)},onTouchEnd:function(e,t){clearTimeout(this.isTapTimer);var n=this.getCurrentAuthor().story;this.isTap||this.sendAnalyticsEvent("resume_release");var a,i;if("touchend"===e.type?(a=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(a=e.clientX,i=e.clientY),(Math.abs(this.tapStartX-a)>20||Math.abs(this.tapStartY-i)>20)&&(this.isTap=!1),(0,p.removeClass)(this.layer,"Stories_touchMove"),setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform((0,p.geByClass1)("Story__moreLink"),1,[0,0]),this.needGoToLink){var r=this.getCurrentAuthor().story;if(this.needGoToLink=!1,r&&r.hasLink())return void this.openCustomButton(e)}if(this.needClose)return this.sendAnalyticsEvent("close_swipe_down"),void this.close();if(this.featureTooltip)this._hideFeatureTooltip();else if(this.tooltip)this._hideTooltips();else{if(this.isTap){if(hasClass(e.target,"Story__sticker"))return(0,p.removeClass)(this.layer,"Stories_paused"),void((0,p.domData)(e.target,"question")?this.askQuestionBox(e):this.tooltip?this._hideTooltips():this._showTooltip(e,n._createStickerLink(e.target)));t?(this.sendAnalyticsEvent("go_to_previous_story"),this.prevStory()):(this.sendAnalyticsEvent("go_to_next_story_tap"),this.nextStory())}this._hideTooltips(!0),this.hideMenu()}},openCustomButton:function(e){e.preventDefault(),e.stopPropagation();var t=this.getCurrentAuthor().story,n=t.getLinkUrl(),a=n.match(/\/narrative(-?\d+)_(\d+)/);if(a){var i={ownerId:a[1],narrativeId:a[2]},r=i.ownerId,o=i.narrativeId;if(!r||!o)return!1;this.openNarrative("".concat(r,"/narrative").concat(r,"_").concat(o),{source:"narrative_story",isOpenNarrativeFromFeed:!0})}else if(this.stopStory(),this.showLoading(),t.stats&&t.stats.url_view){var s=t.stats.url_view,l=s.event_type,c=s.rhash,u=t.raw_id;this._requestClickStat(u,l,c,function(){nav.go(n)})}else nav.go(n);return!1},onVerticalSwipe:function(e){var t=window.lang;if(this.needClose=!1,this.needGoToLink=!1,e){var n=e>0,a=this.sliderEl.offsetHeight,i=a/3.5,r=Math.abs(e)>i;if(n){var o=r?t.mobile_zphoto_release_to_close:t.mobile_zphoto_move_to_close,s=r?"":n?"zpv_close_move_down":"zpv_close_move_up",l=Math.max(1-.75*e/a,.6);(0,p.val)(this.swipeTextTop,'<div class="zpv_close_msg '.concat(s,'">').concat(o,"</div>")),setStyle(this.sliderEl,"opacity",l),setStyle.transform(this.sliderEl,1,[0,e/1.5]),setStyle(this.swipeTextTop,"opacity",Math.abs(l-1-.6)),setStyle.transform(this.swipeTextTop,1,[0,e/1.5*.85]),this.needClose=r}else{var c=Math.min(1-.5*e/a,1.1);setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform((0,p.geByClass1)("Story__moreLink"),c,[0,Math.max(e/(1.5*1.6),-90)]),this.needGoToLink=r}}else setStyle(this.sliderEl,"opacity",1),setStyle.transform(this.sliderEl,1,[0,0]),setStyle.transform((0,p.geByClass1)("Story__moreLink"),1,[0,0]),this.needClose=!1,this.needGoToLink=!1},preventScroll:function(){return this.popoutOpen},_requestRemoveStory:function(e,t){return new Promise(function(n,a){ajax.post("stories.php",{_ajax:1,act:"remove_story",hash:t,story_raw:e},{onDone:function(){n()},onFail:function(){a()}})})},_requestRemoveNarrative:function(e,t){return new Promise(function(n,a){ajax.post("stories.php",{_ajax:1,act:"remove_narrative",hash:t,narrative_raw:e},{onDone:function(){n()},onFail:function(){a()}})})},_requestList:function(){var e=this;return new Promise(function(t,n){var a={storyOwner:e.storyOwner,list:e.storyList,storyRaw:e.storyRaw,extra:e.storyExtra};if(!e.storyRaw)return n();var i=ajax.post("stories.php",{_ajax:1,act:"get_list",list:a.list,story_raw:a.storyRaw,extra:a.extra},{onDone:function(e){if(a.items=e.list,e.recommendations){var n=a.list+"_recommendations";window.store.stories[n]=y._forceSetStore(a.storyRaw,n,e.recommendations)}t(a)},onFail:function(){n()}});e._saveRequest(i)})},_forceSetStore:function(e,t,n){return{authors:n,listLoaded:!0,list:t,readedStories:{},_requests:[],questions:{},viewers:{},viewersState:{},replies:{},showMenu:!1,storyList:t,initRaw:e,storyIndex:0,authorIndex:0,isReply:!1,replyTo:!1,inited:!0}},_requestFeedback:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.store;return new Promise(function(i,r){var o=ajax.post("stories.php",{_ajax:1,act:"feedback",offset:n,story_raw:e},{onDone:function(t,n,r,o,s,l,c){var u;(o&&o.length&&(a.replies[e]=o),a.viewers[e])?r&&(u=a.viewers[e]).push.apply(u,v(t)):a.viewers[e]=t;a.viewersState[e]?r&&extend(a.viewersState[e],{count:n,nextFrom:r}):a.viewersState[e]={count:n,nextFrom:r,repliesCountText:s,authorCountText:l,repliesScrollLeft:0},c.length&&(a.questions[e]=c),s&&(a.viewersState[e].repliesCountText=s),l&&(a.viewersState[e].authorCountText=l),i({viewers:t,count:n,nextFrom:r,repliesCountText:s,authorCountText:l,questions:c})},onFail:function(){r()}});t._saveRequest(o)})},_requestReadStories:function(){var e=this.store,t=Object.keys(e.readedStories),n=this._getSource();if(t.length){var a=ajax.post("stories.php",{_ajax:1,act:"read_stories",hash:this.store.authors[0].read_hash,stories:t.join(","),source:n,navigation_stats:(0,u.serializeNavigationStats)(),loading_stats:(0,u.serializeLoadingStats)(),connection_type:(0,u.getConnectionType)()},{onDone:function(){e.readedStories={},"feed"===n&&y._requestFeedBlock()}});this._saveRequest(a)}else this._needFeedUpdate&&(this._needFeedUpdate=!1,setTimeout(function(){y._requestFeedBlock()}))},_getSource:function(){if(this.params&&this.params.source)return this.params.source;var e=this.store&&this.store.list||"",t="";return e.includes("feed")?t="feed":e.includes("replies")&&(t="reply"),t},_sendNavigationStatEvents:function(e){var t=this.getCurrentStory(),n=t&&t.raw_id;if(n){var a=this._getSource();(0,u.saveNavigationStatEvent)({storyRawId:n,source:a,action:e})}},_sendViewerStartTime:function(e,t){var n=this.viewerSource;(0,u.saveViewerStartTime)({storyRawId:e,source:n,time:t})},_requestFeedBlock:function(){var e=nav.getQuery();if(!window.store.storiesLayers.length)ajax.post("stories.php",{_ajax:1,act:"feed_block",q:e.q},{onDone:function(e,t){var n=ge("StoriesFeedBlock");n&&replace(ceFromString(e),n),y.pushPreloadedList(t)}})},_requestClickStat:function(e,t,n,a){ajax.post("stories.php",{_ajax:1,act:"stat",source_story:e,event_type:t,rhash:n},{onDone:function(){a&&a()}})},_requestStickerStat:function(e,t){var n=this.getCurrentStory(),a=n.raw_id,i=n.clickable_stickers;a&&i&&ajax.post("stories.php",extend({act:"stickers_stat",story_raw_id:a,action:e,hash:i.hash},t))},_sendMessage:function(e,t,n,a){var i=ajax.post("mail.php",{_ajax:1,act:"send",entrypoint:"stories_comment",hash:e,media:t,message:n,to:a},{onDone:function(){var e=window.lang;y.showFlashPopup(e.mobile_stories_comment_success),y.sendAnalyticsEvent("comment_send")}});this._saveRequest(i)},_requestFave:function(e,t,n,a){ajax.post("bookmarks.php",{_ajax:1,act:e,item_type:31,item_oid:t,item_id:n,hash:a,ref:cur.module})},_parseList:function(e){var t=(e=decodeURIComponent(e)).match(/^story(-?\d+)_(\d+)(\/([a-z0-9\_\-]+))?(\/([a-z0-9\_\:\;\-]+))?$/i);if(t){var n=g(t,7),a=n[1],i=n[2],r=n[4],o=n[6],s=a+"_"+i;return e.match(/from_feed\=1/)?r="feed":e.match(/profile\=1/)?r="profile":r||(r=s),s+"/"+r+"/"+o}return e},setHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nav_init:!1,replace:!0},n=window,a=n.nav,i=this.getHistoryURL(e),r=a.getQuery(),o=i.match(/narrative-\d+_\d+/);o&&(i="narrative".concat(this.getCurrentStory().narrative.raw_id)),r.z=i;var s=a.path+obj2qs(r)+a.hash,l={push_only:!0,replace:t.replace,nav_init:!t.no_open,nav_incr:!0};a.go(s,null,l)},getFrom:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=window,n=t.nav,a=this.store.list,i=n.getQuery(),r="z=".concat(i.z),o="";return"/write"===n.path.substr(0,6)?o="write".concat(n.path.substr(0,6),"?").concat(r):"/mail"===n.path?o="write".concat(i.peer,"?").concat(r):"/feed"===n.path?o=i.section&&"notifications"===i.section?"feed?section=notifications&".concat(r):"feed?".concat(r):a.startsWith("archive")?o="".concat(n.path,"?act=stories"):i.from&&(o=i.from),e?encodeURIComponent(o):o},getHistoryURL:function(e){var t=this.store.list;return"story"+e+(t?"/"+t:"")},getParams:function(){return this.params||{}},reportCurrentStory:function(e){var t=window.nav,n=this.getHistoryURL(e),a=(t.getQuery(),this.getFrom()),i="/reports?act=add&object=".concat(n,"&refrom=").concat(a);t.go(i)},openGroupsSettings:function(){var e=window.nav,t=this.getFrom(),n=this.getCurrentStory().raw_id,a=this.getCurrentAuthor().data,i="/settings?act=groups_stories&story_raw_id=".concat(n,"&from=").concat(t,"&hash=").concat(a.stories_get_groups_settings_hash);this.pauseStory(),e.go(i)},toggleBookmark:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getCurrentAuthor();if(n){var a=n.getCurrentStory(),i=a.bookmark_add_hash,r=window,o=r.store,s=a.narrative?a.narrative:a,l=s.is_bookmarked;Object.keys(o.stories).forEach(function(e){var t=o.stories[e];if(t.authors){var n=!1;t.authors.forEach(function(e){n||(n=e.items.find(function(e){return!!e.narrative&&(e.narrative.bookmark_hash===i&&e.raw_id===a.raw_id)}))}),n&&(n.narrative?n.narrative.is_bookmarked=!l:n.is_bookmarked=!l)}}),(0,p.val)(e,l?lang.mobile_stories_menu_bookmark_title:lang.mobile_stories_menu_bookmarked_title);var c=l?"bookmark_remove":"bookmark_add",u=a.narrative,d=u.owner_id,f=u.id;t||this._requestFave(c,d,f,i),a.narrative&&Share.setBookmarkState(a.narrative.raw_id,!l)}},share:function(e,t){var n=this,a=this.getCurrentAuthor();if(a){var i=a.getCurrentStory(),r=i.bookmark_add_hash,o=(i.narrative?i.narrative:i).is_bookmarked;this.stopStory();this.getFrom();var s=t?"narrative":"story";this.stopStory(),Share(e,{mail_hash:this.getCurrentStory().share_hash,object:s+e,is_bookmarked:o,bookmark_hash:r,bookmark_type:31,can_bookmark:t,can_to_own:t,can_to_club:t}),cur.share.onClose(function(){n.playStory()})}},openReplies:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.playStory(),t||this.sendAnalyticsEvent("open_parent_story"),this.destroy();var n=e.split("/"),a=g(n,2),i=a[1];if(i){var r=window.store.storiesLayers.indexOf(i);if(~r){var o=this.store.list,s=i;this.restore(o,s)}else this.init(e,{reply:!0,replyTo:t})}else this.close()},openNarrative:function(e,t){this.playStory(),this.destroy();var n=g(e.split("/"),2)[1];if(n)if(~window.store.storiesLayers.indexOf(n)){var a=this.store.list,i=n;this.restore(a,i)}else this.init(e,t);else this.close()},clickClose:function(){var e=this;requestAnimationFrame(function(){e.sendAnalyticsEvent("close_tap"),e.close()})},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(extend({isPopState:!1,storyRaw:!1,closeAll:!1},e),this.store&&this.store.list&&this._getSource().indexOf("narrative")>-1&&this._sendNavigationStatEvents("narrative_close"),!e.isPopState){var t=window,n=t.nav,a=n.getQuery();if(window.store.storiesLayers[window.store.storiesLayers.length-1-1]){var i=window.store.storiesLayers[window.store.storiesLayers.length-1-1],r=window.store.stories[i],o=r.authorIndex,s=r.authors[o].index,l=r.authors[o].items[s];a.z=this.getHistoryURL(l.raw_id)}else delete a.z;var c=n.path+obj2qs(a)+(n.hash||"");n.go(c,null,{push_only:!0})}if(this.destroy(),e.isPopState&&e.storyRaw){var u=this._parseList(e.storyRaw).split("/"),d=g(u,2),f=d[1];this.store?this.restore(this.store.storyList,f,e.storyRaw,e):this.init(e.storyRaw,{replace:!0})}else this.store&&this.store.storyList&&this.restore(this.store.storyList,!1,!1,e)},hideAllViews:function(){var e=window.store;e&&(e.storiesLayers=[],e.stories&&Object.keys(e.stories).forEach(function(t){e.stories[t].showViews=!1,e.stories[t].isStopped=!1}))},restore:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(window.store.storiesLayers){var i=window.store.storiesLayers.indexOf(e);window.store.storiesLayers.splice(i,1)}if(window.store.storiesLayers.length||t||n){t=t||window.store.storiesLayers[window.store.storiesLayers.length-1];var r=window.store.stories[e],o=window.store.stories[t];if(r&&o){var s=Object.keys(r.readedStories);(0,p.each)(s,function(e,t){var n=g(t.split("_"),3),a=n[0],i=(n[1],n[2],o.replies[r.replyTo]);if(i){var s=g(i.filter(function(e){return e.owner_id==a}),1)[0];s&&(s.has_new=!1)}}),this.init(o.initRaw,{restore:!0,forceAuthorIndex:!1,reply:!0})}else n&&this.init(n,{restore:!0,forceAuthorIndex:!1,reply:!0})}else this.hideAllViews();a.closeAll&&window.store.storiesLayers.length&&this.close(a)},clearStore:function(){this.store=this._initStore()},destroy:function(){var e=this;if(this.restoreAudio(),this.store){this.slider=null,this.hideMenu(!1),this._abortRequests(),this._requestReadStories(),(0,p.removeClass)(this.layer,"Stories_inited");var t=this.getCurrentAuthorIndex();if(void 0!==t&&this.Authors)this.Authors[t].destroy();this.onRender.off(),(0,p.remove)(this.layer),Object.keys(this).forEach(function(t){"store"!==t&&"supportAutoplay"!==t&&"function"!=typeof e[t]&&(e[t]=null,delete e[t])}),zlayer.close(),(0,p.addClass)(ge("StoriesFeedBlock"),"StoriesFeedBlock_been-open"),(0,p.removeClass)(document.body,"vk__story_open"),y.opened=!1;var n=(0,p.geByClass1)("Question__popup"),a=(0,p.geByClass1)("Popup__overlay",n);a&&d.default.close(a)}},isAutoplaySupport:function(){return this.supportAutoplay},isGoodBrowser:function(){return o.default.ios&&o.default.safari_mobile&&parseInt(o.default.version,10)>=10},detectAutoplay:function(){var e=this;return new Promise(function(t){if(e.supportAutoplay)t();else{if(e.isGoodBrowser())return e.supportAutoplay=!0,void t();e.supportAutoplay=!1;var n=(0,p.ce)("video"),a=(0,p.ce)("source");a.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var i=(0,p.ce)("source");i.src="data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM",(0,p.append)(i,n),(0,p.append)(a,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),(0,p.append)(n,document.body);var r=ge("base64testvideo");if(o.default.android&&o.default.chrome)return e.supportAutoplay=!0,(0,p.remove)(n),t(),void clearTimeout(e.autoDetectTimeout);if(o.default.mobile&&o.default.ios&&o.default.ios<10)return e.supportAutoplay=!1,(0,p.remove)(n),t(),void clearTimeout(e.autoDetectTimeout);if(!o.default.safari_mobile||o.default.safari_mobile&&parseInt(o.default.version,10)>=10){var s=n.play();void 0!==s&&s.then(function(){e.supportAutoplay=!0,(0,p.remove)(n),t(),clearTimeout(e.autoDetectTimeout)}).catch(function(e){})}r.onplay=function(){e.supportAutoplay=!0,(0,p.remove)(n),t(),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout(function(){r.paused||(e.supportAutoplay=!0),(0,p.remove)(n),t()},250)}})},narrativeReply:function(){this.setCurrentStory(0),this.renderStory(),this._sendNavigationStatEvents("narrative_replay")},narrativeGoToStories:function(){this.nextStory(),this._sendNavigationStatEvents("narrative_go_to_stories")},_showTooltip:function(e,t){if(this.hideMenu(!1),this.hideFlashPopup(!1),e&&t)if(this.tooltip)this._hideTooltips();else{var n=this.getCurrentAuthorEl();this.tooltip=(0,p.ce)("div",{className:"StoriesTooltip"},{top:0,left:0}),this.tooltipArrow=(0,p.ce)("span",{className:"StoriesTooltip__arrow"}),this.tooltip.appendChild(t),this.tooltip.appendChild(this.tooltipArrow),n.appendChild(this.tooltip);var a=0,i=0;"touchend"===e.type?(a=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(a=e.clientX,i=e.clientY);var r=n.getBoundingClientRect(),o=r.top,s=r.left,l=r.width,c=g(getSize(this.tooltip),2),u=c[0],d=i-(o+c[1]+10),f=a-(s+u/2);setStyle(this.tooltip,{top:Math.max(d,2),left:Math.min(Math.max(f,2),l-u-2)}),setStyle(this.tooltipArrow,{left:Math.max(Math.min(a-s-Math.min(Math.max(f,0),l-u),u-15),15)}),this.pauseStory()}else this.playStory()},_showFeatureTooltipIfNeeded:function(){var e=this,t=window.store.storiesLists;if(t&&t.needShowFeatureTooltip){var n=y.getCurrentAuthorEl(),a=(0,p.geByClass1)("StoriesFeatureTooltip",n);if(a){var i=setTimeout(function(){e.pauseStory(),(0,p.addClass)("StoriesFeatureTooltip--show",a),e.featureTooltip=a,e.featureTooltipHash=t.needShowFeatureTooltipHash},2e3);t.needShowFeatureTooltip=!1,cur&&isArray(cur.destroy)&&cur.destroy.push(function(){clearTimeout(i)})}}},_hideFeatureTooltip:function(e){if(this.featureTooltip){var t=y.getCurrentAuthorEl(),n=(0,p.geByClass1)("StoriesFeatureTooltip",t);n&&(e||this.playStory(),(0,p.removeClass)("StoriesFeatureTooltip--show",n),this.featureTooltip=null,ajax.post("stories.php",{_ajax:1,act:"hide_feature_tooltip",type:"stories_pin",hash:this.featureTooltipHash}),this.featureTooltip=null,this.featureTooltipHash=null)}},_hideTooltips:function(e){this._hideFeatureTooltip(e),this.tooltip&&(e||this.playStory(),(0,p.remove)(this.tooltip),delete this.tooltip)},_createNarrativeTooltipLink:function(){var e=this.getCurrentStory().narrative||{};return(0,p.ce)("div",{className:"Stories__tooltip-link",innerHTML:lang.mobile_stories_narrative_show,onclick:function(){y._hideTooltips(!0),y.openNarrative("".concat(e.owner_id,"/narrative").concat(e.raw_id),{source:"narrative_story",isOpenNarrativeFromFeed:!0})}})},_hasContext:function(e){return!(!this.extra||!this.extra.context||this.extra.context!==e)},sendAnalyticsEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=y.getCurrentStory(),a=y.getCurrentAuthor(),i=y.getCurrentStoryIndex(),r=n.raw_id.split("_"),o=g(r,2),s=o[0],l=o[1],c=y._getSource(),u={event_type:e,story_owner_id:s,story_id:l,time:vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3),view_entry_point:c,nav_screen:cur.module};if(a){var d=a.data,f=a.getCountDown();f&&d&&extend(u,{stories_author_before:i,stories_author_after:d.items.length-i,view_event_timeline_position:f.initialTime-f.left})}Object.assign(u,t),statlogsValueEvent("story_product_analytics",u)},clickAuthor:function(){this.sendAnalyticsEvent("go_to_author")},askQuestionBox:function(e){(0,p.cancelEvent)(e);var t=this.getCurrentStory().can_ask;if(this.hideFlashPopup(!1),this.sendAnalyticsEvent("click_on_clickable_sticker"),this._hideTooltips(),!t)return y.showFlashPopup(lang.mobile_stories_ask_question_forbidden),!1;this.stopStory(),(0,p.addClass)(this.layer,"Stories_questionOpened");var n=this.authors[this.store.authorIndex],a=(0,p.geByClass1)("Story__questionTextarea",n);requestAnimationFrame(function(){a&&a.focus()})},changeAskAnonymous:function(e){e.preventDefault();var t=this.getCurrentStory();if(t){var n=(0,p.intval)(!(0,p.intval)((0,p.domData)(e.target,"anonymous")));(0,p.domData)(e.target,"anonymous",n),t.isAskAnonymous=n,(0,p.val)(e.target,n?lang.mobile_stories_ask_question_anonymous:lang.mobile_stories_ask_question_own_name)}},hideAskQuestion:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];y.store.showMenu=!1,(0,p.removeClass)(y.layer,"Stories_questionOpened"),e&&y.playStory()},onInputQuestion:function(e){$(".Story__questionSend").disabled=!(0,p.trim)((0,p.val)(e))},sendQuestion:function(){var e=y.getCurrentAuthorEl();if(e){var t=(0,p.geByClass1)("Story__questionTextarea",e),n=(0,p.geByClass1)("Story__questionSend",e),a=y.getCurrentStory(),i=a.raw_id,r=a.askQuestionHash,o=a.accessKey,s=a.isAskAnonymous,l=g(i.split("_"),2),c=l[0],u=l[1],d=(0,p.trim)((0,p.val)(t));(0,p.val)(t,""),n.disabled=!0;var f=ajax.post("stories.php",{_ajax:1,act:"ask_question",story_owner_id:c,story_id:u,question_text:d,is_anonymous:s,hash:r,access_key:o},{onDone:function(e){if(!e)return y.showFlashPopup(lang.mobile_stories_question_error),!1;var t=y.getCurrentAuthor().data.author;y.showFlashPopup(lang.mobile_stories_question_sent.replace("{name}",t.first_name_ins)),s?y.sendAnalyticsEvent("question_reply_anonymous"):y.sendAnalyticsEvent("question_reply")}});y._saveRequest(f),y.hideAskQuestion()}},getQuestionById:function(e){var t=this.getCurrentStory();return this.store.questions[t.raw_id].find(function(t){return t.id===e})},openQuestionActions:function(e){var t=this.getQuestionById(e);if(t){var n=t.canAnswer,i=t.isOwnerBlocked,r=t.canBlocked,o=[(0,d.ModalMenuBtn)({inner:lang.mobile_stories_question_delete,onclick:["Stories.removeQuestion","this",t.id]})];r&&(o.push((0,d.ModalMenuBtn)({inner:i?lang.mobile_stories_question_unban:lang.mobile_stories_question_ban,onclick:["Stories.banQuestion","this",t.id]})),o.push((0,d.ModalMenuBtn)({inner:lang.mobile_stories_question_report,onclick:["Stories.reportQuestion","this",t.id]}))),n&&o.unshift((0,d.ModalMenuBtn)({inner:lang.mobile_stories_question_reply,onclick:["Stories.replyQuestionBox","this",t.id]}));var s=(0,d.default)({class:"Question__popup",items:o});f.default.open(a.default.elem(s),!0)}},removeQuestion:function(e,t){var n=this,a=this.getQuestionById(t),i=a.storyOwnerId,r=a.storyId,o=a.id,s=a.removeHash;ajax.post("stories.php",{_ajax:1,act:"remove_question",story_owner_id:i,story_id:r,question_id:o,remove_hash:s},{onDone:function(a){var s="".concat(i,"_").concat(r);if(d.default.close(e),!a)return requestAnimationFrame(function(){return n.showFlashPopup(lang.mobile_stories_question_error)}),!1;$$('.Question[data-id="'.concat(t,'"]')).forEach(function(e){return re(e)}),n.store.questions[s]=n.store.questions[s].filter(function(e){return e.id!==t}),$$(".Question").length<1&&re((0,p.geByClass1)("Views__questions")),y.sendAnalyticsEvent("question_delete",{questionId:o})}})},replyQuestionBox:function(e,t){var n=this.getCurrentStory(),i=this.getQuestionById(t),r=i.author,o=i.text,s=lang.mobile_stories_question_reply_title.replace("{name}",r.nameGen),l=a.default.elem({class:"QuestionReplyPopup",inner:[{class:"QuestionReplyPopup__inner",inner:[{class:"QuestionReplyPopup__header",inner:[{class:"QuestionReplyPopup__preview",style:"background-image: url(".concat(n.small_preview,")")},{class:"QuestionReplyPopup__top",inner:[{class:"QuestionReplyPopup__title",inner:s},{class:"QuestionReplyPopup__question",inner:o}]}]},{class:"QuestionReplyPopup__content",inner:[{class:"QuestionReplyPopup__textarea",tag:"textarea",placeholder:lang.mobile_stories_comment_textarea,oninput:"Stories.onInputReplyQuestion(this);"}]},{class:"QuestionReplyPopup__footer",inner:[(0,h.default)({class:"QuestionReplyPopup__send",theme:"regular",inner:lang.mobile_stories_question_reply_to_message,on_click:["Stories.sendReplyQuestion",t],disabled:!0}),(0,h.default)({class:"QuestionReplyPopup__cancel",theme:"link",inner:lang.mobile_stories_comment_cancel,on_click:["Stories.hideReplyQuestion"]})]}]}]});this.popout.appendChild(l),d.default.close(e)},hideReplyQuestion:function(){re((0,p.geByClass1)("QuestionReplyPopup",y.popout))},onInputReplyQuestion:function(e){$(".QuestionReplyPopup__send").disabled=!(0,p.trim)((0,p.val)(e))},sendReplyQuestion:function(e){var t=(0,p.trim)((0,p.val)((0,p.geByClass1)("QuestionReplyPopup__textarea"))),n=y.getQuestionById(e),a=n.id,i=n.ownerId,r=n.storyOwnerId,o=n.storyId,s=n.sendHash,l="story".concat(r,"_").concat(o),c="".concat(t,"\n\n🗣 ").concat(n.text),u=ajax.post("mail.php",{_ajax:1,act:"send",hash:s,media:l,message:c,to:i},{onDone:function(e){var t=e&&e.error?e.message:lang.mobile_stories_comment_success;y.showFlashPopup(t,!1),y.sendAnalyticsEvent("question_send_message",{questionId:a})}});y._saveRequest(u),y.hideReplyQuestion()},showQuestions:function(e){var t=new c.default(e).render();this.popout.appendChild(t),y.sendAnalyticsEvent("question_show_all")},hideQuestions:function(){re((0,p.geByClass1)("Questions",this.popout))},banQuestion:function(e,t){var n=this.getQuestionById(t),a=n.storyOwnerId,i=n.storyId,r=n.banHash,o=n.isOwnerBlocked;ajax.post("stories.php",{_ajax:1,act:"ban_question",story_raw:"".concat(a,"_").concat(i),question_id:t,ban_hash:r,is_blocked:+o},{onDone:function(a){if(!a)return d.default.close(e),void y.showFlashPopup(lang.mobile_stories_question_error,!1);if(!o){var i="question_ban_author";n.isAnonymous&&(i="question_ban_anonymous_author"),y.sendAnalyticsEvent(i,{questionId:t})}d.default.close(e),n.isOwnerBlocked=!o,y.showFlashPopup(o?lang.mobile_stories_question_author_unblocked:lang.mobile_stories_question_author_blocked,!1)}})},reportQuestion:function(e,t){var n=this.getQuestionById(t),a=this.getFrom();d.default.close(e);var i="story_question".concat(n.storyOwnerId,"_").concat(n.id);nav.go("/reports?act=add&object=".concat(i,"&refrom=").concat(a))},toggleQuestionTooltip:function(e,t){var n=$(".QuestionSupport");(0,p.cancelEvent)(e),n&&(t?(0,p.removeClass)(n,"QuestionSupport--active"):(0,p.toggleClass)(n,"QuestionSupport--active"))},openMusicStickerActions:function(e,t){var n=ge("audio".concat(e)),i=hasClass("ai_added",n),r=(0,d.default)({close:!0,items:[(0,d.ModalMenuBtn)({class:"ai_add",inner:i?lang.global_delete_audio:lang.global_add_to_audio,onclick:'Stories.addMusic(this, "'.concat(e,'", ').concat(i,");")}),(0,d.ModalMenuBtn)({class:"ai_add",inner:lang.mobile_stories_music_next,onclick:"Stories.nextMusic(this, ".concat(t,");")})]}),o=a.default.elem(r);o.setAttribute("id","ai_menu_".concat(e)),f.default.open(o,!0)},addMusic:function(e,t,n){audioplayer.add(t),d.default.close(e),y._hideTooltips(!0),y.showFlashPopup(n?lang.mobile_stories_music_deleted:lang.mobile_stories_music_added)},nextMusic:function(e,t){var n=window,a=n.audio,i=n.audioplayer,r=(0,A.asObject)(t);if(a.getCurrentId()){var o=a.playlist().map(function(e){return e.id}).indexOf(a.getCurrentId())+1;a.addToPlaylist([r],o)}else i.playPause(!1,r.fullId,!0),a.pause();d.default.close(e),y._hideTooltips()},onRender:(0,i.default)()};page.onChange(function(){window.store.storiesLayers=[],window.store.stories={}}),window.Stories=y},"98L6":function(e,t,n){"use strict";window.FeedBlocks={hideReason:function e(t,n){if(e.progress)return!1;e.progress=!0;var a="block_"+t,i=ge(a);cur.feedBlocksHTML&&delete cur.feedBlocksHTML[a],ajax.post("feed.php",{act:"block_hide_reason",block_id:t,reason:0|n,hash:attr(i,"data-hash"),pos:attr(i,"data-pos"),ref:attr(i,"data-ref")},{onDone:function(t){e.progress=!1,t?val(i,t):hide(i),e.progress=!1},onFail:function(){e.progress=!1}})},restore:function(e){var t="block_"+e,n=ge(t);cur.feedBlocksHTML&&cur.feedBlocksHTML[t]&&val(t,cur.feedBlocksHTML[t]),ajax.post("feed.php",{act:"block_restore",block_id:e,hash:attr(n,"data-hash"),pos:attr(n,"data-pos"),ref:attr(n,"data-ref")})},hide:function e(t,n){if(e.progress)return!1;e.progress=!0,post.wallActionsHide();var a="block_"+t,i=ge(a);return ajax.post("feed.php",{act:"block_hide",block_id:t,hash:attr(i,"data-hash"),pos:attr(i,"data-pos"),ref:attr(i,"data-ref")},{onDone:function(t){post.wallActionsHide(),cur.feedBlocksHTML||(cur.feedBlocksHTML={}),cur.feedBlocksHTML[a]=val(i),val(i,t),e.progress=!1},onFail:function(){e.progress=!1}}),!1}}},"9CLW":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("+cqQ"))&&a.__esModule?a:{default:a};var r={onIframeReady:(0,i.default)("{ is_api, check_transfer_url, on_success_url }"),onPostMessage:(0,i.default)(),onAcceptCookieClick:(0,i.default)()};function o(e){var t;if(e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)){try{t=JSON.parse(e.data)}catch(e){t={}}"billing"===t.type&&r.onPostMessage(t.action,t.action_params)}}r.onIframeReady(function(){addEvent(window,"message",o),window.cur.destroy.push(function(){removeEvent(window,"message",o)})}),window.BasisMoneyTransfer=r;var s=r;t.default=s},"9Cbe":function(e,t,n){"use strict";var a=n("OcsD");window.SliderTabs={},SliderTabs._onClick=f,onDOMReady(d),page.onChange(l),page.onRestore(c);var i={container:"SliderTabs",scroll:"Slider__scroll",active:"SliderTabs__tab_selected"},r={active:".SliderTabs__tab_selected",tab:".SliderTabs__tab",scroll:".".concat(i.scroll),container:".".concat(i.container)},o="",s=0;function l(){var e=ge(o),t=$(r.container);if(e){var n=$(r.scroll,e),i=$(r.active,e);n.scrollLeft=s;var l=(0,a.getX)(i);if(s>l){n.scrollLeft=l-16}}else t?u():(o="",s=0)}function c(){setTimeout(function(){var e=ge(o);if(e){var t=Array.from($$(r.tab,e));if(t)t.some(function(e){return e.getAttribute("href")===nav.cur})&&t.forEach(function(e){e.getAttribute("href")===nav.cur?e.classList.add(i.active):e.classList.remove(i.active)})}})}function u(){var e=$$(r.container),t=Math.min((0,a.getCw)(),882);e.forEach(function(e){var n=$(r.scroll,e),i=$(r.active,e);if(i){var o=i.offsetWidth,s=(0,a.getX)(i);s+o>t&&(n.scrollLeft=s-t+o)}})}function d(){u()}function f(e,t){var n=(0,a.gpeByClass)(i.container,t),l=(0,a.gpeByClass)(i.scroll,t),c=$(r.active,n);return c&&c.classList.remove(i.active),t.classList.add(i.active),s=l.scrollLeft,o=attr(n,"id"),!0}},"9EK6":function(e,t,n){"use strict";var a=n("tMHi"),i=_(n("+cqQ")),r=n("jk6M"),o=n("lkNA"),s=n("fOXz"),l=n("XBHu"),c=n("uU5W"),u=n("W9Tc"),d=n("0bdD"),f=n("D+pY"),h=n("8mQl"),p=n("YQfe"),A=n("J8bf"),m=_(n("xk4V"));function _(e){return e&&e.__esModule?e:{default:e}}var v=function(){if(!HTMLAudioElement)return{init:function(){},playing:function(){},onInit:function(){},onSelect:function(){},pause:function(){},onAdStart:function(){},onAdComplete:function(){}};var e=!1,t=!1,n=!1,s=!1,l=!1,c=function t(n){(e||!1!==l)&&(e=!1,M&&!1===l||(s=!0,O.pause.call(y))),cancelEvent(n),removeEvent(y,"play",t),removeEvent(document,r.isTouch?"touchstart":"click",_)},f=function(){!1!==l&&l()},_=function t(){n&&(n=!1,e=!0,B(y),removeEvent(document,r.isTouch?"touchstart":"click",t))},y=function(t){var n=window.Audio?new Audio:ce("audio");n.autobuffer=!0,n.muted=!1,n.preload="none",t&&(n.volume=t.volume,removeEvent(t,"play",L),removeEvent(t,"pause",R),removeEvent(t,"progress",N),removeEvent(t,"timeupdate",j),removeEvent(t,"ended",F),removeEvent(t,"play",c),removeEvent(t,"progress canplaythrough",f),removeEvent(document,r.isTouch?"touchstart":"click",_),t.muted=!0,t.pause(),t.src=null);return T=!1,P=!1,!1,e=!1,s=!1,l=!1,addEvent(n,"play",L),addEvent(n,"pause",R),addEvent(n,"progress",N),addEvent(n,"timeupdate",j),addEvent(n,"ended",F),addEvent(n,"play",c),addEvent(n,"progress canplaythrough",f),addEvent(document,r.isTouch?"touchstart":"click",_),n}(),b=srand(),w=[],E=null,k={},S="",C=null,M=!1,P=!1,T=!1,D=null,I=!1,x=!1;delete HTMLAudioElement.prototype.play,delete HTMLAudioElement.prototype.pause,delete HTMLAudioElement.prototype.load,delete HTMLAudioElement.prototype.canPlayType;var O={play:HTMLAudioElement.prototype.play,pause:HTMLAudioElement.prototype.pause,load:HTMLAudioElement.prototype.load,canPlayType:HTMLAudioElement.prototype.canPlayType};function B(e){var t=O.play.call(e);void 0!==t&&t.catch(function(e){e.code!==e.ABORT_ERR&&window.audio.pause()})}function L(){M||(M=!0,v.onPlay(!0),ssSet("audio_play","1"),clearTimeout(D),D=setTimeout(z,100)),audioBackgroundRestriction&&audioBackgroundRestriction.isIdle&&v.pause()}function R(){s?s=!1:M&&(M=!1,v.onPause(!0),ssSet("audio_play","0"),clearTimeout(D))}function N(){v.onProgress(!0)}function j(){s||(v.onProgress(!0),v.onPositionChanged(!0,v.getPosition(),v.duration()),v.onTimeUpdate(!0),ssSet("audio_pos",v.getPosition()),!T&&y.duration-y.currentTime<.5&&(T=!0),P&&(P=!1,v.next()))}function F(){v.onEnded(!0),T?(T=!1,y.src!==p.SILENCE&&v.next()):P=!0}function H(){return w[E]||!1}function V(){return H().fullId||!1}function U(e,t){if(e){var n,i=(0,a.audioUnmaskSource)(e.url),r=function(){return v.onSelect(!0,e)};n=e.url,/\.m3u8/.test((0,a.audioUnmaskSource)(n))?function e(t,n,a){var i=window,r=i.Hls,s=i.browser;var l=function(){isFunction(a)&&a()};if(!r)return s.safari&&B(y),void(0,o.loadScript)("/js/lib/hls.min.js",{onLoad:function(){return e(t,n,a)}});if(r.isSupported()&&!s.msie_edge){q&&q.destroy();var c=new r({maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxBufferLength:240});c.attachMedia(t),c.loadSource(n),c.on(r.Events.ERROR,function(e,t){t.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(c.stopLoad(),c.startLoad())}),c.on(r.Events.MANIFEST_PARSED,function(){return l()}),q=c}else t.canPlayType("application/vnd.apple.mpegurl")&&(t.src=n,l())}(y,i,r):(y.src=i,t||O.load.call(y),r())}}function z(){if(M){var e=lsGet("audio_current_player");b!=e?v.pause():D=setTimeout(z,100)}}function W(){var e=V();ssSet("audio_id",e),I&&((0,A.setCookie)(I,e,1),(0,A.setCookie)(I+"_playlist",C,1))}var q=null;return{onInit:(0,i.default)(),init:function(e){if(!x&&v.support){x=!0,e.cookie&&(I=e.cookie,e.cookie_path||"/");var t=ssGet("audio_pos"),n=ssGet("audio_vol");onDOMReady(function(){e.playlist&&v.playlist(e.playlist,{q:e.playlist_q||""});var a=ssGet("audio_id");if(a){y.addEventListener("loadeddata",function e(){a===V()&&(null!==t&&v.setPosition(t),null!==n&&v.volume(n)),y.removeEventListener("loadeddata",e)}),U(w[E]),v.select(a),null!==t&&v.onPositionChanged(!0,t,v.duration())}v.onInit()})}},support:y.canPlayType&&O.canPlayType.call(y,"audio/mpeg")&&"no"!=O.canPlayType.call(y,"audio/mpeg")||!1,onPlay:se(V),onPause:se(V),onAdStart:se(H),onAdComplete:se(H),onDeselect:se(H),onSelect:se(),onProgress:se(V,function(){return v.loaded()},function(){return v.duration()}),onPositionChanged:se(V),onTimeUpdate:se(V),onVolumeChanged:se(V,function(){return y.volume}),onEnded:se(V),onNotFoundError:se(),onEmptyPlaylistError:se(),getCurrent:H,getCurrentId:V,operate:function(e){if(!v.support)return!1;!e||w[E]&&e==w[E].fullId?M?v.pause():v.play():v.play(e)},playing:function(){return M},select:function(e){if(!v.support)return!1;if(e){if(!w.length)return v.onEmptyPlaylistError(!0,e),!1;if(!w[k[e]])return v.onNotFoundError(!0,e),!1;V()&&v.onDeselect(!0),E=k[e];var t=audioplayer.getPlaylistByAudioId(e);return C!==t&&audioplayer.onPlaylistChanged(),C=t,U(w[E],!0),W(),!0}},autoplay:function(e){v.play(e),y.paused&&v.pause()},getCurrentPlaylistId:function(){return C},play:function(e){var t=this;if(!v.support)return!1;if(e){if(M&&v.pause(),!v.select(e))return;try{y.currentTime=.01}catch(e){}}g.isPlaying()?M?g.pause():g.resume():M||(y.muted=!1,y.preload="auto",M=!0,v.onPlay(!0),e&&(0,u.partConfigEnabled)("mvk_audio_ads")?(browser.safari&&O.load.call(y),g.startPlay(w[k[e]],!1,function(){t._play()})):this._play())},_play:function(){B(y),ssSet("audio_play","1"),lsSet("audio_current_player",b),h.AudioQueue.connect()},pause:function(){if(!v.support)return!1;M&&(O.pause.call(y),g.isPlaying()&&g.pause(),M=!1,v.onPause(!0),ssSet("audio_play","0"))},getDeviceId:function(){var e=lsGet("audio_player_device_id");return e||(e=(0,m.default)(),lsSet("audio_player_device_id",e)),e},getPosition:function(){return v.isAdsPlaying()?g.getCurrentProgress()*g.getDuration():y.currentTime},setPosition:function(e,t){if(!v.support)return!1;var n;n=e,t&&(n=v.duration()*e),n=Math.max(0,Math.min(n,v.duration())),y.currentTime=n,ssSet("audio_pos",n),v.onPositionChanged(!0,n,v.duration())},volume:function(e){if(!v.support)return!1;if(void 0===e)return y.volume;try{y.volume=e||0,g.updateVolume()}catch(e){}v.onVolumeChanged(!0),ssSet("audio_vol",e||0)},loaded:function(){return y.buffered&&y.buffered.length&&y.buffered.end(y.buffered.length-1)||0},duration:function(){return this.isAdsPlaying()?g.getDuration():y.duration||w[E]&&w[E].duration||0},played:function(){for(var e=y.played,t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return t},next:function(){if(!v.support)return!1;M&&v.pause(),v.onDeselect(!0),++E>=w.length&&(E=0),U(w[E]),W(),n=!0,v.play(V())},prev:function(){if(!v.support)return!1;M&&v.pause(),v.onDeselect(!0),--E<=0&&(E=w.length-1),U(w[E]),W(),n=!0,v.play(V())},playlist:function(e,t){return!!v.support&&(void 0===e?w:(M&&v.pause(),H()&&v.onDeselect(!0),w=e,S=t&&t.q||"",E=null,k={},each(e,function(e,t){k[t.fullId]=e}),void function(e){ssSet("audio_query",e),I&&(0,A.setCookie)(I+"q",encodeURIComponent(e),1)}(S)))},addToPlaylist:function(e,t){var n={},a=t||w.length;w.forEach(function(e){return n[e.fullId]=!0}),e.forEach(function(e){n[e.fullId]||(t?w.splice(a,0,e):w.push(e))})},playlist_q:function(){return S},setIsPlaying:function(e){M=e},isAdsPlaying:function(){return g.isPlaying()},initSplash:function(){t||(window.audioRestrictionSplash=new d.RestrictionSplash,t=!0)},playNothing:function(){y.src=p.SILENCE,O.load.call(y)}}}();window.Artist=s.Artist,window.audio=v,window.AudioBackgroundRestriction=f.AudioBackgroundRestriction;var g=new l.AudioAds(new c.AdsPlayerAdapter(v),null,!0);window.audioBackgroundRestriction=null,document.addEventListener("DOMContentLoaded",function(){(0,u.partConfigEnabled)("audio_mvk_background_restriction_enabled")&&(window.audioBackgroundRestriction=new f.AudioBackgroundRestriction)}),document.addEventListener("DOMContentLoaded",function(){"audio"===cur.module&&v.initSplash()}),window.page.onChange(function(){"audio"===cur.module?v.initSplash():window.audioRestrictionSplash&&window.audioRestrictionSplash.popup&&window.audioRestrictionSplash.close()})},"9HII":function(e,t,n){"use strict";var a=n("UxAg");window.AudioSpecialForYou={selector:".AudioSpecialForYou",setPlaying:function(e){var t=(0,a.$)(i.special);t&&t.classList.toggle(r.playing,e)}};var i={special:window.AudioSpecialForYou.selector},r={playing:"AudioSpecialForYou_playing"}},"9Hyc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("bZ/P")),i=s(n("Mc5h")),r=s(n("9y81")),o=s(n("AXyT"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=a.default.class(e.mix,"Unfold",{position:e.position,asIcon:!!e.icon||!!e.icon_html,open:e.opened,withTitle:!!e.title}),n=a.default.list(e.items,u);return Wd.html({class:t,"data-name":e.name,onclick:e.onclick,inner:[c(e),{class:"Unfold__popup ScrollView ".concat(e.popup_class),inner:Wd.wrap(n)}]})};function c(e){var t,n=e.title;if(e.icon)t=(0,r.default)({icon:e.icon});else if(e.icon_html)t=e.icon_html;else{for(var o=e.items,s=o.length,l="",c="",u=0;u<s;u++){var d=o[u];if(d&&d.active){l=d.text,c=d.activeCount;break}}t=[(0,i.default)({mix:"Unfold__triggerText",tag:"h1",inner:[Wd.html({class:"Unfold__triggerContent",inner:n?[{class:"Unfold__triggerContentTitle",inner:n},{class:"Unfold__triggerContentSubTitle",inner:l}]:[l,c?Wd.html((0,i.default)({mix:"Unfold__triggerTextCount",inner:c})):""]})]}),(0,r.default)({mix:"Unfold__triggerIcon",icon:"reveal"})],t=a.default.list(t)}return{href:e.opened?e.close_url:e.open_url,class:"Unfold__trigger",onclick:["Unfold._onTriggerClick","event"],onmousedown:["Unfold._onTriggerMouseDown","this"],attrs:e.trigger_attrs,inner:Wd.wrap(t)}}function u(e){if(!e)return"";var t="";return e.icon&&(t="string"==typeof e.icon?(0,r.default)({mix:"Unfold__itemIcon",icon:e.icon}):(0,i.default)({mix:a.default.class("Unfold__itemIcon",e.icon.class)})),(0,i.default)({mix:a.default.class(e.mix,"_touched","replaceState","Unfold__item",{active:e.active,name:e.name,disabled:e.disabled}),url:e.url,tag:e.tag,attrs:e.attrs,inner:[t,(0,i.default)({mix:"Unfold__itemText",inner:[e.text,e.count?(0,i.default)({mix:"Unfold__itemCountHidden",inner:e.count}):""]}),e.count?(0,o.default)({mix:"Unfold__itemCount",gray:!0,value:e.count}):""]})}t.default=l},"9M99":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiToHTML=void 0;var a=n("yqpO");t.emojiToHTML=function(e){return(0,a.emojiToHTML)(e,!0)}},"9RP+":function(e,t,n){"use strict";var a,i=(a=n("rKUZ"))&&a.__esModule?a:{default:a},r=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("AWn4"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}Object.assign(r.default,{redraw:function(){if(!store.mail.cur.peerId)return;var e=i.default.getElem("curConvo"),t=(0,r.uCurConvoTyping_getParams)();q.parseClass("typing",e.className).animation===t.animation?i.default.setTyping(e,t):e.outerHTML=(0,i.default)(t)}})},"9SvD":function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.QuadAlgorithm=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}var t,n,i;return t=e,(n=[{key:"push",value:function(e){this._count++,this._accum+=e,this._accum_q+=e*e}},{key:"get",value:function(){return 1==this._count?this._accum:Math.sqrt((this._accum_q-this._accum*this._accum/this._count)/this._count)}},{key:"clear",value:function(){this._count=0,this._accum=0,this._accum_q=0}}])&&a(t.prototype,n),i&&a(t,i),e}();t.QuadAlgorithm=i},"9qLg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("+cqQ"))&&a.__esModule?a:{default:a},r=n("izth");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=function(){var e=null,t={},n=1,a=null,l=!1,c=!1;function u(){n<64&&(n*=2)}function d(e,t){var n=window.al;if(!1===e&&(e=getNotify()+(t||1)),setNotify(e),window.al&&window.al.menu){var a=new Array(n.menu.length);a[3]=e,menu.refreshCounters(a)}}function f(e){return Object.keys(e).some(function(e){return-1!==e.indexOf("attach")})||e.fwd||e.emoji||e.geo}function h(e,t,n){var a=toInt(e.from_admin)||null,i=toInt(nav.getQuery("community"));return a&&i?i:2&t?window.vk.id:toInt(e.from)||n}function p(){return Number(nav.getQuery("offset"))>0}function A(e){try{return JSON.parse(e)}catch(e){return null}}return{onNewMsg:(0,i.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags, isService }"),onEditMsg:(0,i.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags }"),onMsgReadByMe:(0,i.default)("msgId","dialogId"),onMsgReadByOther:(0,i.default)("msgId","dialogId"),onOnlineChange:(0,i.default)("{ userId, isOnline, onlinePlatform, lastActionTime }"),onTyping:(0,i.default)("dialogId","authorId"),onMultiTyping:(0,i.default)("peerId","userIds","totalCount"),onMsgImportantRemove:(0,i.default)("msgId"),onMsgImportantAdd:(0,i.default)("msgId"),onMsgRemove:(0,i.default)("msgId"),onMsgRestore:(0,i.default)("msgId"),onPeerKeyboard:(0,i.default)("peerId"),onPeerBanner:(0,i.default)("peerId"),onDialogImportant:(0,i.default)("peerId","isImportant"),onUnreadCount:(0,i.default)("count"),onResync:(0,i.default)(),isLongPollingEnabled:function(){return!!l},init:function(t){e||((0,r.setDocumentDomain)(),e=ce("iframe",{src:t.frameUrl},{display:"none"}),onDOMReady(function(){append(e,window.bodyNode),!0})),s.refreshParams(t),setTimeout(s.check,1e3)},on:function(){clog("[longpoll] start"),l=!0,setTimeout(s.check,1e3)},off:function(){clog("[longpoll] pause"),l=!1},refreshParams:function(e){extend(t,e||{}),extend(s,t)},getKey:function(){if(a)try{a.abort()}catch(e){}a=ajax.post("/mail",{_ajax:1,act:"im_get_key",community:nav.getQuery("community")},{onDone:function(e){/[0-9a-f]{40}/i.test(e)?(s.refreshParams({key:e}),s.check()):clog("[longpoll] invalid key")},onFail:function(e){setTimeout(s.getKey,1e3*n),clog("[longpoll] from getKey delaying getKey for "+n+"secs"),u()}})},check:function(){if(l&&!c)if(s.makeRequest)try{s.makeRequest(function(e,t){if(c=!1,l)if(window.vk.__debug)s.checked(parseJSON(t))&&(s.check(),n=1);else try{s.checked(parseJSON(t))&&(s.check(),n=1)}catch(e){try{clog("[longpoll] error",e.message||"no message",e.type||"no type",e.stack||"no stack")}catch(e){}setTimeout(s.check,1e3*n),u()}},function(){c=!1,setTimeout(s.check,1e3*n),u()}),c=!0}catch(e){clog("[longpoll] makeRequest failed")}else setTimeout(s.check,1e3)},checked:function(e){var a,i,r,l=e.failed;if(1==l||t.ts>=e.ts+256){if(s.refreshParams({ts:e.ts}),l)return!0}else{if(2==l)return clog("[longpoll] delaying getKey for "+n+"secs"),setTimeout(s.getKey,1e3*n),u(),!1;if(l)return void clog("[longpoll]",e)}if(s.refreshParams({ts:e.ts}),e.updates){var c=[],m=!1;for(var _ in e.updates){if(116==e.updates[_][0])var v=e.updates[_][1],g=[e.updates[_][0],v.id,v.flags,v.peer_id,v.date,v.title||"",v.message,v.kludges,v.random_id];else g=e.updates[_];var y=intval(g[0]),b=intval(g[1]),w=intval(g[2]),E=intval(g[3]);if(1===w){if(10===y){mail.updateImportantDialog(b,!1);continue}if(12===y){mail.updateImportantDialog(b,!0);continue}}if(8&w){if(2===y){if(window.isNewMail){s.onMsgImportantAdd(b);continue}mail.updateImportantMessages(E,b,1);continue}if(3===y){if(window.isNewMail){s.onMsgImportantRemove(b);continue}mail.updateImportantMessages(E,b,-1);continue}}if(51!=y)if(61!=y)if(62!=y)if(8!=y)if(9!=y)if(6!=y&&7!=y)if(80!=y||!b||nav.getQuery("community"))if(52!=y){if(E)if(4!=y&&5!=y&&116!=y)if(0!=y)if(2!=y);else{if(128&w){if(window.isNewMail){s.onMsgRemove(b);continue}mail.markAsDeleted(E,b)}window.isNewMail&&64&w&&s.onMsgRemove(b)}else{if(window.isNewMail){s.onMsgRemove(b);continue}mail.markAsDeleted(b)}else{var k=5==y||116==y;if(window.isNewMail){var S=o(g,9),C=S[1],M=S[3],P=S[4],T=S[6],D=S[7],I=void 0===D?{}:D,x=S[8],O=f(I),B=(a=void 0,i=void 0,r=void 0,a=new Date(1e3*P),i=a.getHours(),r=a.getMinutes(),i+":"+(r<10?"0":"")+r),L=toInt(I.from_admin)||null,R=(toInt(nav.getQuery("community")),h(I,w,M)),N=!!I.source_act,j=I.keyboard?A(I.keyboard):null;if(k){var F={peerId:M,msgId:C,authorId:R,text:T,date:B,hasAttachments:O,flags:w,adminId:L,randomId:x};116==y?F.refreshed=1:F.edited=Math.floor(Date.now()/1e3),s.onEditMsg(F)}else s.onNewMsg({peerId:M,msgId:C,authorId:R,text:T,date:B,hasAttachments:O,flags:w,adminId:L,randomId:x,isService:N,keyboard:j});continue}var H=window.vk,V=2&w?H.id:g[7]&&g[7].from||E,U=g[7]&&g[7].source_act;m||(m=!!need("PinnedMsg").getByMsgId(b));var z=g[7].from_admin||U||m?null:mail.getMsgHTML(b,w,E,g[4],g[5],g[6],g[7],116!=y?k:"");if(z&&(k?mail.replaceMessage(E,b,V,z):p()||mail.addMessage(E,b,V,z),2&w||nav.getQuery("community")||d(!1,1)),"chat_kick_user"===U&&g[7].source_mid==H.id){var W=g[3];mail.unpinMessage(W)}z&&"chat_pin_message"!==U&&"chat_unpin_message"!==U||c.push({peer:E,msg_id:b,from_id:V,source_act:U,edited:k})}}else{var q=o(g,3),G=q[1],$=q[2];if(!window.isNewMail)continue;11==G&&s.onPeerKeyboard($),10==G&&s.onPeerBanner($)}else d(b);else{if(window.isNewMail){var Y=g[1],Q=g[2];6===y?s.onMsgReadByMe(Q,Y):s.onMsgReadByOther(Q,Y);continue}mail.markPeerAsRead(b,w,7==y)}else{if(window.isNewMail){s.onOnlineChange({userId:-b,isOnline:!1,lastActionTime:E});continue}mail.updateOnline(-b,0)}else{if(window.isNewMail){s.onOnlineChange({userId:-b,isOnline:!0,onlinePlatform:7===(w||7)?"desktop":"mobile"});continue}mail.updateOnline(-b,w||7)}else{if(window.isNewMail){var X=2e9+w,K=b;s.onTyping(X,K);continue}mail.typing(2e9+w,b)}else{if(window.isNewMail){var J=b,Z=b;s.onTyping(J,Z);continue}mail.typing(b)}}if(c.length){var ee=[];each(c,function(e,t){ee.push(t.msg_id)});var te={_ajax:1,act:"get_messages",msgs:ee.join(","),community:nav.getQuery("community")};m&&(te.force_pinned=1),ajax.post("/mail",te,{onDone:function(e,t){var n=window.cur,a=p();each(c,function(t,n){var i=e[n.msg_id],r=n.peer;i.text&&!a&&(n.edited?mail.replaceMessage(n.peer,n.msg_id,n.from_id,i.text):mail.addMessage(n.peer,n.msg_id,n.from_id,i.text)),i.unpin&&mail.unpinMessage(r),i.pinned&&mail.pinMessage(r,i.pinned)}),t&&(t.play_animation_msg_id&&StickersAnimation?StickersAnimation.loadStickerInMvkIMAndPlay(t.play_animation_msg_id):(extend(n,t),mail.updateStickers()))}})}}return!0}}}(),l=s;t.default=l},"9uOJ":function(e,t,n){"use strict";var a=o(n("i5VY")),i=n("OcsD"),r=o(n("UlUB"));function o(e){return e&&e.__esModule?e:{default:e}}store.market=store.market||{};var s={init:function(e){store.market=extend(store.market||{},e);var t=(0,r.default)(function(){if(!store.market.isLoadMore)return!1;var e=window.innerHeight,t=window.pageYOffset,n=document.body.clientHeight;!store.market.isLoading&&t>n-2*e&&ajax.post("market.php",{act:"orders_load_more",offset:store.market.offset},{onDone:function(e){store.market.offset+=10;var t=document.createDocumentFragment();e[0].forEach(function(e){t.appendChild((0,i.ceFromString)(Wd.html((0,a.default)(e))))});var n=document.querySelector(".OrdersList__onload");document.getElementById("market_orders_list_wrapper").insertBefore(t,n),e[1]||(n.innerHTML="",store.market.isLoadMore=e[1])}})},500);document.addEventListener("scroll",t),cur.destroy.push(function(){document.removeEventListener("scroll",t)})}};window.OrdersList=s},"9y81":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"IconWd",{enumerable:!0,get:function(){return a.IconWd}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("EMnU"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("vfU8");var r=a.default;t.default=r,window.Icon=a.default},"A+9M":function(e,t,n){"use strict";var a=n("J8bf");window.FeedNotifications={webActionsAcceptHandlers:{reveal_bdya:function(e,t,n,a,i){var r=gpeByClass("_block",e);return ajax.post("profileEdit.php",{act:"reveal_birthday",from:"feed_assistance",hash:i},{onDone:function(e){var t=window.Snackbar;t&&t.init&&t.init({text:e.msg}),remove(r)}}),!0}},webActionsDeclineHandlers:{},withoutNavActions:["enable_browser_notifications","reveal_bdya"],hide:function(e){function t(t,n,a,i,r,o,s,l){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,i,r,o,s,l){var c={_ajax:1,act:"hide_internal_notification",reason:i,id:t,hash:n},u={},d=gpeByClass("_block",e),f=!0;if("decline"==i){var h=this.webActionsDeclineHandlers[o];f=this.runActionHandler(h,e,c,u,s,n),hide(d)}else{var p=this.webActionsAcceptHandlers[o];f=this.runActionHandler(p,e,c,u,s,n),lockButton(e),"add_custom_newsfeed"==o&&((0,a.setCookie)("remixcustom_feed_added",s),c.action=o,c.action_section=s.section,c.action_hash=s.hash)}return u.onDone=function(){"compact"===l&&"accept"===i||cur.destroy.push(function(){return remove(d)}),~this.withoutNavActions.indexOf(o)||nav.go(e,r)}.bind(this),u.onFail=function(){unlockButton(e)},Promise.resolve(f).then(function(e){(e||isUndefined(e))&&ajax.post("/index.php",c,u)}),!1}),runActionHandler:function(e,t,n,a,i,r){return!isFunction(e)||e(t,n,a,i,r)},addWebActionAcceptHandler:function(e,t){this.webActionsAcceptHandlers[e]=t},addWebActionDeclineHandler:function(e,t){this.webActionsDeclineHandlers[e]=t}}},ACAL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o=i.default.open(e,t,{hash:n}),f=a,h=(0,r.$)(".Popup__wrap",o),void 0===a.swipeDown&&(a.swipeDown=!0);a.swipeDown&&window.innerWidth<s&&(setStyle.transform(h,1,[0,0]),scrollTop(0),addEvent(h,"touchstart",A,{passive:!0}),addEvent(h,"touchmove",_,{capture:!0}),addEvent(h,"touchcancel touchend",v,{passive:!0}))},t.close=p;var a,i=(a=n("r/ag"))&&a.__esModule?a:{default:a},r=n("UxAg");var o,s=882,l=!1,c=null,u=0,d=0,f={},h=(0,r.$)(".Popup__wrap",o);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.closest(".ModalMenu")||e;innerWidth<s?(i.default.close(n,{smooth:!0}),t.onClose&&t.onClose()):setTimeout(function(){i.default.close(n),t.onClose&&t.onClose()}),removeEvent(h,"touchstart",A,{passive:!0}),removeEvent(h,"touchmove",_,{capture:!0}),removeEvent(h,"touchcancel touchend",v,{passive:!0}),c=null,u=0,m=!1,d=0,o=null,h=null,f={}}function A(e){if(e.touches&&e.touches.length>1)l=!1;else{var t=e.target.closest(".ScrollView")||(0,r.$)(".ScrollView",e.target);(0,r.$)(".ModalMenu").classList.contains("ModalMenu--blocked")||(c=e.touches[0],u=e.touches[0].clientY,l=!(t&&t.scrollTop>1))}}var m=!1;function _(e){if(e.touches&&e.touches.length>1)l=!1;else if(c&&l){var t=e.touches[0],n=-Math.min(0,u-t.clientY);0!==n&&(cancelEvent(e),d=n,m||(o.classList.add("ModalMenu--dragging"),m=!0),setStyle.transform(h,1,[0,n]))}}function v(){l&&(l=!1,o.classList.remove("ModalMenu--dragging"),d>h.clientHeight/3?p(o,f):(o.classList.add("ModalMenu--restore"),setStyle.transform(h,1,[0,0]),setTimeout(function(){o&&o.classList.remove("ModalMenu--restore")},200)))}addEvent(window,"keydown",function(e){var t=(0,r.$)(".ModalMenu");if(t)switch(e.keyCode){case 27:p(t,f)}})},AWn4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uCurConvoTyping_getParams=s,t.default=void 0;var a,i=(a=n("rKUZ"))&&a.__esModule?a:{default:a},r=n("7jQU");var o=function(){return(0,i.default)(s())};function s(){var e,t,n=store.mail.cur.peerId,a=(0,r.uTyping_getPeerTyping)(n);return a&&("mixed"===a.type?(e="dots",t="mixed"):"audio"===a.type?(e="audio",t="audio"):"text"===a.type&&(e="dots",t="")),{id:"curConvo",typing:(0,r.uTyping_getNames)(a),typingCount:a?a.count:0,dimmed:!0,animation:e,text:t}}t.default=o},AXyT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("WTJf"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("I/8u");var r=a.default;t.default=r,Object.assign(window,{Oval:a.default,Oval_isHidden:a.OvalIsHidden})},AeId:function(e,t,n){"use strict";var a={_seen:{},_saved:{},_saveTimer:null,_sendTimer:null,_cleanTimer:null,LS_ADS_EVENTS:"ads.events",postsGetRaws:function(e){var t,n=(e=ge(e)).id||"",a=attr(e,"data-copy")||"",i={};if("block_"===n.substr(0,6)){i[n]=1,i.block=n.substr(6);var r=attr(e,"data-contain");r&&(r=r.split(",")).forEach(function(e){e=e.split(":"),i[e[0]]=intval(e[1])||1})}else(t=n.match(/^wall(adsite.*)$/))?i[t[1]]=1:(t=n.match(/^wall(-?\d+_\d+)$/))&&(i[t[1]]=1,(t=a.match(/^(-?\d+_\d+)$/))&&(i[t[1]]=-1));var o=attr(e,"data-ad-view");return o&&(i["ad_"+o]=1),i.height=e.offsetHeight,i.index=indexOf(domPN(e).children,e)-1,i},seen:function(e){var t,n,i,r,o,s,l;window.vk.id&&e.length&&(window._postsExtras||(window._postsExtras={}),e.forEach(function(e,c){o=e.index,l=e.block,s=e.height,Object.keys(e).forEach(function(c){"index"!==c&&"block"!==c&&"height"!==c&&"viewportHeight"!==c&&(n=e[c],i=a._seen[c],-1===(r=a._saved[c])||-1===i||1===n&&(r||i)||(t=a._seen[c]=n,_postsExtras[c]={index:o,block:l,height:s,viewportHeight:getCh()}))})}),t&&(clearTimeout(a._saveTimer),a._saveTimer=setTimeout(a.save,2500),clearTimeout(a._sendTimer),a._sendTimer=setTimeout(a.send,5e3)))},save:function(){if(!lsCheck()||isEmpty(a._seen))return a._seen;var e,t,n,i,r,o=window.vk,s=Math.floor((o.ts+Math.floor((vkNow()-o.started)/1e3))/3600),l=lsGet("posts_sent")||{},c=lsGet("posts_seen")||{},u=lsGet("posts_extras")||{};for(t in window._postsExtras||(window._postsExtras={}),a._seen)r=a._seen[t],_postsExtras[t]&&(u[t]={index:_postsExtras[t].index,block:_postsExtras[t].block,height:_postsExtras[t].height,viewportHeight:_postsExtras[t].viewportHeight},delete window._postsExtras[t]),"ad"!==(n=t.split("_"))[0]&&"adsite"!==n[0]&&"block"!==n[0]&&(n[0]=intval(n[0]),n[1]=intval(n[1])),i=(l[n[0]]||{})[n[1]],n[0]!=o.id&&(!i||-1==r&&i>0)&&(c[n[0]]||(c[n[0]]={}),(!c[n[0]][n[1]]||-1==r&&c[n[0]][n[1]]>0)&&(e=c[n[0]][n[1]]=s*r)),a._saved[t]=r;a._seen={},e&&(lsSet("posts_seen",c),lsSet("posts_extras",u))},getSeenData:function(){var e,t,n,i={},r={},o=[];if(lsCheck())i=lsGet("posts_seen"),r=lsGet("posts_extras")||{};else for(e in n=a.save()){var s=n[e],l=e.split("_");l[0]=intval(l[0]),l[0]&&(l[1]=intval(l[1])),i[l[0]]||(i[l[0]]={}),(!i[l[0]][l[1]]||-1==s&&i[l[0]][l[1]]>0)&&(i[l[0]][l[1]]=s)}for(e in i){for(t in n=[],i[e]){var c=i[e][t]>0?t:-t,u=r[e+"_"+t],d="";u?(d+=":"+(u.index||""),d+=":"+(u.block||""),d+=":"+(u.height||""),d=(d+=":"+(u.viewportHeight||"")).replace(/:+$/,"")):d="","block"!==e||cur._pstatbref||(cur._pstatbref=attr(ge(e+"_"+t),"data-ref")),n.push(c+d)}n.length&&o.push(e+"_"+n.join(","))}return o.length?{seen:i,data:o.join(";")}:""},onSend:function(e){if(!lsCheck())return extend(a._saved,a._seen);var t,n,i=lsGet("posts_seen")||{},r=lsGet("posts_sent")||{};for(t in e){for(n in e[t])r[t]||(r[t]={}),-1!=r[t][n]&&(r[t][n]=e[t][n]),(i[t]||{})[n]&&delete i[t][n];i[t]&&isEmpty(i[t])&&delete i[t]}lsSet("posts_seen",i),lsSet("posts_sent",r),clearTimeout(a._cleanTimer),a._cleanTimer=setTimeout(a.clean,1e4)},send:function(){var e=window.cur,t=window.vk,n=a.getSeenData();if(n.data){if(!t.id)return a.clear();var i="";!nav||"/feed?section=podcasts"!==nav.cur&&"/feed/podcasts"!==nav.cur?e&&e.module?i=e.module:nav&&"/feed"==nav.cur&&(i="feed"):i="feed_podcasts";var r={_ajax:1,act:"ping",_pstat:n.data,_pstatref:i};e._pstatbref&&(r._pstatbref=e._pstatbref),ajax.post("/",r,{onDone:function(){a.onSend(n.seen)}}),delete e._pstatbref}},clean:function(){var e,t,n,i=window.vk,r=Math.floor((i.ts+Math.floor((vkNow()-i.started)/1e3))/3600),o=lsGet("posts_sent")||{};for(e in o){for(t in o[e])r-((n=o[e][t])>0?n:-n)>24&&delete o[e][t];isEmpty(o[e])&&delete o[e]}lsSet("posts_sent",o),a.cleanAdsEvents()},clear:function(){lsSet("posts_seen",{}),lsSet("posts_sent",a._saved=a._seen={}),lsSet(a.LS_ADS_EVENTS,a._lsAdsEvents={})},getStatsObj:function(e){return e=ge(e),hasClass("_stats_cont",e)?e:gpeByClass("_stats_cont",e)},getAdsEvents:function(){var e=a._lsAdsEvents;return e||(e=a._lsAdsEvents=lsGet(a.LS_ADS_EVENTS)||{}),e},cleanAdsEvents:function(){var e=a.getAdsEvents(),t=(new Date).getTime()/1e3|0,n=!1;each(e,function(a,i){t-i>=3600&&(delete e[a],n=!0)}),n&&lsSet(a.LS_ADS_EVENTS,e)},checkPixelEvent:function(e,t){var n=e.getAttribute("data-ad-block-uid"),i=-1!==indexOf(["load","impression"],t);if(!n||!i)return!0;try{var r=hashCode(""+t+n),o=a.getAdsEvents();if(o[r])return!1;var s=(new Date).getTime()/1e3|0;o[r]=s,lsSet(a.LS_ADS_EVENTS,o)}catch(e){try{console.log(e.message)}catch(e){}}return!0},getPixelElements:function(e,t){var n=[];return each(geByClass(t,e),function(){attr(this,"data-src")&&n.push(this)}),n},sendPixels:function(e){each(e,function(){attr(this,"src",attr(this,"data-src")),attr(this,"data-src",!1),addClass("_cntr",this)})},viewed:function(e){if(e=a.getStatsObj(e)){var t=a.getPixelElements(e,"_cntr_view");t.length&&a.checkPixelEvent(e,"impression")&&a.sendPixels(t)}},clicked:function(e){if(e=a.getStatsObj(e)){attr(e,"data-clicked","1");var t=a.getPixelElements(e,"_cntr_click");t.length&&a.sendPixels(t),checkPostsSeen()}}};a._sendTimer||(a._sendTimer=setTimeout(a.send,1e4)),window.pStats=a},AgBx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("3JOE"))&&a.__esModule?a:{default:a};n("QMH7");var r=i.default;t.default=r,window.ScrollView=i.default},AkSq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("P3wa"))&&a.__esModule?a:{default:a},r=n("XUaJ");var o=i.default;t.default=o,window.WarningModal=i.default,extend(i.default,{close:r.close,leave:r.leave})},Au5b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};var r={setChecked:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c(e).checked=t},isChecked:function(e){return c(e).checked}},o=r;t.default=o,r._onChange=l;var s={control:".Control",native:".Control__native"};function l(e,t){i.default.handle(t,{$control:e.closest(s.control),name:e.name,checked:e.checked,value:e.value})}function c(e){return e.$(s.native)}},"B+E1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return langNumeric((e/1e3).toFixed(e%1e3==0?0:2),t,!0)}},"B+U2":function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("sn7E"))&&a.__esModule?a:{default:a}).default;t.default=i},B34N:function(e,t,n){"use strict";var a=l(n("z9sQ")),i=n("OcsD"),r=l(n("wMVj")),o=l(n("29dZ")),s=l(n("jk6M"));function l(e){return e&&e.__esModule?e:{default:e}}var c={onTemplateInput:function(e,t,n,i){var r=$("."+n),o=i-t.value.length;r.textContent=o,r.className=a.default.class(n,{error:o<=0})},onButtonMouseDown:function(e,t){s.default.safari_mobile||e.preventDefault()},onButtonClick:function(e,t,n){var a=$(".MailTemplatePage__TextTextarea"),i=a.value,r=a.selectionStart,o=a.selectionEnd;a.value=i.slice(0,r)+n+i.slice(o);var s=r+n.length;a.selectionStart=a.selectionEnd=s},onSave:function(e,t,n,a,s){var l=$(".MailTemplatePage__NameInput .TextInput__native"),c=$(".MailTemplatePage__TextTextarea");o.default.setLoading(t,!0),(0,i.ajaxRequest)("/mail",{act:"save_template",name:l.value,text:c.value,hash:a,id:n},function(e){if(e){if(e.error){var a=$(".MailTemplatePage__ErrorRow"),i=$(".MailTemplatePage__ErrorText");return o.default.setLoading(t,!1),a.hidden=!1,void(i.textContent=e.message)}if(store.mail.cur&&store.mail.cur.templates){var l=store.mail.cur.templates,c=n?l.findIndex(function(e){return e.id===n}):-1;-1!==c?l.splice(c,1,e.result):l.push(e.result)}r.default.go(s)}},function(){o.default.setLoading(t,!1)})},onSubmit:function(e){e.preventDefault()}};window.MailTemplatePage=c},B5sG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("bYEY"))&&a.__esModule?a:{default:a},r=n("DkIl");var o=function(){var e=store.mail.cur.peerId,t=store.mail.cur.page;if(e)return function(e){var t=store.mail,n=t.peers[e],a=e>2e9,i={title:n.title,photos:n.avatarImages,actions:s(e),editing:t.cur.editing};if(a){var o=a?e-2e9:null;if(i.url="/mail?act=info&chat=".concat(o),i.membersCount=n.countMembers,i.hasPinnedMsg=n.hasPinnedMsg,i.isChannel=n.isChannel,i.isChannel){var l=-n.ownerId;i.url="/club".concat(l)}}else i.url=n.profileUrl,i.isOnline=n.isOnline,i.onlinePlatform=n.onlinePlatform,i.offlineText=n.offlineText;return(0,r.MailHat_convo)(i)}(e);if(t)return function(e){return(0,r.MailHat_page)(e)}(t);return function(){var e=store.mail.cur,t=Math.abs(e.groupId),n=t?"&community=".concat(t):"",a=t?"?community=".concat(t):"";return(0,r.MailHat_main)({folder:e.folder,urls:{all:"/mail".concat(a),unrespond:"/mail?act=unrespond".concat(n),unread:"/mail?act=unread".concat(n),important:"/mail?act=important".concat(n),createChatUrl:"/mail?act=new_chat"},unreadCount:e.countUnread,importantCount:e.countImportant,withUnrespond:!!t,forwarding:!!e.forwardFromId,notifier:(0,i.default)()})}()};function s(e){var t=store.mail,n=t.peers[e].actionUrls,a=t.peers[e].isChannel;return e>-2e9&&e<0?[l("showMedias",n.showMedia),l("deleteHistory",n.flushHistory),l("blockCommunity",n.blockCommunity),l("unblockCommunity",n.unblockCommunity),l("blockNotify",n.blockNotify)]:e>2e9?[l("chatInfo",n.chatInfo,"",a),l("chatAdd",n.addToChat),l("inviteLink",n.inviteLink,"",a),l("showMedias",n.showMedia),n.unpinMsg?l("chatUnpinMsg",n.unpinMsg):"",n.unpinMsg?l("chatShowPinnedMsg",null,'onmousedown="uMessenger.onShowPinnedMsgClick()"'):"",n.unpinMsg?l("chatHidePinnedMsg",null,'onmousedown="uMessenger.onHidePinnedMsgClick()"'):"",l("chatDeleteHistory",n.flushHistory),l("chatReturn",n.returnToChat,"",a),l("chatLeave",n.leaveChat,"",a)]:t.cur.groupId?[l("showMedias",n.showMedia),l("markAsAnswered",n.communityMarkAsAnswered),n.isDialogImportant?l("removeImportantMark",n.communityToggleImportant):l("markAsImportant",n.communityToggleImportant),n.isBlacklisted?l("unbanUser",n.userBan):l("banUser",n.userBan),l("deleteHistory",n.flushHistory)]:[l("showMedias",n.showMedia),l("deleteHistory",n.flushHistory)]}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=window.lang;if(!t&&!n)return null;var r={showMedias:[i.mobile_mail_show_medias,"attach"],deleteHistory:[i.mobile_mail_delete_history,"delete"],blockCommunity:[i.mobile_mail_block_community,"block"],blockNotify:[i.mobile_mail_block_community_notify,"block"],unblockCommunity:[i.mobile_mail_unblock_community,"allow"],chatAdd:[i.mobile_mail_add_to_chat,"plus"],chatUnpinMsg:[i.mobile_mail_unpin_msg,"unpin","unpin"],chatShowPinnedMsg:[i.mobile_mail_pin_show,"show","showPinned"],chatHidePinnedMsg:[i.mobile_mail_pin_hide,"hide","hidePinned"],chatInfo:[i.mobile_mail_chat_info,"info"],chatDeleteHistory:[i.mobile_mail_delete_chat_history,"delete"],chatReturn:[a?i.mobile_mail_return_to_channel:i.mobile_mail_chat_return,"revert","returnToChat"],chatLeave:[a?i.mobile_mail_channel_leave:i.mobile_mail_chat_leave,"close16","leaveChat"],markAsAnswered:[i.mobile_mail_mark_as_answered,"answered"],removeImportantMark:[i.mobile_mail_remove_important_mark,"important"],markAsImportant:[i.mobile_mail_mark_as_important,"important"],unbanUser:[i.mobile_settings_blacklist_unban_user,"allow"],banUser:[i.mobile_settings_blacklist_ban_user,"block"],inviteLink:[a?i.mobile_mail_channel_invite_link:i.mobile_mail_invite_link,"invite"]},o={text:r[e][0],icon:r[e][1],attrs:n,url:t};return r[e][2]&&(o.name=r[e][2]),o}t.default=o},B9v3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ActionsPanel",{enumerable:!0,get:function(){return a.ActionsPanel}}),Object.defineProperty(t,"init",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"setBookmarkState",{enumerable:!0,get:function(){return i.setBookmarkState}}),t.default=void 0;var a=o(n("JYMJ")),i=o(n("qsX6"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}window.Share=i.default,extend(window.Share,{setBookmarkState:i.setBookmarkState});var s=a.default;t.default=s},BFfX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPopup=function(e){var t=null;if(e.action_button){var n=e.action_button,a=n.onclick,r=n.href,o=n.text;t={class:"AudioPopup__actionButtonWrapper",inner:{class:["AudioPopup__actionButton","button"],onclick:a,href:r,inner:o}}}var s=["AudioPopup"];e.popupClass&&s.push(e.popupClass);var l={class:"AudioPopup__content",inner:[{class:"AudioPopup__title",inner:e.title},{class:"AudioPopup__description",inner:e.description},t,e.additional_link]};return new i.default({content:l,class:s.join(" ")})};var a,i=(a=n("r/ag"))&&a.__esModule?a:{default:a}},"BJj/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t,n){var a;return function(){var i=this,r=arguments,o=function(){a=null,n||e.apply(i,r)},s=n&&!a;clearTimeout(a),a=setTimeout(o,t),s&&e.apply(this,r)}}},BKxg:function(e,t,n){"use strict";s(n("+cqQ"));var a=s(n("s0aB")),i=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("YDEi")),r=n("7jQU");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}Object.assign(i.default,{onTap:a.default.onTap,redrawOnline:function(e){var t=store.mail.peers[e];if(t){var n=(0,i.uConvo_getOnline)(t);a.default.setOnline(e,n)}},redrawUnread:function(e){if(!store.mail.peers[e])return;var t=(0,i.uConvo_getUnreadCount)(e);a.default.setUnreadCount(e,t)},redrawLastMsg:function(e){var t=(0,i.uConvo_getLastMsg)(e);t&&a.default.setLastMsg(e,(0,i.uConvo_msgPreview)(t),{dateShort:t.dateShort,pending:t.pending,failed:t.failed})},redrawTyping:function(e){if(!store.mail.cur)return;var t=(0,r.uTyping_getPeerTyping)(e),n=t&&1===t.count&&t.users[0]===e,o=(0,i.uConvo_getTyping)(e,n);a.default.setTyping(e,o)},redrawImportant:function(e,t){a.default.setImportant(e,t)}})},BLcx:function(e,t,n){"use strict";var a=function(){var e=document.getElementsByClassName("gift_create_post_counter");return{counter:function(t){var n=e[0];if(n){var a=t.value.length,i=t.maxLength;if(a>i)t.value=t.value.substr(0,i);else if(a>i/2){var r=Math.max(i-a,0);n.innerText=langNumeric(r,lang.text_N_symbols_remain),show(n)}else hide(n)}}}}();window.GiftsSendFormCounter=a},BM0n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainMenu=l,t.default=void 0;var a=s(n("vOib")),i=s(n("UWnA")),r=s(n("9y81")),o=s(n("AXyT"));function s(e){return e&&e.__esModule?e:{default:e}}function l(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).items.map(function(e){if(!e)return null;var t={onclick:"nav.onMenuItemClick('".concat(e.url,"'); ").concat(e.onclick),"data-skiponclick":1};return(0,i.default)({mix:"MainMenu__menuItem al_menu",url:e.url,attrs:t,style:{no_go_icon:!0},content:[{outerHTML:(0,r.default)({mix:"MainMenu__menuItemIcon",icon:e.icon})},{class:"MainMenu__menuItemTitle",inner:e.title},e.count?{outerHTML:(0,o.default)({mix:"MainMenu__menuItemCount",type:"minor",value:e.count})}:null]})});return(0,a.default)({mix:"MainMenu__menu",style:{extra_top_padding:!0,extra_bottom_padding:!0},content:e})}var c=l;t.default=c},BQMu:function(e,t,n){"use strict";var a=function(){var e,t,n="ai_menu_opened",a=!1;function i(e){for(var t=!1;e;){var n=getStyle(e,"overflow-y");if(("scroll"===n||"auto"===n)&&e.offsetHeight<e.scrollHeight){e===document.documentElement||e===document.body?e=null:t=!0;break}e=e.parentElement}return{cursor:e,isOverflowYContainer:t}}function r(e){for(var t=!1;e;){var n=getStyle(e,"overflow-x"),a=hasClass(e,"Slider__scroll");if("scroll"===n||"auto"===n||a){t=!0;break}e=e.parentElement}return{cursor:e,isOverflowXContainer:t}}function o(){if(e&&t){var n=geByClass1("i_pointer",e);document.body.contains(n)&&(i(n).isOverflowYContainer?setStyle(t,"top",function(e){return e.getBoundingClientRect().top}(n)):setStyle(t,"top",getY(n)),r(n).isOverflowXContainer?setStyle(t,"left",function(e){return e.getBoundingClientRect().left}(n)-getW(t)):setStyle(t,"left",getX(n)-getW(t)))}}function s(e){e&&"A"===e.target.tagName&&requestAnimationFrame(function(){o()})}function l(l){!function(n){e=gpeByClass("ai_menu_wrap",n),t=geByClass1("ai_menu",e)}(l),addClass(n,e),append(t,document.body),a=c,tooltip.addHandler(a),tooltip.show(e,t),addEvent(window,"resize",o),addEvent(t,"click",s);var u=geByClass1("i_pointer",e),d=i(u);d.isOverflowYContainer&&addEvent(d.cursor,"scroll",o);var f=r(u);f.isOverflowXContainer&&addEvent(f.cursor,"scroll",o),o()}function c(){removeClass(n,e),append(t,e),tooltip.removeHandler(a),tooltip.hide(),removeEvent(window,"resize",o),removeEvent(t,"click",o);var s=geByClass1("i_pointer",e),l=i(s);l.isOverflowYContainer&&removeEvent(l.cursor,"scroll",o);var c=r(s);c.isOverflowXContainer&&removeEvent(c.cursor,"scroll",o)}return{closeMenu:c,toggleMenu:function(t,a){cancelEvent(t),hasClass(n,e)?c():l(a)},update:function(){!function(){if(t){var e=geByClass("wia_item",t);e&&each(e,function(e,t){var n=clone(t);before(n,t),remove(t),addClass("unhover",n),setTimeout(function(){removeClass("unhover",n)},100)})}}(),o()}}}();window.ActionMenu=a},BX0V:function(e,t,n){"use strict";var a,i=(a=n("9CLW"))&&a.__esModule?a:{default:a},r=n("OcsD");var o,s,l,c="pageMoneyTransfer",u="pageMoneyTransfer_error",d="pageMoneyTransfer__errorText",f="pageMoneyTransfer__iframe",h=2e3;i.default.onIframeReady(function(e){A(),s={checkUrl:e.check_transfer_url,onSuccessUrl:e.on_success_url},_(),window.cur.destroy.push(v)}),i.default.onPostMessage(function(e,t){if("paySuccess"===e)addClass("pageMoneyTransfer_success",geByClass1(c));else if("payError"===e)v(),addClass(u,geByClass1(c)),val(geByClass1(d),t.descr);else if("session_fail"===e){if(p)return void m();v(),addClass(u,geByClass1(c)),addClass("pageMoneyTransfer_errorCookie",geByClass1(c))}else if("putPixel"===e&&"page_load"===t.alias){var n=null;(0,r.isVkWebView)()&&((0,r.isIosWebView)()?n="iphone":isAndroidWebView()&&(n="android")),n||(n=""),(0,r.statlogsValueEvent)("money_transfers",0,"iframe_loaded",n)}});var p=0;function A(){var e=geByClass1(f);if(e){var t=e.contentWindow.document;t.open("text/html","replace"),t.write(attr(e,"data-html")),t.close()}else setTimeout(A,2e3)}function m(){var e=geByClass1(f);if(e){var t=ce("div",{innerHTML:attr(e,"data-html")});hide(e),geByClass1(c).appendChild(t),ge("payment_form").submit()}else setTimeout(m,2e3)}function _(){var e=s,t=e.checkUrl,n=e.onSuccessUrl;o=setInterval(function(){l=ajax.post(t,{},{onDone:function(e,t,a){if(1===e||3===e){if(v(),a)return void nav.go(a,null,{replace:!0});"/"===n[0]?nav.go(n,null,{replace:!0}):location.href=n}else 2===e&&(v(),addClass(u,geByClass1(c)),val(geByClass1(d),t))}})},h)}function v(){o&&(clearInterval(o),o=null),l&&(l.abort(),l=null)}i.default.onAcceptCookieClick(function(){var e=window.open("https://top-fwz1.mail.ru/counter2?id=1;","","width=300; height=300");setTimeout(function(){e.close();var t=geByClass1(f),n=clone(t);removeClass(u,geByClass1(c)),replace(n,t);var a=n.contentWindow.document;a.open("text/html","replace"),a.write(attr(t,"data-html")),a.close(),_()},500),p++})},BZzM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizePosters=function(e,t,n){var r=ge(t)||document,o="[data-".concat("poster-resized","='false']");(e||n)&&(o="");var s=domQuery(".poster__text"+o,r),l=[],c=cur.posterConfig&&cur.posterConfig.constants;if(!c){if(!s.length)return;c=JSON.parse(domData(s[0].parentElement,"poster-constants"))}for(var u=0;u<s.length;u++){var d=s[u],f=domPN(d);l.push(domPN(f).clientWidth)}for(var h=0;h<s.length;h++){var p=s[h],A=domPN(p),m=l[h],_=c.font_size_ratio_range_1*m+"px",v=Math.round(c.line_height_ratio_range_1*m)+"px",g="0 "+Math.round(m*i)+"px";p.textContent.length>c.range_threshold&&(_=Math.round(c.font_size_ratio_range_2*m)+"px",v=Math.round(c.line_height_ratio_range_2*m)+"px"),setStyle(A,{height:m*a+"px",width:m}),setStyle(p,{fontSize:_,lineHeight:v,padding:g}),domData(p,"poster-resized",!0)}};var a=.75,i=1/18},BoyB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("2C1Z"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Loading=i.default},Bqje:function(e,t,n){"use strict";var a=n("UxAg");function i(){var e=(0,a.$)(r.intro),t=new Scroller(e,{byPage:!0,ignoreMouseWheel:!0,noAutoScroll:!0});t.init(),cur.destroy.push(function(){return t.destroy()})}window.AuthCheckIntro={},AuthCheckIntro._onMount=i;var r={intro:".AuthCheckIntro"}},BxOC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=function(e,t,n){t&&(t.im_v=r);return new Promise(function(a,r){i.post(e,t,{timeout:n,onDone:function(){a.apply(null,[Array.prototype.slice.call(arguments)])},onFail:function(){return r.apply(null,arguments),!0}})})},t.plainget=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(e,t,n).request},t.plaingetCancelable=o;var a=n("cGUQ"),i=window.ajax,r=3;function o(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=window.XDomainRequest?new XDomainRequest:i._getreq(),{request:new Promise(function(i,o){var s,l=Date.now(),c=r.timeout||60,u=(0,a.toQueryString)(t);if(window.XDomainRequest)n.open("get","".concat(e,"?").concat(u)),n.ontimeout=function(e){o([e,{}])},n.onerror=function(e){o([e,{}])},n.onload=function(){i([n.responseText,{}])},setTimeout(function(){n.send()},0);else{n.onreadystatechange=function(){4==n.readyState&&(clearInterval(s),n.status>=200&&n.status<300?i([n.responseText,n]):o([n.responseText,n]))};try{n.open("GET","".concat(e,"?").concat(u),!0)}catch(e){return o([e,n])}n.send()}s=setInterval(function(){Date.now()-l>1e3*c&&(window.browser.safari&&n.abort(),o(["",{}]),clearInterval(s))},1e3)}),cancel:function(){n.abort()}}}},C13D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asObject=function(e){if(!e)return null;if(isObject(e))return e;if("string"==typeof e)return{id:e};var t=(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]||"").split("/"),n=(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]||"").split(","),r=(0,i.getAudioPerformers)(e,!1);return{id:intval(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]),owner_id:intval(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]),ownerId:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID],fullId:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID],title:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]||"",subTitle:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE],performer:r,duration:intval(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]),lyrics:intval(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]),url:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL],flags:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS],context:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT],extra:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA],accessKey:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY],addHash:t[0]||"",editHash:t[1]||"",actionHash:t[2]||"",deleteHash:t[3]||"",replaceHash:t[4]||"",urlHash:t[5]||"",restoreHash:t[6]||"",canEdit:!!t[1],canDelete:!!t[3],isLongPerformer:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_LONG_PERFORMER_BIT,canAdd:!!(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CAN_ADD_BIT),coverUrl_s:n[0],coverUrl_p:n[1],isClaimed:!!(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT),isExplicit:!!(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_EXPLICIT_BIT),isUMA:!!(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_UMA_BIT),isReplaceable:!!(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]&a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_REPLACEABLE),ads:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS],album:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM],albumId:intval(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]),albumPart:intval(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]),trackCode:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE],restrictionStatus:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION],useNewStats:Boolean(e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_NEW_STATS])}};var a=n("uk5P"),i=n("eVa8")},C45x:function(e,t,n){"use strict";var a=n("UxAg"),i=u(n("bZ/P")),r=u(n("+cqQ")),o=function(e){if(e&&e.__esModule)return e;var t=c();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("ti65")),s=u(n("Gzds")),l=n("OcsD");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}var d=need("Voting");Object.assign(o.default,{class:"msg",onClick:(0,r.default)(),onPendingClick:(0,r.default)(),onRestoreClick:(0,r.default)(),onReplyClick:(0,r.default)(),onForward:(0,r.default)(),onLoadAgain:(0,r.default)(),getElem:function(e){return(0,a.$)(".msg_id_".concat(e))},remove:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,a.$$)(".msg_id_".concat(e)).forEach(function(e){return e.remove()}):v(e,!1)},spam:function(e){v(e,!0)},restore:function(e){(0,a.$$)(".msg_id_".concat(e)).forEach(function(e){e.classList.remove("msg_removed"),e.classList.remove("msg_spam")})},unselectAll:function(){(0,a.$$)(".msg_selected").forEach(function(e){return e.classList.remove("msg_selected")})},getReplyDataFromHTML:function(e){var t=e&&o.default.getElem(e),n="";if(t){var i=(0,a.$)(".thumbs_map .thumb_map_img_as_div",t);return(n=i&&i.style.backgroundImage)&&(n=n.replace(/^url\((['"])?/,"").replace(/(['"])?\)$/,"")),{msg_id:e,parent_id:null,preview_url:n}}return null},toggleImportant:function(e,t){[].concat(e).forEach(function(e){var n=(0,a.$)(".msg_id_".concat(e));n&&n.classList.toggle("msg_important",t)})},markAsRead:function(e){(0,a.$$)(".msg_id_".concat(e)).forEach(function(e){return e.classList.remove("msg_unread")})},getId:function(e){var t=i.default.parseClass(h.msg,e.className);return Number(t.id)},getTextHtml:function(e){return e.$(p.text).innerHTML}}),o.default._onClick=g,o.default._onPendingClick=y,o.default._onTouchStart=w,o.default._onRestoreClick=_,o.default._onActionClick=E,o.default._onReplyClick=S,o.default._onStickerClick=C,o.default.onStickerTouchStart=M;var f,h={msg:"msg"},p={text:".msg__text"},A=500,m=!1;function _(e,t){e.stopPropagation(),t=parseInt(t,10),o.default.onRestoreClick(t)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,o.Msg__restoreInner)(e);(0,a.$$)(".msg_id_".concat(e)).forEach(function(e){e.$(".msg__restore").innerHTML=n,e.classList.remove("msg_selected"),e.classList.add("msg_removed"),e.classList.toggle("msg_spam",t)})}function g(e,t,n){b(e.target,t,function(){t.classList.toggle("msg_selected"),o.default.onClick(n)})}function y(e,t,n,a,i){b(e.target,t,function(){o.default.onPendingClick(n,a,i)})}function b(e,t,n){for(var a=t.classList.contains("msg_pending")||t.classList.contains("msg_failed");e!==t;)if(a&&-1!==e.className.indexOf("msg__sticker"))e=e.parentElement;else{if("A"===e.tagName||"BUTTON"===e.tagName||e.getAttribute("onclick")||e.classList.contains("im_msg_audiomsg")||e.classList.contains("articleSnippet__block")||e.classList.contains("MailButton")||e.closest(".".concat(d.cls)))return;e=e.parentElement}m?m=!1:k()||t.classList.contains("msg_removed")||t.classList.contains("msg_spam")||store.mail.cur.editing||n()}function w(){k()&&(m=!0)}function E(e,t,n){switch(t){case"forward":o.default.onForward(n)}}function k(){return window.getSelection().toString().length>0}function S(e,t,n,a){e.preventDefault(),o.default.onReplyClick(t,n,a)}function C(e,t,n,a){n&&(e.preventDefault(),a&&s.default.stickersClick(t,a))}function M(e,t){if(clearTimeout(f),!!t.getAttribute("data-animation-path")){var n=e.touches[0].clientX,a=e.touches[0].clientY;(0,l.addEvent)(t,"contextmenu",P),(0,l.addEvent)(t,"touchmove",i,{passive:!0}),(0,l.addEvent)(t,"touchend",r,{passive:!0}),(0,l.addEvent)(t,"touchcancel",r,{passive:!0}),f=setTimeout(function(){!function(e){StickersAnimation.loadAndPlaySticker(e)}(t),r()},A)}function i(e){(Math.abs(e.touches[0].clientX-n)>=10||Math.abs(e.touches[0].clientY-a)>=10)&&r()}function r(){clearTimeout(f),(0,l.removeEvent)(t,"contextmenu",P),(0,l.removeEvent)(t,"touchmove",i,{passive:!0}),(0,l.removeEvent)(t,"touchend",r,{passive:!0}),(0,l.removeEvent)(t,"touchcancel",r,{passive:!0})}}function P(e){event.preventDefault(),event.stopPropagation()}},C4zK:function(e,t,n){"use strict";var a=s(n("bZ/P")),i=n("UxAg"),r=s(n("+cqQ")),o=s(n("nggH"));function s(e){return e&&e.__esModule?e:{default:e}}function l(){store.mail.cur&&h()}function c(e){store.mail.cur&&function(e){var t=e.target,n=$(".mailActs");n&&n.classList.contains("mailActs_menuOpened")&&!t.closest(".mailActs__chevronList")&&!t.closest(".mailActs__chevronMoreIcon")&&n.classList.remove("mailActs_menuOpened")}(e)}function u(e){d({canEdit:e})}function d(e){(0,i.$$)(".mailActs").forEach(function(t){var n=a.default.parseClass("mailActs",t.getAttribute("class"));t.setAttribute("class",a.default.class("mailActs",Object.assign({},n,e)))})}function f(e){switch(e){case"edit":o.default.onEditClick();break;case"remove":o.default.onRemoveClick();break;case"important":o.default.onImportantClick();break;case"reply":o.default.onReplyClick();break;case"forward":o.default.onForwardClick();break;case"spam":o.default.onSpamClick();break;case"pin":o.default.onPinClick()}}function h(){var e=document.querySelector(".mailActs__chevron"),t=e.offsetWidth-1,n=e.querySelectorAll(".mailActs__chevronListItem"),a=e.querySelectorAll(".mailActs__icon");Array.prototype.forEach.call(a,function(e,i){t<36*a.length?t-34>=36*(i+1)?(e.classList.remove("mailActs__icon_hidden"),n[i].classList.add("mailActs__chevronListItem_hidden")):(e.classList.add("mailActs__icon_hidden"),n[i].classList.remove("mailActs__chevronListItem_hidden")):(e.classList.remove("mailActs__icon_hidden"),n[i].classList.add("mailActs__chevronListItem_hidden"))}),d({cutted:t<36*a.length})}function p(){(0,i.$$)(".mailActs").forEach(function(e){return e.classList.toggle("mailActs_menuOpened")})}Object.assign(o.default,{onCloseClick:(0,r.default)(),onRemoveClick:(0,r.default)(),onImportantClick:(0,r.default)(),onReplyClick:(0,r.default)(),onForwardClick:(0,r.default)(),onSpamClick:(0,r.default)(),onPinClick:(0,r.default)(),onMoreClick:(0,r.default)(),onEditClick:(0,r.default)(),setCount:function(e){var t=langNumeric(e,lang.mobile_mail_messages_selected).replace("{count}",e);(0,i.$$)(".mailActs__counter").forEach(function(e){return e.innerText=t}),1!=e&&u(!1);h()},setEditAvailable:u,setImportantAvailable:function(e){d({canImportant:e})},toggleQuickButtons:function(e){$(".mailActs__buttonsIn").hidden=!e},setReplyAvailable:function(e){$(".mailActs__button_type_reply").disabled=!e},togglePin:function(e){(0,i.$$)(".mailActs").forEach(function(t){return t.classList.toggle("mailActs_canPin",e)})},setModifiers:d,setLabels:function(e){var t=window.lang,n=e.pinned?t.mobile_mail_messages_actions_unpin:t.mobile_mail_messages_actions_pin,a=e.important?t.mobile_mail_messages_actions_important_off:t.mobile_mail_messages_actions_important;$(".mailActs__icon_type_pin").setAttribute("aria-label",n),$(".mailActs__icon_type_important").setAttribute("aria-label",a),$(".mailActs__chevronListItem_type_pin").innerHTML=n,$(".mailActs__chevronListItem_type_important").innerHTML=a},update:h}),o.default._onButtonClick=f,o.default._onCloseClick=o.default.onCloseClick,o.default._onMoreClick=p,onBodyResize(l),document.addEventListener("click",c)},C7ju:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("JaXn"))&&a.__esModule?a:{default:a};var r=function(e){return{class:"PhotoMarketItem",attrs:{"data-item-id":e.item_id},inner:[{class:"PhotoMarketItem__thumb",tag:"img",src:e.thumb},{class:"PhotoMarketItem__title",inner:e.title},{class:"PhotoMarketItem__price",inner:Wd.wrap(e.price)},(0,i.default)({type:e.type,typeInt:e.type_int,isFave:e.is_fave,itemId:e.item_id,ownerId:e.owner_id,href:e.href,faveHash:e.fave_hash})]}};t.default=r},CKxJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("bZ/P")),i=(s(n("KMpi")),function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("/Id8"))),r=n("fdw3");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function l(){var e=u(['\n    <div class="msg__newMsgsDivider">\n      <span class="msg__newMsgDividerText">',"</span>\n    </div>\n  "]);return l=function(){return e},e}function c(){var e=u(["\n    ","\n    ","\n  "]);return c=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=function(e){var t,n=e.msgId,o=e.withDivider?function(){var e=window.lang;return a.default.html(l(),e.mobile_mail_new_msgs)}():"",s=store.mail,u=(0,r.isForwardedMessageId)(n)?s.forwards[n]:s.msgs[n],d=s.members[u.authorId],f=u.peerId,h=s.peers[f];if(!e.detailed){var p=store.mail.presend,A=(p=p&&p.msgs)&&p["edit"+n];A&&(u=A)}h&&(h.isIncomingMR||h.isRejectedMR)&&(o="");if(u.isService)t=(0,i.default)({id:n,text:u.service,service:!0,unread:u.isUnread});else{var m=(0,i.Msg__authorName)(d,f,s.cur.userId),_={id:n,text:u.text,important:u.isImportant,unread:u.isUnread,authorPhoto:d.avatar,authorName:m,authorUrl:d.url,date:u.date,removed:s.cur.msgRemoved[n],admin:u.adminName?{name:u.adminName,url:u.adminUrl}:null,edited:u.edited,channel:h.isChannel&&h.ownerId!==s.cur.viewerId,attaches:u.attaches,attachesHTML:u.attachesHTML,attachesLoading:u.attachesLoading,forwards:u.forwards,reply:u.reply,pending:u.pending,waiting:u.waiting,failed:u.failed,sendId:u.sendId,sticker:u.sticker,keyboard:u.keyboard,maxDepth:e.detailed?s.cur.maxDetailedMsgDepth:s.cur.maxMsgDepth};t=e.detailed?(0,i.Msg_detailed)(_):(0,i.default)(_)}return a.default.html(c(),o,t)};t.default=d},CQvH:function(e,t,n){"use strict";addEvent(window,"keydown",function(e){9===e.keyCode&&document.body.classList.add("tabbing")},{passive:!0}),addEvent(window,"click touchstart",function(){document.body.classList.remove("tabbing")},{capture:!0,passive:!0})},Cbap:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routes=[]}var t,n,i;return t=e,i=[{key:"getRouter",value:function(){return window.router||(window.router=new e),window.router}}],(n=[{key:"addRoute",value:function(e,t,n){this.routes.push({isActive:!1,test:e,activateCallback:t,deactivateCallback:n})}},{key:"test",value:function(e){var t=e.test;return"function"==typeof t?t(window.nav.cur):t instanceof RegExp?t.test(window.nav.cur):!(!window.nav.cur||"string"!=typeof t)&&window.nav.cur.startsWith(t)}},{key:"deactivateAllRoutes",value:function(){this.routes=this.routes.map(function(e){return e.isActive=!1,e.deactivateCallback&&e.deactivateCallback(),e})}},{key:"checkRoutes",value:function(){var e=this;this.routes=this.routes.map(function(t){var n=e.test(t);return n&&!t.isActive&&t.activateCallback&&t.activateCallback(),!n&&t.isActive&&t.deactivateCallback&&t.deactivateCallback(),t.isActive=n,t})}}])&&a(t.prototype,n),i&&a(t,i),e}(),r=i;t.default=r,window.Router=i},CjAb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Header=s,t.default=void 0;var a=n("n9zS"),i=n("80md"),r=n("NJ1W"),o=n("/xuI");function s(){var e={};(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hideIcon&&(e.visibility="hidden");var t=(0,o.stylesObjectToString)(e);return{inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({header:!0})],grow:4}),(0,r.Col)({grow:5}),(0,r.Col)({inner:[(0,a.Circle)({header:!0,size:20,style:t})],auto:!0})]})],flexColumn:!0})]})],class:"SkeletonHeader",tag:"div"}}var l=s;t.default=l},CkGd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("nggH"))&&a.__esModule?a:{default:a};n("C4zK");var r=i.default;t.default=r,window.MailActs=i.default},Cxv5:function(e,t,n){"use strict";var a;((a=n("9CLW"))&&a.__esModule?a:{default:a}).default.onPostMessage(function(e){"putPixel"!==e&&"addCard"!==e&&window.scrollTop(0)})},"D+pY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBackgroundRestriction=void 0;var a,i=(a=n("r/ag"))&&a.__esModule?a:{default:a},r=n("4uOi"),o=n("BFfX"),s=n("J8bf");function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),audioSubscribe||(this.isIdle=!1,this.showAlertCountToday=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt((0,s.getCookie)(e),10);if(isNaN(n,10))return t;return n}(e.SHOW_ALERT_COOKIE),this.initVisibilityChangeEvent())}return c(e,null,[{key:"writePopupStat",value:function(e){statlogsValueEvent("mvk_audio_background_popup",e)}},{key:"createPopup",value:function(){var t={href:e.EXPLANATION_LINK,onclick:'AudioBackgroundRestriction.writePopupStat("explanation_click");',class:"AudioPopup__explanation",inner:getLang("mobile_audio_background_restriction_explanation")};return Wd.elem((0,o.AudioPopup)({popupClass:"AudioRestrictionPopup",title:getLang("mobile_audio_background_restriction_title"),description:getLang("mobile_audio_background_restriction_description"),action_button:{href:e.REMOVE_RESTRICTION_LINK,onclick:'AudioBackgroundRestriction.writePopupStat("link_click");',text:getLang("mobile_audio_background_restriction_button")},additional_link:t}))}}]),c(e,[{key:"onIdle",value:function(){window.audio.playing()&&this.triggerRestriction()}},{key:"showBackgroundMessage",value:function(){var t=e.createPopup();this.showAlertCountToday+=1,(0,s.setCookie)("remixaudio_show_alert_today",this.showAlertCountToday,1),this.showAlertCountToday%3||(i.default.open(t,!0),e.writePopupStat("show"))}},{key:"triggerRestriction",value:function(){audio.pause(),this.showBackgroundMessage()}},{key:"initVisibilityChangeEvent",value:function(){var e=this;this.pageVisibility=new r.PageVisibility,this.pageVisibility.onVisible(function(){e.isIdle=!1}),this.pageVisibility.onHidden(function(){e.isIdle=!0,e.onIdle()})}}]),e}();t.AudioBackgroundRestriction=u,u.SHOW_ALERT_COOKIE="remixaudio_show_alert_today",u.REMOVE_RESTRICTION_LINK="/offermusic",u.EXPLANATION_LINK="https://vk.cc/9uFgyl"},D48u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Qwnw"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.MessageRequestsPage=i.default},DG1x:function(e,t,n){"use strict";window.LoadMore={setUrl:s,destroy:l},LoadMore._strategy={replace:{onFail:_,onSuccess:function(e){var t=e.response;r.outerHTML=t,l()}},padsExtend:{onFail:_,onSuccess:function(e){var t=e.response,n=t.pads,a=t.nextPageUrl;Object.keys(n).forEach(function(e){var t=n[e];Pad.addContent(e,t)}),a?s(a):l()}}},LoadMore._onButtonClick=c,onDOMReady(u),page.onChange(u);var a={loadMore:".LoadMore",button:".LoadMore__button"},i="_loadMore_loading",r=null,o=null;function s(e){o.setAttribute("href",e)}function l(e){r.remove(),r=null,o=null,f()}function c(){m()||h()}function u(){if(r=$(a.loadMore)){var e=window.cur;o=r.$(a.button),d(0),onBodyScroll(d),e.destroy.push(f)}}function d(e){if(r&&!m()){var t=getY(r),n=getCh();t-(e+n)<2*n&&h()}}function f(){onBodyScroll("__clear",d)}function h(){A(!0);var e=o.getAttribute("href");ajax.post(e,{_ajax:1},{onDone:function(e){return p(e,!0)},onFail:function(e){return p(e,!1)}})}function p(e,t){if(A(!1),r){var n=t?"data-success-handler":"data-fail-handler";n=r.getAttribute(n),Wd.handle(n,{$loadMore:r,response:e}),r=null,o=null,f(),u()}}function A(e){o&&r&&(Btn.setLoading(o,e),r[i]=e)}function m(){return r&&r[i]}function _(e){console.error("LoadMore: failed to load more",e)}},DM26:function(e,t,n){"use strict";function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){return new Promise(function(n){setTimeout(n.bind(null,t),1e3*e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.pause=i,t.retryFn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=0;return function r(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return Promise.resolve().then(function(){return e.apply(void 0,s)}).catch(function(e){if(++a<=t){var o="function"==typeof n?n(a):0;return 0===o?r.apply(void 0,s):i(o).then(function(){return r.apply(void 0,s)})}throw e})}},t.debouncedPromise=function(e,t,n){var i,r;return function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return new Promise(function(e,a){var o=n&&!i;clearTimeout(i),r&&r.reject("debounce"),i=setTimeout(function(){i=null,r=null,n||e(s)},t),o?e(s):n&&a("debounce"),r={resolve:e,reject:a}}).then(function(t){return e.apply(void 0,a(t))})}},t.abortablePause=function(e,t){var n,a=new Promise(function(a){n=a,setTimeout(a.bind(null,t),1e3*e)});return{pause:function(){return a},abort:function(){n(t)}}},t.promisify=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return new Promise(function(t){return e.apply(void 0,n.concat([t]))})}}},DPXh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatBlock=s,t.default=void 0;var a=n("n9zS"),i=n("80md"),r=n("NJ1W"),o=n("/xuI");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,o.stylesObjectToString)({opacity:e.opacity});return{inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,a.Circle)({size:50,style:t})],auto:!0}),(0,r.Col)({inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:3}),(0,r.Col)({grow:4}),(0,r.Col)({inner:[(0,i.Line)({style:t})]})],justify:"center"}),(0,r.Row)({inner:[(0,r.Col)({inner:[(0,i.Line)({style:t})]}),(0,r.Col)({inner:[(0,i.Line)({style:t})],grow:5}),(0,r.Col)({grow:3,style:t})]})],flexColumn:!0})]})],class:"SkeletonChatBlock",tag:"div"}}var l=s;t.default=l},DVnk:function(e,t,n){"use strict";FeedAssistanceStats.registerTrackingCls("feedAssistance_recommendedFriends"),FeedAssistanceStats.onStartViewElement(function(e){if(FeedAssistanceStats.getElementType(e)===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_RECOMMENDED_SLIDER){if(e._friendsSliderHandlersAdded)return;e._friendsSliderHandlersAdded=!0}})},DgYJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uMailWrite_TemplatesContent=function(e){var t=e.length,n=!t;return a.default.html([c(n),{class:"uMailWrite__templatesRows",attrs:{hidden:n},inner:e.map(function(e,n){return u(e,n,t)})}])},t.uMailWrite_TemplatesEmpty=c,t.uMailWrite_TemplatesLoading=function(){return Loading({mix:"uMailWrite__templatesLoading"})},t.uMailWrite_TemplatesRow=u,t.prepareTemplateText=d;var a=l(n("TYsd")),i=l(n("bZ/P")),r=n("9M99"),o=l(n("gy8s")),s=l(n("29dZ"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t="/mail?act=template&from="+store.mail.cur.peerId+store.mail.cur.communityParam,n=i.default.onClick("uMailWrite.loadTemplatePage","event","this",t);return{class:"uMailWrite__templatesEmpty",attrs:{hidden:!e},inner:[{class:"uMailWrite__templatesEmptyInfo",inner:lang.mobile_mail_templates_empty_info},(0,s.default)({type:"button",theme:"small",attrs:n,inner:lang.mobile_mail_templates_empty_button})]}}function u(e,t,n){var s=t>0&&t===n-1,l=store.mail.cur.communityParam,c=store.mail.cur.peerId,u=e.name,f=e.text;u=(0,r.emojiToHTML)(u),f=d(f,!0);var h="_touched uMailWrite__templatesRow";return h+=" uMailWrite__templatesRow".concat(e.id),e.deleting&&(h+=" uMailWrite__templatesRow_hidden"),{class:h,inner:[{class:"uMailWrite__templatesRowContent",attrs:{onclick:["uMailWrite.onTemplateClick","event","this",e.id]},inner:[{class:"uMailWrite__templatesRowName",inner:a.default.html(u)},{class:"uMailWrite__templatesRowText",inner:a.default.html(f)}]},{class:"uMailWrite__templatesRowMore",inner:[a.default.wrap((0,o.default)({mix:"",icon:"more",position:s?"bottomRight":"topRight",items:[{text:lang.mobile_mail_templates_action_edit,name:"edit",url:"/mail?act=template&id=".concat(e.id).concat(l,"&from=").concat(c)},{text:lang.mobile_mail_templates_action_delete,name:"delete",attrs:i.default.onMouseDown("uMailWrite._onDeleteTemplate",e.id)}]}))]}]}}function d(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=store.mail.members,i=store.mail.cur,o=a[i.peerId],s=a[i.userId],l=a[i.groupId],c=o.name.replace(o.firstName,"").trim(),u=s.name.replace(s.firstName,"").trim();if((e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<br>/g,"\n")).replace(/&lt;br&gt;/g,"\n")).replace(/\t/g,"\n")).replace(/{user name}/g,o.firstName)).replace(/{user surname}/g,c)).replace(/{admin name}/g,s.firstName)).replace(/{admin surname}/g,u)).replace(/{community}/g,l.name)).match(/{greeting}/g)){var d,f=(t=Date.now()+1e3*store.mail.cur.timeShift,new Date(t).getHours());d=f>=3&&f<12?lang.mobile_mail_templates_greeting_morning:f>=12&&f<17?lang.mobile_mail_templates_greeting_afternoon:f>=17&&f<=23?lang.mobile_mail_templates_greeting_evening:lang.mobile_mail_templates_greeting_night,e=e.replace(/{greeting}/g,d)}return n&&(e=(0,r.emojiToHTML)(e)),e}},Dh0N:function(e,t,n){"use strict";function a(e,t){var n=t.$select,a=t.value;n.closest(i.email).classList.toggle(r.groupsVisible,e.includes(a)||e.includes(Number(a)))}window.SettingsEmail={},SettingsEmail._onFrequencyChange=a;var i={email:".settingsEmail"},r={groupsVisible:"settingsEmail_groupsVisible"}},DiaP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("TYsd")),i=r(n("29dZ"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=window.lang;return a.default.html({class:"MessageRequestBox",inner:[{class:"MessageRequestBox__info",inner:t.mobile_mail_mrs_confirm_info},{class:"MessageRequestBox__buttons",inner:[(0,i.default)({theme:"negative",size:"normal",type:"button",inner:t.mobile_mail_mrs_button_reject,attrs:q.onClick("MessageRequestBox.reject","event","this",e)}),(0,i.default)({theme:"secondary",size:"normal",type:"button",inner:t.mobile_mail_mrs_button_accept,attrs:q.onClick("MessageRequestBox.accept","event","this",e)})]}]})};t.default=o},DkIl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MailHat",{enumerable:!0,get:function(){return a.MailHat}}),Object.defineProperty(t,"MailHat__Title",{enumerable:!0,get:function(){return a.MailHat__Title}}),Object.defineProperty(t,"MailHat__icon",{enumerable:!0,get:function(){return a.MailHat__icon}}),Object.defineProperty(t,"MailHat_main",{enumerable:!0,get:function(){return a.MailHat_main}}),Object.defineProperty(t,"MailHat_convo",{enumerable:!0,get:function(){return a.MailHat_convo}}),Object.defineProperty(t,"MailHat_page",{enumerable:!0,get:function(){return a.MailHat_page}});var a=n("k9Tg");n("iUjD"),window.MailHat_main=a.MailHat_main,window.MailHat_convo=a.MailHat_convo},E5Ij:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MailPreSendList__Msg=function(e){var t=store.mail,n=t.members[e.authorId],a=e.peerId,r=t.peers[a],o=(0,i.Msg__authorName)(n,a,t.cur.userId);return(0,i.default)({id:e.id,text:e.text,important:e.isImportant,unread:e.isUnread,authorPhoto:n.avatar,authorName:o,authorUrl:n.url,date:e.date,removed:t.cur.msgRemoved[e.id],admin:e.adminName?{name:e.adminName,url:e.adminUrl}:null,edited:e.edited,channel:r.isChannel&&r.ownerId!==t.cur.viewerId,attaches:e.attaches,attachesHTML:e.attachesHTML,attachesLoading:e.attachesLoading,forwards:e.forwards,reply:e.reply,pending:e.pending,failed:e.failed,sendId:e.sendId,sticker:e.sticker,maxDepth:store.mail.cur.maxMsgDepth})},t.default=void 0;(a=n("TYsd"))&&a.__esModule;var a,i=function(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("/Id8"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}var o=function(){store.mail.pendingMsgs;return{class:"MailPreSendList__box"}};t.default=o},E7VD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToElem=c,t._onWheel=u;var a,i=n("UxAg"),r=(a=n("jk6M"))&&a.__esModule?a:{default:a};var o=need("page"),s=need("onDOMReady");window.Slider={scrollToElem:c},Slider._onWheel=u,(r.default.ios||r.default.msie_edge)&&(s(f),o.onChange(f),window.MutationObserver&&s(function(){document.body&&new MutationObserver(d).observe(document.body,{subtree:!0,childList:!0})}));var l={slider:".Slider",scroll:".Slider__scroll"};function c(e){var t=e.closest(l.scroll);t.scrollLeft=e.offsetLeft-t.offsetWidth/2+e.offsetWidth/2}function u(e,t){var n=e.deltaX,a=e.deltaY;Math.abs(n)>Math.abs(a)&&(e.preventDefault(),t.scrollLeft+=n)}function d(e){e.forEach(function(e){e.addedNodes.forEach(function(e){e.nodeType===Node.ELEMENT_NODE&&e.$$(l.slider).forEach(h)})})}function f(){(0,i.$$)(l.slider).forEach(h)}function h(e){var t=getComputedStyle(e),n=Number(t.paddingTop.replace("px","")),a=Number(t.paddingBottom.replace("px",""));e.style.overflow="hidden",e.style.height=e.offsetHeight-n-a+"px",e.$(l.scroll).style.paddingBottom="20px"}},EMnU:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconWd=function(e){var t,n=e.icon;return{class:[e.class,Bem.class("Icon",(t={},o(t,n,!0),o(t,"active",e.active),o(t,"blue",e.blue),o(t,"bluer",e.bluer),o(t,"dark",e.dark),o(t,"selected",e.selected),o(t,"small",e.small),o(t,"white",e.white),t))],href:e.url,attrs:e.attrs}},t.default=void 0;var a=r(n("bZ/P")),i=r(n("Mc5h"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n=e.icon,r=e.class||e.mix;return(0,i.default)({mix:a.default.class(r,"Icon",(t={},o(t,n,!0),o(t,"active",e.active),o(t,"blue",e.blue),o(t,"bluer",e.bluer),o(t,"dark",e.dark),o(t,"selected",e.selected),o(t,"small",e.small),o(t,"white",e.white),t)),url:e.url,attrs:e.attrs})};t.default=s},EYkR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("d124"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.AppShell=i.default},Ep6I:function(e,t,n){"use strict";n.r(t),n.d(t,"createLongpollConnect",function(){return m});var a=n("DM26"),i=n("BxOC"),r=n("f01n"),o=202,s=7,l=4,c=-3,u=-4,d=-5;function f(e,t){e.waitAbortFns.push(t)}function h(e){if(e.isStoppedFn())return Promise.resolve({ts:0,updates:[]});var t=Object(i.plaingetCancelable)(e.url,{act:"a_check",key:e.key,version:e.version,ts:e.ts,wait:25,mode:e.mode}),n=t.request,r=t.cancel;return e.stopFn=r,n.then(function(t){var n=t[0],a=t[1];return e.onData(e,a),e.waitTimeout=2,JSON.parse(n)}).catch(function(t){var n=t[1];return e.onData(e,n),Promise.reject(new Error(""))}).then(function(t){return function(e,t){var n=t.failed?Object(a.abortablePause)(l,null):{abort:function(){},pause:function(){return Promise.resolve()}},i=n.abort,r=n.pause;switch(t.failed){case 1:return f(e,i),e.onHistoryLost(e,t).then(function(){return e.onResult({ts:t.ts,updates:[[-1]]})}).then(r).then(function(){return h(e)});case 2:return f(e,i),e.onKeyExpired(e,t).then(function(t){var n=t[0],a=t[1],i=t[2],r=t[3];return e.onResult({ts:+r,updates:[[-2,n,a+"/"+i],[-1]]})}).then(r).then(function(){return h(e)});case 3:return e.onLpBroken(e,t);default:return Promise.resolve(t)}}(e,t)})}function p(e){e.isStoppedFn()||h(e).then(e.onResult.bind(e)).then(function(){return e.isReconnecting&&A(e,d)}).catch(function(t){return function(e,t){if(e.isStoppedFn())return;e.onRequestError(t),e.waitTimeout=Math.min(60,2*e.waitTimeout),A(e,c);var n=Object(a.abortablePause)(e.waitTimeout,null),i=n.abort,r=n.pause;return f(e,i),r().then(function(){return A(e,u)})}(e,t)}).then(function(){return p(e)})}function A(e,t){e.isReconnecting=t===u,e.onResult({ts:e.ts,updates:[[t,e.waitTimeout]]})}function m(e,t){var n=!!e.stopped,a={id:e.id,key:e.key,ts:e.ts,url:e.url,lpstat:e.lpstat||0,version:e.version||s,mode:o,waitTimeout:2,waitAbortFns:[],isReconnecting:!1,isStoppedFn:function(){return n},onResult:function(e){e.ts&&l(a.ts,e.ts,e.updates.map(function(e){switch(e[0]){case 0:return r.deleteEvent(e);case 1:return r.replaceFlagsEvent(e);case 2:return r.setFlagsEvent(e);case 3:return r.resetFlagsEvent(e);case 4:return r.addMessageEvent(e);case 5:return r.editMessageEvent(e);case 6:return r.readInboundEvent(e);case 7:return r.readOutboundEvent(e);case 8:return r.gotOnlineEvent(e);case 9:return r.gotOfflineEvent(e);case 10:return r.resetDirectoriesEvent(e);case 11:return r.replaceDirectoriesEvent(e);case 12:return r.setDirectoriesEvent(e);case 13:return r.deleteDialogEvent(e);case 18:return r.replaceMessageEvent(e);case 51:return r.chatChangedEvent(e);case 52:return r.chatUpdatedEvent(e);case 63:return r.typingEvent(e);case 64:return r.recordingAudioEvent(e);case 70:return r.videoCallEvent(e);case 80:return r.unreadCountEvent(e);case 114:return r.notifySettingsChangedEvent(e);case 116:return r.refreshMessageEvent(e);case 117:return r.audioStartEvent(e);case-1:return r.resyncEvent();case-2:return r.refreshLpKeyEvent(e);case c:return r.waitingForReconnectEvent(e);case u:return r.reconnectingEvent();case d:return r.reconnectedEvent();default:return r.emptyEvent(e)}}))},onData:_(t.onData),onRequestError:_(t.onRequestError),onHistoryLost:v(t.onHistoryLost),onKeyExpired:v(t.onKeyExpired),onLpBroken:v(t.onHistoryLost)},i=t.onEvents;function l(e,t,n){a.ts=t;for(var o=0;o<n.length;++o)n[o].type===r.REFRESH_LP_KEY&&(a.key=n[o].key||"",a.url=n[o].url||"");i(e,t,n)}var f={options:a,isStopped:function(){return n},stopConnection:function(){n=!0,a.stopFn&&a.stopFn(),a.stopFn=void 0,this.abortWaiting()},reinitConnection:function(){this.stopConnection(),A(a,u),n=!1,p(a)},abortWaiting:function(){a.waitAbortFns.forEach(function(e){return e()}),a.waitAbortFns=[],a.waitTimeout=2},onLp:l};return p(a),f}function _(e){return e||function(){}}function v(e){return e?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.resolve(e.apply(void 0,t))}:function(){return Promise.reject()}}},FLY7:function(e,t,n){"use strict";var a=O(n("jk6M")),i=n("cq4b"),r=O(n("TYsd")),o=(O(n("Mc5h")),x(n("/Id8"))),s=O(n("CkGd")),l=O(n("fWqt")),c=O(n("77iS")),u=x(n("/Rzu")),d=O(n("HPEO")),f=O(n("yNeG"));n("XRdp");var h=O(n("D48u")),p=(O(n("2eJH")),O(n("M2vk"))),A=n("7jQU"),m=O(n("rKp0")),_=x(n("HGMY")),v=x(n("lQx8")),g=n("9M99"),y=n("hw56"),b=n("qHA9"),w=n("H5mD"),E=n("Qz23"),k=x(n("aiw/")),S=x(n("W38l")),C=x(n("HdGT")),M=x(n("ok75")),P=x(n("wZtc")),T=O(n("UlUB")),D=n("BZzM");function I(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return I=function(){return e},e}function x(e){if(e&&e.__esModule)return e;var t=I();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}function O(e){return e&&e.__esModule?e:{default:e}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=!1;uVK.onReady(me),v.Messenger.onQueryChange(ye),v.Messenger.onQueryClear(be),u.default.onTap(ee),f.default.onUnreadClick(V),f.default.onBackClick(Ve),f.default.onBackToDialogClick(Ue),f.default.onCancelEditing(Tt),d.default.onAttachedMsgsRemove(Z),d.default.onToBottomClick(Le),d.default.onMessage(Y),C.onMessage(G),C.onStopped(Q),C.onMessageRemove(X),C.onCaptcha(Wt),o.default.onClick(pt),o.default.onRestoreClick(At),o.default.onReplyClick(mt),o.default.onForward(vt),Voting.onHtmlUpdate(xt),v.Messenger.onMainScroll(Be),v.Messenger.onConvoScroll(Re),v.Messenger.onSearchMsgsClick(ve),v.Messenger.onConvoScroll(v.default.expandPeerBefore),v.Messenger.onConvoAtTop(Ie),v.Messenger.onConvoAtBottom(xe),s.default.onCloseClick(it),s.default.onRemoveClick(rt),s.default.onImportantClick(ut),s.default.onReplyClick(ft),s.default.onForwardClick(ht),s.default.onSpamClick(ct),s.default.onPinClick(nt),s.default.onEditClick(at),l.default.onConfirmDelete(st),PinnedMsg.onHideClick(wt),h.default.onRejectAll(Nt),im.onNewMsg(K),im.onEditMsg(J),im.onMultiTyping(We),im.onRecordingAudio(Ye),im.onOnlineChange(Qe),im.onMsgReadByMe(Xe),im.onMsgReadByOther(Ke),im.onMsgImportantRemove(ne),im.onMsgImportantAdd(te),im.onMsgRemove(ae),im.onMsgListen(ie),im.onPeerKeyboard(oe),im.onPeerBanner(ue),im.onPeerConvert(de),im.onPeerAdmin(fe),im.onMsgRequestChange(he),im.onDialogImportant(se),im.onUnreadCount(le),im.onResync(ce),M.onUnidle(Ut),AudioMessagePlayer.events.on("listened",zt),nav.onPopState(Je),nav.onBeforeGo(Ze),nav.onBeforeGo2(et),page.onChange(tt),uVK.onReady(St),page.onChange(St),uVK.onReady(Ct),page.onChange(Ct),page.onChange(q),page.onChange(It),uVK.onReady(q),uVK.onReady(yt),uVK.onReady(It),uVK.onOrientationChange(W),v.default.loadMailPage(Ot),v.default.onShowPinnedMsgClick=bt,v.default.onHidePinnedMsgClick=wt,v.default.onBannerButtonClick=Et,v.default.onBannerTextClick=kt;var R=!1,N=0,j=[],F=[],H=(0,T.default)(function(){if(!j.length)return;var e=store.mail,t=e.members,n=e.cur,a=j,i=F;j=[],F=[],ajaxRequest("/mail",{act:"get_members",members:a},function(e){Object.assign(t,e),i.forEach(function(e){e===n.peerId&&p.default.redraw(),u.default.redrawTyping(e)})})},3e3);function V(){v.Messenger.scrollMainBodyToTop()}function U(){(0,E.preventDocumentScroll)();var e=v.Messenger.getMainBody();e&&(0,E.setScrollView)(e);var t=$(".leftMenu__searchItems");t&&(0,E.setScrollView)(t,{topBanner:!1,overscrollY:!1})}function z(){(0,E.preventDocumentScroll)({topBanner:!1}),v.Messenger.setupConvoBody()}function W(){a.default.safari_mobile&&document.activeElement.blur()}function q(){var e=nav.getQuery("msg")||nav.getQuery("id")||nav.getQuery("edit_msg_id");e?requestAnimationFrame(function(){v.default.scrollToMsg(e)}):requestAnimationFrame(v.Messenger.scrollConvoToBottom)}function G(e){var t=store.mail.cur;(0,y.addPendingMsg)(e),t.peerId&&(0===e.sendId.indexOf("edit")?Fe(e):(_.removeMsg(e),_.addMsg(e),Ht()))}function Y(e){store.mail.cur.peerId&&0===e.sendId.indexOf("edit")&&Fe(e)}function Q(){(0,y.failAllPendingMsgs)();var e=store.mail,t=e.cur,n=e.presend;if(t)if(t.peerId){if(n.failed[t.peerId]){var a=[];n.failed[t.peerId].map(function(e){var t=n.msgs[e];t&&(0===t.sendId.indexOf("edit")?Fe(t):a.push(t))}),_.setMsgs(a)}}else Object.keys(n.failed).forEach(function(e){u.default.redrawLastMsg(e)})}function X(e){var t=store.mail.presend.msgs[e];t&&((0,y.removePendingMsg)(t),(0,y.removeFailedMsg)(t),0===e.indexOf("edit")?store.mail.cur.peerId&&m.default.peerReplaceItems([t.id]):(store.mail.cur.peerId&&_.removeMsg(t),Ht()))}function K(e){je(e)}function J(e){je(e)}function Z(){var e=store.mail,t=e.cur;e.peers;(0,y.setPeerDraft)(t.viewerId,t.peerId,{msgs:void 0},t.editing),t.msgAttached[t.peerId]=[],d.default.uiRedrawAttachments(t.peerId)}function ee(e){var t=store.mail,n=(t.cur,t.rolls),a=t.msgs,i=Number(qs2obj(e.split("?")[1]).peer);a[last(n.peer[i]||[])];return _e(e)}function te(e){var t=store.mail,n=t.cur,a=t.msgs,i=t.scraps,r=t.rolls,s=a[e];if(s&&(s.isImportant=!0,r.folder.important=r.folder.important.concat(e).filter(unique).sort(desc),o.default.toggleImportant(e,!0),"important"===n.folder)){var l=i.folder.slice();i.folder=i.folder.concat(e).filter(unique).sort(desc),m.default.redrawFolder(l)}}function ne(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=store.mail,a=n.cur,r=n.msgs,s=n.scraps,l=n.rolls,c=r[e];if(c&&(c.isImportant=!t,(0,i.arrayRemove)(l.folder.important,e),o.default.toggleImportant(e,!1),"important"===a.folder)){var u=s.folder.slice();(0,i.arrayRemove)(s.folder,e),m.default.redrawFolder(u)}}function ae(e){var t=store.mail,n=t.cur,a=t.msgs,r=t.scraps,l=t.rolls,c=t.peers,u=a[e];if(u&&!n.msgRemoved[e]){delete a[e],(0,i.arrayRemove)(l.peer[u.peerId],e),n.peerId===u.peerId&&((0,i.arrayRemove)(r.peer,e),o.default.remove(e,!0),n.msgSelected[e]&&(delete n.msgSelected[e],s.default.setCount(Object.keys(n.msgSelected).length),v.default.redrawMailActions()),r.peer.length?m.default.checkDivider():m.default.redrawPeer()),u.isImportant&&n.countImportant--;var h=c[u.peerId],p=h.isIncomingMR,A=h.isRejectedMR;u.isUnread&&u.authorId!==n.viewerId&&(c[u.peerId].countUnread=c[u.peerId].countUnread-1,p||A||c[u.peerId].countUnread<=0&&(n.countUnread=n.countUnread-1),d.default.redrawToBottom(),f.default.redrawCounter()),l.peer[u.peerId].length?re(u,e):ajaxRequest("/mail",{act:"get_last_msg",peer_id:u.peerId,user_id:n.userId},function(t,n){n&&(storeMethods.injectMail(t),l.peer[u.peerId].push(n)),re(u,e)},function(){re(u,e)})}}function ie(e){var t=store.mail.msgs,n=t&&t[e];if(n){n.listened=!0,n.attachesHTML=n.attachesHTML.replace(/class="(im_msg_audiomsg(?:\w?\s?)*)"/g,'class="im_msg_audiomsg im_msg_audiomsg_listened"');var a=$$('.audio-msg-track[data-msg="'.concat(e,'"]'));a&&a.forEach(function(e){e.closest(".im_msg_audiomsg").classList.add("im_msg_audiomsg_listened")})}}function re(e,t){var n=store.mail,a=n.cur,r=(n.msgs,n.scraps),o=n.rolls,s=n.peers,l=s[e.peerId],c=l.isIncomingMR,u=l.isRejectedMR;o.peer[e.peerId].length||(c||u?(0,i.arrayRemove)(o.mrs,e.peerId):((0,i.arrayRemove)(o.folder.all,e.peerId),(0,i.arrayRemove)(o.folder.unread,e.peerId),(0,i.arrayRemove)(o.folder.unrespond,e.peerId)),"mrs"===a.page?(0,i.arrayRemove)(r.mrs,e.peerId):"important"!==a.folder&&(0,i.arrayRemove)(r.folder,e.peerId)),o.peer[e.peerId]=o.peer[e.peerId].filter(unique).sort(asc),c||u?o.mrs=o.mrs.filter(unique).sort(gt):(0===l.countUnread&&(o.folder.unread=o.folder.unread.filter(function(t){return t!==e.peerId})),o.folder.all=o.folder.all.filter(unique).sort(gt),o.folder.unread=o.folder.unread.filter(unique).sort(gt),a.groupId&&(o.folder.unrespond=o.folder.unrespond.filter(unique).sort(gt))),"mrs"===a.page?(r.mrs=r.mrs.filter(unique).sort(gt),m.default.redrawMRs()):"important"===a.folder?((0,i.arrayRemove)(r.folder,t),m.default.redrawFolder()):"all"===a.folder?(r.folder=r.folder.filter(unique).sort(gt),m.default.redrawFolder()):"unread"===a.folder?(0===s[e.peerId].countUnread&&(0,i.arrayRemove)(r.folder,e.peerId),r.folder=r.folder.filter(unique).sort(gt),m.default.redrawFolder()):"unrespond"===a.folder&&(r.folder=r.folder.filter(unique).sort(gt),m.default.redrawFolder())}function oe(e){var t=store.mail,n=t.peers,a=t.cur;if(n[e]){var i=(0,y.getKeyboardState)(e);if(!(Date.now()-i.updateTime<=500)){var r=i.updateTime;ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(t){r===i.updateTime&&(storeMethods.injectMail(t),e==a.peerId&&d.default.renderKeyboardIfNeeded({update:!0}))})}}}function se(e,t){var n=store.mail.peers[e];n&&(n.isImportant=t),u.default.redrawImportant(e,t)}function le(e){nav.getQuery("community")||function(e){if(setNotify(e),!window.al||!window.al.menu)return;var t=window.al,n=new Array(t.menu.length);n[3]=e,menu.refreshCounters(n)}(e);var t=store.mail.cur;t&&(t.countUnread=e,f.default.redrawCounter()),window.ExperimentalBadge&&window.ExperimentalBadge.set(e)}function ce(){im.pause(),Ae(function(){im.resume()})}function ue(e){Date.now()-N<=500||ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(t){var n=store.mail.cur;storeMethods.injectMail(t),e==n.peerId&&v.default.redrawBanner()})}function de(e,t){im.pause(),ajaxRequest("/mail",{act:"get_peers",peer_ids:[t]},function(n){(0,y.replacePeer)(e,t),storeMethods.injectMail(n);var a=store.mail.cur;e===a.peerId?(m.default.redrawFolder(),t===a.peerId?Se(t):_e("/mail?act=show&peer=".concat(t),{replace:!0})):a.folder&&m.default.redrawFolder(),im.resume()})}function fe(e,t,n){var a=store.mail,r=a.cur,o=a.peers;if(r){var s=o[e];s&&(t===r.userId&&(s.isAdmin=n),n&&!(0,i.arrayContains)(s.adminIds,t)?s.adminIds.push(t):!n&&(0,i.arrayContains)(s.adminIds,t)&&(0,i.arrayRemove)(s.adminIds,t))}}function he(e,t){var n=store.mail,a=n.cur,r=n.rolls,o=n.scraps;a&&("created"!==t&&L||("created"===t&&L&&(L=!1),"created"===t?pe(e,function(t,n){(0,y.removePeer)(e),storeMethods.injectMail(t),a.countMR=n,store.mail.mrs&&(r.mrs=r.mrs.concat(e).filter(unique).sort(gt)),a.folder&&(m.default.redrawFolder(),v.default.redrawMRsHint()),a.peerId===e&&Se(e)}):"canceled"===t?pe(e,function(t,n){(0,y.removePeer)(e),storeMethods.injectMail(t),a.countMR=n,store.mail.mrs&&(0,i.arrayRemove)(r.mrs,e),a.folder&&(m.default.redrawFolder(),v.default.redrawMRsHint()),a.peerId===e?Se(e):"mrs"===a.page&&((0,i.arrayRemove)(o.mrs,e),m.default.redrawMRs())}):"rejected"===t?pe(e,function(t,n){(0,y.removePeer)(e),storeMethods.injectMail(t),a.countMR=n,store.mail.mrs&&(0,i.arrayRemove)(r.mrs,e),a.folder&&(m.default.redrawFolder(),v.default.redrawMRsHint()),a.peerId===e?Se(e):"mrs"===a.page&&((0,i.arrayRemove)(o.mrs,e),m.default.redrawMRs())}):"accepted"===t&&pe(e,function(t,n){(0,y.addPeer)(e),storeMethods.injectMail(t),a.countMR=n,store.mail.mrs&&(0,i.arrayRemove)(r.mrs,e),a.folder&&(m.default.redrawFolder(),v.default.redrawMRsHint()),a.peerId===e?Se(e):"mrs"===a.page&&((0,i.arrayRemove)(o.mrs,e),m.default.redrawMRs())})))}function pe(e,t){im.pause(),ajaxRequest("/mail",{act:"mrs_get_peer",peer_id:e},function(e,n){t(e,n),im.resume()})}function Ae(e){var t=store.mail,n=t.cur,a=t.msgs,i=t.scraps,r=t.rolls;r.folder[n.folder]=[],i.folder=[],v.Messenger.setMainLoading(!0),ajaxRequest("/mail",{act:"all"===n.folder?null:n.folder,offset:0},function(t,o){if(store.mail.cur){storeMethods.injectMail(t),"all"!==n.folder&&"unread"!==n.folder||Object.keys(t.msgs).forEach(function(e){e=toInt(e);var n=t.msgs[e].peerId;r.peer[n]=(r.peer[n]||[]).concat(e).filter(function(e){return!!a[e]}).filter(unique).sort(asc)});var s="important"===n.folder,l=s?desc:gt,c=Object.keys(s?t.msgs:t.peers).map(toInt).sort(l).filter(function(e){return-1===i.folder.indexOf(e)}),u=[].concat(c).filter(unique).sort(l);r.folder[n.folder]=u,i.folder=first(20,u),store.mail.reached.folder[n.folder]=o,m.default.redrawFolder(),f.default.redrawCounter(),v.Messenger.setMainLoading(!1),e&&e()}})}function me(){"/mail"!==location.pathname&&0!==location.pathname.indexOf("/write")||Bt()}function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=we(e);return e=makeUrl(e),n&&location.pathname+location.search!==e&&nav.go(e,!1,{push_only:!0,replace:!0===t.replace}),n}function ve(){var e=store.mail.cur.query;_e("/mail?q=".concat(e,"&tab=messages"))}function ye(e){var t=ye;if(t.timer&&clearTimeout(t.timer),store.mail.cur){var n=store.mail.cur,a=!n.query;if(e){var i="msgs"===n.tab?"&tab=messages":"",r=makeUrl("/mail?q=".concat(e)+i);we(r),a?_e(r):t.timer=setTimeout(function(){_e(r,{replace:!0})},300)}else _e("/mail",{replace:!0})}}function be(){v.Messenger.setMainLoading(!1),v.Messenger.setConvoLoading(!1),ye.clearTimer(),_e("/mail",{replace:!0})}function we(e){var t=(e=makeUrl(e)).split("?"),n=t[0],a=qs2obj(t[1]),i=store.mail,o=i.cur,s=i.scraps;if(o){var l=a.act,c=a.peer,u=a.chat,d=a.email,f=a.m,p=toInt(a.msg)||toInt(a.id)||null,A="messages"===a.tab?"msgs":"peers",_=a.q||"",g=+a.community||0;if(Ze())return!0;if("/mail"!==n||"add_to_chat"===l||"flush_history"===l||"info"===l||"unpin"===l||"leave_chat"===l||"new_chat"===l||"chat_preview"===l||"return_to_chat"===l||"show_medias"===l||"toggle_community_block"===l||"community_toggle_important"===l||"ban_user"===l||"community_mark_answered"===l||"invite_link"===l||"reset_link"===l||"send"===l||"show"===l&&a.id||70==f||71==f||76==f||784==f||783==f||786==f||785==f||787==f)return clog("[mail nav] Exit Mail"),void Lt();if((o.groupId?-o.groupId:0)===g){p&&(R=!0),m.default.clearSystemMessage2();var y=c?toInt(c):u?toInt(u)+2e9:d?-toInt(d)-2e9:null,b="unread"===l||"important"===l||"unrespond"===l?l:"all",w=function(e){switch(e){case"template":case"mrs":case"msg":return!0}return!1}(l),E=!w&&!!o.page,k=o.query!==_||o.tab!==A;o.page;if(E&&(o.page=null),k&&y&&("peers"===o.tab?store.mail.cur.mvk_entrypoint="conversations_search":"msgs"===o.tab&&(store.mail.cur.mvk_entrypoint="message_search")),o.peerId&&!y&&_)clog("[mail nav] Peer back to Search"),o.query=_,o.peerId=null,o.tab=A,Ce(),v.Messenger.setQuery(_),De();else if(k&&o.peerId===y)o.query=_,o.tab=A,s.search=[],o.tab!==A&&(store.mail.reached.search.msgs={}),v.default.redrawView(),v.Messenger.setQuery(_),m.default.redrawSearch(),_?(clog("[mail nav] Search update"),De()):(clog("[mail nav] Search exit"),function(){var e=store.mail,t=e.cur,n=e.scraps;t.query="",t.tab="peers",n.search=[],v.default.redrawView(),m.default.redrawSearch(),v.Messenger.setQuery("")}(),0===s.folder.length&&Te());else if(w)clog("[mail nav] Enter Page: "+l),o.page=l,o.peerId&&(o.peerId=null,Ce()),o.backUrl=Rt({peerId:y}),v.default.redrawView(),function(e){var t=store.mail.cur,n=v.Messenger.getPageLayer();"mrs"===t.page&&store.mail.mrs?(store.mail.scraps.mrs=store.mail.rolls.mrs.concat(),n.classList.toggle("messenger__layer_loading",!1),n.innerHTML=r.default.html((0,h.default)({count:t.countMR}))):(n.classList.toggle("messenger__layer_loading",!0),n.innerHTML=(0,v.Messenger_renderLoadingPage)(),ajaxRequest(e,{},function(e,t){t&&storeMethods.injectMail(t),n.classList.toggle("messenger__layer_loading",!1),n.innerHTML=e}))}(e);else{if(o.peerId&&o.peerId===y)return!0;o.peerId!==y||E&&y?y?(clog("[mail nav] Enter Dialog"),o.backUrl=Rt({peerId:y}),Se(y,p)):(clog("[mail nav] Exit Dialog"),Ce(),Ee(b),v.Messenger.getMainBody().scrollTop=0,Te()):y&&f?(clog("[mail nav] Peer System Msg"),store.mail.peers[y].systemMessageCode=toInt(f),m.default.updateClass("peer"),m.default.redrawSystemMessage(),v.Messenger.scrollConvoToBottom()):(o.folder!==b||E&&b)&&(clog("[mail nav] Enter Folder"),Ee(b),v.Messenger.getMainBody().scrollTop=0,Te())}return!0}}}function Ee(e){var t=store.mail,n=t.cur,a=t.scraps,i=t.rolls;n.folder=e,ke()?Ae():(a.folder=first(20,i.folder[e]),m.default.folderSetItems(a.folder),v.default.redrawView(),f.default.redraw())}function ke(){var e=store.mail,t=e.rolls,n=e.cur,a=e.msgs,i=t.folder[n.folder];return!i||("important"===n.folder?i.some(function(e){return!a[e]}):i.some(function(e){return!(t.peer[e]&&t.peer[e].length>0)}))}function Se(e,t){var n=store.mail,a=n.cur,r=n.msgs,o=n.peers,s=n.scraps,l=n.rolls,c=n.reached;if(o[e]){var h=l.peer[e]||[];if(t||!(o[e].countUnread>1)||o[e].isIncomingMR||o[e].isRejectedMR){a.peerId=e,s.peer=[],yt(),t?(s.peer=[t],l.peer[e]=[],c.peer.before[e]=!1,c.peer.after[e]=!1):(s.peer=last(20,h),A()),store.mail.reached.peer.after[e]=!0,m.default.updateClass("peer"),v.default.redrawView(),v.Messenger.redrawConvoLayer(),St(),f.default.startStatusUpdate(),m.default.peerSetItems(s.peer),z(),C.ready().then(function(){d.default.init()}),t||Me(e);o[e];t&&(m.default.updateClass("peer"),v.default.scrollToMsg(t)),t?Ie(t):Ie(),(0,D.resizePosters)(),requestAnimationFrame(function(){t||(v.Messenger.scrollConvoToBottom(),C.ready().then(function(){v.Messenger.scrollConvoToBottom()})),AudioMessagePlayer.redrawWaves(),requestAnimationFrame(function(){t||v.Messenger.scrollConvoToBottom()})})}else{v.Messenger.setConvoLoading(!0),window._preventedCheckTop=!0,R=!0,a.peerId=e,s.peer=[],yt(),u.default.redrawUnread(e),v.default.redrawView(),v.Messenger.redrawConvoLayer(),St(),f.default.startStatusUpdate(),A(),m.default.peerSetItems([]),z(),C.ready().then(function(){d.default.init()});var p={act:"show",peer_id:e,msg:"unread",reply_msg_id:a.msgReply[a.peerId]};ajaxRequest("/mail",p,function(t,n,a){if(store.mail.cur){var o=t.rolls.peer[e];if(storeMethods.injectMail(t),c.peer.after[e]=n,c.peer.before[e]=a,h=l.peer[e]||[],((0,i.arrayIntersects)(o,h)||n&&0===h.length)&&(l.peer[e]=h.concat(o).filter(unique).sort(asc)),store.mail.cur.peerId===e){d.default.preventShowToBottom(),s.peer=o.slice(),geByClass1("mailScrap__items_peer").innerHTML="",m.default.updateClass("peer"),m.default.peerSetItems(o),AudioMessagePlayer.redrawWaves(),Me(e);var u=o.find(function(e){return r[e].isUnread});v.default.scrollToMsg(u,!0,!1),requestAnimationFrame(function(){window._preventedCheckTop=!1,R=!1,v.Messenger.setConvoLoading(!1)})}}})}}else ajaxRequest("/mail",{act:"get_peers",peer_ids:[e]},function(n){storeMethods.injectMail(n),o[e]?Se(e,t):window.location.reload()});function A(){a.forwardFromId&&(dt(),a.forwardFromId=null)}}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=store.mail,n=t.cur,a=t.scraps;f.default.cancelStatusUpdate(),Tt(),n.peerId=null,n.mvk_entrypoint="",a.peer=[],yt(),n.hasAttachments=!1,e.keepSelected||(n.msgSelected={}),v.default.redrawView(),f.default.redraw(),d.default.reset(),v.Messenger.cleanConvoBody(),U(),requestAnimationFrame(function(){s.default.setCount(0),v.default.redrawMailActions(),p.default.redraw(),requestAnimationFrame(function(){m.default.peerSetItems(a.peer)})})}function Me(e){M.addAction("read_dialog".concat(e),function(){!function(e){var t=store.mail.peers;if(!t)return;var n=t[e];if(n&&(n.isIncomingMR||n.isRejectedMR))return;!n||n.countUnread>0?ajaxRequest("/mail",{act:"read_dialog",peer_id:e,hash:n.hashRead},function(){Xe(null,e)}):setTimeout(function(){Xe(null,e)},500)}(e)})}function Pe(e,t){M.addAction("read_dialog".concat(t),function(){!function(e,t){var n=store.mail.peers;if(!n)return;Xe(null,t),ajaxRequest("/mail",{act:"read_message",msg_id:e,peer_id:t,hash:n[t].hashRead},function(){})}(e,t)})}function Te(){var e=Te,t=e.locked||(e.locked={}),n=store.mail,a=n.cur,i=n.scraps,r=n.rolls,o=n.reached,s=a.folder,l=i.folder,c=r.folder[s],u="folder_".concat(s),d=o.folder[s]&&last(l)===last(c);if(v.Messenger.setMainLoading(0===l.length&&!d),!t[u]&&!d){var h="important"===s,p=ke(),A=h?desc:gt,_=[];if(0===l.length)_=first(20,c);else{var g=c.indexOf(last(l));_=g>=0?c.slice(g+1,g+21):[]}if(_.length&&!p){var y=l.concat(_).filter(unique).sort(A);i.folder=y,m.default.folderAddItems(_)}else{t[u]=!0;var b="all"===s?null:s,w=p?0:l.length;ajaxRequest("/mail",{act:b,offset:w},function(e,n){if(store.mail.cur){storeMethods.injectMail(e),Object.keys(e.peers).forEach(function(e){store.mail.reached.peer.after[e]=!0}),"all"!==s&&"unread"!==s||Object.keys(e.msgs).forEach(function(t){t=toInt(t);var n=e.msgs[t].peerId;r.peer[n]=(r.peer[n]||[]).concat(t).filter(unique).sort(asc)});var d=Object.keys(h?e.msgs:e.peers).map(toInt).sort(A).filter(function(e){return-1===l.indexOf(e)}),_=c.concat(d).filter(unique).sort(A);r.folder[s]=_,n&&(o.folder[s]=n),t[u]=!1,a.folder===s&&(i.folder=_,m.default.updateClass("folder"),m.default.folderAddItems(d),v.Messenger.setMainLoading(!1),p&&(m.default.folderSetItems(i.folder),v.default.redrawView(),f.default.redraw()))}})}}}function De(){var e=De,t=e.locked||(e.locked={}),n=store.mail,a=n.cur,i=n.scraps,r=n.rolls,o=n.reached,s=a.tab,l=a.query,c="search_msgs_".concat(s,"_").concat(l),u=i.search,d=r.search[s][l]||[],f=o.search[s][l]&&last(u)===last(d);if(v.Messenger.setMainLoading(0===u.length&&!f),!t[c]&&!f){var h=[];if("peers"===s&&(d.length||(d=function(){var e=store.mail,t=e.cur,n=e.peers,a=(e.rolls,Object.keys(n).map(toInt)),i=QuickSearch.getQueryREs(t.query),r=[];return i.forEach(function(e){a.forEach(function(t){n[t].title.match(e)&&r.push(t)})}),r.filter(unique).sort(gt)}()),d.length))if(0===u.length)h=first(20,d);else{var p=d.indexOf(u);h=p>=0?d.slice(p+1,p+41):[]}if(h.length&&(i.search=u.concat(h).filter(unique),m.default.redrawSearch(),m.default.updateClass("search"),v.Messenger.setMainLoading(!1)),!h.length||"peers"===s){var A="msgs"===s?{act:"search",q:l,offset:i.search.length,messages:1}:{act:"search",q:l};e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){t[c]=!0,ajaxRequest("/mail",A,function(e,n){if(store.mail.cur){t[c]=!1,storeMethods.injectMail(e);var u=Object.keys("peers"===s?e.peers:e.msgs).map(toInt),f="peers"===s?gt:desc,h=d.concat(u).filter(unique).sort(f);r.search[s][l]=h,n&&(o.search[s][l]=n),a.tab===s&&a.query===l&&(v.Messenger.setMainLoading(!1),i.search=i.search.concat(u).filter(unique).sort(f),m.default.redrawSearch(),m.default.updateClass("search"))}})},300)}}}function Ie(e){if(!$(".load_before_closed")){var t=Ie,n=t.locked||(t.locked={}),a=store.mail,r=a.cur,o=a.scraps,s=a.rolls,l=a.reached;if(r){var c=r.peerId,u=o.peer,f=s.peer[c]||[],h="peer_before_".concat(c),p=l.peer.before[c]&&u[0]===f[0],A=r.msgReply[c];if(v.Messenger.setConvoLoading(u.length<1&&!p),!n[h]&&!p){var _=v.Messenger.getConvoBody(),g=!(0,i.arrayIntersects)(u,f),y=first(u),b=y?f.indexOf(y):-1,w=0===u.length?last(10,f):b>=0?f.slice(b-20,b):[];if(w.length&&!e){if(_.scrollTop>6e3&&!g)return;if(window._preventedCheckTop)return;var E=o.peer.slice(),k=u.concat(w).filter(unique).sort(asc);o.peer=k,m.default.peerAddItemsBefore(w.filter(function(e){return-1===E.indexOf(e)})),AudioMessagePlayer.redrawWaves(),m.default.updateClass("peer"),v.Messenger.setConvoLoading(!1)}else{if(!c)return;var S={act:"show",peer_id:c,msg:u[0],direction:e?"around":"before",reply_msg_id:A},C=u[0];n[h]=!0,ajaxRequest("/mail",S,function(t,a,r){if(store.mail.cur){e&&setTimeout(function(){R=!1},10),n[h]=!1,t.peers=[],storeMethods.injectMail(t);var p=Object.keys(t.msgs).map(toInt).filter(function(e){return-1===u.indexOf(e)}),A=u.concat(p).filter(unique).sort(asc);if(r&&(l.peer.before[c]=!0),a&&(l.peer.after[c]=!0),f=s.peer[c]||[],((0,i.arrayIntersects)(A,f)||r&&0===f.length)&&(s.peer[c]=(s.peer[c]||[]).concat(A).filter(unique).sort(asc)),store.mail.cur.peerId===c){if(d.default.preventShowToBottom(),_.scrollTop>6e3&&!g)return;var y=o.peer.slice();o.peer=A,m.default.updateClass("peer"),C?(m.default.peerAddItemsBefore(p.filter(function(e){return-1===y.indexOf(e)&&e<C}),!0),m.default.peerAddItemsAfter(p.filter(function(e){return-1===y.indexOf(e)&&e>C}),!0)):m.default.peerAddItemsBefore(p,!0),e&&(v.default.scrollToMsg(e),v.Messenger.setConvoLoading(!1)),AudioMessagePlayer.redrawWaves(),v.Messenger.setConvoLoading(!1),null!=t.flags.stickersAutoplay&&StickersSettings.setAutoplay(t.flags.stickersAutoplay),v.default.expandPeerBefore(),setTimeout(v.default.expandPeerBefore,100),e&&dt(),d.default.redrawReply()}}})}}}}}function xe(){var e=xe,t=e.locked||(e.locked={}),n=store.mail,a=n.cur,r=n.scraps,o=n.rolls,s=n.reached;if(!R&&a){var l=a.peerId,c=r.peer,u=o.peer[l]||[],d="peer_after_".concat(l);if(!(t[d]||s.peer.after[l]&&last(c)===last(u))){var f=v.Messenger.getConvoBody(),h=!(0,i.arrayIntersects)(c,u),p=function(){return f.scrollHeight-f.scrollTop-f.offsetHeight},A=last(c),_=A?u.indexOf(A):-1,g=_>=0?u.slice(_+1,_+21):[];if(!g.length||nav.getQuery("msg")||nav.getQuery("id")){if(!l)return;var y={act:"show",peer_id:l,msg:last(c),direction:"after"};t[d]=!0,ajaxRequest("/mail",y,function(e,n){if(store.mail.cur){t[d]=!1,e.peers=[],storeMethods.injectMail(e);var a=Object.keys(e.msgs).map(toInt).filter(function(e){return-1===c.indexOf(e)}).sort(asc),f=c.concat(a).filter(unique).sort(asc);if(n&&(s.peer.after[l]=n),u=o.peer[l]||[],((0,i.arrayIntersects)(f,u)||n&&0===u.length)&&(o.peer[l]=(o.peer[l]||[]).concat(f).filter(unique).sort(asc)),store.mail.cur.peerId===l){if(p()>6e3&&!h)return;n&&m.default.updateClass("peer"),r.peer=f,m.default.updateClass("peer"),m.default.peerAddItemsAfter(a),AudioMessagePlayer.redrawWaves()}}})}else{if(p()>6e3&&!h)return;var b=c.concat(g).filter(unique).sort(asc);r.peer=b,m.default.peerAddItemsAfter(g),m.default.updateClass("peer"),AudioMessagePlayer.redrawWaves()}}}}ye.clearTimer=function(){self=ye,self.timer&&(clearTimeout(self.timer),self.timer=null)};var Oe=!1;function Be(e){var t=store.mail,n=t.cur,a=t.scraps,i=t.rolls,r=e.scrollTop,o=e.scrollHeight,s=e.offsetHeight;if(n)if(!n.query&&r<=20&&a.folder.length){if(Oe){Oe=!1;a.folder.slice();a.folder=first(20,i.folder[n.folder]),m.default.folderCutItems(20)}}else r>20&&(Oe=!0,o-r-s<window.innerHeight&&(n.query?De():Te()))}function Le(){var e=store.mail,t=e.cur,n=e.scraps,a=e.rolls,i=e.reached,r=n.peer,o=a.peer[t.peerId]||[];if(o.length&&last(r)===last(o)&&i.peer.after[t.peerId])v.Messenger.scrollConvoToBottom(),d.default.hideToBottom(),m.default.updateClass("peer");else{var s=t.peerId;ajaxRequest("/mail",{act:"show",peer_id:s},function(e,t){if(store.mail.cur){var r=e.rolls.peer[s];a.peer[s]=r.slice(),storeMethods.injectMail(e),i.peer.after[s]=!0,store.mail.cur.peerId===s&&(d.default.preventShowToBottom(),n.peer=r.slice(),geByClass1("mailScrap__items_peer").innerHTML="",m.default.peerAddItemsBefore(r),m.default.updateClass("peer"),v.Messenger.scrollConvoToBottom(),AudioMessagePlayer.redrawWaves())}})}}function Re(e){var t=Re;t.timer||(t.timer=setTimeout(function(){t.timer=null,function(e){var t=store.mail,n=t.cur,a=t.scraps,i=t.msgs,r=t.peers;if(!n)return;var s=a.peer.find(function(e){return i[e]&&i[e].isUnread&&i[e].authorId!==n.viewerId}),l=e.scrollTop,c=e.scrollHeight-l-e.offsetHeight;if(s){var u=o.default.getElem(s),f=e.scrollHeight-u.offsetTop;c-f<=100&&Me(n.peerId)}e._prevScroll||(e._prevScroll=0),c<300&&$(".mailScrap_reachedAfter")?d.default.hideToBottom():l>e._prevScroll-5||n.peerId&&r[n.peerId].countUnread?d.default.showToBottom():d.default.hideToBottom();e._prevScroll=l}(e)},50))}function Ne(e){for(var t=0,n=e.attaches.length;t<n;t++){if("sticker"===e.attaches[t].type)return!1}var a=store.mail.cur;return a.userId===e.peerId&&!a.groupId||e.isOut}function je(e){var t,n=e.peerId,a=e.id,i=e.authorId,r=e.attaches,o=e.adminId,s=e.isService,l=e.isStealth,c=e.isOut,u=e.keyboard,d=store.mail,f=(d.cur,d.peers),h=(d.msgs,d.members),p=f[n]&&f[n].pinnedMsgId===a,A=(0,b.getMsgSendId)(e),m=(0,y.getPendingMsg)(A,n),w=!(!m&&!e.replaced);if(m?(S.mark(A,"opt_to_lp"),t=function(e){return!!e.length}(r)):t=s||r.length||p||!f[n]||!h[i]||o&&!h[o],m){var E=function(e){var t=store.mail.cur;if((0,y.removePendingMsg)(e),C.remove(e.sendId,"silent"),t.peerId&&-1===e.sendId.indexOf("edit"))return _.getMsg(e)}(m),k=Object.assign({},m,{id:a,failed:!1,pending:!1,waiting:!0,sendId:void 0,canEdit:Ne(e)});if(storeMethods.injectMsg(k),Fe(k,{existingElem:E}),!t)return void S.clean(A)}if(!u||!u.inline){if((u||t)&&!c&&!e.edited)(0,y.getKeyboardState)(n).updateTime=Date.now();!u||t||c||e.edited||function(e){var t=e.peerId,n=e.authorId,a=e.msgId,i=e.keyboard,r=store.mail.peers[t];r&&(r.keyboard=(0,b.prepareKeyboard)({keyboard:i,authorId:n,msgId:a}))}({peerId:n,authorId:i,msgId:a,keyboard:u})}if(t)return im.pause(),void P.loadMessage({msgId:a,forcePinned:p,onTryError:function(e){var t=e.type;A&&(S.error(A,"server_load_attach",t),S.clean(A))},onResult:function(e){var t=B(e,2),i=t[0],r=t[1];(A&&(S.mark(A,"attach"),S.clean(A)),store.mail.cur)&&(storeMethods.injectMail(i),r&&function(e,t){var n=t.unpin,a=t.pinned,i=store.mail,r=i.cur,o=i.peers;if(n){o[e].pinnedMsg="",o[e].hasPinnedMsg=!1;var s=Mt();delete s[e],Pt(s),r.peerId===e&&(v.default.redrawPinnedMsg(),St())}else a&&(o[e].pinnedMsg=a,o[e].hasPinnedMsg=!0,r.peerId===e&&(v.default.redrawPinnedMsg(),St()))}(n,r),Fe(i.msgs[a],{isStealth:l,isServerMsg:!0,isReplace:w}),im.resume())}});var M=function(e){var t,n=e.peerId,a=e.id,i=e.authorId,r=e.isOut,o=e.text,s=e.ts,l=e.flags,c=e.adminId,u=e.isService,d=store.mail,f=d.cur,h=(d.peers,d.msgs),p=d.members,A=(0,b.formatTime)(s,f.timeShift),m=h[a],_="";o&&(_=o.replace(/<br>/g,"\n").replace(b.MENTION_DOMAIN_REGEXP,"@$3").replace(b.MENTION_REGEXP,"@$1 ($3)"));t=e.replaced?!!m&&m.edited:!!e.edited;var v=o,y=o;y=(0,b.wrapLinks)(y,l),y=(0,b.wrapMention)(y),y=(0,g.emojiToHTML)(y);var w=e.keyboard;w=w&&w.inline?(0,b.prepareKeyboard)({keyboard:w,authorId:i,msgId:a}):null;var E={id:a,peerId:n,authorId:i,ts:s,date:A,dateShort:A,text:y,textInput:_,body:v,isUnread:!m||m.isUnread,edited:t,canEdit:Ne(e),isOut:r,isService:u,keyboard:w,attaches:{},forwards:[],hasReply:!!e.hasReply};c&&(E.adminName=c===f.userId?lang.mobile_mail_you:p[c].name,E.adminUrl=p[c].url);return E}(e);storeMethods.injectMsg(M),Fe(M,{isStealth:l,isReplace:w})}function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isStealth,a=t.isServerMsg,r=t.isReplace,o=t.existingElem,s=store.mail,l=s.cur,c=s.peers,h=(s.msgs,s.members,s.rolls),_=s.scraps,g=s.reached,b=e.peerId,w=(e.keyboard,e.authorId),E=e.isOut,k=e.id,S=!E,C=c[b]&&0===c[b].countUnread&&S,M=r||!!e.edited,P=c[b],T=P.isIncomingMR,D=P.isRejectedMR,I=v.Messenger.getConvoBody(),x=!1;if(e.isUnread&&(x=l.viewerId===b||l.peerId===b&&S&&I.scrollHeight-I.scrollTop-I.offsetHeight<400&&!!$(".mailScrap_reachedAfter")),x&&S&&!T&&!D&&Pe(k,b),!M){var O=last(h.peer[b]||[]);h.peer[b]=(h.peer[b]||[]).concat(k).filter(unique).sort(asc),n||T||D||(h.folder.all=h.folder.all.concat(b).filter(unique).sort(gt),g.peer.after[b]||(g.peer.after[b]=!0,g.peer.before[b]=!1));var B=c[b];if(S&&(b===l.peerId&&d.default.renderKeyboardIfNeeded({update:!0}),n||(T||D||(h.folder.unread=h.folder.unread.concat(b).filter(unique).sort(gt)),a||(B.countUnread||(B.countUnread=0),B.countUnread+=1)),b!==l.peerId&&n||d.default.redrawToBottom()),!n&&!T&&!D)if(C&&(l.countUnread+=1,f.default.redrawCounter()),l.groupId&&(S?h.folder.unrespond=h.folder.unrespond.concat(b).filter(unique).sort(gt):(0,i.arrayRemove)(h.folder.unrespond,b)),"all"===l.folder){var L=_.folder.slice();_.folder=_.folder.concat(b).filter(unique).sort(gt),m.default.redrawFolder(L)}else if("unread"===l.folder&&w!==l.viewerId){var R=_.folder.slice();_.folder=_.folder.concat(b).filter(unique).sort(gt),m.default.redrawFolder(R)}else if("unrespond"===l.folder){var N=_.folder.slice();S?_.folder=_.folder.concat(b).filter(unique).sort(gt):(0,i.arrayRemove)(_.folder,b),m.default.redrawFolder(N)}if(T&&(h.mrs=h.mrs.concat(b).filter(unique).sort(gt),"mrs"===l.page)){var j=_.mrs.slice();_.mrs=_.mrs.concat(b).filter(unique).sort(gt),m.default.redrawMRs(j)}if(l.peerId!==b||!(0,i.arrayIntersects)(_.peer,h.peer[b])&&0!==_.peer.length||last(_.peer)!==O)o&&o.remove();else{_.peer.slice();_.peer=_.peer.concat(k).filter(unique).sort(asc);var F=He(function(){o?m.default.peerAddElemAfter(k,o):m.default.peerAddItemsAfter([k])});S&&!F&&d.default.showToBottom(),w===l.viewerId&&m.default.removeDivider()}var H=(0,A.uTyping_getPeerTyping)(b);H&&H.users.length&&((0,y.removePeerTypingUser)(b,w),b===l.peerId&&p.default.redraw(),u.default.redrawTyping(b))}var V=k===(0,u.uConvo_getLastMsgId)(b);M&&(V?He(function(){return m.default.peerReplaceItems([k])}):m.default.peerReplaceItems([k])),!n&&V&&(u.default.redrawLastMsg(b),u.default.redrawUnread(b),StickersAnimation.checkSettingsAndLoad(e.id)),b===l.peerId&&AudioMessagePlayer.redrawWaves()}function He(e){var t=v.Messenger.getConvoBody(),n=t.scrollTop+t.offsetHeight>=t.scrollHeight-2;e();var a=t.scrollHeight-t.scrollTop-t.offsetHeight<400;return n&&v.Messenger.scrollConvoToBottom(),a}function Ve(){if(store.mail.cur){var e=store.mail.cur.backUrl;if(store.mail.cur.backUrl=null,U(),e)history.back();else _e(function(){var e=store.mail.cur;if("mrs"===e.page)return"/mail";if("template"===e.page){var t=nav.getQuery("from");return"/mail?act=show&peer=".concat(t)}return e.tab?"/mail":(e.peerId,"/mail")}(),{replace:!0})}}function Ue(){var e=store.mail.cur,t=e.msgSelected,n=e.forwardFromId;e.forwardFromId=null,Object.keys(t).forEach(function(e){delete t[e]}),o.default.unselectAll(),v.default.redrawMailActions(),n&&Se(n)}var ze={};function We(e,t,n){var a=store.mail,i=a.cur,r=a.peers,o=r?r[e]:null;if(o&&!o.isIncomingMR&&!o.isRejectedMR){var s=(0,y.filterPeerTypingUser)({type:"text",users:t,count:n},i.viewerId);(0,y.setPeerTyping)(e,s);var l=ze[e];l&&clearTimeout(l),s.count&&s.users.length&&(ze[e]=setTimeout(function(){ze[e]=null,We(e,[],0)},7e3),Ft(s.users,e)),e===i.peerId&&p.default.redraw(),u.default.redrawTyping(e)}}var qe,Ge,$e={};function Ye(e,t,n){var a=store.mail,i=a.cur,r=a.peers;if(r?r[e]:null){var o=(0,y.filterPeerTypingUser)({type:"audio",users:t,count:n},i.viewerId);(0,y.setPeerTyping)(e,o);var s=$e[e];s&&clearTimeout(s),o.count&&o.users.length&&($e[e]=setTimeout(function(){$e[e]=null,Ye(e,[],0)},7e3),Ft(o.users,e)),e===i.peerId&&p.default.redraw(),u.default.redrawTyping(e)}}function Qe(e){var t=e.userId,n=e.isOnline,a=e.onlinePlatform,i=e.lastActionTime,r=store.mail,o=r.cur,s=r.peers[t];s&&s.canSeeOnline&&(s.isOnline=n,e.isOnline&&(s.onlinePlatform=a),i&&(s.lastActionTime=i),u.default.redrawOnline(t),o.peerId===t&&f.default.redrawOnline())}function Xe(e,t){var n=store.mail,a=n.cur,r=n.peers,s=n.msgs,l=n.scraps,c=n.rolls;if(a){var h=a.peerId===t?l.peer:[],p=c.peer[t]||[],A=r[t];if(p.concat(h).forEach(function(e){var t=s[e];t&&t.isUnread&&t.authorId!==a.viewerId&&(delete t.isUnread,o.default.markAsRead(e))}),A?A.countUnread&&(a.countUnread-=1,A.countUnread=0):a.countUnread-=1,(0,i.arrayRemove)(c.folder.unread,t),"unread"===a.folder){var _=l.folder.slice();(0,i.arrayRemove)(l.folder,t),m.default.redrawFolder(_)}f.default.redrawCounter(),d.default.redrawToBottom(),u.default.redrawUnread(t)}}function Ke(e,t){var n=store.mail,a=n.cur,i=n.msgs,r=n.rolls,s=n.scraps,l=r.peer[t]||[];if(i[e])for(var c=l.indexOf(e);c>=0;){var d=i[l[c]];d.authorId===a.viewerId&&d.isUnread&&(delete d.isUnread,o.default.markAsRead(d.id)),c--}else last(l)&&e<=last(l)&&l.forEach(function(e){var t=i[e];t.authorId===a.viewerId&&t.isUnread&&(delete t.isUnread,o.default.markAsRead(t.id))});a.peerId===t&&s.peer.forEach(function(e){var t=i[e];t.authorId===a.viewerId&&t.isUnread&&(delete t.isUnread,o.default.markAsRead(t.id))}),u.default.redrawUnread(t)}function Je(){if(Ze())return!0;var e=store.mail.cur;if(e&&(e.backUrl=null),e&&e.forwardFromId)return Ue(),!0;a.default.safari_mobile&&document.activeElement.blur();var t=qs2obj(location.search.slice(1)).act;if(!$(".uMessenger")&&"/mail"===location.pathname&&"show_medias"!==t)return nav.go(location,null,{no_push:!0,need_restore:!1}),!0;var n=new RegExp(/z=photo/).test(location.search);if($(".uMessenger")&&!n&&!ge("z_photoview")&&!ge("StoriesView")){var i=we(location.pathname+location.search);return i&&nav.go(location.pathname+location.search,null,{no_push:!0,push_only:!0}),i}}function Ze(){var e=Ze;if(mediaUpload.isUploading)return e.noAlert||alert(unescapeAttr(lang.mobile_mail_wait_until_uploaded)),e.noAlert=!0,setTimeout(function(){e.noAlert=!1},10),!0}function et(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=store.mail.cur;if(!("/mail"===n&&i&&i.groupId||a.replace))return!t.m&&geByClass1("uMessenger")?_e(n):void 0}function tt(){window.isNewMail&&(store.mail.cur?"/mail"!==location.pathname&&0!==location.pathname.indexOf("/write")?Lt():Bt():ye.clearTimer())}function nt(){var e=store.mail,t=e.cur,n=(e.msgs,e.peers),a=e.hash,i=t.msgSelected,r=toInt(Object.keys(i)[0]),s=n[t.peerId];t.hasAttachments=!1,t.msgSelected={},s.pinnedMsgId=r,s.hasPinnedMsg=!0,o.default.unselectAll(),v.default.redrawMailActions(),ajaxRequest("/mail?act=pin",{hash:a.pin,chat:nav.getQuery("chat")||store.mail.cur.peerId-2e9,msg:r,_ajax:1})}function at(){var e,t=store.mail,n=t.cur,a=t.msgs,i=(t.peers,t.hash),r=(t.replies,t.pendingReplies,n.msgSelected),o=toInt(Object.keys(r)[0]),s=n.peerId,l=(0,y.getPeerDraft)(n.viewerId,n.peerId),c=a[o],u=function(e){c.hasReply||l&&l.editing&&l.editing.id==o&&l.msgs&&(n.msgAttached[s]=l.msgs),c.hasReply?n.msgReply[s]=c.reply:n.msgReply[s]=null,d.default.redrawReply(),d.default.onAttachedMsgsRemove(),d.default.uiRedrawAttachments(s),d.default.setModifiers({editing:!0}),f.default.setModifiers({editing:!0}),v.default.redrawMailActions(),it(),d.default.setText(e)};if(n.editing==o)return e=l&&l.editing&&l.editing.id==o?l.editing.text||"":c.textInput,void u(e);n.editing=o,Dt(),ajaxRequest("/mail?act=edit_message_start",{hash:i.edit,edit_msg_id:o,peerId:s,_ajax:1},function(e,t){(0,y.pushPeerAttachments)(n.peerId,e),u(t)})}function it(){var e=store.mail.cur.msgSelected;Object.keys(e).forEach(function(t){delete e[t]}),o.default.unselectAll(),s.default.setCount(0),v.default.redrawMailActions()}function rt(){var e=store.mail,t=(e.msgs,e.cur),n=Object.keys(t.msgSelected).every(ot);1!==Object.keys(t.msgSelected).length||n?l.default.open({canDeleteForAll:n}):lt()}function ot(e){var t=store.mail,n=t.msgs,a=(t.cur,t.peers),i=vk.id,r=n[e],o=nav.getQuery().community,s=a[r.peerId];return!!r&&(r.authorId!==i&&r.authorId!==-o?s.isAdmin&&-1===s.adminIds.indexOf(r.authorId):!(r.peerId===i&&!o)&&(333!==r.peerId&&(!(Date.now()/1e3-r.ts>86400)&&!(s.kicked||s.closed||s.unableToWrite||s.kickedMessage))))}function st(){var e=store.mail.cur.editing;e?(!function(e){var t=store.mail,n=t.cur,a=(t.hash,t.msgs,t.peers),i=n.peerId;ae(e),ajaxRequest("/mail",{act:"delete_for_all",peer:i,ids:e+"",hash:a[i].hashRemove},function(){}),v.default.redrawMailActions()}(e),Tt(!0)):lt(!1,l.default.isDeleteMessagesForAll()),l.default.close()}function lt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=store.mail,a=n.cur,i=(n.hash,n.msgs,n.peers),r=a.peerId,s=a.msgRemoved,l=a.msgSelected,c=Object.keys(l);c.forEach(function(n){delete l[n=+n],t?ae(n):(s[n]=!e||"spam",e?o.default.spam(n):o.default.remove(n))}),ajaxRequest("/mail",{act:t?"delete_for_all":e?"spam":"delete",peer:r,ids:c.join(","),hash:i[r].hashRemove},function(){}),v.default.redrawMailActions()}function ct(){lt(!0)}function ut(){var e=store.mail,t=e.cur,n=e.hash,a=e.msgs,i=t.msgSelected,r=Object.keys(i),s=r.some(function(e){return!a[e].isImportant})?1:0;r.forEach(function(e){delete i[e],a[e].isImportant!=!!s&&(s?t.countImportant++:t.countImportant--),a[e].isImportant=!!s,o.default.toggleImportant([e],!!s)}),ajaxRequest("/mail",{act:"mark_important",ids:r,hash:n.important,val:s},function(){}),o.default.unselectAll(),v.default.redrawMailActions()}function dt(){var e=store.mail.cur,t=e.peerId,n=Object.keys(e.msgSelected).map(toInt);e.msgAttached[t]=n,(0,y.setPeerDraft)(e.viewerId,e.peerId,{msgs:n,reply:void 0},e.editing),e.msgReply[t]&&!e.editing&&ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),e.msgReply[t]=null,e.msgSelected={},o.default.unselectAll(),s.default.setCount(0),d.default.redrawReply(),d.default.uiRedrawAttachments(t),v.default.redrawMailActions()}function ft(){var e=store.mail,t=e.cur,n=e.flags,a=e.pendingReplies,i=t.peerId;if(!(0,b.isContactPeer)(i)){if(!n.replies)return dt();var r=toInt(Object.keys(t.msgSelected)[0]);t.msgReply[i]=r,a[r]=o.default.getReplyDataFromHTML(r),(0,y.setPeerDraft)(t.viewerId,t.peerId,{reply:r,msgs:void 0},t.editing),ajaxRequest("/mail",{act:"reply_start",hash:store.mail.hash.reply,peer_id:store.mail.cur.peerId,msg_id:r}),t.msgAttached[i]=[],t.msgSelected={},o.default.unselectAll(),s.default.setCount(0),d.default.redrawReply(),d.default.uiRedrawAttachments(i),v.default.redrawMailActions(),d.default.openKeyboard("text")}}function ht(){var e=store.mail.cur;e&&((0,b.isContactPeer)(e.peerId)||(e.forwardFromId=e.peerId,e.query="",e.tab="peers",v.Messenger.setQuerySilently(""),Ce({keepSelected:!0}),Ee("all"),v.Messenger.getMainBody().scrollTop=0,Te()))}function pt(e){if(store.mail.cur){var t=store.mail,n=t.cur,a=t.peers,i=t.msgs,r=t.flags,o=n.msgRemoved,l=n.msgSelected,c=a[n.peerId];if(d.default.hideStickersPanel(),!o[e]){l[e]?delete l[e]:l[e]=!0;var u=Object.keys(l),f=u.length,h=1===f&&u[0]==a[n.peerId].pinnedMsgId,p=u.reduce(function(e,t){return e&&i[t].isImportant},!0);s.default.setCount(f),s.default.setModifiers({pinned:h,important:p}),s.default.setLabels({pinned:h,important:p}),(0,b.isContactPeer)(n.peerId)?s.default.toggleQuickButtons(!1):s.default.toggleQuickButtons(!0),r.replies&&(1!==f||c.isIncomingMR?s.default.setReplyAvailable(!1):s.default.setReplyAvailable(!0));var A=toInt(Object.keys(l)[0]),m=1==f&&i[A];if(s.default.setEditAvailable(m&&m.canEdit&&!c.unableToWrite),s.default.setImportantAvailable(f>0&&n.viewerId>0),c.canPin){var _=toInt(Object.keys(l)[0]);s.default.togglePin(1===f&&_!==c.pinnedMsgId)}else s.default.togglePin(!1);v.default.redrawMailActions()}}}function At(e){var t=store.mail,n=t.cur,a=t.hash,i=t.msgs[e],r="spam"===n.msgRemoved[e]?"nospam":"restore";delete n.msgRemoved[e],o.default.restore(e),ajaxRequest("/mail",{act:r,id:e,hash:a.restore},function(){}),i.isImportant&&(n.countImportant++,te(e)),m.default.redrawFolder()}function mt(e,t,n){var a=store&&store.mail&&store.mail.cur;if(a&&e){var i=store.mail.forwards[n];if(i.peerId&&i.peerId===a.peerId&&!a.msgRemoved[e])v.default.scrollToMsg(e)||ajaxRequest("/mail",{act:"get_msgs",msgs:[e]},function(a){storeMethods.injectMail(a);var i=store.mail,r=i.msgs,o=i.cur;o.peerId&&(r[e]?Se(o.peerId,e):_t(e,t,n))});else _t(e,t,n)}else _t(e,t,n)}function _t(e,t,n){if(t){var a=nav.getQuery();"show"===a.act&&(a.msg=t,nav.go(location.pathname+obj2qs(a),!1,{replace:!0,push_only:!0}))}var i=(0,o.Msg_makeReplyLink)(e,t,n);nav.go(i,null,{force:!0})}function vt(e){var t,n,a,i=store.mail.cur;i&&(i.msgSelected=(a=!0,(n=e)in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t),statlogsValueEvent("messages_channel_forward_click",0),ht())}function gt(e,t){var n=store.mail,a=n.rolls,i=n.presend,r=n.msgs,o=a.peer[e]||[0],s=a.peer[t]||[0],l=Vt(i.pending[e],function(e){return-1===e.indexOf("edit")}),c=Vt(i.pending[t],function(e){return-1===e.indexOf("edit")}),u=last(o),d=last(s),f=Math.max(l?i.msgs[l].ts:0,u?r[u].ts:0);return Math.max(c?i.msgs[c].ts:0,d?r[d].ts:0)-f}function yt(){if(store.mail.cur){var e=!!store.mail.cur.peerId;$$(".vk__page_mail").forEach(function(t){return t.classList.toggle("messenger_noPullToRefresh",e)})}}function bt(){var e=store.mail.cur.peerId,t=$(".pinnedMsg");if(t){Number(t.dataset.id);var n=Mt();delete n[e],Pt(n),St()}}function wt(){var e=store.mail.cur.peerId,t=$(".pinnedMsg");if(t){var n=Number(t.dataset.id),a=Mt();a[e]=n,Pt(a),St()}}function Et(e,t){var n=store.mail,a=n.cur,i=n.peers[a.peerId];ajaxRequest("/mail",{act:"banner_callback",hash:i.hashBanner,peer_id:a.peerId,callback_data:t}),N=Date.now(),i.banner=null,v.default.redrawBanner()}function kt(e){var t=$(".messenger__banner_content");t&&t.classList.toggle("messenger__banner_contentExpanded")}function St(){var e=store.mail,t=e.cur;e.peers;if(t){var n=t.peerId;if(n){var a=$(".pinnedMsg"),i=Mt()[n],r=a?intval(a.dataset.id):null;v.default.setPinnedVisibility(r&&i!==r)}}}function Ct(){if(store.mail.cur&&store.mail.cur.peerId){var e=$(".pinnedMsg");if(e)if(!Number(e.dataset.id)){var t=store.mail.cur.peerId,n=Mt();delete n[t],Pt(n)}}}function Mt(){return lsGet("messenger.pinHidden")||{}}function Pt(e){lsSet("messenger.pinHidden",e)}function Tt(e){var t=store.mail.cur;if(t&&t.editing){t.editing=!1,Dt(),!0!==e&&ajaxRequest("/mail?act=edit_message_cancel",{peerId:t.peerId}),(0,y.popPeerAttachments)(t.peerId),(0,y.setPeerDraft)(t.viewerId,t.peerId,{});var n=(0,y.getPeerDraft)(t.viewerId,t.peerId);t.msgAttached[t.peerId]=n.msgs||[],t.msgReply[t.peerId]=n.reply||null,d.default.setText(n&&n.text||""),d.default.setModifiers({editing:!1}),f.default.setModifiers({editing:!1}),d.default.uiRedrawAttachments(t.peerId),d.default.redrawReply();var a=v.Messenger.getConvoBody();a.scrollTop+a.offsetHeight>=a.scrollHeight-2&&v.Messenger.scrollConvoToBottom()}}function Dt(){var e=nav.getQuery();store.mail.cur.editing?e.edit_msg_id=store.mail.cur.editing||void 0:delete e.edit_msg_id,nav.go(location.pathname+obj2qs(e),!1,{replace:!0,push_only:!0})}function It(){if(store.mail.msgs){var e=+nav.getQuery("edit_msg_id");e&&store.mail.msgs[e]&&(store.mail.cur.msgSelected[e]=!0,at())}}function xt(e){var t=e.closest(".".concat(o.default.class));if(t){var n=o.default.getId(t);store.mail.msgs[n].textFull=o.default.getTextHtml(t)}}function Ot(e){_e(e)}function Bt(){var e;store.mail.cur&&(window.isCustomScroll&&(0,E.restoreDocumentScroll)(),!store.mail.cur&&!store.mail.page||store.mail.cur.peerId||U(),store.mail.cur.peerId&&z(),C.ready().then(jt).then(function(){Ht(),store.mail.cur.peerId&&(d.default.init(),Xe(0,store.mail.cur.peerId)),nav.getQuery("msg")||nav.getQuery("id")||v.Messenger.scrollConvoToBottom()}),im.on(),M.start(),e=qs2obj(location.search.slice(1)),store.mail.cur.mvk_entrypoint=e.mvk_entrypoint||"notifications"===e.from&&"notifications"||"",v.default.startPolling(),addEvent(window,"resize",D.resizePosters),window.ExperimentalBadge&&window.ExperimentalBadge.set(store.mail.cur.countUnread),k.onOpenCallback(qt),k.onCloseCallback(Gt))}function Lt(){if(store.mail.cur){if(k.onOpenCallback(qt),k.onCloseCallback(Gt),!document.body.classList.contains("vk__page_mail"))return im.off(),M.stop(),void storeMethods.resetMail();(0,E.restoreDocumentScroll)(),v.Messenger.cleanConvoBody(),im.off(),M.stop(),v.default.stopPolling(),f.default.cancelStatusUpdate(),m.default.resetPrevScraps(),storeMethods.resetMail()}}function Rt(e){var t=e.peerId,n=store.mail.cur,a=null;if("mrs"===n.page)a="/mail?act=mrs";else if("template"===n.page)a="/mail?act=template";else if("msg"===n.page)a="/mail?act=show=peer=".concat(t);else if(n.forwardFromId&&n.forwardFromId!==t)a="/mail?act=show&peer=".concat(n.forwardFromId);else if(n.query){var i="msgs"===n.tab?"&tab=messages":"";a="/mail?q=".concat(n.query).concat(i)}else if(n.peerId)a="/mail?act=show&peer=".concat(n.peerId);else if(n.folder&&!n.forwardFromId){var r="";"all"!==n.folder&&(r="?act=".concat(n.folder)),a="/mail".concat(r)}return a}function Nt(){var e=store.mail.cur.countMR,t=store.mail.rolls.mrs;store.mail.cur.countMR=0,L=!0,store.mail.rolls.mrs=[],t.forEach(function(e){(0,y.removePeer)(e)}),ajaxRequest("/mail",{act:"mrs_reject",all:!0,hash:store.mail.hash.mrs},function(n){if(n.error)return store.mail.cur.countMR=e,store.mail.rolls.mrs=t,L=!1,void h.default.cancelRejeectLoading();v.default.redrawView(),_e("/mail")},function(){store.mail.cur.countMR=e,store.mail.rolls.mrs=t,L=!1,h.default.cancelRejeectLoading()})}function jt(){store.mail.cur&&(0,y.queueToPresendMsgs)(C.getItems())}function Ft(e,t){var n=store.mail.members;(e=e.filter(function(e){return!n[e]})).length&&(j=j.concat(e),F.push(t),H())}function Ht(){var e=store.mail,t=e.rolls,n=e.scraps,a=e.cur;t.folder.all=t.folder.all.filter(unique).sort(gt),"all"===a.folder&&(n.folder=n.folder.filter(unique).sort(gt),m.default.redrawFolder())}function Vt(e,t){if(!e||!e.length)return null;for(var n=e.length-1;n>=0;n--)if(t(e[n],n))return e[n];return null}function Ut(){im.abortWaiting()}function zt(e){var t=+e.getAttribute("data-msg");if(t&&!(0,b.isForwardedMessageId)(t)&&store.mail.cur){var n=store.mail.msgs[t],a=n&&store.mail.peers[n.peerId];a&&!n.listened&&n.authorId!==store.mail.cur.viewerId&&n.peerId===store.mail.cur.peerId&&(0,b.mailRequest)("/mail",{act:"listen_audiomsg",msg_id:t,hash:a.hashRead})}}function Wt(e,t){c.default.showCaptcha(e,t)}function qt(){qe&&clearTimeout(qe),qe=setTimeout(function(){return addClass($(".messenger__layer_convo"),$t())},200)}function Gt(){qe&&clearTimeout(qe),qe=setTimeout(function(){return removeClass($(".messenger__layer_convo"),$t())},200)}function $t(){return Ge||(Ge="messenger__layer_convo--iosKeyboard",w.isIPad&&w.isIOSChrome&&w.iosMajor>=11&&(Ge="messenger__layer_convo--iosKeyboardChrome"),Ge)}},FZH1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MailScrap_EmptyInner=k,t.MailScrap_Item=y,t.MailScrap_ItemsInner=g,t.MailScrap_class=S,t.default=void 0;var a=d(n("bZ/P")),i=d(n("Mc5h")),r=d(n("O5lf")),o=d(n("M2vk")),s=d(n("5qQ6")),l=d(n("/Rzu")),c=d(n("HGMY")),u=d(n("TYsd"));function d(e){return e&&e.__esModule?e:{default:e}}function f(){var e=_(['\n    <div class="mailScrap__systemMessage" ',">\n      ","\n    </div>\n  "]);return f=function(){return e},e}function h(){var e=_(['\n    <div class="mailScrap__empty mailScrap__empty_','">\n      ',"\n    </div>\n  "]);return h=function(){return e},e}function p(){var e=_(['\n    <div class="','">\n      ',"\n    </div>\n  "]);return p=function(){return e},e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){var e=_(['\n    <div class="','">\n      ',"\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n    </div>\n  "]);return m=function(){return e},e}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=function(e){var t=e.scrap,n="peer"===t,r=S(t),s=n?E("before"):"",l=E("after"),d=E("center"),p=function(e){var t=a.default.class("mailScrap__items",A({},e,!0)),n=g(e);return(0,i.default)({mix:t,inner:n})}(t),_=function(e){var t=k(e);return a.default.html(h(),e,t)}(t),v=n?(0,o.default)():"",y=n?u.default.html((0,c.default)()):"",b=n?(w=store.mail.cur.notification||"",C=a.default.onClick("MailScrap.clearSystemMessage2"),a.default.html(f(),C,w)):"";var w,C;return a.default.html(m(),r,s,p,_,l,y,v,b,d)};function g(e){for(var t=store.mail,n=t.cur,i=t.msgs,r=t.scraps[e],o=r.length,s=[],l=!1,c=0;c<o;c++){if(c>0&&"peer"===e&&!l){var u=i[r[c-1]],d=i[r[c]];if(d.isUnread&&!u.isUnread&&d.authorId!==n.viewerId){l=!0,s.push(y(e,r[c],!0));continue}}s.push(y(e,r[c]))}return a.default.list(s)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=store.mail.cur,i="";if("folder"===e)i="important"===a.folder?b(t):w(t);else if("search"===e){if("peers"===a.tab)i=function(e){return(0,l.default)(e)}(t);else i=b(t)}else if("peer"===e){i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.default)({msgId:e,withDivider:t})}(t,n)}else if("mrs"===e){i=w(t)}return i}function b(e){var t=store.mail.msgs[e].peerId;return(0,l.default)(t,e)}function w(e){return(0,l.default)(e,"last")}function E(e){var t=a.default.class("mailScrap__loading",A({},e,!0)),n=(0,r.default)({mix:""});return a.default.html(p(),t,n)}function k(e){var t=window.lang,n=store.mail.cur,a="";switch(e){case"peer":a=t.mobile_mail_history_is_empty;break;case"mrs":a=t.mobile_mail_mrs_empty_info;break;case"folder":a={all:t.mobile_mail_no_messages,important:t.mobile_mail_no_important,unread:t.mobile_mail_no_unreaded,unrespond:t.mobile_mail_sublist_empty}[n.folder];break;case"search":"msgs"===n.tab&&(a=t.mobile_mail_not_found),"peers"===n.tab&&(a=t.mobile_mail_no_peers)}return a}function S(e){var t,n=store.mail,i=n.cur,r=n.reached,o=!0,s=!1,l=!1,c=!1;if("peer"===e){var u=i.peerId,d=n.scraps.peer,f=d.length,h=n.rolls.peer[u]||[];o=r.peer.before[u]&&d[0]===h[0],s=last(d)===last(h)&&r.peer.after[u],0===f&&(s=!0);var p=u?n.peers[u]:null;p&&(l=!!p.systemMessageCode,p.isChannel&&(c=p.ownerId!==i.viewerId))}else if("mrs"===e)s=r.mrs;else if("folder"===e)s=r.folder[i.folder];else if("search"===e){var m=i.tab;i.query;if("peers"===m){var _=n.scraps.search.length;s=r.search[i.tab][i.query]||_>0}else s=r.search[i.tab][i.query]}return a.default.class("mailScrap",(A(t={},e,!0),A(t,"empty",function(e){var t=store.mail,n=t.cur,a=t.scraps,i=t.reached,r=!1;switch(e){case"peer":var o=n.peerId,s=t.rolls.peer[o];0===(s?s.length:0)&&i.peer.after[o]&&i.peer.before[o]&&(r=!0);break;case"mrs":0===a.mrs.length&&i.mrs&&(r=!0);break;case"folder":0===a.folder.length&&i.folder[n.folder]&&(r=!0);break;case"search":0===a.search.length&&i.search[n.tab][n.query]&&(r=!0)}return r}(e)),A(t,"systemMessage",l),A(t,"reachedBefore",o),A(t,"reachedAfter",s),A(t,"tab","search"===e&&i.tab),A(t,"isChannel",c),t))}t.default=v},FflB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Y6JH"))&&a.__esModule?a:{default:a};function r(e,t){return{class:"MarketItem__shopperAccentRow",inner:[{class:"MarketItem__shopperAccentIcon",inner:(0,i.default)("market",e)},{class:"MarketItem__shopperAccentText",inner:t}]}}var o=function(){var e=window.lang;return{inner:[r("delivery_outline_24",e.mobile_market_shopper_accent_delivery),r("money_transfer_outline_24",e.mobile_market_shopper_accent_payment),r("return_outline_24",e.mobile_market_shopper_accent_return)]}};t.default=o},Fhlr:function(e,t,n){"use strict";FeedAssistanceStats.registerTrackingCls("feedAssistance_promoButton"),FeedAssistanceStats.onStartViewElement(function(e){if(FeedAssistanceStats.getElementType(e)===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_PROMO_BUTTON){if(e._promoButtonClickHandlerAdded)return;var t=geByClass1("feedAssistancePromoButtonInstallApp__button",e),n=t?"install_app":"";addEvent(t||e,"click",function(){!function(e,t,n){FeedAssistanceStats.dispatchEvent({type:FeedAssistanceStats.EVENTS.EVENT_PROMO_BUTTON,data:FeedAssistanceStats.serializeEventData(FeedAssistanceStats.EVENTS.EVENT_PROMO_BUTTON_SUB,e,t,n)})}(e,FeedAssistanceStats.EVENTS.SUB_EVENT_PROMO_BUTTON_CLICK,n)}),e._promoButtonClickHandlerAdded=!0}})},G0UO:function(e,t,n){"use strict";var a=Array.isArray,i={mail:{}},r={injectStore:function(e){i.mail={};var t=e.mail,n=t.cur,r=t.rolls,o=t.reached;t.msgs,t.queue;a(e.mail.msgs)&&(e.mail.msgs={}),a(e.mail.replies)&&(e.mail.replies={}),r&&a(r.peer)&&(r.peer={}),r&&a(r.search.peers)&&(r.search.peers={}),r&&a(r.search.msgs)&&(r.search.msgs={}),o&&a(o.search.peers)&&(o.search.peers={}),o&&a(o.search.msgs)&&(o.search.msgs={}),o&&a(o.peer.before)&&(o.peer.before={}),o&&a(o.peer.after)&&(o.peer.after={}),i.mail=e.mail,i.mail.pendingReplies={},i.mail.presend={},n&&(n.msgSelected={},n.msgRemoved={},n.msgAttached={},n.msgReply={},n.keyboards={},n.typings={},n.peerMembers={}),"notificationsCount"in i||(i.notificationsCount=e.notificationsCount)},injectMail:function(e){var t=i.mail,n=e;isObject(n.msgs)&&Object.assign(t.msgs,n.msgs),isObject(n.peers)&&Object.assign(t.peers,n.peers),isObject(n.members)&&Object.assign(t.members,n.members),isObject(n.replies)&&Object.assign(t.replies,n.replies),isObject(n.forwards)&&Object.assign(t.forwards,n.forwards),t.page=n.page,n.mrs&&(t.cur.countMR=n.mrs.count,t.rolls.mrs=n.mrs.rolls,t.reached.mrs=n.mrs.reached,t.scraps.mrs=n.mrs.rolls,Object.keys(n.msgs).forEach(function(e){var a=n.msgs[e],i=a.peerId;t.rolls.peer[i]=[a.id],t.reached.peer.after[i]=!0}),t.mrs=n.mrs)},injectMsg:function(e){var t,n,a;r.injectMail({msgs:(t={},n=e.id,a=e,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)})},resetMail:function(){i.mail={}}};window.storeMethods=r,window.store=i},GDYn:function(e,t,n){"use strict";var a=n("UxAg");window.PostAttachVideoLink={},PostAttachVideoLink._onInit=l,PostAttachVideoLink._onPlayClick=u,PostAttachVideoLink._onReplayClick=u,PostAttachVideoLink._onSoundClick=c,PostAttachVideoLink._onVideoClick=d,PostAttachVideoLink._onVideoPlay=function(e){return f(e.target,"play")},PostAttachVideoLink._onVideoPause=function(e){return f(e.target,"pause")},PostAttachVideoLink._onVideoEnded=function(e){return f(e.target,"end")};var i={muted:"PostAttachVideoLink_muted",state:function(e){return"PostAttachVideoLink_state_".concat(e)}},r={attach:".PostAttachVideoLink",video:".PostAttachVideoLink__video"},o=window.MutationObserver,s=null;function l(){o&&!s&&(s=new o(h)).observe(document.body,{childList:!0,subtree:!0})}function c(e){var t=e.closest(r.attach),n=(0,a.$)(r.video,t);n.muted=!n.muted,t.classList.toggle(i.muted,n.muted)}function u(e){var t=e.closest(r.attach);(0,a.$)(r.video,t).play()}function d(e){e.paused||e.pause()}function f(e,t){var n=e.closest(r.attach);n.classList.remove(i.state("play")),n.classList.remove(i.state("pause")),n.classList.remove(i.state("end")),n.classList.add(i.state(t))}function h(e){e.forEach(function(e){e.removedNodes.forEach(function(e){e.nodeType===HTMLElement.ELEMENT_NODE&&(0,a.$$)(r.video,e).forEach(function(e){e.src="",e.load()})})}),(0,a.$)(r.video)||(s.disconnect(),s=null)}},GLI1:function(e,t,n){"use strict";n("PuTx")},GMrv:function(e,t,n){"use strict";var a,i=(a=n("+cqQ"))&&a.__esModule?a:{default:a},r=n("cGUQ");var o={onUploadedDone:(0,i.default)("resp"),fallback:function(e,t){var n=window.nav,a=e.nextSibling;return!!a&&!n.go(a)},onUploadProgress:function(e){window.photoview.updateUpload({progress:e.loaded/e.total})},onUploadComplete:function(e){var t=window.photoview,n=e.target.responseText,a=!1;try{a=parseJSON(n)}catch(e){a={error:"ERR_CLIENT_BAD_RESPONSE: bad request response"}}if(a.error)o.onUploadError.call(this,e);else{this.xhr=null,this.photo_res=n,this.photo_size=a.size;var i=this.static_url+a.x_src,r=a.size[0],s=a.size[1],l=Math.min(r,s);t.onClose=bind(o.onClose,this),t.openCrop({src:i,max_scale:l/200,onSelect:bind(o.onCropSelected,this)})}},onUploadError:function(e){var t=window.photoview;clog("upload error.",e.target.responseText),t.close()},onClose:function(e){this.xhr&&this.xhr.abort&&this.xhr.abort()},onCropSelected:function(e,t,n){var a=window.photoview,i=this,s=i.photo_res,l=i.photo_size,c=l[0],u=l[1],d=Math.min(c,u),f=Math.round(e*c),h=Math.round(t*u),p=Math.round(n*d);if(i.upload_edit_url)var A=i.upload_edit_url;else A=i.base_url+"upload.php?"+(0,r.toQueryString)({act:"owner_photo_edit",_query:s,_origin:location.protocol+"//"+location.host},!0);i.xhr=ajax.plainpost(A,{_crop:[f,h,p].join(",")},function(e){o.onCropSuccess.call(i,e)},function(e){o.onCropCancel.call(i)},!0),a.updateCrop({saving:!0})},onCropSuccess:function(e){var t=window.photoview,n=this;n.xhr=ajax.post("/photos.php?act=done_photo",{_ajax:1,_query:e,_from:n.from},{onDone:function(e){o.onUploadedDone(e),t.close()},onFail:function(){o.onCropCancel.call(n)}})},onCropCancel:function(){window.photoview.updateCrop({saving:!1})},prepareInput:function(e){e.files&&e.files.length&&(e.value="")},start:function(e,t){var n=window.photoview;if(!e||!canUploadFile())return o.fallback(e,t);var a=e.files[0]||!1,i=attr(e,"data-upload-url"),r=attr(e,"data-base-url"),s=attr(e,"data-static-url"),l=attr(e,"data-from");if(!a)return!1;if(!i)return o.fallback(e,t);var c={upload_url:i,base_url:r,static_url:s,file:a,from:l};return c.xhr=uploadFile(i,{photo:a},{onProgress:bind(o.onUploadProgress,c),onComplete:bind(o.onUploadComplete,c),onError:bind(o.onUploadError,c)}),readFile(a,function(e){n.updateUpload({thumb:e})}),replace(clone(e),e),n.onClose=bind(o.onClose,c),n.openUpload({src:null}),!1},getCropFromTag:function(e,t,n){if(!e)return!1;if(3==e.length)var a=+e[0],i=+e[1],r=+e[2];else{a=+e[0]*t/1e4,i=+e[1]*n/1e4,r=+e[2]*t/1e4;var o=+e[3]*n/1e4;if(r>o&&(a+=(r-o)/2,r=o),r<200){var s=(200-r)/2;a-=s,i-=s,r=200}r=Math.min(Math.max(r,200),Math.min(t,n)),a=Math.min(Math.max(a,0),t-r),i=Math.min(Math.max(i,0),n-r)}return[a/t,i/n,r/Math.min(t,n)]},crop:function(e){if(!e||!e.size&&!e.url)return!1;var t=window.photoview,n={upload_edit_url:e.upload_url};if(e.size){n.photo_size=e.size;var a=Math.min(e.size[0],e.size[1]);t.onClose=bind(o.onClose,n),t.openCrop({src:e.thumb,max_scale:a/200,rect:o.getCropFromTag(e.rect,e.size[0],e.size[1]),onSelect:bind(o.onCropSelected,n)})}else{var i=ce("img",{src:e.url,onload:function(){n.photo_size=[i.width,i.height];var a=Math.min(i.width,i.height);t.updateCrop({src:e.thumb,max_scale:a/200,rect:o.getCropFromTag(e.rect,i.width,i.height),onSelect:bind(o.onCropSelected,n)})}});t.onClose=bind(o.onClose,n),t.openCrop({src:!0})}return!0}};window.ownerPhotoUpload=o},"GR/G":function(e,t,n){var a=n("/8IX"),i=n("HN+/"),r=3;function o(e,t){return t?e?e.isSameNode&&e.isSameNode(t)?t:e.tagName!==t.tagName||s(e)!==s(t)?e:(i(e,t),l(e,t),t):null:e}function s(e){return e.dataset?e.dataset.nanomorphComponentId:void 0}function l(e,t){for(var n,a,i,r,s=0,l=0;n=t.childNodes[l],a=e.childNodes[l-s],n||a;l++)if(a)if(n)if(c(a,n))(i=o(a,n))!==n&&(t.replaceChild(i,n),s++);else{r=null;for(var u=l;u<t.childNodes.length;u++)if(c(t.childNodes[u],a)){r=t.childNodes[u];break}r?((i=o(a,r))!==r&&s++,t.insertBefore(i,n)):a.id||n.id?(t.insertBefore(a,n),s++):(i=o(a,n))!==n&&(t.replaceChild(i,n),s++)}else t.appendChild(a),s++;else t.removeChild(n),l--}function c(e,t){return e.id?e.id===t.id:e.isSameNode?e.isSameNode(t):e.tagName===t.tagName&&(e.type===r&&e.nodeValue===t.nodeValue)}e.exports=function(e,t,n){if(a.equal(typeof e,"object","nanomorph: oldTree should be an object"),a.equal(typeof t,"object","nanomorph: newTree should be an object"),n&&n.childrenOnly)return l(t,e),e;return a.notEqual(t.nodeType,11,"nanomorph: newTree should have one root node (which is not a DocumentFragment)"),o(t,e)}},GVjC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("OcsD"),i=function(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("v/ER"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}(0,a.extend)(i.default,{submit:i.submit}),window.ReportConfirm=i.default;var o=i.default;t.default=o},GYEY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onOpen=function(){i||(i={onceBlocked:!1});i.onceBlocked&&(i.opened=!0);if(!i.onceBlocked&&!i.opened){i.onceBlocked=!0;var e=document.activeElement;return e.blur(),e.focus(),!1}i.opened=!0,window.visualViewport&&(r=visualViewport.height,o=0,setTimeout(s),visualViewport.addEventListener("scroll",s),visualViewport.addEventListener("resize",s));return!0},t.onClose=function(){if(!i||i.onceBlocked&&!i.opened)return!1;window.visualViewport&&(setTimeout(s),visualViewport.removeEventListener("scroll",s),visualViewport.removeEventListener("resize",s));return i=null,r=0,o=0,!0};var a=n("H5mD"),i=null,r=0,o=0;function s(){if(!(visualViewport.height>=r)){var e=r-visualViewport.height;o!==e&&(!a.isWKWebView&&e<a.IOS_NO_KEYBOARD_ALLOWED_OFFSET?scrollTo(0,0):scrollTo(0,e))}}},Go98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("TYsd")),i=r(n("9y81"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.tag,n=t.id===e.current_id?"control_radio_checked":"control_radio";return{href:t.href,class:"Bookmarks__tagsSelectItem",inner:[{class:"Bookmarks__tagsSelectItemTitle",inner:a.default.wrap(t.name)},a.default.wrap((0,i.default)({icon:n}))]}};t.default=o},Gzds:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i,r,o=(a=n("+cqQ"))&&a.__esModule?a:{default:a};function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l={curGif:null,onStickersTabSelected:(0,o.default)(),onStickerClick:(0,o.default)(),onStickersInit:se(),onReplyClick:se(),add_attach:function(e,t){var n=window.al;remove("feed_extra_field");var a=gpeByTag("form",e),i=ce("input",{id:"feed_extra_field",type:"hidden",name:"add_attach",value:2});if(a){var r=!1;if(each(a,function(e,t){if("submit"===t.type)return r=t,!1}),r)return append(i,a),window.al&&n.ver?nav.go(r,t):a.submit()}return!0},saveDraft:function(e,t,n){e&&e.preventDefault();var a=ge("feed_add_form"),i={act:"post",save_draft:1,redirect:n,hash:t};each(a.elements,function(e,t){"submit"!==t.type&&(i[t.name]="checkbox"===t.type?(+t.checked).toString():t.value)}),ajax.post(window.nav.path,i)},toggleActions:function(e,t){var n=gpeByClass("post_item",e);return toggleClass("pi_actions_opened",n),cancelEvent(t),!1},wallActions:function(e,t){var n=window.tooltip,a=gpeByClass("_audioPlaylist",e)||gpeByClass("wall_item",e)||gpeByClass("post",e);if(!a)return!0;if(hasClass("wi_actions_opened",a))removeClass("wi_actions_opened",a),n.hide();else{var i=geByClass1("wi_actions_wrap",a),r=geByClass1("wi_actions",i),o=geByClass1("wi_actions_btn",a);l.wallActionsHide(),addClass("wi_actions_opened",a);var s=getY(a)+45+getH(r)+7,c=scrollTop()+getCh();toggleClass("wi_actions_top",i,s>c),n.addHandler(l.wallActionsHide),n.show(i,o)}return cancelEvent(t),!1},wallActionsHide:function(){var e=window.tooltip;removeClass("wi_actions_opened",geByClass1("wi_actions_opened")),e.hide()},wallPostOpen:function(e,t){var n=gpeByClass("wall_item",e),a=geByClass1("wi_date",n);return!a||nav.go_after(a,t)},toggleGif:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!e||(!!checkEvent(t)||(clearInterval(i),hasClass("current_gif",e)?l.hideGif(e,t,a):(a||Gif.autoplayTest(),l.showGif(e,t,n,a))))},hidePlayingGifs:function(e,t){geByClass("current_gif","mcont").forEach(function(n,a){n!==e&&l.hideGif(n,!1,t)})},showGif:function(e,t,n,a){var o=window.cur;if(!e)return!0;if(checkEvent(t))return!0;if(n){if(o.loadedGifs||(o.loadedGifs={}),!o.loadedGifs[e.href]&&!confirm(n))return!1;o.loadedGifs[e.href]=!0}if(clearInterval(i),!a){var s=getY(e),c=scrollTop();scrollTop(c-(s-getY(e)))}geByClass("current_gif","mcont").forEach(function(e,t){l.hideGif(e,!1,a)});var u=!hasClass("not_mp4",e)&&Gif.isMp4Supports();if(u){var d=geByClass1("ph_img",e).src;r&&"VIDEO"===r.tagName&&(r.pause(),r.src="",r.load()),(r=ce("video",{src:e.href,className:"gif_original",loop:!0,muted:!0,autoplay:!0,poster:d},{position:"relative"})).setAttribute("playsinline",!0),r.setAttribute("webkit-playsinline",!0),r.setAttribute("controls",!0),r.controls=!1,r.load()}else r=ce("img",{src:e.href,className:"gif_original"});addClass("current_gif gif_loading",e);var f=function(t,n){hasClass("current_gif",e)&&(replaceClass("gif_loading","gif_opened",e),append(r,e),l.curGif=e,n&&n())};return u?r.oncanplay=function(){e!==l.curGif&&(statlogsValueEvent("gif_play",0,"mp4",null,a?1:0),f())}:i=setInterval(function(){r.complete&&(statlogsValueEvent("gif_play",0,"gif",null,a?1:0),f(),clearInterval(i))},100),t&&!t.defaultPrevented?cancelEvent(t):void 0},hideGif:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return!0;if(checkEvent(t))return!0;if(removeClass("current_gif",e),removeClass("gif_opened",e),removeClass("gif_loading",e),geByClass("gif_original").forEach(function(e){remove(e)}),!n){var a=Gif.getState(),i=a.currentAutoplayElement,r=a.ignore;i===e&&(r.push(e),Gif.setState("ignore",r))}return l.curGif=null,t&&!t.defaultPrevented?cancelEvent(t):void 0},replyNamesRE:function(){var e=window.cur;if(!e.replyNames)return!1;var t=[];return each(e.replyNames,function(){t.push(escapeRE(this[0]))}),new RegExp("^("+t.join("|")+")")},replyTo:function(e,t,n,a,i){var r=window.cur;if(checkEvent(e))return!0;n=n||0,removeClass("nc_current_reply",geByClass1("nc_current_reply"));var o=ge("nc_form"),s=ge("nc_message"),c=geByClass1("nc_reply_name",o),u=gpeByClass("near_btn",c),d=ge("nc_reply_as"),f=val(s),h=l.replyNamesRE();if(n){var p=ge(t+"_"+n),A=getY(p)+getH(p),m=scrollTop();after(o,p),addClass("nc_current_reply",geByClass1("pi_reply_wrap",p)),scrollTop(m+getY(p)+getH(p)-A);var _=r.replyNames[a]||{},v=_[0]||"",g=_[1]||"";f=f?h?f.replace(h,v):f:v,l.onReplyClick(!0,v)}else{append(o,geByClass1("wall_replies")),scrollToEl(o);g="";f=h?f.replace(h,""):f}return val(s,replaceEntities(f)),val(c,g),toggle(u,n),d&&(val(d,+i),toggleClass("cp_post_as_group",o,+i)),val("nc_reply_to",n),r.replyTo=n,elfocus(s),!1},stickersInit:function(){if(!window.isNewMail||!geByClass1("messenger")){var e=window.cur,t=window.Scroller,n=ge("stickers_panel");if(n){var a=geByClass1("sp_body",n),i=geByClass1("sp_stickers_tabs",n);e.scroller&&e.scroller.destroy(),e.scroller=new t(a,{byPage:!0}),e.scroller.init(),e.destroy.push(function(){e.scroller.destroy()}),e.tabScroller&&e.tabScroller.destroy(),e.tabScroller=new t(i),e.tabScroller.init(),e.destroy.push(function(){e.tabScroller.destroy()}),l.onStickersInit(!0)}}},stickersToggle:function(e,t){var n=window.cur;if(!n.stickers)return!0;isUndefined(t)&&(t=!isVisible("stickers_panel"));var a=ge("write_form")||ge("nc_form"),i=ge("stickers_panel"),r=geByClass1("cp_sticker_btn",a);return!i||(toggle(i,t),toggleClass("cp_sticker_btn_sel",r,t),t&&n.tabScroller&&n.tabScroller.onShow(),n.onStickersToggleCallbacks&&n.onStickersToggleCallbacks.forEach(function(e){return e(t)}),!1)},stickersClick:function(e,t){var n=window.cur;return n.stickers&&n.stickers[t]?(window.isNewMail&&"/mail"===location.pathname&&(window.uMailWrite.drawStickers(),window.uMailWrite.openStickersPanel()),l.stickersToggle(null,!0),l.stickersSelectTab(null,t)):nav.go(e)},stickersStoreOpen:function(e){var t=window.cur;return ajax.click(e,!1,{url_params:{reply_to:t.replyTo||0}})},fromStickerToObject:function(e){var t=s(e,6);return{id:t[0],size:t[1],url:t[2],animationUrl:t[3],recent:t[4],ref:t[5]}},fromObjectToSticker:function(e){return[e.id,e.size,e.url,e.animationUrl,e.recent,e.ref]},getStickersTabHTML:function(e){var t=cur.stickers[e],n=window.isNewMail?16:8,a=[];if(t&&t.length)for(var i=0;i<t.length/n;i++)a.push(t.slice(i*n,i*n+n));var r=a.map(function(e){var t=e.map(function(e){var t=l.fromStickerToObject(e),n=t.id,a=t.size,i=t.url,r=t.animationUrl,o=t.recent,s=t.ref,c="",u="";r&&(c=" sticker_animation",u='\n          data-animation-path="'.concat(r,'"\n          data-uniq-id="').concat(Date.now()).concat(Math.round(1e8*Math.random()),'"\n          data-sticker-id="').concat(n,'"\n          data-loop-count="3"\n          ontouchstart="StickersAnimation.touchStartSticker(this);"\n          ontouchend="StickersAnimation.touchEndSticker(this);"\n        '));var d=" sticker"+n,f=' onclick="return post.sendSticker(this, '.concat(n,", ").concat(Boolean(o),", '").concat(s,"');\"");return'\n          <div class="sticker_item'.concat(d,'">\n            <a class="sticker_thumb thumb_item').concat(c,'" ').concat(f," ").concat(u,'>\n              <img src="').concat(i,'" class="th_img sticker_img" height="').concat(a,'"/>\n            </a>\n          </div>\n        ')}).join("\n");return'\n        <div class="sp_page scroller_page">\n          <div class="stickers_list">\n            '.concat(t,"\n          </div>\n        </div>\n      ")}).join("\n"),o='\n        <div class="sp_page scroller_page">\n          <div class="stickers_list">\n            <div class="stickers_null">'.concat(getLang("mobile_common_stickers_no_recent"),"</div>\n          </div>\n        </div>\n    "),s=a.map(function(e,t){return'\n        <span class="sp_ppt '.concat(0===t?"sp_ppt_sel":"",'" data-i="').concat(t,'">\n            <span class="sp_pptw"></span>\n        </span>\n      ')}).join("\n");return'\n        <div class="sp_cont scroller_wrap">\n          <div class="scroller_cont">\n            '.concat(t&&t.length?r:o,'\n          </div>\n        </div>\n        <div class="sp_pages_pts">\n            ').concat(a.length>1?s:"","\n        </div>\n      ")},stickersSelectTab:function(e,t){var n=window.cur;if(!window.isNewMail&&n.tabScroller&&!n.tabScroller.canClick())return!1;var a=ge("stickers_panel"),i=geByClass1("sp_body",a),r=geByClass1("sp_tab_selected",a);n.scroller&&n.scroller.destroy(),val(i,l.getStickersTabHTML(t)),n.scroller&&n.scroller.init(),e||(e=geByClass1("sp_tab"+t,a)),removeClass("sp_tab_selected",r),addClass("sp_tab_selected",e);var o=getY(a),s=o+getW(a),c=scrollTop(),u=c+getCh();return(o<c||s>u)&&scrollToEl(a),n.tabScroller&&n.tabScroller.showElem(e),StickersAnimation&&StickersAnimation.loadAutoplayAnimationStickers(),window.isNewMail&&l.onStickersTabSelected(),!1},addRecentSticker:function(e,t,n){var a=window.cur,i=gpeByClass("sticker_item",e);if(a.stickers&&i){var r=Object.keys(a.stickers).reduce(function(e,n){return e||a.stickers[n].find(function(e){return l.fromStickerToObject(e).id===t})},null);if(!r)throw new Error("Sticker ".concat(t," not found"));var o=l.fromStickerToObject(r),s=o.id,c=o.size,u=o.url,d=o.animationUrl;a.stickers[-1]=a.stickers[-1]||[],a.stickers[-1]=a.stickers[-1].filter(function(e){return l.fromStickerToObject(e).id!==s}),a.stickers[-1].unshift(l.fromObjectToSticker({id:s,size:c,url:u,animationUrl:d,recent:1,ref:"recent"})),a.stickers[-1]=a.stickers[-1].filter(function(e,t){return t<(window.isNewMail?16:8)}),n&&l.stickersSelectTab(!1,-1)}},sendSticker:function(e,t,n,a){if(window.isNewMail&&l.onStickerClick(t,a))return l.addRecentSticker(e,t,!1),!1;var i=window.cur;if(i.scroller&&!i.scroller.canClick())return!1;l.stickersToggle(e,!1);var r=ge("write_submit"),o={lock:!0,url_params:{media:"sticker"+t,_af:srand()}};if(n&&!a&&(o.url_params.media_from="recent"),i.ref&&(o.url_params.ref=i.ref,i.ref=void 0),i.refSource&&(o.url_params.ref_source=i.refSource,i.refSource=void 0),!a){var s=attr(e,"href");s&&(a=s.split("sticker_referrer=")[1].split("&")[0])}return a&&(o.url_params.sticker_referrer=a),l.addRecentSticker(e,t,n),r?ajax.click(r,extend({save:!0},Dialog),o):(r=ge("nc_submit"))?(setTimeout(function(){Replies.setCurrentTimestamp(0)},0),ajax.click(r,{},o)):void 0},toggleMarkAsAds:function(e,t){cancelEvent(t);var n=$("input[name='from_group']");if(!n||n.checked){var a=$("input",e);a.checked=!a.checked;var i=$("input[name='mute_notifications']");i&&(i.checked=a.checked,i.disabled=a.checked),l.checkCopyright()}},toggleSender:function(e,t){t.stopPropagation(),t.preventDefault();var n=e.querySelector("input");n.checked=!n.checked;var a={group:[],user:["marked_as_ads","signed","close_comments","mute_notifications"]},i=$("input[name='marked_as_ads']");$$(".Control.Control_type_checkbox.Row").forEach(function(e){if(!hasClass("Control__blocked",e)){var t=e.querySelector("input[name]");if("from_group"!==t.name)n.checked&&!a.group.includes(t.name)?t.disabled=!n.checked:!n.checked&&a.user.includes(t.name)&&(t.disabled=!n.checked),"mute_notifications"===t.name&&i&&i.checked&&(t.disabled=!0);else{var r=$(".header__user"),o=$(".header__group"),s=$("#select-timer"),l=$("input[name=postpone]"),c=$("input#add_post_btn");if(n.checked?(r.classList.add("header_hidden"),o.classList.remove("header_hidden"),s.style.display="inline-block",l.disabled=!1):(r.classList.remove("header_hidden"),o.classList.add("header_hidden"),s.style.display="none",l.disabled=!0),c){var u=c.value;c.value=c.dataset.value,c.dataset.value=u}}}}),l.checkCopyright()},checkCopyright:function(){var e=$("input[name='marked_as_ads']"),t=$("input[name='from_group']"),n=ge("select-copyright"),a=$('input[name="copyright"]'),i=$(".create_post__source-option");if(n){var r=$(".Icon",i),o=$(".Btn",i),s=$(".Btn__text",o);e&&e.checked&&(!t||t.checked)?(hide(n),attr(o,"disabled",!0),i.classList.add("create_post__source-option--disabled"),s.innerHTML=getLang("mobile_wall_post_copyright_add_button"),r.classList.remove("Icon_edit"),r.classList.add("Icon_audio_plus")):(attr(o,"disabled",!1),i.classList.remove("create_post__source-option--disabled"),a.value?(setStyle(n,"display","inline-block"),s.innerHTML=getLang("mobile_wall_post_copyright_edit_button"),r.classList.remove("Icon_audio_plus"),r.classList.add("Icon_edit")):(s.innerHTML=getLang("mobile_wall_post_copyright_add_button"),r.classList.remove("Icon_edit"),r.classList.add("Icon_audio_plus")))}}},c=l;t.default=c,window.post=l},H5mD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLandscapePhone=function(){return 90===Math.abs(window.orientation)&&!r},t.checkIPadOS=A,t.isIOSChrome=t.isIPhoneX=t.isScrollBasedViewport=t.isWKWebView=t.iosMinor=t.iosMajor=t.isIPadOS=t.isIOS=t.isIPhone=t.isIPad=t.IOS_NO_KEYBOARD_ALLOWED_OFFSET=t.IPHONE_KEYBOARD_REJECT_OFFSET=t.IPHONE_X_SAFARI_BOTTOM_BAR=t.IPHONE_SAFARI_BOTTOM_BAR=void 0;t.IPHONE_SAFARI_BOTTOM_BAR=45;t.IPHONE_X_SAFARI_BOTTOM_BAR=85;t.IPHONE_KEYBOARD_REJECT_OFFSET=180;t.IOS_NO_KEYBOARD_ALLOWED_OFFSET=70;var a=navigator.userAgent.toLowerCase(),i=A(a);t.isIPadOS=i;var r=i||-1!==a.indexOf("ipad");t.isIPad=r;var o=!r&&-1!==a.search(/iphone|ipod/);t.isIPhone=o;var s=o||r;t.isIOS=s;var l,c,u=s&&navigator.userAgent.match(/OS ([\d_]+) like Mac OS X/i);t.iosMajor=l,t.iosMinor=c,i&&(t.iosMajor=l=13,t.iosMinor=c=0),u&&(u=u[1].split("_"),t.iosMajor=l=+u[0],t.iosMinor=c=+u[1]),u=null;var d=l<13&&!(11===l&&c<3);t.isScrollBasedViewport=d;var f=s&&function(e){if(window.webkit&&window.webkit.messageHandlers)return!0;var t=/constructor/i.test(window.HTMLElement),n=!!window.indexedDB;if(-1===e.indexOf("safari")||-1===e.indexOf("version")||navigator.standalone){if(!n&&t||!window.statusbar||!window.statusbar.visible);else if(!t||n)return!0}else;return!1}(a);t.isWKWebView=f;var h=s&&375===screen.width&&812===screen.height&&3===window.devicePixelRatio;t.isIPhoneX=h;var p=-1!==a.search(/crios/i);function A(e){var t=!/ipad|iphone|ipod/.test(e);return!(!/mac os/.test(e)||!t||"boolean"!=typeof navigator.standalone)}t.isIOSChrome=p},HDU4:function(e,t,n){"use strict";var a,i=(a=n("u+Ht"))&&a.__esModule?a:{default:a};window.Archive=i.default},HGMY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MailPreSendList__Msg",{enumerable:!0,get:function(){return a.MailPreSendList__Msg}}),Object.defineProperty(t,"getElem",{enumerable:!0,get:function(){return i.getElem}}),Object.defineProperty(t,"setMsgs",{enumerable:!0,get:function(){return i.setMsgs}}),Object.defineProperty(t,"addMsg",{enumerable:!0,get:function(){return i.addMsg}}),Object.defineProperty(t,"removeMsg",{enumerable:!0,get:function(){return i.removeMsg}}),Object.defineProperty(t,"getMsg",{enumerable:!0,get:function(){return i.getMsg}}),Object.defineProperty(t,"onMsgClick",{enumerable:!0,get:function(){return i.onMsgClick}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("E5Ij")),i=n("4KUl");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}var o=a.default;t.default=o},HHQA:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("2fRN"))&&a.__esModule?a:{default:a}).default;t.default=i},"HN+/":function(e,t,n){var a=n("vOyG"),i=a.length,r=1,o=3,s=8;function l(e,t,n){e[n]!==t[n]&&(t[n]=e[n],e[n]?t.setAttribute(n,""):t.removeAttribute(n))}e.exports=function(e,t){var n=e.nodeType,c=e.nodeName;n===r&&function(e,t){for(var n=t.attributes,a=e.attributes,i=null,r=null,o=null,s=null,l=a.length-1;l>=0;--l)s=a[l],o=s.name,i=s.namespaceURI,r=s.value,i?(o=s.localName||o,t.getAttributeNS(i,o)!==r&&t.setAttributeNS(i,o,r)):t.hasAttribute(o)?t.getAttribute(o)!==r&&("null"===r||"undefined"===r?t.removeAttribute(o):t.setAttribute(o,r)):t.setAttribute(o,r);for(var c=n.length-1;c>=0;--c)!1!==(s=n[c]).specified&&(o=s.name,(i=s.namespaceURI)?(o=s.localName||o,e.hasAttributeNS(i,o)||t.removeAttributeNS(i,o)):e.hasAttributeNS(null,o)||t.removeAttribute(o))}(e,t);n!==o&&n!==s||t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue);"INPUT"===c?function(e,t){var n=e.value,a=t.value;l(e,t,"checked"),l(e,t,"disabled"),n!==a&&(t.setAttribute("value",n),t.value=n);"null"===n&&(t.value="",t.removeAttribute("value"));e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=n):t.removeAttribute("value")}(e,t):"OPTION"===c?function(e,t){l(e,t,"selected")}(e,t):"TEXTAREA"===c&&function(e,t){var n=e.value;n!==t.value&&(t.value=n);if(t.firstChild&&t.firstChild.nodeValue!==n){if(""===n&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=n}}(e,t);!function(e,t){for(var n=0;n<i;n++){var r=a[n];e[r]?t[r]=e[r]:t[r]&&(t[r]=void 0)}}(e,t)}},HON1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("jZPa"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.OwnerRow=i.default},HPEO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("dVvW"))&&a.__esModule?a:{default:a};n("Ziv7");var r=i.default;t.default=r,window.uMailWrite=i.default},"HQL/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("TYsd")),i=o(n("9y81")),r=o(n("p5n7"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return{class:"VotingForm__option","data-created":e.is_created?"1":"0",inner:[(0,r.default)({class:"VotingForm__optionInput",name:e.name,value:e.value,on_key_down:"VotingForm._onOptionKeyDown"}),{class:"VotingForm__optionRemove",onclick:["VotingForm._onOptionRemoveClick","this"],inner:a.default.wrap((0,i.default)({icon:"close16"}))}]}};t.default=s},HV9n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("gLrT")),i=r(n("Y6JH"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,n,r){for(var o=window.lang,s=t[e.groupingId],l=[],c=0;c<e.variants.length;c++){var u=e.variants[c],d=[];if(0===c)for(var f in s){for(var h=!0,p=Object.keys(s[f]),A=0;A<p.length;A++){var m=p[A];s[f][m]&&(h=!1)}d.push({tag:"option",inner:n[f].name,value:f,attrs:{selected:f==u,disabled:h}})}else if(1===c){var _=s[e.variants[0]];for(var v in _)d.push({tag:"option",inner:n[v].name,value:v,attrs:{selected:v==u,disabled:!_[v]}})}l.push({inner:[{tag:"span",class:"CartItem__propertyName",inner:"".concat(n[u].propertyName,":")},{tag:"select",class:"CartItem__variantSelect",onchange:["Cart.view.changeVariant","this",e,c],attrs:{value:u},inner:d}]})}return{class:["CartItem",e.deleted?"CartItem--deleted":""],attrs:{"data-id":e.id},inner:[{tag:"a",href:e.url,inner:{tag:"img",class:"CartItem__thumb",attrs:{src:e.thumbUrl}}},{class:"CartItem__info",inner:[{tag:"a",class:"CartItem__title",inner:e.name,href:e.url},{class:"CartItem__price",inner:Wd.wrap((0,a.default)(e.totalPrice,r))},e.deleted?null:{class:"CartItem__properties",inner:[l,{inner:[{tag:"span",class:"CartItem__propertyName",inner:"".concat(o.mobile_market_cart_quantity,":")},{tag:"a",class:"CartItem__quantity",inner:langNumeric(e.quantity,o.mobile_market_items_count_short),onclick:["Cart.view.openQuantityChangePopup",e.id]}]}]},e.deleted?{class:"CartItem__deletedInfo",inner:[{class:"CartItem__deletedText",inner:o.mobile_market_cart_out_of_stock},{tag:"a",inner:o.mobile_market_contact_with_merchant,href:"/product".concat(e.fullId,"?act=write&hash=").concat(e.mailHash)}]}:null]},{class:"wi_actions_btn",onclick:["Cart.view.openDeletePopup",e.id],inner:(0,i.default)("base","more_horizontal_24")}]}};t.default=o},HbvZ:function(e,t,n){"use strict";var a=o(n("TYsd")),i=o(n("TcbA")),r=n("fdw3");function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=$("#DeviceInfo");a.default.hydrate(i.default,(0,r.getState)("DeviceInfo"),e)}o(n("Cbap")).default.getRouter().addRoute("/?device",s),window.initDeviceInfo=s},HdGT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ready=v,t.getItems=function(){return(0,r.queueGetItems)(_)},t.send=g,t.retry=function(e,t){var n=(0,r.queueGetItem)(_,e);t&&(n.data=t(n.data));(0,r.queueRemoveItem)(_,e),g(n.data.data)},t.remove=function(e,t){(0,r.queueRemoveItem)(_,e),"silent"!==t&&m(e)},t.QUEUE_NAME=t.QUEUE_MAX_FAILS=t.onMessageRemove=t.onMessage=t.onErrorMessage=t.onCaptcha=t.onFailed=t.onSent=t.onStopped=void 0;var a,i=function(e){if(e&&e.__esModule)return e;var t=c();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("W38l")),r=n("702z"),o=n("qHA9"),s=(a=n("+cqQ"))&&a.__esModule?a:{default:a},l=n("j80l");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}var u=(0,s.default)();t.onStopped=u;var d=(0,s.default)();t.onSent=d;var f=(0,s.default)();t.onFailed=f;var h=(0,s.default)();t.onCaptcha=h;var p=(0,s.default)();t.onErrorMessage=p;var A=(0,s.default)();t.onMessage=A;var m=(0,s.default)();t.onMessageRemove=m;t.QUEUE_MAX_FAILS=5;var _="mail_send";function v(){return(0,r.queueWhenReady)(_)}function g(e){v().then(function(){i.logQueueSize((0,r.queueGetSize)(_));var t=(0,o.sendDataToMessage)(e);(0,r.queueAddItem)(_,t.sendId,{data:e}),A(t)})}t.QUEUE_NAME=_,(0,r.registerQueue)(_,{onSend:function(e,t){!function(e,t){e=Object.assign({},e);var n="/mail",a="edit_message"===e.act;a?Object.keys(e).forEach(function(t){"attached_messages"!==t&&"has_reply"!==t||delete e[t]}):(n=(0,l.makeUrl)("/mail",{act:"send",to:e.to,from:e.from,hash:e.hash,_af:e._af,ref:e.ref||"",ref_source:e.ref_source||""}),Object.keys(e).forEach(function(t){"act"!==t&&"to"!==t&&"from"!==t&&"hash"!==t&&"_af"!==t||delete e[t]}));i.log(t,a?"edit":"send");var s=function(e){i.mark(t,"server"),a&&!e.was_modified&&m(t),d(),(0,r.queueSignalSuccess)(_)};(0,o.mailRequest)(n,e).then(s,function e(n){var a=n.type,l=n.code,c=n.message,u=n.data;if(i.error(t,"server_send",a),"captcha"!==a&&i.clean(t),"server"===a&&l&&l!==o.UNKNOWN_ERROR)return c&&p(c),void(0,r.queueSignalStop)(_);"captcha"!==a?((0,r.queueSignalFail)(_),f()):h(u,function(n){if(!n)return i.clean(t),void(0,r.queueSignalStop)(_);n.then(s,e)})})}(t.data,e)},onStopped:u,maxFails:5})},HpMb:function(e,t,n){"use strict";var a=n("OcsD");window.GroupsMenu={},window.GroupsMenu._onClick=function(e,t,n,i,r){return(0,a.statlogsValueEvent)("groups_menu_item_click",e,t,n,i,r),!0}},HwqD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("TYsd")),i=o(n("z9sQ")),r=o(n("9y81"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=window.lang,n=e.count;return a.default.html({class:[i.default.class("Bell",{empty:!n}),"al_menu"],href:e.url,onclick:e.onclick,"aria-label":t.mobile_notifications_title,"data-header":t.mobile_notifications_title,"data-skiponclick":1,inner:[a.default.html((0,r.default)({mix:"Bell__icon",icon:"bell"})),{class:"Bell__counter",inner:n,tag:"em"}]})};t.default=s},"I/8u":function(e,t,n){"use strict";var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("WTJf"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}Object.assign(a.default,{setValue:function(e,t){if(!e)return;var n=(0,a.OvalIsHidden)(t);e.innerText=t,e.classList.toggle(r.hidden,n)}});var r={hidden:"Oval_hidden"}},I2ZF:function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,i=n;return[i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]]].join("")}},I7Du:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("ZYIi"))&&a.__esModule?a:{default:a}).default;t.default=i},IXdz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=window.lang;this.store=Stories.getStore(),this.viewers=this.store.viewers[t]||[],this.viewersState=this.store.viewersState[t]||[],this.questions=this.store.questions[t]||[],this.replies=this.store.replies[t]||[];var a=this.viewersState,i=a.count,r=a.repliesCountText,o=a.authorCountText;this.raw_id=t,this.count=i,this.countText=langNumeric(this.count,n.mobile_stories_views_title),this.repliesCountText=r,this.repliesAuthorCountText=o,this.questions?this.title=n.mobile_stories_views_title_interactions:this.viewers.length&&this.replies.length?this.title=n.mobile_stories_views_title_replies_and_views:this.viewers.length?this.title=this.countText:this.replies.length&&(this.title=n.mobile_stories_views_title_replies)}var t,n,a;return t=e,(n=[{key:"render",value:function(){var e=this,t=window.winToUtf,n=this.store.questions[this.raw_id]||[];return i.default.html({class:Bem.class("Views",{short:!(this.viewers.length||!this.replies.length)}),inner:[{class:"Views__overlay",onclick:"Stories.hideViews();"},{class:"Views__header",inner:[{class:"Views__table",inner:[{class:"Views__cell",inner:{class:"Views__title",inner:this.title}}]},{class:"Views__close",onclick:"Stories.hideViews();"}]},{class:"Views__body ScrollView",onscroll:'Stories.onScrollViews(this, "'.concat(this.raw_id,'")'),ontouchmove:"event.stopPropagation();",inner:[this.replies.length?{class:"Views__replies",inner:[{class:"Views__table Views__repliesHeader",inner:[{class:"Views__cell Views__repliesCount",inner:this.repliesCountText},this.repliesAuthorCountText?{class:"Views__cell Views__repliesAuthorCount",inner:this.repliesAuthorCountText}:null]},{class:"Views__repliesBody",onscroll:'Stories.onRepliesScroll(event, "'.concat(this.raw_id,'")'),inner:{class:"Views__repliesScroll",inner:this.replies.map(function(n){return{class:"Views__reply ".concat(n.has_new?"Views__reply_new":""),onclick:'Stories.openReplies("'.concat(n.owner_id,"/").concat(n.list,'", "').concat(e.raw_id,'");'),inner:[{class:"Views__replyAvatarWrap",inner:{class:"Views__replyAvatar",src:n.photo_owners_data[0].owner_photo_url,tag:"img"}},{class:"Views__replyName",inner:n.name?t(n.name):lang.mobile_stories_reply_you}]}})}}]}:null,n.length?{class:"Views__questions",inner:[{class:"Views__table Views__questionsHeader",inner:[{class:"Views__cell Views__questionsTitle",inner:lang.mobile_stories_question_title},{class:"Views__cell Views__questionsLink",inner:lang.mobile_stories_question_show_all,onclick:'Stories.showQuestions("'.concat(this.raw_id,'")')}]},{class:"Views__questionsBody",inner:{class:"Views__questionsScroll",inner:n.slice(0,10).map(function(e){return{class:"Question","data-id":e.id,inner:[{class:"Question__content",inner:[{href:e.author.link,class:"Question__author",inner:e.isAnonymous?lang.mobile_stories_question_anonymous:e.author.name,onClick:"Stories.sendAnalyticsEvent('question_go_to_author', { questionId: ".concat(e.id," });")},{class:Bem.class("Question__text",{small:e.text.length>40}),inner:e.text}]},{class:Bem.class("Question__actions",{published:e.isPublished}),inner:lang.mobile_stories_question_actions,onclick:["Stories.openQuestionActions",e.id]}]}})}}]}:null,{class:"Views__viewers",inner:[this.viewers.length&&(n.length||this.replies.length)?{class:"Views__viewersHeader",inner:this.countText}:null,{class:"Views__viewersBody",inner:this.viewers.map(function(e){return{class:"Views__viewer",href:e.href,inner:{class:"Views__table",inner:[{class:"Views__cell Views__cell_avatar",inner:{class:"Views__avatar",src:e.photo,tag:"img"}},{class:"Views__cell Views__cell_name",inner:{class:"Views__name",inner:e.name}}]}}})}]},this.viewersState.nextFrom?{class:"Views__viewersLoader",onclick:'Stories.loadViews("'.concat(this.raw_id,'")')}:null]}]})}}])&&r(t.prototype,n),a&&r(t,a),e}();t.default=o},IrFw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QRPhotoPosting=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.default)({on_overlay_click_native:"QRPhotoPosting.back();",class:"QRPhotoPosting",content:[{class:"QRPhotoPosting__img",inner:Wd.wrap(e.svg)},{class:"QRPhotoPosting__title",inner:Wd.wrap(e.title)}]})},t.QRPhotoPostingButton=function(){return{inner:[(0,i.default)({sprite:"common",name:"qr_24"})],class:"QRPhotoPosting__button",onclick:"QRPhotoPosting.show();",tag:"div"}};var a=r(n("r/ag")),i=r(n("Y6JH"));function r(e){return e&&e.__esModule?e:{default:e}}},Ivtq:function(e,t,n){"use strict";var a=n("PovR");onDOMReady(s),page.onChange(s);var i="feedAssistance_pushNotificationsSwitch",r="enable_browser_notifications",o="m_push_switch";function s(){window.pushNotifier&&pushNotifier.canBeEnabled().then(function(e){return e&&PushNotifier.getPermission()===a.PUSH_NOTIFIER_PERMISSION_DEFAULT}).then(function(e){if(e){FeedNotifications.addWebActionAcceptHandler(r,l),FeedNotifications.addWebActionDeclineHandler(r,c);var t=geByClass1(i);if(!t)return;FeedAssistanceStats.registerTrackingCls(i),FeedAssistanceStats.register(t,"feed")}})}function l(e){return PushNotifier.requestPermission().then(function(t){var n,i=!0;return unlockButton(e),t===a.PUSH_NOTIFIER_PERMISSION_DEFAULT?i=!1:(n=t===a.PUSH_NOTIFIER_PERMISSION_GRANTED?FeedAssistanceStats.EVENTS.SUB_EVENT_ENABLE_PUSH:FeedAssistanceStats.EVENTS.SUB_EVENT_DECLINE_PUSH,d(e,n),u(),i)},function(){return c(e)})}function c(e){return unlockButton(e),d(e,FeedAssistanceStats.EVENTS.SUB_EVENT_DECLINE_PUSH),u(),!0}function u(){var e=geByClass1(i);remove(e)}function d(e,t){FeedAssistanceStats.dispatchEvent({type:FeedAssistanceStats.EVENTS.EVENT_FEED_ASSISTANCE,data:FeedAssistanceStats.serializeEventData(FeedAssistanceStats.EVENTS.EVENT_FEED_ASSISTANCE,e,o,t)})}},"J/W8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("z9sQ"))&&a.__esModule?a:{default:a};var r=function(e){var t=e.bcg,n=t.type;return{class:i.default.class("VotingBcg",{type:n}),style:"photo"===n?o(t):"gradient"===n?s(t):"tile"===n?l(t):null,inner:"photo"===n?c(e):null}};function o(e){return u({"background-color":e.color})}function s(e){var t,n=[],a=e.points.length;for(t=0;t<a;t++){var i=e.points[t];n.push("".concat(i.color," ").concat(i.percent,"%"))}var r=e.angle-90;return n=n.join(", "),u({background:"linear-gradient(".concat(r,"deg, ").concat(n,")")})}function l(e){var t=e.image,n=e.width,a=e.height;return u({"background-image":"url('".concat(t,"')"),"background-position":"top center","background-size":"".concat(n,"px ").concat(a,"px")})}function c(e){var t=e.bcg,n=t.photo,a=t.color;return{class:"VotingBcg__photoBox",style:u({height:"".concat(e.photoHeight,"px")}),inner:[{class:"VotingBcg__photoImage",style:u({"background-image":"url('".concat(n,"')")})},{class:"VotingBcg__photoGradient",style:u({background:"linear-gradient(to bottom, ".concat("rgba(255, 255, 255, 0)",", ").concat(a,")")})}]}}function u(e){var t,n=[],a=Object.keys(e),i=a.length;for(t=0;t<i;t++){var r=a[t],o=e[r];n.push("".concat(r,": ").concat(o,";"))}return n.join(" ")}t.default=r},JAxc:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("K3lA"))&&a.__esModule?a:{default:a}).default;t.default=i},JDEo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceMessagePlayer=void 0;var a,i,r=n("1ZxC"),o=n("a1OB"),s=n("rEJs"),l=n("VBqm"),c=n("u4EO"),u=(a=n("Xrg9"))&&a.__esModule?a:{default:a},d=n("DM2o");function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=!1,p=function(){function e(){var t=this,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onListened;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._reattach=!1,this._audioEl=null,this._playing=!1,this._timer=null,this._duration=0,this._detaching=!1;var a={onEnd:function(){t.detach()},onFail:function(){a.onEnd()},onCanPlay:function(){},onProgressUpdate:function(e){t._updateProgress(e)}};i=!1,r.PlayerHTML5.isSupported()?(r.PlayerHTML5.isSupported('audio/ogg;codecs="opus"')&&!r.PlayerHTML5.isSupported('audio/ogg;codecs="codec_check"')&&(i=!0),this._impl=new r.PlayerHTML5(a)):browser.flash&&window.renderFlash&&(this._impl=new o.PlayerFlash(a)),this.onPlayPause=function(e){return cancelEvent(e),t.toggle()},this.onDurationClick=function(e){t.durationType=!t.durationType,cancelEvent(e)},this._onListened=function(){n&&n(t._audioEl)},this._initEvents()}var t,n,a;return t=e,a=[{key:"pauseGlobalMedia",value:function(){window.Notifier&&(h=!0,window.Notifier.lcSend("video_start")),window.ap&&window.ap.isPlaying()?(window.ap.pause(),window.ap.pausedByMsg=!0):window.audio&&window.audio.playing&&window.audio.playing()&&(window.audio.pause(),window.audio.pausedByMsg=!0)}},{key:"resumeGlobalMedia",value:function(){window.Notifier&&h&&(h=!1,window.Notifier.lcSend("video_hide")),window.ap&&window.ap.pausedByMsg?(window.ap.play(),delete window.ap.pausedByMsg):window.audio&&window.audio.playing&&window.audio.pausedByMsg&&((0,l.wrapAudioPlay)(window.audio),delete window.audio.pausedByMsg)}}],(n=[{key:"_updateProgress",value:function(e){this._audioEl&&(this._duration*e>=1||this._duration<1)&&!this._audioEl._listened&&(this._audioEl._listened=!0,this._onListened()),this._durationEl&&(this.durationType?this._durationEl.innerHTML="-"+formatTime(Math.round(this._duration*(1-e))):this._durationEl.innerHTML=formatTime(Math.round(this._duration*e))),this._progressSlider&&this._progressSlider.setValue(e)}},{key:"_initInterface",value:function(){var e=this;this._el=ce("div",{innerHTML:'<div class="audio-msg-player audio-msg-track"><button class="audio-msg-track--btn"></button><div class="audio-msg-track--duration"></div><div class="audio-msg-track--wave-wrapper"><div class="audio-msg-track--slider"></div></div></div>'}).firstChild,window.getLang&&attr(this._el,"aria-label",getLang("mail_audio_message")),this._playBtn=geByClass1("audio-msg-track--btn",this._el),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_play")),this._durationEl=geByClass1("audio-msg-track--duration",this._el),this._durationEl.innerHTML=formatTime(this._duration),this._progressSlider=new c.Slider(geByClass1("audio-msg-track--slider",this._el),{value:0,size:0,hintClass:"audio_player_hint",formatHint:function(t){return formatTime(Math.round(t*e._duration))},onEndDragging:function(t){e._impl.seek(t)}});var t=geByClass1("audio-msg-track--wave-wrapper",this._audioEl).children[0];geByClass1("slider_slide",this._el).appendChild(t.cloneNode(!0)),geByClass1("slider_amount",this._el).appendChild(t.cloneNode(!0)),addEvent(this._playBtn,"click",this.onPlayPause),addEvent(this._durationEl,"click",this.onDurationClick),this._audioEl.parentNode.appendChild(this._el)}},{key:"_destroyInterface",value:function(){hide(this._el),this._audioEl.parentNode.removeChild(this._el),removeEvent(this._playBtn,"click",this.onPlayPause),this._progressSlider&&(this._progressSlider.destroy(),this._progressSlider=null),this._playBtn=null,this._durationEl=null,this._el=null}},{key:"attachTo",value:function(e){var t=this;if(this._audioEl!=e){null!=this._audioEl&&(this._reattach=!0),this.detach(),this._audioEl=e,addClass(this._audioEl,"audio-msg-track_player-attached"),this._duration=attr(e,"data-duration"),this._initInterface();var n=this._audioEl.id.split("_");if(n&&n.length>1&&(this._owner_id=n[1]),this._reattach=!1,!this._impl.loaded)return new Promise(function(n,a){t._impl.onReady(function(){t._impl.setUrl(attr(e,i?"data-ogg":"data-mp3"),{duration:t._duration,callback:n})})});this._impl.setUrl(attr(e,i?"data-ogg":"data-mp3"),{duration:this._duration})}return!0}},{key:"detach",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._audioEl&&this._el&&!this._detaching){if(e&&this.isAttached())return;this._detaching=!0,this.stop(),this._destroyInterface(),removeClass(this._audioEl,"audio-msg-track_player-attached"),this._audioEl._listened=!1,this._audioEl=null}this._detaching=!1}},{key:"play",value:function(){this._audioEl&&(this._reattach||e.pauseGlobalMedia(),addClass(this._el,"audio-msg-track_playing"),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_pause")),this._playing=!0,this._createTimer(),this._owner_id&&(0,d.statlogsValueEvent)("audio_message_play",this._owner_id),this._impl.play())}},{key:"pause",value:function(){this._audioEl&&(!this._reattach&&this._playing&&e.resumeGlobalMedia(),window.getLang&&attr(this._playBtn,"aria-label",getLang("global_audio_play")),removeClass(this._el,"audio-msg-track_playing"),this._playing=!1,this._impl.pause(),this._killTimer())}},{key:"stop",value:function(){this.pause(),this._impl.stop()}},{key:"toggle",value:function(){this._playing?this.pause():this.play()}},{key:"_createTimer",value:function(){var e=this;this._duration>0&&(this._killTimer(),this._timer=setInterval(function(){var t=e._impl.getCurrentProgress();e._updateProgress(t)},100))}},{key:"_killTimer",value:function(){this._timer&&(clearInterval(this._timer),this._timer=null)}},{key:"_initEvents",value:function(){var e=this;window.ap?window.ap.on(this,s.events.PLAY,function(){delete window.ap.pausedByMsg,e.pause()}):window.audio&&window.audio.onPlay(function(){delete window.audio.pausedByMsg,e.pause()}),window.Notifier&&(window.Notifier.addRecvClbk("audio_start","audio_msg",function(){e.pause()}),window.Notifier.addRecvClbk("video_start","audio_msg",function(){e.pause()}))}},{key:"isAttached",value:function(){if(this._audioEl){for(var e=this._audioEl;e.parentNode;)e=e.parentNode;return!!e.body}return!1}},{key:"type",get:function(){return this._impl.type}},{key:"durationType",get:function(){return window.AudioPlayer?!!u.default.get(AudioPlayer.LS_PREFIX+AudioPlayer.LS_DURATION_TYPE):"1"==u.default.get("audio_time_left")},set:function(e){window.AudioPlayer?u.default.set(AudioPlayer.LS_PREFIX+AudioPlayer.LS_DURATION_TYPE,!!e):u.default.set("audio_time_left",e?"1":"0")}}])&&f(t.prototype,n),a&&f(t,a),e}();t.VoiceMessagePlayer=p},JDVM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("MHaq"))&&a.__esModule?a:{default:a};window.AddCopyrightPopup=i.default;var r=i.default;t.default=r},JYMJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsPanel=u,t.default=void 0;var a=l(n("Y6JH")),i=l(n("VRji")),r=l(n("p5n7")),o=l(n("29dZ")),s=n("fdw3");function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{class:"SharePanel SharePanel-header SharePanel--active ShareHeaderConversationsPanel","aria-hidden":"false","data-name":"ShareHeaderConversationsPanel",inner:[{"aria-label":(0,s.getLang)("mobile_close"),onclick:"cur.share.destroy()",role:"button",class:"SharePanel-header__close",inner:(0,a.default)("common","cancel_24")},{class:"SharePanel-headerText",inner:[{class:"SharePanel-headerText__label",inner:(0,s.getLang)("mobile_like_publish_head_title")},{class:"SharePanel-headerText__receivers"}]},{class:"SharePanel-headerRight",inner:[{"aria-label":(0,s.getLang)("mobile_search"),class:"SharePanel-headerRight__search",role:"button",inner:(0,a.default)("wall","search_24"),onclick:"cur.share.toggleConversationsSearch(true)"},e.supportsExternalShare?{"aria-label":(0,s.getLang)("mobile_share_external"),class:"SharePanel-headerRight__externalShare",role:"button",inner:"iOS"===e.platform?(0,a.default)("wall","share_external_ios_24"):(0,a.default)("wall","share_external_android_24"),onclick:"cur.share.externalShare()"}:null]}]}}function u(e){var t=e.buttons,n=e.options,a="boolean"!=typeof e.active||e.active,i=!(n.can_to_own||n.can_to_club||n.can_bookmark);return{class:"ActionsPanel SharePanel ".concat(a?"SharePanel--active":""),"data-name":"ActionsPanel","aria-hidden":!a,style:i?"display: none;":"",inner:t.map(function(e){if(e)return function(e){var t=e.href?"a":"div",n=e.onclick,a={tag:t,role:"button",tabindex:-1,href:e.href,onclick:n,class:"ActionsPanel-button ActionsPanel-button--".concat(e.target),inner:[{class:"ActionsPanel-button__icon",inner:e.icon},{class:"ActionsPanel-button__label",inner:e.label}]};"boolean"==typeof e["aria-pressed"]&&(a["aria-pressed"]=e["aria-pressed"]+"");return a}(e)})}}var d=function(e){var t=e.can_bookmark,n=e.is_bookmarked,l=e.object,d=e.list,f=e.from,h=e.post_from,p=e.supportsExternalShare,A=e.isVKApp,m=e.targetOwnOnClick,_=(0,s.makeUrl)("/wall",{act:"add",share_box:1,is_vk_app:A,object:l,list:d,from:f,post_from:h});return{inner:[{inner:[c({platform:e.platform,supportsExternalShare:p}),{class:"SharePanel ShareHeaderSearch ShareHeaderConversationsSearchPanel","aria-hidden":"true","data-name":"ShareHeaderConversationsSearchPanel",role:"search",inner:(0,r.default)({autocomplete:!1,onblur:'cur.share.clearSearch(event, "peers", true)',prefix:{text:{role:"button",inner:(0,a.default)("wall","search_outline_16")}},postfix:{text:{class:"ShareHeaderSearch__clear",role:"button",onclick:'cur.share.clearSearch(event, "peers")',inner:(0,a.default)("common","cancel_outline_24")}},class:"ShareHeaderConversationsSearchPanel__input",id:"ShareHeaderConversationsSearchPanel__input",placeholder:(0,s.getLang)("mobile_search"),spellcheck:!1})},{class:"SharePanel SharePanel-header ShareHeaderGroupsPanel","aria-hidden":"true","data-name":"ShareHeaderGroupsPanel",inner:[{"aria-label":(0,s.getLang)("mobile_back"),onclick:"cur.share.toggleGroupsPanel(false)",role:"button",class:"SharePanel-header__close",inner:(0,a.default)("common","back_24")},{class:"SharePanel-headerText",inner:[{class:"SharePanel-headerText__label",inner:(0,s.getLang)("mobile_like_publish_head_title")}]},{class:"SharePanel-headerRight",inner:[{class:"SharePanel-headerRight__search",role:"button",inner:(0,a.default)("wall","search_24"),onclick:'cur.share.setActivePanel(this, "ShareHeaderGroupsSearchPanel", true)'}]}]},{class:"SharePanel ShareHeaderSearch ShareHeaderGroupsSearchPanel","aria-hidden":"true","data-name":"ShareHeaderGroupsSearchPanel",role:"search",inner:(0,r.default)({autocomplete:!1,onblur:'cur.share.clearSearch(event, "group", true)',prefix:{text:{"aria-label":(0,s.getLang)("mobile_search"),role:"button",inner:(0,a.default)("wall","search_outline_16")}},postfix:{text:{class:"ShareHeaderSearch__clear",onclick:'cur.share.clearSearch(event, "group")',inner:(0,a.default)("common","cancel_outline_24")}},class:"ShareHeaderGroupsSearchPanel__input",id:"ShareHeaderGroupsSearchPanel__input",placeholder:(0,s.getLang)("mobile_search"),spellcheck:!1})}],class:"SharePanelRoot ShareHeader",tag:"header"},{id:"Share__input",style:"display: none;",tag:"input"},{inner:[{class:"ShareConversations SharePanel SharePanel--active filter_peer_wrap","data-name":"ShareConversations","aria-hidden":"false",role:"group",id:"ShareConversations"},{class:"ShareGroups SharePanel","data-name":"ShareGroups","aria-hidden":"true",role:"group",id:"ShareGroups"}],class:"SharePanelRoot ShareLists",tag:"section"},{inner:[u({active:!0,options:e,buttons:[e.can_to_own?{target:"own",label:(0,s.getLang)("mobile_share_target_own"),onclick:m||"cur.share.go('".concat(_,"')"),icon:(0,a.default)("wall","repost_outline_28")}:null,e.can_to_club?{target:"group",label:(0,s.getLang)("mobile_share_target_group"),icon:(0,a.default)("wall","users_outline_28")}:null,t?{target:"bookmark","aria-pressed":n,label:n?(0,s.getLang)("mobile_share_target_bookmark_active"):(0,s.getLang)("mobile_share_target_bookmark"),icon:(0,a.default)("wall",e.is_bookmarked?"favorite_28":"favorite_outline_28")}:null]}),{class:"SharePanel MessagePanel","aria-hidden":"true","data-name":"MessagePanel",inner:[(0,r.default)({tabindex:-1,autocomplete:!1,class:"MessagePanel__input",on_click:["cur.share.expandMessage"],placeholder:(0,s.getLang)("mobile_share_message_placeholder"),spellcheck:!1,readonly:!0,disabled:!0}),(0,o.default)({stretch:!0,size:"large",inner:(0,s.getLang)("mobile_share_message_single"),on_click:"cur.share.sendMessage(event)",use_native_onclick:!0})]},{class:"SharePanel ExpandedMessagePanel","aria-hidden":"true","data-name":"ExpandedMessagePanel",inner:[{class:"ExpandedMessagePanel__textareaWrap",inner:[(0,i.default)({placeholder:(0,s.getLang)("mobile_share_message_placeholder"),rows:1}),{class:"ExpandedMessagePanelSend",inner:(0,a.default)("common","send_active_24")}]}]},{class:"SharePanel ProcessingPanel","aria-hidden":"true","data-name":"ProcessingPanel",inner:[{class:"ProcessingPanel__icon ProcessingPanel__icon--loading",inner:(0,a.default)("wall","loading_40")},{class:"ProcessingPanel__label",inner:(0,s.getLang)("mobile_share_state_progress")}]}],class:"SharePanelRoot ShareBottom",tag:"footer"}],class:"Share","aria-role":"dialog","aria-label":(0,s.getLang)("mobile_like_publish_head_title"),hidden:"false",tabindex:"-1",tag:"div"}};t.default=d},JaXn:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("/nhM"))&&a.__esModule?a:{default:a}).default;t.default=i},"Jd+f":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("UxAg"),i=o(n("29dZ")),r=o(n("K3lA"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t,n,o,s,l){var c=l.$btn;function u(){var i=(0,a.$)(".MarketItem__cartQuantity"),s=Number(i.dataset.value)+1;i.dataset.value=s,i.innerHTML=s,i.classList.remove("MarketItem__cartQuantity--empty"),(0,a.$)(".MarketItem__addButtonWrapper").innerHTML=Wd.html((0,r.default)({item_id:t,group_id:n,quantity:e,hash:o}))}s?i.default.setLoading(c,!0):u(),ajax.post("/market.php",{_ajax:!0,act:"cart_change_quantity",item_id:t,group_id:n,quantity:e,hash:o},{onDone:function(){s&&(i.default.setLoading(c,!1),u())},onFail:function(){return i.default.setLoading(c,!1)}})};t.default=s},JuPy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMvk=function(){return!!window.isMVK}},K0hv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getLayer=g,t.default=void 0;var a=c(n("TYsd")),i=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("a0wW")),r=c(n("Po+v")),o=c(n("z9sQ")),s=n("OcsD");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var f=browser.meizu||browser.mi||browser.uc_mini||0!==browser.ios&&browser.ios<10||browser.chrome&&browser.version.split(".")[0]<53,h=!f&&!!i.default.getFlag(i.FLAG_MP4);onDOMReady(function(){A.onUpdate(),page.onChange(function(){A.onUpdate()})});var p={gifs:[],currentAutoplayElement:null,ignore:[]},A={isBadBrowser:f,isMp4Supports:function(){return h},openPopup:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.autoplayTest(),e&&cancelEvent(e),_(n)&&n.needConfirm){var a=v(n,t.getAttribute("data-media"));return domInsertBefore(a,t),void r.default.open(a,!0)}var i=d({},nav.getQuery(),{z:"doc"+n.raw+"/"+(n.hash||"")});nav.path,(0,s.obj2qs)(i),nav.hash;photo.zopen(null,null,n.raw,"",{no_push:!1,isDoc:!0,hasVideo:n.hasVideo,hash:n.hash})},init:function(e){zlayer.create(g()),zlayer.open()},close:function(){var e=d({},nav.getQuery());delete e.z;var t=nav.path+(0,s.obj2qs)(e)+nav.hash;nav.go(t,null,{push_only:!1,nav_incr:!0})},confirm:function(e,t){cur.loadedGifs[t]=!0,r.default.close(e),(0,s.geBySel1)('[data-media="'.concat(t,'"]')).click()},autoplayTest:function(){i.default.detectAutoplay().then(function(e){h=i.default.getFeatures().mp4&&e&&i.default.getFlag(i.FLAG_MP4)&&!f})},activateGIF:function(){if("/mail"!==nav.path){var e=scrollTop(),t=e+window.innerHeight,n=e+window.innerHeight/2,a={};Array.from(p.gifs||[]).forEach(function(i){var r=getXY(i)[1],o=r>=e&&r<=t,s=Math.abs(n-r);o&&(a[s]=i)});var i=a[Math.min.apply(Math,u(Object.keys(a)))];i?i.classList.contains("current_gif")||-1===p.ignore.indexOf(i)&&(post.toggleGif(i,!1,!1,!0),p.currentAutoplayElement=i):post.hidePlayingGifs(!1,!0)}},onUpdate:function(){i.default.getFlag(i.FLAG_GIF_AUTOPLAY)&&(p.gifs=u(Array.from($$(".doc_preview_rows_1 .doc_preview_gif")||[])),onBodyScroll((0,s.throttle)(A.activateGIF,200)))},getState:function(){return p},setState:function(e,t){p[e]=t}};function m(e,t,n){return{class:["Popup__button",o.default.class("Btn",{theme:t||"regular"})],tag:"button",inner:e,onclick:n}}function _(e){return cur.loadedGifs||(cur.loadedGifs={}),!cur.loadedGifs[e.raw]}function v(e){return(0,s.ceFromString)(a.default.html((0,r.default)({scrollable:!0,header:{title:getLang("mobile_wall_gif_size_warning_popup_title")},content:[getLang("mobile_wall_gif_size_warning").replace("{size}",e.size),{class:"Popup__buttons",inner:[m(getLang("mobile_continue"),"regular",'Gif.confirm(this, "'.concat(e.raw,'")')),m(getLang("mobile_cancel"),"secondary","Popup.close(this)")]}]})))}function g(){var e='<img class="zpv_img" alt="">';return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(e='<video class="zpv_img" alt="" autoplay preload="metadata" crossorigin="anonymous" poster="/images/blank.gif" webkit-playsinline playsinline controls loop muted>'),'\n    <div id="z_photoview">\n      <div class="zpv_siblings">\n        <div id="zpv_left" class="zpv_thumb_item">\n          <img class="zpv_img" alt="">\n        </div>\n        <div id="zpv_right" class="zpv_thumb_item">\n          <img class="zpv_img" alt="">\n        </div>\n      </div>\n      <div class="zpv_body">\n        <div id="zpv_center" class="zpv_thumb_item">\n          '.concat(e,'\n        </div>\n      </div>\n      <div class="zpv_close_msg_wrap">\n        <div class="zpv_close_msg"> ').concat(lang.mobile_zphoto_move_to_close,'</div>\n      </div>\n      <div class="zpv_controls">\n        <div class="mhead zpv_header">\n          <a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a>\n          <div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div>\n        </div>\n      </div>\n      <div class="zpv_tags"></div>\n      <div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div>\n    </div>\'\n  ')}window.Gif=A;var y=A;t.default=y},K3lA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("29dZ"))&&a.__esModule?a:{default:a};var r=function(e){var t=window.lang;return e.quantity?{tag:"table",attrs:{cellpadding:0,cellspacing:0,border:0},class:"MarketItem__cartActions",inner:{tag:"tr",inner:[{tag:"td",class:"MarketItem__quantityButtonWrapper",inner:(0,i.default)({stretch:!0,size:"large",class:"MarketItem__quantityButton",inner:[{inner:langNumeric(e.quantity,t.mobile_market_cart_quantity_button_title).replace("{quantity}",e.quantity)},{class:"MarketItem__quantityButtonHint",inner:t.mobile_market_cart_quantity_button_hint}],url:"/cart".concat(e.group_id)})},{tag:"td",inner:(0,i.default)({stretch:!0,size:"large",theme:"secondary",class:"MarketItem__incrementButton",inner:t.mobile_market_cart_quantity_button_inc,on_click:["MarketItem.addToCart",e.quantity+1,e.item_id,e.group_id,e.hash,!1]})}]}}:(0,i.default)({stretch:!0,size:"large",inner:t.mobile_market_cart_quantity_button_add,on_click:["MarketItem.addToCart",e.quantity+1,e.item_id,e.group_id,e.hash,!0]})};t.default=r},KMpi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Pfrj"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Avatar=i.default},KWgi:function(e,t,n){"use strict";n("9CLW"),n("7lzo"),n("MSf/"),n("yVRv"),n("Cxv5"),n("BX0V")},KiYr:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("LmmP"))&&a.__esModule?a:{default:a}).default;t.default=i},KuI6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("29dZ"))&&a.__esModule?a:{default:a};var r=function(e){return{class:"CartMessage",inner:{class:"CartMessage__inner",inner:[{tag:"h2",class:"CartMessage__title",inner:e.title},{class:"CartMessage__text",inner:e.text},(0,i.default)({theme:"secondary",url:e.url,inner:e.button_text})]}}};t.default=r},Kz56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONLINE_SEEN_LONG_AGO=t.ONLINE_SEEN_LAST_MONTH=t.ONLINE_SEEN_LAST_WEEK=t.ONLINE_SEEN_RECENTLY=void 0;t.ONLINE_SEEN_RECENTLY="recently";t.ONLINE_SEEN_LAST_WEEK="last_week";t.ONLINE_SEEN_LAST_MONTH="last_month";t.ONLINE_SEEN_LONG_AGO="long_ago"},L1lF:function(e,t,n){"use strict";var a=n("5WJ6");window.initSharePage=a.initSharePage},L9Nh:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QueueManager=void 0;var _Utils=__webpack_require__("OcsD");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var QUEUE_CREATION_TIME_INDEX=0,QUEUE_TIMESTAMP_INDEX=1,QUEUE_KEY_INDEX=2,QUEUE_CALLBACK_INDEX=3,INCORRECT_KEY_OR_TIMESTAMP_ERROR_CODE=2,KEY_IS_BLOCKED_BY_ANOTHER_REQUEST_ERROR_CODE=4,TRANSPORT_FRAME_ID="queue_transport_frame",QueueManager=function(){function QueueManager(){_classCallCheck(this,QueueManager)}return _createClass(QueueManager,null,[{key:"addQueue",value:function(e,t){QueueManager.queues[e.key]=[vkNow(),e.ts,e.key,t]}},{key:"start",value:function(){QueueManager.started||(QueueManager.createFrame(QueueManager.check),QueueManager.started=!0)}},{key:"check",value:function check(){var _this=this,params={act:"a_check",ts:curNotifier.timestamp,key:curNotifier.key,id:curNotifier.uid,wait:25},addQueues=[],now=vkNow();Object.keys(QueueManager.queues).forEach(function(e){var t=QueueManager.queues[e],n=t[QUEUE_CREATION_TIME_INDEX],a=t[QUEUE_TIMESTAMP_INDEX];now-n>3e4&&!e.match(/nccts/)?delete QueueManager.queues[t]:(params.ts+="_"+a,params.key+=e,addQueues.push(e))}),curNotifier.lpMakeRequest(curNotifier.frame_url,params,function(text){try{var response=eval("("+text+")"),main_response=response,addResponse,addQueue,busy=0;if(isArray(response))for(main_response=response.shift(),curNotifier.timestamp=main_response.ts;(addResponse=response.shift())&&(addQueue=addQueues.shift(),addQueue);)addResponse.failed!==INCORRECT_KEY_OR_TIMESTAMP_ERROR_CODE||addResponse.err!==KEY_IS_BLOCKED_BY_ANOTHER_REQUEST_ERROR_CODE?addResponse.failed?delete QueueManager.queues[addQueue]:QueueManager.callQueue(addQueue,addResponse):busy|=1;else if(response.failed)for(;addQueue=addQueues.shift();)delete QueueManager.queues[addQueue];busy||(clearTimeout(curNotifier.lpCheckTO),curNotifier.lpCheckTO=setTimeout(QueueManager.check.bind(_this),curNotifier.request_timeout||1e3),curNotifier.error_timeout=Math.max(1,(curNotifier.error_timeout||1)/1.5))}catch(e){curNotifier.error_timeout=curNotifier.error_timeout||1,clearTimeout(curNotifier.lp_error_to),curNotifier.lp_error_to=setTimeout(QueueManager.check.bind(_this),1e3*curNotifier.error_timeout),curNotifier.error_timeout<64&&(curNotifier.error_timeout*=2)}},function(){return!0})}},{key:"init",value:function(e){window.curNotifier=_extends({},e),QueueManager.initialized=!0,delete curNotifier.makeRequest}},{key:"createFrame",value:function(e){re(TRANSPORT_FRAME_ID),(0,_Utils.createIframe)({id:TRANSPORT_FRAME_ID,name:TRANSPORT_FRAME_ID,src:window.curNotifier.frame_path});var t=setInterval(function(){curNotifier.lpMakeRequest&&(clearInterval(t),e())},500);setTimeout(function(){return clearInterval(t)},1e4)}},{key:"callQueue",value:function(e,t){var n=QueueManager.queues[e];if(Array.isArray(n)&&n.length){n[QUEUE_TIMESTAMP_INDEX]=t.ts;var a=n[QUEUE_CALLBACK_INDEX];isFunction(a)&&a(n[QUEUE_KEY_INDEX],t)}}}]),QueueManager}();exports.QueueManager=QueueManager,QueueManager.queues={},QueueManager.started=!1,QueueManager.initialized=!1,window.QueueManager=QueueManager},LBNP:function(e,t,n){"use strict";var a=n("OcsD"),i="_si_container_loading",r="StoriesArchive--loaded",o={};function s(e){var t=$$(".StoryThumb[data-time]",e);if(t)return t.forEach(function(e){var t=1e3*e.getAttribute("data-time"),n=new Date(t);if(o[n.toDateString()]&&o[n.toDateString()]!==t){var a=geByClass1("StoryThumb-date",e);re(a)}else o[n.toDateString()]=t}),e}window.initStoriesArchive=function(){var e=0,t=!1,n=$(".StoriesArchive"),o=n.classList.contains(r);s(n),(0,a.initAutoScroll)(function(){var t=$$(".StoryThumb");return e=t.length,t[t.length-1]},function(){if(t||o)return!1;var a=$(".StoriesArchive-stories");a.classList.add(i),t=!0,ajax.post("/id".concat(vk.id,"?act=stories"),{offset:e,_ajax:!0},{onDone:function(e){var l=ce("div");l.innerHTML=e.html,l=s(l),a.innerHTML+=l.innerHTML,a.classList.remove(i),e.more||(o=!0,n.classList.add(r)),t=!1}})})}},LMQ1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Y6JH"))&&a.__esModule?a:{default:a};var r=function(e){var t="animation-duration: ".concat(e.duration,"s;");return{inner:[(0,i.default)({sprite:"wall",name:"cancel_16"}),{inner:[{inner:[{class:"CancelTimer__line",style:t,tag:"span"}],class:"CancelTimer__hand",tag:"div"},{inner:[{class:"CancelTimer__line",style:t,tag:"span"}],class:"CancelTimer__hand",tag:"div"}],class:"CancelTimer__timer",tag:"div"}],class:"CancelTimer",tag:"div"}};t.default=r},LTt1:function(e,t,n){"use strict";var a=need("page"),i=need("audio"),r=need("onDOMReady"),o=need("audioplayer"),s=need("AudioSpecialForYou");function l(){u(),i.onInit(u),i.onSelect(u),i.onPause(u),a.onChange(u)}function c(){d()?o.playPause():o.playFirst(),u()}function u(){s.setPlaying(i.playing()&&d())}function d(){var e=o.getCurrentElem();return e&&!!e.closest(s.selector)}window.uAudioBlock={},r(l),uAudioBlock._onSpecialPlayAllClick=c},LdG3:function(e,t,n){"use strict";var a=n("UxAg");window.AppPasswords=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showPopup=function(){return Popup.open((0,a.$)(".AppPasswordsPopup"))},this.hidePopup=function(){return Popup.close((0,a.$)(".AppPasswordsPopup"))}}},LmmP:function(e,t,n){"use strict";function a(e){return{inner:[e.text||e.inner],class:[e.class,Bem.class("Alert",{theme:e.theme})].join(" "),tag:"div"}}Object.defineProperty(t,"__esModule",{value:!0}),t.Alert=a,t.default=void 0;var i=a;t.default=i},LpA2:function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionType=function(){var e=navigator.connection;if(!e)return"";var t=e.effectiveType,n=e.downlink;switch(t){case"slow-2g":return"GPRS";case"2g":return"EDGE";case"3g":return"3G";case"4g":return n>8?"wi-fi":"LTE"}return""},t.saveNavigationStatEvent=function(e){var t=e.storyRawId,n=e.source,r=e.action,o=a(t.split("_"),2),s=o[0],l=o[1];"reply"===n&&(n="replies_list");var c={ownerId:s,storyId:l,source:n,action:r};i.push(c)},t.serializeNavigationStats=function(){var e=i.map(function(e){return[e.ownerId,e.storyId,e.source,e.action].join(",")}).join(";");return i=[],e},t.saveViewerStartTime=function(e){var t=e.storyRawId,n=e.source,i=e.time,o=a(t.split("_"),2),s=o[0],l=o[1],c={ownerId:s,storyId:l,source:n,time:i};r.push(c)},t.serializeLoadingStats=function(){var e=r.map(function(e){return[e.ownerId,e.storyId,e.source,e.time].join(",")}).join(";");return r=[],e},t.hasStatToSerialize=void 0;var i=[];var r=[];t.hasStatToSerialize=function(){return r.length||i.length}},M2vk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("AWn4"))&&a.__esModule?a:{default:a};n("9RP+");var r=i.default;t.default=r,window.uCurConvoTyping=i.default},"M6/v":function(e,t,n){"use strict";var a,i=(a=n("HwqD"))&&a.__esModule?a:{default:a},r=n("UxAg");Object.assign(i.default,{setCount:function(e){(0,r.$$)(s.bell).forEach(function(t){var n=t.$(s.counter);t.classList.toggle(o.empty,!e),n.innerText=e})}});var o={empty:"Bell_empty"},s={bell:".Bell",counter:".Bell__counter"}},M9zQ:function(e,t,n){"use strict";var a=n("UxAg"),i=(need("attr"),need("geByClass1"),need("preventEvent")),r=need("Popup");window.SendMoneyForm={},SendMoneyForm._onAmountChange=f,SendMoneyForm._onSubmit=_,SendMoneyForm._onRecommAmountChange=h,SendMoneyForm._onAutoAcceptToggle=v,SendMoneyForm._onNoAmountToggle=g,SendMoneyForm._onChooseCardClick=d,SendMoneyForm._onChooseCardCancelClick=u,SendMoneyForm._onChooseCardContinueClick=l,SendMoneyForm._onCardSelect=c;var o={form:"sendMoneyForm",errorMin:"sendMoneyForm_error_min",errorMax:"sendMoneyForm_error_max",addCardVisible:"sendMoneyForm_addCardVisible",requestedVisible:"sendMoneyForm_requestedVisible",recommErrorMin:"sendMoneyForm_recommErrorMin",recommErrorMax:"sendMoneyForm_recommErrorMax",noAmount:"sendMoneyForm_noAmount",autoAccept:"sendMoneyForm_autoAccept"},s={form:".sendMoneyForm",cardsPopup:".sendMoneyForm__cardsPopup",amountInput:".sendMoneyForm__input_amount",recommInput:".sendMoneyForm__recommAmountInput input",requestAmount:".sendMoneyForm__amountNote_requestAmount"};function l(){var e=(0,a.$)('.Control__native[name="card"]:checked').value,t=(0,a.$)('.Control__native[name="card"]:checked ~ .Control__label').innerText;(0,a.$)('input[name="accept_card"]').value=e,(0,a.$)('input[name="accept_card"]').setAttribute("data-value",e),(0,a.$)(".sendMoneyForm__chooseCard").innerText=t,r.close()}function c(e){var t="-1"===e.value;(0,a.$)(s.form).classList.toggle(o.addCardVisible,t)}function u(){r.close()}function d(){var e=(0,a.$)(s.cardsPopup);r.open(e)}function f(e){e||(e=(0,a.$)('input[name="amount"]')),A(e),m(e,6);var t=e.closest(s.form),n="1"===t.getAttribute("data-is-chat-request"),i=Number(e.value),r=Number(t.getAttribute("data-max-amount"));if(t.classList.remove(o.errorMin),t.classList.remove(o.errorMax),n||i>r&&t.classList.add(o.errorMax),n){var l=p(),c=Number(t.getAttribute("data-min-amount"))*(l?2:1),u=function(e,t){var n=(0,a.$)('input[name="amount"]').closest(s.form),i=Number(n.getAttribute("data-min-amount")),r=Number(n.getAttribute("data-max-amount")),o=Number(n.getAttribute("data-chat-members-count")),l=Math.ceil(e/(o-(t?0:1)));return Math.min(r,Math.max(i,l))}(i,l);if((0,a.$)(s.recommInput).value=u,t.classList.remove(o.recommErrorMax),t.classList.remove(o.recommErrorMin),!c||i>=c){var d=l?i-u:i;(0,a.$)(s.requestAmount).innerText=d,t.classList.add(o.requestedVisible)}else t.classList.remove(o.requestedVisible)}}function h(e){A(e),m(e,6);var t=e.closest(s.form),n=Number(e.value),a=t.getAttribute("data-max-amount");t.classList.remove(o.recommErrorMax),t.classList.remove(o.recommErrorMin),n>a&&t.classList.add(o.recommErrorMax)}function p(){var e=(0,a.$)('input[name="participiate"]');return e&&e.checked}function A(e){e.value=parseInt(e.value,10)||""}function m(e,t){e.value=e.value.slice(0,t)}function _(e,t){var n=t.$(s.amountInput).value,r=Number(n),l=Number(t.getAttribute("data-min-amount")),c=Number(t.getAttribute("data-max-amount")),u="1"===t.getAttribute("data-is-chat-request"),d=!1;(t.classList.remove(o.errorMin),t.classList.remove(o.errorMax),u&&(t.classList.remove(o.recommErrorMax),t.classList.remove(o.recommErrorMin)),(0,a.$)(s.form).classList.contains(o.noAmount))||(r<l*(!!u&&p()?2:1)||!n||n!==r.toString()?(t.classList.add(o.errorMin),d=!0):r>c&&!u&&(t.classList.add(o.errorMax),d=!0));if(u){var f=t.$(s.recommInput).value,h=Number(f);h<l||!f||f!==h.toString()?(t.classList.add(o.recommErrorMin),d=!0):h>c&&(t.classList.add(o.recommErrorMax),d=!0)}if(d)i(e),stopEvent(e);else{i(e),stopEvent(e),t.insertAdjacentHTML("beforeend",'<input id="submit" type="submit" style="display: none" />');var A=(0,a.$)("#submit");ajax.click(A)}}function v(e){(0,a.$)(s.form).classList.toggle(o.autoAccept,e.checked),e.checked?(0,a.$)('input[name="accept_card"]').value=(0,a.$)('input[name="accept_card"]').getAttribute("data-value"):(0,a.$)('input[name="accept_card"]').value=""}function g(e){(0,a.$)(s.form).classList.toggle(o.noAmount,e.checked)}},MESj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("TuGt")),i=n("fKzu"),r=n("OcsD"),o=s(n("wMVj"));function s(e){return e&&e.__esModule?e:{default:e}}var l,c=["/restore","/login","/join*","/","/settings","/album*","/terms","/privacy","/payments*","/attachments*","/pages*","/blog*","/about","/privacy","/jobs","/dev","/legal","/data_protection","/safety","/activation*","/licence","/agelimits"];function u(){l&&l.classList.remove(a.default.class.open)}function d(){l&&l.classList.add(a.default.class.open)}onDOMReady(function(){!function e(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]||(l=geByClass1(a.default.class.btn),page.onChange(e.bind(this))),t=t?t.split("?")[0]:o.default.path,!/^\/photo/.test(t)&&u(),(0,i.isForbiddenPage)(t,c)||o.default.getQuery("z")?u():d()}(null,!1)});var f={_onCloseClick:function(e){a.default._onCloseClick(e)},show:d,hide:u,processOpenInNativeApp:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};i=i||{},o.default.onMenuItemClick(n),o.default.openInNativeApp(a,t,e),(0,r.statlogsValueEvent)("utm_open_in_native_app_button","clicked",i.utm_source,i.utm_param,i.utm_medium,i.utm_time)}};t.default=f},MHaq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("OcsD"),i=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("Po+v")),r=o(n("p5n7"));o(n("z9sQ"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){var n=ge("select-copyright"),a=$('input[name="copyright"]'),i=$(".create_post__source-option"),r=$(".Btn__text",i);e?(n.style.display="inline-block",n.onclick=function(n){return posting.openCopyright(n,!0,t,encodeURIComponent(e))},i.onclick=function(n){return posting.openCopyright(n,!0,t,encodeURIComponent(e))},r.innerHTML=getLang("mobile_wall_post_copyright_edit_button")):(i.onclick=function(n){return posting.openCopyright(n,!1,t,encodeURIComponent(e))},setStyle(i,"display","table"),r.innerHTML=getLang("mobile_wall_post_copyright_add_button"),hide(n)),val(a,e),post.checkCopyright()}var c={open:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=new RegExp("{link}(.*){/link}"),s=o.exec(getLang("mobile_wall_post_copyright_mb_text"))[1],l="/@adminsclub-citation?from=".concat(encodeURIComponent(nav.cur)),c=getLang("mobile_wall_post_copyright_mb_text").replace(o,"<a onclick=\"Popup.close(this); nav.go('".concat(l,'\', null)" href="').concat(l,'">').concat(s,"</a>")),u=(0,i.default)({class:"AddCopyrightPopup",header:{title:e?getLang("mobile_wall_post_copyright_mb_title_text_edit"):getLang("mobile_wall_post_copyright_mb_title_text")},content:{inner:[!e&&{tag:"span",inner:Wd.wrap(c)},(0,r.default)({class:"AddCopyrightPopup__input",placeholder:getLang("mobile_post_copyright_input_placeholder"),value:decodeURIComponent(n),spellcheck:!1,on_key_down:["posting.saveSource",t]}),{class:"AddCopyrightPopup__error",style:"display: none;"},{class:"Popup__buttons",inner:[Btn({class:"Popup__button",inner:e?getLang("mobile_wall_post_copyright_edit_button"):getLang("mobile_wall_post_copyright_add_button"),theme:"regular",use_native_onclick:!0,on_click:'posting.saveSource("'.concat(t,'", this)')}),e?Btn({class:"Popup__button",inner:getLang("mobile_delete"),theme:"secondary",use_native_onclick:!0,on_click:'posting.deleteSource(event, this, "'.concat(t,'")')}):{}]}]}});i.default.open(Wd.elem(u),!0);var d=$(".AddCopyrightPopup__input input");d&&(0,a.elfocus)(d)},submit:function(e,t,n){var a=$(".Btn",n.parentNode);a.disabled=!0,ajax.post("/wall?act=check_copyright_link",{_ajax:1,link:e},{onDone:function(r){var o=$(".AddCopyrightPopup__error");r.status?(n.classList.remove("TextInput_error"),hide(o),l(e,t),i.default.close(n)):(n.classList.add("TextInput_error"),show(o),val(o,r.error)),post.saveDraft(null,t),a.disabled=!1}})},remove:function(e,t){t&&i.default.close(t),l("",e),e&&post.saveDraft(null,e)}};t.default=c},"MSf/":function(e,t,n){"use strict";var a,i=(a=n("9CLW"))&&a.__esModule?a:{default:a};i.default.onPostMessage(function(e,t){"resizeFrame"===e&&setStyle(geByClass1("pageMoneyTransfer__iframe"),"height",t.height+40)})},MUoB:function(e,t,n){"use strict";var a,i=(a=n("YhgQ"))&&a.__esModule?a:{default:a};window.uRegisterFloatBtn=i.default},Mc5h:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("2IoG"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Brick=i.default},Mf5j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=c,t.init=function(){onDOMReady(function(){c()})};var a=l(n("TYsd")),i=l(n("Po+v")),r=l(n("UvyM")),o=n("OcsD"),s=n("UxAg");function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=window.lang,t=(0,s.$)(".pcont .service_msg_box");if(t){var n=(0,s.$)(".service_msg",t).innerHTML;(0,o.remove)(t);var l=(0,i.default)({class:"CopyrightPopup",content:[{inner:a.default.wrap(n)},{class:"Popup__buttons",inner:[(0,r.default)({class:"Popup__button",inner:e.mobile_zphoto_close,theme:"regular",on_click:"Popup.close(this)",use_native_onclick:!0})]}]});i.default.open(a.default.elem(l),!0)}}},MzAf:function(e,t,n){"use strict";function a(e){return function(t){t.$control.closest(r.sms).classList.toggle(o[e])}}function i(e,t){var n=t.$select,a=t.value;n.closest(r.sms).classList.toggle(o.pmUsersVisible,e.includes(a)||e.includes(Number(a)))}window.SettingsSms={},SettingsSms._onEnabledChange=a("enabled"),SettingsSms._onTimeLimitedChange=a("timeLimited"),SettingsSms._onFrequencyChange=i;var r={sms:".settingsSms"},o={enabled:"settingsSms_enabled",timeLimited:"settingsSms_timeLimited",pmUsersVisible:"settingsSms_pmUsersVisible"}},N4ZS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapAway=function(e){return"https://vk.com/web/away.php?to="+e},t.wrapAwayIfExternal=function(e,t){var n=decodeURIComponent(e);if(/^\/[^/]/.test(n)||/^(https?:\/\/)?([a-z0-9_\-.]+\.)?vk.com(\/.*)?/.test(n))return e;return"/away.php?to="+encodeURIComponent(n)+(t?"&utf=1":"")}},NBPr:function(e,t,n){"use strict";window.closePostSuggest=function(e,t){return re(geByClass1("post_suggest")),ajax.post("wall.php",{_ajax:1,act:"close_suggest_post",suggest_id:e.getAttribute("data-suggest-id")}),cancelEvent(t)}},NJ1W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Row=r,t.Col=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[i.default.class("SkeletonCol",{auto:e.auto,grow:e.grow,"flex-column":e.flexColumn}),e.class].filter(function(e){return e}).join(" ");return{inner:[e.inner],class:t,tag:"div"}},t.Offset=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[i.default.class("SkeletonOffset",{small:e.small}),e.class].filter(function(e){return e});return{inner:[e.inner],class:t.join(" "),tag:"div"}},t.default=void 0;var a,i=(a=n("z9sQ"))&&a.__esModule?a:{default:a};function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[i.default.class("SkeletonRow",{"justify-content":e.justify,"align-items":e.align}),e.class].filter(function(e){return e});return{inner:[e.inner],class:t.join(" "),tag:"div"}}var o=r;t.default=o},NJSj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Convo__online=f,t.Convo__rightStatus=h,t.default=void 0;var a=c(n("bZ/P")),i=c(n("Mc5h")),r=c(n("AXyT")),o=c(n("9y81")),s=c(n("KMpi")),l=c(n("rKUZ"));function c(e){return e&&e.__esModule?e:{default:e}}function u(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n    <div class="','" ',">\n      ","\n      ",'\n      <a class="convo__body" href="','">\n        <div class="convo__row convo__row_title">\n          <div class="convo__title">','</div>\n          <div class="convo__row_right">\n            ','\n            <div class="convo__date">','</div>\n          </div>\n        </div>\n        <div class="convo__row convo__row_text">\n          <div class="convo__typing">','</div>\n          <div class="convo__text">','</div>\n          <div class="convo__row_right convo__unreadBox" ',">\n            ",'\n            <div class="convo__unreadOut"></div>\n          </div>\n          <div class="convo__status">',"</div>\n        </div>\n      </a>\n    </div>\n  "]);return u=function(){return e},e}var d=function(e){var t,n,i=e.more,c="",d="",p=0,A=!1,m="";i&&(c=i.text,d=i.date,p=i.unreadCount,A=i.muted,m=i.typing?(0,l.default)(i.typing):"",t=i.pending,n=i.failed,(t||n)&&(d=""));var _=a.default.class("clickable","convo",{id:e.id,short:!i,last:e.isLast,typing:!!m,important:e.important,unread:e.isLast&&p>0,unreadOut:e.isLast&&p<0}),v=(0,s.default)({mix:"convo__avatar",photos:e.photos,url:e.profileUrl}),g=e.isLast?(0,r.default)({mix:"convo__unread",value:p,gray:A}):"",y=h({pending:t,failed:n}),b=f(e.online),w=(0,o.default)({mix:"convo__star",icon:"star",blue:!0}),E=e.url,k=a.default.onClick("Convo._onClick","event",E);return a.default.html(u(),_,k,b,v,e.url,e.title,w,d,m,c,y?"hidden":"",g,y)};function f(e){return"mobile"===e?(0,o.default)({mix:a.default.class("convo__online",{mobile:!0}),icon:"phone"}):"desktop"===e?(0,i.default)({mix:a.default.class("convo__online",{desktop:!0})}):(0,i.default)({mix:"convo__online"})}function h(e){var t=window.lang;return e.pending?'<div class="convo__pending"></div>':e.failed?'<div class="convo__failed">'.concat(t.mobile_mail_send_error,"</div>"):""}t.default=d},NSb7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypingRenderNames=f,t.TypingIsEmpty=d,t.default=void 0;var a=o(n("bZ/P")),i=o(n("z9sQ")),r=o(n("BoyB"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=c(['\n    <div class="typing__dotsWrap">\n      <div class="typing__dots">...</div>\n    </div>\n  ']);return s=function(){return e},e}function l(){var e=c(['\n    <div class="','">\n      ','\n      <div class="typing__names">',"</div>\n      ","\n    </div>\n  "]);return l=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=function(e){var t,n,o=e.dimmed,c=e.animation,u=!!e.compact,h=e.typingCount,p=a.default.class("typing",{dimmed:o,id:e.id,empty:d(h),animation:c}),A=f(e);"audio"===c?(t=(0,r.default)({class:i.default.class("typing__loading",{audio:!0,compact:u})}),n=""):"dots"===c?(t=(0,r.default)({class:i.default.class("typing__loading",{audio:!1,compact:u})}),n=""):"simple-dots"===c&&(t="",n=a.default.html(s()));return a.default.html(l(),p,t,A,n)};function d(e){return!e}function f(e){return"audio"===e.text?function(e,t){var n=window.lang;if(!Array.isArray(e))return e?n.mobile_mail_recaudio_1_short:"";var a=e,i=t,r="";if(1===i&&a.length>=1){var o=a[0];r=(r=n.mobile_mail_recaudio_1).replace("{name}",o)}else if(2===i&&a.length>=2){var s=a[0],l=a[1];r=(r=(r=n.mobile_mail_recaudio_2).replace("{name1}",s)).replace("{name2}",l)}else if(i>1&&a.length>=1){var c=a[0];r=(r=(r=n.mobile_mail_recaudio_many).replace("{name}",c)).replace("{count}",i-1)}else i>=1&&!a.length&&(r=langNumeric(i,n.mobile_mail_recaudio_N_unknown));return r}(e.typing,e.typingCount):"mixed"===e.text?function(e,t){var n=window.lang;if(!Array.isArray(e))return"";var a=e,i=t,r="";if(1===i&&a.length>=1)r="";else if(2===i&&a.length>=2){var o=a[0],s=a[1];r=(r=(r=n.mobile_mail_mixtyping_2).replace("{name1}",o)).replace("{name2}",s)}else if(i>1&&a.length>=1){var l=a[0];r=(r=(r=n.mobile_mail_mixtyping_many).replace("{name}",l)).replace("{count}",i-1)}else i>=1&&!a.length&&(r=langNumeric(i,n.mobile_mail_mixtyping_N_unknown));return r}(e.typing,e.typingCount):function(e,t){var n=window.lang;if(!Array.isArray(e))return e?n.mobile_mail_typing_1_short:"";var a=e,i=t,r="";if(1===i&&a.length>=1){var o=a[0];r=(r=n.mobile_mail_typing_1).replace("{name}",o)}else if(2===i&&a.length>=2){var s=a[0],l=a[1];r=(r=(r=n.mobile_mail_typing_2).replace("{name1}",s)).replace("{name2}",l)}else if(i>1&&a.length>=1){var c=a[0];r=(r=(r=n.mobile_mail_typing_many).replace("{name}",c)).replace("{count}",i-1)}else i>=1&&!a.length&&(r=langNumeric(i,n.mobile_mail_typing_N_unknown));return r}(e.typing,e.typingCount)}t.default=u},Ny8a:function(e,t,n){"use strict";var a,i=(a=n("wZQE"))&&a.__esModule?a:{default:a};window.MoneyLink={copy:function(e){var t=e.$btn,n=t.nextElementSibling,a=geByClass1("TextInput__native",gpeByClass("Pad__content",t));copyToClipboard(a)&&(MoneyLink.lastCopyLabel&&hide(MoneyLink.lastCopyLabel),MoneyLink.lastCopyLabel=n,show(n))},genQRCode:function(e,t){if(!MoneyLink.qrcode){var n,a;t?(n=geByClass1("snippet__icon",geByClass1(t)),a=80):(n=ge("money_link_qr"),a=200);val(n,i.default.createQR(e,a,"qr-code",{isShowLogo:!0,isShowBackground:!1}))}}}},O5lf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("omrv"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Spinner=i.default},OFOJ:function(e,t,n){"use strict";var a=n("UxAg"),i=l(n("wTbK")),r=l(n("r/ag")),o=l(n("4uzI")),s=l(n("JaXn"));function l(e){return e&&e.__esModule?e:{default:e}}o.default._faveCache={},o.default._onClose=function(){o.default._itemsPopup&&(r.default.close(o.default._itemsPopup),delete o.default._itemsPopup)},o.default._goToItem=function(e){-1===cur.destroy.indexOf(o.default._onClose)&&cur.destroy.push(o.default._onClose),nav.go(e.url)},o.default._toggleFave=function(e,t,n,i,r,l,c,u){e.stopPropagation();var d=t.dataset.isFave;ajax.post("/bookmarks.php",{_ajax:1,item_type:i,act:d?"bookmark_remove":"bookmark_add",hash:u,item_oid:r,item_id:l,link_url:c},{onDone:function(e){e&&(o.default._faveCache[l]=!d,(0,a.$)(".PhotoItemsList").$$(".PhotoMarketItem").forEach(function(e){e.dataset.itemId===l.toString()&&(e.$(".PhotoMarketItem__fave").outerHTML=Wd.html((0,s.default)({type:n,typeInt:i,isFave:!d,ownerId:r,itemId:l,href:c,faveHash:u})))}))}})},o.default._openItemsPopup=function(e){var t=(0,i.default)({class:"Photo__marketItemsModal",body:(0,o.default)({itemsJSON:e,onClose:["ItemsList._onClose"]})});o.default._itemsPopup=r.default.open(Wd.elem(t),!0)}},OGWK:function(e,t,n){"use strict";window.SubscribeBtn={onClick:function(e,t,n,d,f,h){try{var p=h+a,A=h+o,m=h+i,_=h+r,v=hasClass(e,p),g=v?d:n,y=v?getLang(l):getLang(s),b=!v,w=geByClass1(A,e),E=function(e){var t=intval(domData(e,"block-id"));if(!t){var n=domCA(e,u);t=intval(domData(n,"block-id"))||null}return t}(e),k=domData(e,"from")||null;w&&(toggleClass(m,w,b),toggleClass(_,w,!b)),attr(e,"aria-label",escapeAttr(y)),toggleClass(p,e,b),f===c?function(e,t,n,a){(n?Groups.leave:Groups.enter).call(Groups,e,t,a)}(t,g,v):function(e,t,n,a,i){(n?Friends.decline:Friends.accept).call(Friends,e,t,a,i)}(t,g,v,k,E)}catch(e){console.trace(e)}return!1}};var a="_unsubscribe",i="Icon_unsubscribe",r="Icon_subscribe",o="Icon",s="mobile_groups_you_are_in_public",l="mobile_groups_public_subscribe",c="group",u=".feedAssistance"},OGfC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("8gd1")),i=n("PovR"),r=o(n("Xrg9"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?c(e):t}(this,d(t).call(this,e,n)),vk.id&&a.canBeEnabled().then(function(e){e&&(a.updateHeadClass(),a.handlerMessagesLP=a.handlerMessagesLP.bind(c(a)),page.onChange(function(){return a.updateHeadClass()}))}),a}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["default"]),n=t,(i=[{key:"canBeEnabled",value:function(){var e=this;return u(d(t.prototype),"canBeEnabled",this).call(this).then(function(t){return t?e.isNativeAppInstalled().then(function(e){return!e}):Promise.resolve(!1)})}},{key:"isSupported",value:function(){return u(d(t.prototype),"isSupported",this).call(this)&&(browser.chrome||browser.mozilla)}},{key:"updateHeadClass",value:function(){var e=a.default.getPermission();document.head&&(removeClass(document.head,"push_notifier_"+a.default.PUSH_NOTIFIER_PERMISSION_GRANTED),removeClass(document.head,"push_notifier_"+a.default.PUSH_NOTIFIER_PERMISSION_DENIED),removeClass(document.head,"push_notifier_"+a.default.PUSH_NOTIFIER_PERMISSION_DEFAULT),e&&addClass(document.head,"push_notifier_"+e),addClass(document.head,"push_notifier_supported"))}},{key:"handlerMessagesLP",value:function(e,t){this.sw.action("removeMessageNotification",{peerId:t,msgId:e})}},{key:"cleanNotification",value:function(){this.sw.action("cleanNotification")}},{key:"removeLongPollListener",value:function(){this.lp&&this.lp.off(),this.lp=null}},{key:"addLongPollListener",value:function(){window.isNewMail&&window.isNewLongpoll&&!this.lp&&(this.lp=window.im.onMsgReadByMe(this.handlerMessagesLP))}},{key:"isNativeAppInstalled",value:function(){var e=Date.now(),n=r.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS),a=r.default.get(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS);return new Promise(function(i){null!==a&&n&&e-n<t.PUSH_NOTIFIER_LS_TTL_RELATED_APPS?i(!!a):"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then(function(n){var a=Object.values(n).some(function(e){return"com.vkontakte.android"===e.id});r.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS,e),r.default.set(t.PUSH_NOTIFIER_LS_KEY_RELATED_APPS,a),i(a)}).catch(function(){i(!1)}):i(!1)})}},{key:"update",value:function(){var e=this;return u(d(t.prototype),"update",this).call(this).then(function(){e.updateHeadClass(),e.addLongPollListener()})}},{key:"unsubscribe",value:function(e){var n=this;return u(d(t.prototype),"unsubscribe",this).call(this,e).then(function(){return n.removeLongPollListener()})}}])&&l(n.prototype,i),o&&l(n,o),t}();h.PUSH_NOTIFIER_LS_KEY_RELATED_APPS="push_notifier_related_apps",h.PUSH_NOTIFIER_LS_KEY_RELATED_APPS_TS="push_notifier_related_apps_ts",h.PUSH_NOTIFIER_LS_TTL_RELATED_APPS=i.HOUR/2;var p=h;t.default=p},OcB7:function(e,t,n){"use strict";var a=n("UxAg");window.VotingStatsFilters={},VotingStatsFilters._onCountryChange=r;var i={countrySection:".VotingStatsFilters__section_country",citySection:".VotingStatsFilters__section_city"};function r(e){var t=e.$option,n=(0,a.$)(i.countrySection),r=(0,a.$)(i.citySection),o=t.getAttribute("data-city-section-html");r&&(r.outerHTML=""),o&&n.insertAdjacentHTML("afterend",o)}},Of74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("z9sQ"))&&a.__esModule?a:{default:a};var r=function(e){if(!e.grid)return"";for(var t=e.grid,n=t.length,a=[],r=0;r<n;r++)if(t[r]){var o=t[r],s=e.renderType[r],l=o.length;switch(s){case"tile":var c=!0,u=!1,d=void 0;try{for(var f,h=o[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var p=f.value;o[p].inner=o[p].name,o[p].tag="button",o[p].onclick="nav.go('product".concat(e.owner_id,"_").concat(o[p].itemId,"')"),o[p].class=i.default.class("Variants__item",{selected:o[p].selected},"--")}}catch(e){u=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw d}}var A=void 0;0===r&&(A=2===l?[{class:"Variants__row--2",inner:[o[0],o[1]]}]:3===l?[{class:"Variants__row--3",inner:[o[0],o[1],o[2]]}]:4===l?[{class:"Variants__row--2",inner:[o[0],o[1]]},{class:"Variants__row--2",inner:[o[2],o[3]]}]:5===l?[{class:"Variants__row--3",inner:[o[0],o[1],o[2]]},{class:"Variants__row--2",inner:[o[3],o[4]]}]:6===l?[{class:"Variants__row--3",inner:[o[0],o[1],o[2]]},{class:"Variants__row--3",inner:[o[3],o[4],o[5]]}]:o),1===r&&(A=2===l?[{class:"Variants__row--2",inner:[o[0],o[1]]}]:3===l?[{class:"Variants__row--3",inner:[o[0],o[1],o[2]]}]:4===l?[{class:"Variants__row--2",inner:[o[0],o[1]]},{class:"Variants__row--2",inner:[o[2],o[3]]}]:5===l?[{class:"Variants__row--3",inner:[o[0],o[1],o[2]]},{class:"Variants__row--2",inner:[o[3],o[4]]}]:6===l?[{class:"Variants__row--3",inner:[o[0],o[1],o[2]]},{class:"Variants__row--3",inner:[o[3],o[4],o[5]]}]:o),a.push({class:"Variants__tile Variants__tile--".concat(l),inner:[{tag:"label",inner:e.titles[r],class:"Variants__label"},{class:"Variants--tile",inner:A}]});break;case"color":var m=!0,_=!1,v=void 0;try{for(var g,y=o[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value;o[b].tag="button",o[b].onclick="nav.go('product".concat(e.owner_id,"_").concat(o[b].itemId,"')"),o[b].inner={style:"background-color:".concat(o[b].color),class:"Variants__colorRound"},o[b].class=i.default.class("Variants__colorItem",{selected:o[b].selected},"--")}}catch(e){_=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(_)throw v}}a.push({class:"Variants__color Variants__colors--".concat(l),inner:[{tag:"label",inner:e.titles[r],class:"Variants__label"},{class:"Variants--color",inner:o}]});break;default:var w=!0,E=!1,k=void 0;try{for(var S,C=o[Symbol.iterator]();!(w=(S=C.next()).done);w=!0){var M=S.value;o[M].tag="option"}}catch(e){E=!0,k=e}finally{try{w||null==C.return||C.return()}finally{if(E)throw k}}a.push({inner:[{tag:"label",inner:e.titles[r],class:"Variants__label"},{class:"Variants",tag:"select",inner:o,onchange:"nav.go('product".concat(e.properties.owner_id,"' + '_' + this.value)")}]})}}return a};t.default=r},Ogzf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onLongpress=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350,o=arguments.length>2?arguments[2]:void 0,s=function(i){var s=i.target;(0,a.addEvent)(e,r,l,{passive:!0}),(0===i.button||isUndefined(i.button))&&(t=setTimeout(function(n){var i,s;n.touches?(i=n.touches[0].pageX,s=n.touches[0].pageY):(i=n.pageX,s=n.pageY);o({pageX:i,pageY:s}),(0,a.removeEvent)(e,r,l,{passive:!0}),clearTimeout(t)}.bind(s,i),n))},l=function n(){clearTimeout(t),(0,a.removeEvent)(e,r,n,{passive:!0})};return(0,a.addEvent)(e,i,s,{passive:!0}),function(){clearTimeout(t),(0,a.removeEvent)(e,i,s,{passive:!0})}};var a=n("OcsD"),i="touchstart mousedown",r="touchcancel touchend touchmove mouseout mouseup mousemove scroll"},OnSo:function(e,t,n){"use strict";var a,i=(a=n("MESj"))&&a.__esModule?a:{default:a};window.uOpenInNativeAppFloatBtn=i.default},"P+Xc":function(e,t,n){"use strict";var a,i=(a=n("jk6M"))&&a.__esModule?a:{default:a};var r,o,s,l,c,u="groupCover-vk_animationYes",d="groupCover-vk_animationStep",f=function(){return{vk:geByClass1("vk"),basis:geByClass1("basis"),header:geByClass1("basis__header"),headerTitle:geByClass1("mh_header",geByClass1("basis__header")),cover:geByClass1("groupCover"),coverImage:geByClass1("groupCover__image"),coverDimmer:geByClass1("groupCover__dimmer")}},h=!1;function p(){h||(r=f()).cover&&(h=!0,addClass(r.vk,u),o=!i.default.chrome||Number(i.default.version.split(".")[0])>50,s="fixed"===getStyle(r.header,"position"),l=getH(r.header),c=getH(r.cover),onBodyScroll(m),onBodyResize(_),m(),window.cur.destroy=window.cur.destroy.filter(function(e){return e!==A}),window.cur.destroy.push(A))}function A(){(!0||menu.opened())&&(removeClass(r.vk,d),removeClass(r.vk,u)),onBodyScroll("__clear",m),onBodyResize("__clear",_),h=!1}function m(){var e=scrollTop();if(s)if(e<0)setStyle(r.header,"top",-e),addClass(r.vk,d),setStyle(r.coverDimmer,"opacity",0),setStyle(r.coverImage,"top",0);else{var t=document.body,n=Math.min(1,e/(c-l)),a=t&&t.classList.contains("vk_tabbar_top")&&!r.header.classList.contains("basis__header_noBottomMenu")?48:0;setStyle(r.header,"top",a),setStyle(r.headerTitle,"display","block"),n<=.9?(addClass(r.vk,d),o&&setStyle(r.coverImage,"top",.5*e),setStyle(r.coverDimmer,"opacity",n/.9),setStyle(r.headerTitle,"opacity",0)):(setStyle(r.headerTitle,"opacity",1),removeClass(r.vk,d))}else Math.min(1,e/c)<1?(addClass(r.vk,d),setStyle(r.coverDimmer,"opacity",0),o&&setStyle(r.coverImage,"top",.5*e),setStyle(r.headerTitle,"display","none")):removeClass(r.vk,d)}function _(){A(),p()}onDOMReady(function(){(i.default.chrome||i.default.safari&&i.default.ios>=9)&&(p(),page.onChange(p),zlayer.onClose(function(){setTimeout(p,0)}))})},P3wa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("wTbK")),r=(a=n("Y6JH"))&&a.__esModule?a:{default:a};function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window.lang;return(0,i.default)({on_overlay_click:"return false;",class:"Popup_open",body:{class:"WarningModal",inner:[{class:"WarningModal__icon",inner:(0,r.default)("groups/common","hide_outline_56")},{class:"WarningModal__title",inner:e.title},{class:"WarningModal__text",inner:e.text}]},items:[(0,i.ModalMenuBtn)({url:"/groups",class:"WarningModal__button",theme:"regular",size:"large",inner:t.mobile_back,onclick:["WarningModal.leave","this","event"],attrs:{"data-id":e.id,"data-hash":e.hash,"data-gid":e.gid,"data-uid":e.user_id}}),(0,i.ModalMenuBtn)({url:e.proceed_url,class:"WarningModal__button",theme:"secondary",size:"large",inner:t.mobile_groups_warning_notification_proceed,onclick:["WarningModal.close","this","event"],attrs:{"data-id":e.id,"data-hash":e.hash,"data-gid":e.gid,"data-uid":e.user_id}})]})};t.default=s},Pfrj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("bZ/P")),i=r(n("Mc5h"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t,n,r=e.photos||[e.photo],s=(r=Array.isArray(r)?r:[r]).length,u="";if(s>1)for(var d=0;d<s;d++)u+=l(r[d],d);n=40===e.size?"m":36===e.size?"s":e.size?e.size:"xl";return(0,i.default)({mix:a.default.class(e.mix,"Avatar",(t={},o(t,s,!0),o(t,"size",n),t)),url:e.url,attrs:1===s?c(r[0]):"",inner:u})};function l(e,t){return(0,i.default)({mix:a.default.class("Avatar__image",o({},t,!0)),attrs:c(e)})}function c(e){return a.default.attr("style","background-image: url('".concat(e,"')"))}t.default=s},"Po+v":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(e.on_overlay_click_native)t=e.on_overlay_click_native;else{var n=!0;"boolean"==typeof e.hide_on_overlay_click&&(n=e.hide_on_overlay_click),t=["Popup._onOverlayClick","this",e.on_overlay_click||null,n]}return{id:e.id,class:[e.mix?e.mix:e.class,Bem.class("Popup",{open:e.open,scrollable:e.scrollable})],ontouchmove:["Popup._onTouchMove","event"],inner:[e.rel?e.rel:null,{class:"Popup__overlay",onclick:t},{class:"Popup__wrap",inner:{tag:"div",class:"Popup__content","aria-modal":"true",inner:[e.header?{class:"Popup__header",inner:[e.header.title?{class:"Popup__headerTitle",inner:e.header.title}:null,e.header.corner?{class:["Popup__headerCorner",e.header.corner.class],inner:e.header.corner.text,href:e.header.corner.url,onclick:e.header.corner.onclick,attrs:e.header.corner.attrs}:null]}:null,e.scrollable?{class:"Popup__scroll ScrollView",inner:{class:"Popup__scrollContent",inner:e.content}}:e.content,e.footer?{class:"Popup__footer",inner:e.footer}:null]}}]}};t.default=a},PovR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUSH_NOTIFIER_PERMISSION_DENIED=t.PUSH_NOTIFIER_PERMISSION_DEFAULT=t.PUSH_NOTIFIER_PERMISSION_GRANTED=t.DAY=t.HOUR=t.MINUTE=t.SECOND=void 0;t.SECOND=1e3;t.MINUTE=6e4;t.HOUR=36e5;t.DAY=864e5;t.PUSH_NOTIFIER_PERMISSION_GRANTED="granted";t.PUSH_NOTIFIER_PERMISSION_DEFAULT="default";t.PUSH_NOTIFIER_PERMISSION_DENIED="denied"},PuTx:function(e,t,n){"use strict";var a=n("OcsD"),i=o(n("wMVj")),r=o(n("kr3z"));function o(e){return e&&e.__esModule?e:{default:e}}window.uCloseProfileSwitcher={},uCloseProfileSwitcher._onConfirmClick=l;var s=null;function l(e,t){var n=t.checked;i.default.clear();var o={is_closed:n?"1":"0",_ajax:1};r.default.post(e,o,{onDone:function(){i.default.reload();var e=window.cur;s=(0,a.scrollTop)(),e.destroy.push(c)}})}function c(){(0,a.scrollTop)(s),requestAnimationFrame(function(){(0,a.scrollTop)(s),requestAnimationFrame(function(){(0,a.scrollTop)(s)})})}},Q47q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=o,t.default=void 0;var a,i=n("/xuI"),r=(a=n("z9sQ"))&&a.__esModule?a:{default:a};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getRandomId)("skeleton-search"),n=(0,i.stylesObjectToString)({})+(e.style||""),a=[r.default.class("SkeletonSearch",{small:e.small,header:e.header}),e.class].filter(function(e){return e}).join(" ");return(0,i.applyAnimation)(t),{id:t,class:a,style:n,tag:"div"}}var s=o;t.default=s},Q8gl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Au5b"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Control=i.default},QBkA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("ZoJ6"))&&a.__esModule?a:{default:a};n("yguo");var r=i.default;t.default=r,window.MailFilter=i.default},QD50:function(e,t,n){"use strict";function a(e,t){function n(e){var t=["Webkit","Moz","O","ms"],n=document.createElement("div");if(void 0!==n.style[e])return!0;for(var a in e=e.charAt(0).toUpperCase()+e.slice(1),t)if(void 0!==n.style[t[a]+e])return!0;return!1}function a(e,t){new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=" "+t)}function r(e,t){e.className=e.className.replace(new RegExp("(\\s+|^)"+t+"(\\s+|$)","g")," ").replace(/^\s+|\s+$/g,"")}function o(e,t){0>e?e=0:e>v-1&&(e=v-1);for(var n=k.dots.length-1;n>=0;n--)r(k.dots[n],P.activeDot);return a(k.dots[e],P.activeDot),C=e,s(-e*k.width,void 0===t?M.speed:t),h(),M.onSlideChange&&M.onSlideChange(e),e}function s(e,t){var n=t?t+"ms":"";y.style.webkitTransitionDuration=y.style.MozTransitionDuration=y.style.msTransitionDuration=y.style.OTransitionDuration=y.style.transitionDuration=n,c(e)}function l(e,t){if(E&&clearInterval(E),t){var n=+new Date,a=k.left;E=setInterval(function(){function i(e,t){return(t-e)*s+e}var r,o,s=(+new Date-n)/t,l=[0,.7,1,1];return s>=1?(c(e),void clearInterval(E)):(r=e-a,o=i(i(i(l[0],l[1]),i(l[1],l[2])),i(i(l[1],l[2]),i(l[2],l[3]))),void c(Math.floor(o*r+a)))},15)}else c(e)}function c(e){y.style.webkitTransform="translate("+e+"px,0) translateZ(0)",y.style.msTransform=y.style.MozTransform=y.style.OTransform=y.style.transform="translateX("+e+"px)",k.left=e}function u(e){y.style.left=e+"px",k.left=e}function d(){var e=C+1;return e>v-1&&(e=0),o(e)}function f(){w=!0,h()}function h(){w&&(b&&clearTimeout(b),b=setTimeout(function(){d()},M.slideshowInterval))}function p(){b&&clearTimeout(b)}function A(){w=!1,b&&clearTimeout(b)}function m(){k.width=e.offsetWidth,y.style.width=k.width*v+"px";for(var t=0;v>t;t++)k.slides[t].style.width=k.width+"px";s(-C*k.width)}function _(e,t,n,a){t&&(e.addEventListener?e.addEventListener(t,n,!!a):e.attachEvent("on"+t,n))}var v,g,y,b,w,E,k={slides:[],dots:[],left:0},S=200,C=0,M={speed:300,touchSpeed:300,slideshow:!1,slideshowInterval:4e3,stopSlideshowAfterInteraction:!1,startSlide:0,mouseDrag:!0,disableIfOneSlide:!0,cssPrefix:"peppermint-",dots:!1,dotsPrepend:!1,dotsContainer:void 0,slidesContainer:void 0,onSlideChange:void 0,onSetup:void 0};t&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(M,t);var P={inactive:M.cssPrefix+"inactive",active:M.cssPrefix+"active",mouse:M.cssPrefix+"mouse",drag:M.cssPrefix+"drag",slides:M.cssPrefix+"slides",dots:M.cssPrefix+"dots",activeDot:M.cssPrefix+"active-dot",mouseClicked:M.cssPrefix+"mouse-clicked"},T={transforms:n("transform"),transitions:n("transition")};return function(){var t=M.slidesContainer||e,n=M.dotsContainer||e;if(!(M.disableIfOneSlide&&t.children.length<=1)){(!T.transforms||window.opera)&&(c=u),(!T.transitions||window.opera)&&(s=l),a(y=M.slidesContainer||document.createElement("div"),P.slides);for(var d=0,h=t.children.length;h>d;d++){var b=t.children[d],w=document.createElement("li");k.slides.push(b),w.setAttribute("tabindex","0"),w.setAttribute("role","button"),w.innerHTML="<span></span>",function(t,n){_(n,"click",function(){o(t),M.stopSlideshowAfterInteraction&&A()}),_(n,"keyup",function(e){13==e.keyCode&&(o(t),M.stopSlideshowAfterInteraction&&A())}),_(n,"mouseup",function(){a(n,P.mouseClicked)}),_(n,"blur",function(){r(n,P.mouseClicked)},!0),_(b,"focus",b.onfocusin=function(){e.scrollLeft=0,setTimeout(function(){e.scrollLeft=0},0),o(t)},!0)}(d,w),k.dots.push(w)}v=k.slides.length,100/v,a(e,P.active),r(e,P.inactive),M.mouseDrag&&a(e,P.mouse),k.width=e.offsetWidth,y.style.width=k.width*v+"px";for(d=0;v>d;d++)k.slides[d].style.width=k.width+"px",y.appendChild(k.slides[d]);if(M.slidesContainer||e.appendChild(y),M.dots&&v>1){a(g=document.createElement("ul"),P.dots);for(d=0,h=k.dots.length;h>d;d++)g.appendChild(k.dots[d]);M.dotsPrepend?n.insertBefore(g,n.firstChild):n.appendChild(g)}_(window,"resize",m),_(window,"orientationchange",m),setTimeout(function(){o(M.startSlide,0)},0),M.slideshow&&f(),i(y,{mouse:M.mouseDrag,start:function(){a(e,P.drag)},move:function(e,t,n){p(),n.x=n.x/(!C&&n.x>0||C==v-1&&n.x<0?Math.abs(n.x)/k.width*2+1:1),s(n.x-k.width*C)},end:function(t,n,a){if(a.x){var i=Math.abs(a.x)/k.width,s=Math.floor(i)+(i-Math.floor(i)>.25?1:0);s+=a.time<S+S*s/1.8&&Math.abs(a.x)-s*k.width>(s?-k.width/9:20)?1:0,a.x<0?o(C+s,M.touchSpeed):o(C-s,M.touchSpeed),M.stopSlideshowAfterInteraction&&A()}r(e,P.drag)}}),setTimeout(function(){M.onSetup&&M.onSetup(v)},0)}}(),{slideTo:function(e,t){return o(parseInt(e,10),t)},next:d,prev:function(){var e=C-1;return 0>e&&(e=v-1),o(e)},start:f,stop:A,pause:p,getCurrentPos:function(){return C},getSlidesNumber:function(){return v},recalcWidth:m}}function i(e,t){function n(e,t,n,i){return t?(e.addEventListener?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n),{remove:function(){a(e,t,n,i)}}):void 0}function a(e,t,n,a){t&&(e.removeEventListener?e.removeEventListener(t,n,!!a):e.detachEvent("on"+t,n))}function i(e){}function r(e){if((m={x:(f?e.clientX:e.touches[0].clientX)-A.x,y:(f?e.clientY:e.touches[0].clientY)-A.y,time:Number(new Date)-A.time}).time-v[v.length-1].time){for(var t=0;t<v.length-1&&m.time-v[t].time>80;t++);_={x:(m.x-v[t].x)/(m.time-v[t].time),y:(m.y-v[t].y)/(m.time-v[t].time)},v.length>=5&&v.shift(),v.push({x:m.x,y:m.y,time:m.time})}}function o(e,t){y=!0,E[f=t](e)||(n(document,w[f][1],s),n(document,w[f][2],l),n(document,w[f][3],l),u.preventDefault,A={x:f?e.clientX:e.touches[0].clientX,y:f?e.clientY:e.touches[0].clientY,time:Number(new Date)},d=void 0,m={x:0,y:0,time:0},_={x:0,y:0},v=[{x:0,y:0,time:0}],u.start(e,A))}function s(e){!u.preventScroll&&d||E[f](e)||(r(e),(Math.abs(m.x)>u.clickTolerance||Math.abs(m.y)>u.clickTolerance)&&(y=!1),void 0===d&&3!==f&&(d=Math.abs(m.x)<Math.abs(m.y)&&!u.preventScroll)||(u.preventDefault,u.move(e,A,m,_)))}function l(e){f&&r(e),!y&&e.target&&e.target.blur&&e.target.blur(),a(document,w[f][1],s),a(document,w[f][2],l),a(document,w[f][3],l),u.end(e,A,m,_)}var c=function(){},u={preventDefault:!0,clickTolerance:0,preventScroll:!1,mouse:!0,start:c,move:c,end:c,click:c};t&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(u,t);var d,f,h=!!window.navigator.pointerEnabled,p=!!window.navigator.msPointerEnabled,A={},m={},_={},v=[],g=[],y=!0,b=h?1:p?2:0,w=[["touchstart","touchmove","touchend","touchcancel"],["pointerdown","pointermove","pointerup","pointercancel"],["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],["mousedown","mousemove","mouseup",!1]],E=[function(e){return e.touches&&e.touches.length>1||e.scale&&1!==e.scale},function(e){return!e.isPrimary||e.buttons&&1!==e.buttons||!u.mouse&&"touch"!==e.pointerType&&"pen"!==e.pointerType},function(e){return!e.isPrimary||e.buttons&&1!==e.buttons||!u.mouse&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH&&e.pointerType!==e.MSPOINTER_TYPE_PEN},function(e){return e.buttons&&1!==e.buttons}];return g.push(n(e,w[b][0],function(e){o(e,b)})),g.push(n(e,"dragstart",i)),u.mouse&&!b&&g.push(n(e,w[3][0],function(e){o(e,3)})),g.push(n(e,"click",function(e){y&&u.click(e)})),{getClicksAllowed:function(){return y},kill:function(){for(var e=g.length-1;e>=0;e--)g[e].remove()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,window.jQuery&&function(e){e.fn.Peppermint=function(t){return this.each(function(){e(this).data("Peppermint",a(this,t))}),this}}(window.jQuery),window.Peppermint=a,window.EventBurrito=i;var r=a;t.default=r},QMH7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.healScroll=c,t.unhealScroll=function(e){if(!e[o])return;e[o]=null,e.style.paddingTop="",e.style.paddingBottom="",(0,i.cleanScrollView)(e),removeEvent(e,"scroll",f),removeEvent(e,"scroll",d)};var a=n("UxAg"),i=n("Qz23");n("H5mD").isIOS&&window.MutationObserver&&document.addEventListener("DOMContentLoaded",s);var r={scrollView:".ScrollView"},o="_scrollViewHealed";function s(){(l(),document.body)&&new MutationObserver(l).observe(document.body,{childList:!0,subtree:!0})}function l(){(0,a.$$)(r.scrollView).forEach(c)}function c(e){if(!e[o]){e[o]={};var t=getComputedStyle(e),n=parseInt(t.paddingTop,10),a=parseInt(t.paddingBottom,10);e.style.paddingTop=n+1+"px",e.style.paddingBottom=a+1+"px",u(e),(0,i.setScrollView)(e,{override:!1}),hasClass("messenger__body",e)||addEvent(e,"scroll",f),addEvent(e,"scroll",d)}}function u(e){var t=e.scrollTop;t<0||(0===t?e.scrollTop+=1:t+e.offsetHeight===e.scrollHeight&&(e.scrollTop-=1))}function d(e){var t=e.target,n=t[o];n&&(n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){t[o]&&u(t)},50))}function f(){onBodyScroll(!0)}},QO40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onOpen=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];o&&(clearTimeout(o),o=null);s&&(clearTimeout(s),s=null);i=0,0,0,r=0,window.addEventListener("scroll",l),setTimeout(function(){scrollTo(0,a)},10),setTimeout(function(){scrollTo(0,a)},100),setTimeout(function(){scrollTo(0,a)},200),setTimeout(function(){scrollTo(0,a)},300),setTimeout(function(){scrollTo(0,a)},400),setTimeout(function(){scrollTo(0,a)},500)},t.onClose=function(){clearTimeout(o),clearTimeout(s),i=0,0,0,o=null,s=null,window.removeEventListener("scroll",l)};var a=999999,i=0,r=0,o=null,s=null;function l(){var e=pageYOffset;0,e!==i&&e!==a&&(i=e,r=Math.max(r,e),scrollTo(0,a)),clearTimeout(s),s=setTimeout(function(){s=null,window.removeEventListener("scroll",l),scrollTo(0,a),setTimeout(function(){return scrollTo(0,a)},1e3)},150)}},QQoL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("HwqD"))&&a.__esModule?a:{default:a};n("M6/v");var r=i.default;t.default=r,window.Bell=i.default},QWOa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationBlock=s,t.default=void 0;var a=n("n9zS"),i=n("yVgc"),r=n("80md"),o=n("NJ1W");function s(e){return{inner:[(0,o.Row)({inner:[(0,o.Col)({inner:[(0,a.Circle)({size:48}),(0,a.Circle)({size:20,class:"SkeletonNotificationBlock__badge"})],auto:!0,class:"SkeletonNotificationBlock__avatar"}),(0,o.Col)({inner:[(0,o.Offset)({small:!0}),(0,o.Row)({inner:[(0,o.Col)({inner:[(0,r.Line)()]})]}),(0,o.Row)({inner:[(0,o.Col)({inner:[(0,r.Line)()],grow:2}),(0,o.Col)()]}),(0,o.Row)({inner:[(0,o.Col)({inner:[(0,r.Line)({small:!0})]}),(0,o.Col)({grow:5})]})],grow:6}),(0,o.Col)(),(0,o.Col)({inner:[(0,i.Square)({size:48})],auto:!0})],align:"flex-start"}),(0,o.Offset)(),(0,o.Offset)(),(0,o.Row)({inner:[(0,o.Col)({inner:[(0,a.Circle)({size:48})],auto:!0}),(0,o.Col)({inner:[(0,o.Offset)({small:!0}),(0,o.Row)({inner:[(0,o.Col)({inner:[(0,r.Line)()]})]}),(0,o.Row)({inner:[(0,o.Col)({inner:[(0,r.Line)({small:!0})]}),(0,o.Col)({grow:5})]}),(0,o.Offset)()],grow:4}),(0,o.Col)({inner:[(0,o.Offset)()]})],align:"flex-start"})],class:"SkeletonNotificationBlock",tag:"div"}}var l=s;t.default=l},QWbq:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.processThumbs=function(e,t,n,a){var i=function(e){var t=0;return each(e,function(e,n){t+=n}),t},r=function(e,t,n){return(t-(e.length-1)*n)/i(e)},o=(a=S(a)?a:{}).wide,s=[],c=0,u=[],d=[];each(n,function(e,t){E(t.type)&&(u[u.length]=t[t.type]),t.type===l&&s.push(c),c++});var f="",h=[],p=u.length;each(u,function(n,a){var i=w(a,e,t);f+=i>1.2?"w":i<.8?"v":"q",h[h.length]=i});var b,C,M=h.length>0?i(h)/h.length:1,P=A;window.isMVK&&(P=window.innerWidth>=480?m:_);var T=P;a.force?(b=e,C=t):(o?(b=v,C=g):e>=381?(b=381,C=1==p?361:237):(b=337,C=1==p?320:214),e<b&&(b=e,C=t),window.isMVK&&(b=Math.min(v,window.innerWidth),C=Math.min(g,b)));var D=b/C,I=0,x=0;if(1==p){var O={lastColumn:1,lastRow:1,single:1};u[0].thumb?(I=279,x=185):h[0]>=1*D?(I=b,x=Math.min(I/h[0],C)):(x=C,I=Math.min(x*h[0],b));var B=y(u[0],I,x,O);!B.unsized&&(B.image.width<I&&B.image.height<=C||B.image.height<x&&B.image.width<=b)&&(I=B.image.width,x=B.image.height,B=y(u[0],I,x,O)),d[0]=B}else if(2==p){var L,R;switch(f){case"ww":if(M>1.4*D&&h[1]-h[0]<.2){R=b,L=Math.min(R/h[0],R/h[1],(C-T)/2),d[0]=y(u[0],R,L,{lastColumn:1}),d[1]=y(u[1],R,L,{lastColumn:1,lastRow:1}),I=b,x=2*L+T;break}case"vv":case"qv":case"vq":case"qq":R=(b-P)/2,L=Math.min(R/h[0],R/h[1],C),d[0]=y(u[0],R,L,{lastRow:1}),d[1]=y(u[1],R,L,{lastRow:1,lastColumn:1}),I=b,x=L;break;default:var N=intval((b-P)/h[1]/(1/h[0]+1/h[1])),j=b-N-P;L=Math.min(C,N/h[0],j/h[1]),d[0]=y(u[0],N,L,{lastRow:1}),d[1]=y(u[1],j,L,{lastColumn:1,lastRow:1}),I=b,x=L}}else if(3==p)if((h[0]>1.2*D||M>1.5*D)&&"www"==f){var F,H=b,V=Math.min(H/h[0],.66*(C-T));if(d[0]=y(u[0],H,V,{lastColumn:1}),"www"==f){var U=intval(b-P)/2;F=Math.min(C-V-T,U/h[1],U/h[2]),d[1]=y(u[1],U,F,{lastRow:1}),d[2]=y(u[2],b-U-P,F,{lastColumn:1,lastRow:1})}else{var z=intval((b-P)/h[2]/(1/h[1]+1/h[2])),W=b-z-P;F=Math.min(C-V-T,z/h[2],W/h[1]),d[1]=y(u[1],z,F,{lastRow:1}),d[2]=y(u[2],z,F,{lastRow:1,lastColumn:1})}I=b,x=V+F+T}else{var q=C,G=intval(Math.min(q*h[0],.75*(b-P)));d[0]=y(u[0],G,q,{lastRow:1});var $=h[1]*(C-T)/(h[2]+h[1]),Y=C-$-T,Q=Math.min(b-G-P,intval($*h[2]),intval(Y*h[1]));d[1]=y(u[1],Q,Y,{lastColumn:1}),d[2]=y(u[2],Q,$,{lastColumn:1,lastRow:1}),I=G+Q+P,x=C}else if(4==p)if((h[0]>1.2*D||M>1.5*D)&&"wwww"==f){var X=b,K=Math.min(X/h[0],.66*(C-T));d[0]=y(u[0],X,K,{lastColumn:1});var J=(b-2*P)/(h[1]+h[2]+h[3]),Z=intval(J*h[1]),ee=intval(J*h[2]),te=X-Z-ee-2*P;J=Math.min(C-K-T,J),d[1]=y(u[1],Z,J,{lastRow:1}),d[2]=y(u[2],ee,J,{lastRow:1}),d[3]=y(u[3],te,J,{lastColumn:1,lastRow:1}),I=b,x=K+J+T}else{var ne=C,ae=Math.min(ne*h[0],.66*(b-P)),ie=(C-2*T)/(1/h[1]+1/h[2]+1/h[3]),re=intval(ie/h[1]),oe=intval(ie/h[2]),se=ne-re-oe-2*T;ie=Math.min(b-ae-P,ie),ae+ie+P<b&&ne*h[0]>ae&&(ae=Math.min(ne*h[0],b-P-ie)),d[0]=y(u[0],ae,ne,{lastRow:1}),d[1]=y(u[1],ie,re,{lastColumn:1}),d[2]=y(u[2],ie,oe,{lastColumn:1}),d[3]=y(u[3],ie,se,{lastColumn:1,lastRow:1}),I=ae+ie+P,x=C}else{var le=[],ce=0;M>(s.length?1.3:1.1)?each(h,function(e,t){le[le.length]=Math.max(1,t)}):each(h,function(e,t){~s.indexOf(ce)?le[le.length]=t:le[le.length]=Math.min(1,t),ce++});var ue,de,fe={};for(fe[p+""]=[r(le,b,P)],ue=1;ue<=p-1;ue++)fe[ue+","+(de=p-ue)]=[r(le.slice(0,ue),b,P),r(le.slice(ue),b,P)];for(ue=1;ue<=p-2;ue++)for(de=1;de<=p-ue-1;de++)fe[ue+","+de+","+(p-ue-de)]=[r(le.slice(0,ue),b,P),r(le.slice(ue,ue+de),b,P),r(le.slice(ue+de),b,P)];var he,pe=null,Ae=0;for(var me in fe)if(fe.hasOwnProperty(me)){var _e=fe[me],ve=i(_e)+T*(_e.length-1),ge=Math.abs(ve-C);if(~me.indexOf(",")){for(var ye=me.split(","),be=0;be<ye.length;be++)ye[be]=intval(ye[be]);(ye[0]>ye[1]||ye[2]&&ye[1]>ye[2])&&(ge+=50,ge*=1.5)}(null===pe||ge<Ae)&&(pe=me,Ae=ge,he=ve)}for(var we=k(u),Ee=k(le),ke=pe.split(","),Se=fe[pe],Ce=ke.length-1,Me=0;Me<ke.length;Me++){var Pe=parseInt(ke[Me]),Te=we.splice(0,Pe),De=Se.shift(),Ie=Te.length-1,xe={};Ce==Me&&(xe.lastRow=!0);for(var Oe=b,Be=0;Be<Te.length;Be++){var Le=Te[Be],Re=Ee.shift(),Ne=xe,je=void 0;Ie==Be?(je=Math.ceil(Oe),Ne.lastColumn=!0):(je=intval(Re*De),Oe-=je+P),d[d.length]=y(Le,je,De,Ne)}}I=b,x=he}return{width:intval(I),height:intval(x),thumbs:d}},t.compute=y,t.getSize=b,t.move=function(e,t,n){if(n>=e.length)for(var a=n-e.length;1+a--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},t.scale=function(e,t,n,a){n=intval(n),a=intval(a)||n;var i=e,r=t;e>=t&&e>n?(i=intval(n),r=intval(t/(e/n))):e<t&&t>a&&(r=intval(a),i=intval(e/(t/a)));return[i,r]},t.crop=function(e,t,n){var a=t,i=n,r=0,o=0;if(!e.vid&&e.image.width&&e.image.height){var s=e.image.width/e.image.height;s<t/n?(e.single&&e.image.width<t&&(t=e.image.width,n=Math.min(n,e.image.height)),(i=(a=t)/s)>n&&(o=-intval((i-n)/2))):(e.single&&e.image.height<n&&(n=e.image.height,t=Math.min(t,e.image.width)),(a=(i=n)*s)>t&&(r=-intval((a-t)/2)))}return{width:a,height:i,marginLeft:r,marginTop:e.orig&&(e.type===u||e.type===c)&&e.single?0:o}},t.getRatio=w,t.convert=function(e,t,n,a){var d=r(t.split("_"),2),f=d[0],h=d[1],p=i({owner_id:f,ownerId:f,itemId:h,type:e,remove:n.remove,click:n.click,temp:"temp"in n.sizes},a);switch(e){case o:p.data={sizes:n.sizes,ratio:n.ratio,label:n.label,href:n.href},p.doc=p.data;break;case s:p.data={pid:h,sizes:n.sizes},p.photo=p.data;break;case l:p.data={vid:h,duration:n.duration,platform:n.platform,play_icon:n.play_icon,active_live:n.active_live,ratio:n.ratio,sizes:n.sizes,name:n.name},p.video=p.data;break;case c:p.data={aid:h,title:n.title,size:n.size,thumb:{sizes:n.sizes}},p.album=p.data;break;case u:p.data={type:u,aid:h,title:n.title,msize:n.msize,thumb:{sizes:n.sizes}},p.market_album=p.data}return p.data.type=e,p.data.id=p.temp?"".concat(e,"temp_").concat(f):"".concat(e).concat(p.ownerId,"_").concat(p.itemId),p},t.isValidThumbType=E,t.THUMBS_MESH_GAP_MVK_SMALL=t.THUMBS_MESH_GAP_MVK=t.THUMBS_MESH_GAP=t.THUMBS_CONTAINER_MAX_WIDTH_WIDE=t.THUMBS_CONTAINER_DEFAULT_RATIO=t.THUMB_VIDEO_DEFAULT_RATIO=t.THUMB_DRAG_ANIMATION_DURATION=t.THUMB_DEFAULT_RATIO=t.THUMB_ALBUM_DEFAULT_RATIO=t.THUMBS_CONTAINER_MAX_HEIGHT_WIDE=t.THUMB_TYPE_VIDEO=t.THUMB_TYPE_PHOTO=t.THUMB_TYPE_MARKET_ALBUM=t.THUMB_TYPE_DOC=t.THUMB_TYPE_ALBUM=void 0,!window.isMVK&&(window.vkExpand=window.vkExpand||"VK"+ +new Date,window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{});var o="doc";t.THUMB_TYPE_DOC=o;var s="photo";t.THUMB_TYPE_PHOTO=s;var l="video";t.THUMB_TYPE_VIDEO=l;var c="album";t.THUMB_TYPE_ALBUM=c;var u="market_album";t.THUMB_TYPE_MARKET_ALBUM=u;t.THUMBS_CONTAINER_DEFAULT_RATIO=1.5;var d=1;t.THUMB_DEFAULT_RATIO=d;var f=1.777;t.THUMB_VIDEO_DEFAULT_RATIO=f;var h=1.5;t.THUMB_ALBUM_DEFAULT_RATIO=h;var p=window.isMVK?200:120;t.THUMB_DRAG_ANIMATION_DURATION=p;var A=5;t.THUMBS_MESH_GAP=A;var m=6;t.THUMBS_MESH_GAP_MVK=m;var _=3;t.THUMBS_MESH_GAP_MVK_SMALL=_;var v=window.isMVK?604:537;t.THUMBS_CONTAINER_MAX_WIDTH_WIDE=v;var g=window.isMVK?360:343;function y(e,t,n,a){var i={id:e.id,width:intval(t),height:intval(n),lastColumn:a.lastColumn,lastRow:a.lastRow,single:a.single,image:b(e,t,n,a.single),unsized:e.unsized,type:e.type,orig:e};return e.title&&void 0!==e.size?extend(i,{title:e.title,size:e.size}):e.title&&void 0!==e.msize?extend(i,{title:e.title,msize:e.msize}):e.type===l&&e.name&&void 0!==e.name&&extend(i,{name:e.namem}),"number"==typeof e.duration&&(e.duration=formatTime(e.duration)),i.unsized?i.ratio=d:i.ratio=i.image.width/i.image.height,i}function b(e,t,n,a){if(!e)return{};t=intval(t),n=intval(n);var i,r=window.devicePixelRatio||1;if(e.type===l||e.type===o){(e.vid?["x","y","l","s","m"]:["o","z","y","x","m","s","temp"]).forEach(function(a){e.sizes[a]&&(!i||t*r<=e.sizes[a][1]&&n*r<=e.sizes[a][2])&&(i=e.sizes[a])})}else{var s=e.thumb?e.thumb.sizes:e.sizes,c=s.x||s[s.length-1],u=c?(c[1]||1)/(c[2]||1):d,f=0;u>t/n?(f=n,u>1&&(f*=u)):(f=t,u<1&&(f/=u)),n*=r,t*=r;var h=!a&&s.o,p="";p=s.temp?"temp":f<75?"s":f<130?"m":h&&s.o&&s.o[1]>=t&&s.o[2]>=n?"o":h&&s.p&&s.p[1]>=t&&s.p[2]>=n?"p":h&&s.q&&s.q[1]>=t&&s.q[2]>=n?"q":h&&s.r&&s.r[1]>=t&&s.r[2]>=n?"r":"x",i=s[p]}return i[1]=intval(i[1]),i[2]=intval(i[2]),i[1]&&i[2]||(e.unsized=!0),{src:i[0],width:i[1],height:i[2]}}function w(e,t,n){var a;switch(e.type){case o:a=e.ratio;break;case l:a=e.ratio||f;break;case c:case u:a=h;break;default:if(e.sizes&&e.sizes.x){var i=r(e.sizes.x,3),s=i[1],p=i[2];s&&p&&(a=s/p)}if(e.sizes&&e.sizes.temp){var A=r(e.sizes.temp,3),m=A[1],_=A[2];m&&_&&(a=m/_)}}return a||d}function E(e){return!!~[o,s,l,c,u].indexOf(e.toString())}function k(e,t){var n=S(e)||void 0===e.length?{}:[];for(var i in e)(!/webkit/i.test(_ua)||"layerX"!=i&&"layerY"!=i&&"webkitMovementX"!=i&&"webkitMovementY"!=i)&&(t&&"object"===a(e[i])&&"prototype"!==i&&null!==e[i]?n[i]=k(e[i]):n[i]=e[i]);return n}t.THUMBS_CONTAINER_MAX_HEIGHT_WIDE=g;var S=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},QcsT:function(e,t,n){"use strict";var a=n("UxAg");page.onChange(l),photoview.onHide(l),photoview.onShow(c);var i,r="#5181b8",o="#000",s=(0,a.$)('meta[name="theme-color"]');function l(){u(r)}function c(){u(o)}function u(e){i||(i=(0,a.$)("#theme_color_shim")),s&&s.setAttribute("content",e),i&&(i.style.backgroundColor=e)}},Qg0H:function(e,t,n){"use strict";var a=n("UxAg"),i=o(n("TYsd")),r=o(n("+cqQ"));function o(e){return e&&e.__esModule?e:{default:e}}window.Voting={cls:"Voting",setLoading:h,setHtml:function(e,t){u(e).forEach(function(e){e.outerHTML=t}),u(e).forEach(function(e){e.classList.add(l.beforeAnimation)}),setTimeout(function(){u(e).forEach(function(e){e.classList.remove(l.beforeAnimation),Voting.onHtmlUpdate(e)})},30)},getVotingsById:u,onHtmlUpdate:(0,r.default)("$voting")},Voting._onSubmit=p,Voting._onSingleAnswerClick=f,Voting._onCheckboxClick=d,Voting._onRevoteClick=A;var s="_Voting_singleAnswerAction",l={loading:"Voting_loading",beforeAnimation:"Voting_beforeAnimation",hasCheckedOptions:"Voting_hasCheckedOptions"},c={voting:".Voting",votingById:function(e){return'.Voting[data-id="'.concat(e,'"]')},optionControl:".Voting__optionControl",submit:".Voting__submit"};function u(e){return(0,a.$$)(c.votingById(e))}function d(e){var t=e.closest(c.voting),n=Array.from((0,a.$$)(c.optionControl)).some(function(e){return e.checked});t.classList.toggle(l.hasCheckedOptions,n)}function f(e){var t=e.name,n=e.value,a=e.closest("form"),i=a.getAttribute("action");a[s]=i+"&"+t+"="+encodeURIComponent(n)}function h(e){e.classList.add(l.loading)}function p(e,t,n){var a;if(e.preventDefault(),t[s])a=t[s],h(t);else{var r=Array.from(t.$$("input:checked"));if(0===r.length)return;var o=r[0].name,l=r.map(function(e){return e.value}).join(","),c=t.getAttribute("action"),u=c.includes("?")?"&":"?";h(t);var d=t.$('input[name="is_board"]').value;a="".concat(c).concat(u).concat(o,"=").concat(l,"&is_board=").concat(d)}i.default.handle(n,{$voting:t,url:a})}function A(e,t){var n=e.closest(c.voting);i.default.handle(t,{$voting:n})}},Qwnw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("gMTq")),i=r(n("29dZ"));function r(e){return e&&e.__esModule?e:{default:e}}Object.assign(a.default,{rejectAll:function(e,t){i.default.setLoading(t,!0),a.default.onRejectAll(t)},onRejectAll:befall()});var o=a.default;t.default=o},QySK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("pQDp");var a=n("sWID"),i=n("ywff"),r=n("lkNA");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l,c,u,d=window,f=d.geByTag,h=d.geByTag1,p=d.each,A=d.nav,m=d.removeClass,_=d.intval,v=d.toggleClass,g=d.domData,y=d.domQuery1,b=d.getW,w=d.getXY,E=d.getH,k=d.geByClass,S=d.ge,C=d.matchesSelector,M={};window._articleCarouselGlobalId=window._articleCarouselGlobalId||1;var P=function(){function e(t,n,a){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._article=t,this._options=n,this._readTO=null,this._scrollStatEvent=!1,this._openTime=0,this._els={view:S("article_view_".concat(t.raw_id))},window.cur&&cur.destroy&&cur.destroy.push(function(){i.deinit()}),window.cur&&cur.destroy.push(function(){i.deinit()}),window.addEventListener("VKWebAppEvent",function(e){if(e&&e.detail&&void 0!==e.detail.index){var t=e.detail.index;if(u){var n=M[g(u,"id")];n&&n(t)}}}),a&&this.ready()}var t,n,d;return t=e,(n=[{key:"getEl",value:function(){return this._els.view}},{key:"getArticle",value:function(){return this._article}},{key:"getScrollNode",value:function(){return this._options.getScrollNode?this._options.getScrollNode():document}},{key:"_getScrollTop",value:function(){return this._options.getScrollTop?this._options.getScrollTop():window.scrollNode?window.scrollNode.scrollTop:window.document.documentElement.scrollTop}},{key:"getTimeSpent",value:function(){return Math.round((Date.now()-this._openTime)/1e3)}},{key:"deinit",value:function(){this._scrollEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollEvent),this._scrollEvent=!1),this._scrollStatEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),this._scrollStatEvent=!1),clearTimeout(this._readTO)}},{key:"_onViewScroll",value:function(){var e=this,t=this._options.mobile?scrollGetY():window.scrollNode.scrollTop,n=window.innerHeight;p(f("figure",this._els.view),function(a,i){var r=_(g(i,"done"));if(!r){var o=E(i),s=w(i)[1],l=_(g(i,"type")),c=101==l?-200:100,u=s<=t+n-c&&t+c<=s+o;(r=e._onObjectView(u,l,i))&&g(i,"done",1)}}),p(f("figure",this._els.view),function(a,i){var r,o=E(i),s=w(i)[1],l=_(g(i,"type")),c=s,u=s+o,d=t,f=t+n;if(c>f||d>u)r=!1;else{var h=Math.max(c,d);r=(Math.min(u,f)-h)/o>.7}e._onObjectPartialView(r,l,i)})}},{key:"_initObjects",value:function(){var e=this;this._initedObjects=this._initedObjects||{},p(k("_article_unmute_button",this._els.view),function(t,n){e._initedObjects[t]||(e._initedObjects[t]=!0,n.addEventListener("click",function(){var e=n.parentNode,t=h("video",e);t.muted=!t.muted,v(e,"article_object_unmuted",!t.muted)}))}),p(f("figure",this._els.view),function(t,n){if(!e._initedObjects[t])switch(e._initedObjects[t]=!0,parseInt(g(n,"type"))){case a.ParagraphType.ObjectPhoto:var r=(0,i.initPhotoCarousel)(n,{mobile:e._options.mobile,moderDeletePhoto:e._options.moderDeletePhoto,onClick:function(t){e.sendStats({type:t})}});if(e._initPhoto(n),r){var o=window._articleCarouselGlobalId++;n.setAttribute("data-carousel-id",o),M[o]=r}break;case a.ParagraphType.ObjectAudio:case a.ParagraphType.ObjectAudioPlaylist:geByClass1("article_figure_content",n).addEventListener("click",function(){e.sendStats({type:a.ArticleStatsEvents.clickOnAudio})},!0);break;case a.ParagraphType.ObjectMarketItem:case a.ParagraphType.ObjectAliExpressProduct:break;case a.ParagraphType.ObjectGIF:case a.ParagraphType.ObjectVideo:if(e._options.mobile){var s=h("video",n);s&&(s.addEventListener("play",function(){e.sendStats({type:a.ArticleStatsEvents.clickOnVideo})}),s.addEventListener("pause",function(){e.sendStats({type:a.ArticleStatsEvents.clickOnVideo})}))}else geByClass1("article_figure_content",n).addEventListener("click",function(){e.sendStats({type:a.ArticleStatsEvents.clickOnVideo})},!0)}}),this._els.view.addEventListener("click",function(t){var n=t.target;if(C(n,'a[href^="/away"]')){var i=decodeURIComponent(unescape(n.href)).split("vk.com/away.php?to=")[1];i&&e.sendStats({type:a.ArticleStatsEvents.clickOnExternalLink,domain:encodeURIComponent(e._getUrlDomain(i))})}})}},{key:"_initPhoto",value:function(e){var t=this;geByClass1("article_figure_content",e).addEventListener("click",function(){var n=y("[data-sizes]",e),i=JSON.parse(g(n,"sizes")),r=_(g(e,"photo-carousel-index"));t._options.onImageOpen&&t._options.onImageOpen.call(t,i,e,r),t.sendStats({type:a.ArticleStatsEvents.clickOnPhoto})})}},{key:"_initStats",value:function(){if(this._statsInited)this._scrollStatEvent&&this._scrollStatEvent();else{this._statsInited=!0,this._openTime=Date.now();var e,t=-1,n=[];this._scrollStatEvent&&this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),clearTimeout(this._readTO);var i=this;this.getScrollNode().addEventListener("scroll",this._scrollStatEvent=function(){var a=i.getCurrentScrollRatio();if(!(a<0)){var o=1;a>=.95?o=4:a>.66?o=3:a>.33&&(o=2),function(a){if(i._isReady&&(i._article.has_more&&(a=Math.min(a,1)),!(t>=a))){for(var o=t+1;o<=a;o++)n.push(o);if(t=a,clearTimeout(e),e=setTimeout(r,300),3==a&&i._article.ttr){var s=i._article.ttr-i.getTimeSpent();s>0&&(i._readTO=setTimeout(function(){if(!document.hidden){var e=i.getCurrentScrollRatio();if(!(e<0||e>1.3)){var a=4==t;n=[t=4],r(a)}}},1e3*s))}}}(o),4!=o||i._article.has_more||(i.getScrollNode().removeEventListener("scroll",i._scrollStatEvent),i._scrollStatEvent=!1)}},{passive:!0}),this._scrollStatEvent&&this._scrollStatEvent()}function r(e){if(n.length){var t=i._article,r=i._options,o="";t.ref?o=t.ref:window.cur&&"feed"===(o=window.cur.module)&&cur.articlePrevLoc&&!r.mobile&&"search"===A.fromStr(cur.articlePrevLoc).section&&(o="feed_search");var s={act:"stats",scroll:n.join(","),spent:i.getTimeSpent(),hash:t.access_hash,article_owner_id:t.owner_id,article_id:t.id,is_web_view:r.isWebView?1:0,post_id:r.sourcePostId,is_widget:r.isWidget,is_delayed_scroll_4:_(e),track_code:r.trackCode,ref:o};ajax.post(r.mobile?"article.php":"al_articles.php",s),t.mailru_stats_data&&n.forEach(function(e){(0,a.mailruStatsPixel)("scroll_".concat(e),t.mailru_stats_data)}),n=[]}}}},{key:"_initGoogleAnalytics",value:function(){var e=this._options.googleAnalyticsId;if(e)if(window.dataLayer=window.dataLayer||[],window.gtag)gtag("config",e,{page_location:window.location.href});else{var t=document.createElement("script");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=".concat(e)),t.setAttribute("async","true"),document.head.appendChild(t),window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}}},{key:"_onObjectPartialView",value:function(e,t,n){if(t==a.ParagraphType.ObjectPhoto){var i=y("[data-sizes]",n);if(JSON.parse(g(i,"sizes")).length>1){var r=n.getAttribute("data-carousel-id");e?c!=r&&(clearTimeout(l),l=setTimeout(function(){var e=M[r];e&&e(1,!0)},400),c=r):r==c&&(c=-1,clearTimeout(l))}}}},{key:"_onObjectView",value:function(e,t,n){var i=!1;switch(t){case a.ParagraphType.ObjectPhoto:if(e){var r=h("img",n),s=b(r)||this._options.width,l=y("[data-sizes]",n),c=JSON.parse(g(l,"sizes")),u=f("img",n);c.forEach(function(e,t){var n=o((0,a.getAppropriateImage)(c[t],s,!0),1)[0];(0,a.preloadImage)(n,function(){var e=u[t];m(e,"article_object_photo__image_blur"),e.src=n})}),i=!0}break;case a.ParagraphType.ObjectGIF:if(!this._options.mobile){var d=h("video",n);if(d)if(e){if(d.hasAttribute("autoplay")){var p=d.play();p&&p.catch(function(){})}}else d.pause();else i=!0}break;case a.ParagraphType.ObjectTwitter:case a.ParagraphType.ObjectFacebook:case a.ParagraphType.ObjectInstagram:case a.ParagraphType.ObjectVK:case a.ParagraphType.ObjectTelegram:this.initEmbed(t,n),i=!0}return i}},{key:"initEmbed",value:function(e,t){var n=this;switch(e){case a.ParagraphType.ObjectTwitter:var i=y("[data-tweet-id]",t),s=g(i,"tweet-id");(0,r.loadScript)("https://platform.twitter.com/widgets.js",{onLoad:function(){twttr.widgets.createTweet(s,i,{align:"center",lang:window.vk&&0==window.vk.lang?"ru":"en",dnt:!0})}});break;case a.ParagraphType.ObjectFacebook:var l=window.vk&&0==window.vk.lang?"ru_RU":"en_US";(0,r.loadScript)("https://connect.facebook.net/".concat(l,"/all.js#xfbml=1&amp;version=v2.8"),{onLoad:function(){FB.XFBML.parse()}});break;case a.ParagraphType.ObjectInstagram:(0,r.loadScript)("https://www.instagram.com/embed.js",{onLoad:function(){window.instgrm.Embeds.process(),addEvent(window,"message",a.changeHeightInstagramEmbed)}});break;case a.ParagraphType.ObjectVK:var c=y("[data-raw-id]",t),u=g(c,"raw-id"),d=g(c,"index"),f=o(u.split(";"),2),h=f[0],p=f[1];(0,r.loadScript)("/js/api/openapi.js",{onLoad:function(){ajax.post("dev.php",{act:"a_get_post_hash",post:"".concat(h,"_").concat(p)},{onDone:function(e){e&&window.VK&&window.VK.Widgets&&window.VK.Widgets.Post("vk_post_".concat(u,"_").concat(d),h,p,e,{from:n._options.isWebView?"article_webview":""})}})}});break;case a.ParagraphType.ObjectTelegram:(0,r.loadScript)("https://telegram.org/js/telegram-widget.js?5",{})}}},{key:"getCurrentScrollRatio",value:function(){var e=E(this._els.view),t=w(this._els.view)[1]-w(this.getScrollNode().firstElementChild)[1];return(this._getScrollTop()+window.innerHeight-t)/e}},{key:"getScreenVisibilityRatio",value:function(){var e=E(this._els.view),t=w(this._els.view)[1]-w(this.getScrollNode().firstElementChild)[1],n=this._getScrollTop(),a=window.innerHeight,i=t,r=t+e,o=n,s=n+a;if(o>r||i>s)return 0;var l=Math.max(i,o);return(Math.min(r,s)-l)/a}},{key:"update",value:function(){this._initObjects(),this._initStats(),this._options.onScroll&&this._options.onScroll.call(this,this.getCurrentScrollRatio())}},{key:"ready",value:function(){var e=this;this._isReady=!0,this._initObjects(),this._initStats(),this._initGoogleAnalytics(),setTimeout(function(){var t=(0,a.getUrlParam)("anchor");if(t){e._options.isWebView||e.scrollToAnchor(t);var n=e.getScrollNode();n===document&&(n=document.scrollingElement||window.scrollNode||document.body),n.click&&n.click(),n.focus()}},0),!this._options.mobile&&window.AudioPlaylist&&this._article.audios_list&&this._article.audios_list.length>0&&new AudioPlaylist(AudioPlaylist.TYPE_TEMP,this._article.owner_id,"article_"+this._article.id).mergeWith({list:this._article.audios_list}),this.getScrollNode().addEventListener("scroll",this._scrollEvent=function(){e._onViewScroll(),e._options.onScroll&&e._options.onScroll.call(e,e.getCurrentScrollRatio())}),setTimeout(function(){e._scrollEvent()},this._options.objectsInitDelay||0)}},{key:"scrollToAnchor",value:function(e){e=e||(0,a.getUrlParam)("anchor");var t=this._options,n=this.getScrollNode();n===document&&(n=document.scrollingElement||window.scrollNode||document.body),e&&function(){var a=document.getElementById(e);if(a){"scrollRestoration"in history&&(history.scrollRestoration="manual");var i=t.isWebView?0:25,r=a.parentNode.parentNode.offsetTop-i;window.setTimeout(function(){n.scrollTo?n.scrollTo(0,r):n.scrollTop=r},0)}}()}},{key:"sendStats",value:function(e){var t=this._article,n=this._options,a={act:"stats",spent:this.getTimeSpent(),article_id:t.id,article_owner_id:t.owner_id,hash:t.access_hash,is_web_view:n.isWebView?1:0};Object.assign(a,e),ajax.post(n.mobile?"article.php":"al_articles.php",a)}},{key:"_getUrlDomain",value:function(e){var t=document.createElement("a");return t.href=e,t.hostname}}])&&s(t.prototype,n),d&&s(t,d),e}();t.default=P},Qz23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){v&&b();y(e)},t.preventDocumentScroll=y,t.restoreDocumentScroll=function(){if(!v)return;v=!1,b(),1===g.length&&(h.layoutOffset=null,H(),document.body.style.height="");h.layoutElement=null,g.pop(),void(h=g.length?g[g.length-1]:null),h&&H();removeEvent(window,"focusin",B),removeEvent(window,"focusout",L),removeEvent(document,"touchmove",I,{capture:!0}),removeEvent(document,"touchmove",x,{capture:!1}),removeEvent(window,"resize",M),removeEvent(window,"orientationchange",P),removeEvent(window,"resize",T),removeEvent(window,"scroll",D),i.offCloseCallback(R)},t.cleanDocumentViews=b,t.allowScrolling=w,t.setScrollView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r.isIOS)return;if(!1===t.override&&e.__ScrollView)return;if(!0!==t.standalone){if(!v)return;e.__ScrollView||h.scrollViews.push(e)}e.__ScrollView={allowX:!1!==t.allowX,allowY:!1!==t.allowY,overscrollX:!1!==t.overscrollX,overscrollY:!1!==t.overscrollY,standalone:!0===t.standalone},h&&(r.isWKWebView||(!1!==t.topBanner&&(e.__ScrollView.topBanner=t.topBanner||{hide:30,show:60}),addEvent(e,"scroll",C)));addEvent(e,"touchstart",E),addEvent(e,"touchmove",w),addEvent(e,"touchend",k)},t.cleanScrollView=S,t.hideTopBanner=j,t.showTopBanner=F;var a=n("UxAg"),i=function(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("aiw/")),r=n("H5mD");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}var s,l,c,u,d,f,h,p=".layout",A=!0,m=!1,_="closed",v=!1,g=[];function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.isIOS&&(!0!==e.stack&&v||(h={initialized:!1,scrollViews:[]},g.push(h),e.layoutElement&&e.layoutElement.nodeType?h.layoutElement=e.layoutElement:h.layoutElement=(0,a.$)(e.layoutElement||p)),!1===e.topBanner?h.topBanner=!1:h.topBanner=!0,v||(v=!0,addEvent(window,"focusin",B),addEvent(window,"focusout",L),addEvent(document,"touchmove",I,{capture:!0}),addEvent(document,"touchmove",x,{capture:!1}),addEvent(window,"resize",M),i.onCloseCallback(R),r.isWKWebView||(addEvent(window,"orientationchange",P),requestAnimationFrame(function(){(0,r.isLandscapePhone)()?P(null,!0):(M(),h&&!h.topBanner?requestAnimationFrame(j):c||requestAnimationFrame(F))}))))}function b(){h.scrollViews.forEach(function(e){return S(e)}),h.scrollViews=[]}function w(e){var t=e.currentTarget.__ScrollView;if("prevented"!==t.state){if(!("start"!==t.state||t.allowX&&t.allowY)){var n=Math.abs(t.startX-e.changedTouches[0].clientX),a=Math.abs(t.startY-e.changedTouches[0].clientY);if(!t.allowX&&n>a)return void(t.state="prevented");if(!t.allowY&&a>n)return void(t.state="prevented")}if("allowed"!==t.state&&(t.state="allowed"),A=!1,!t.overscrollX){var i=e.currentTarget.scrollLeft,r=t.startX-e.changedTouches[0].clientX;(i<=0&&r<=0||i>=t.maxX&&r>=0)&&(A=!0,t.standalone&&e.preventDefault())}if(!t.overscrollY){var o=e.currentTarget.scrollTop,s=t.startY-e.changedTouches[0].clientY;(o<=0&&s<=0||o>=t.maxY&&s>=0)&&(A=!0,t.standalone&&e.preventDefault())}}}function E(e){var t=e.currentTarget,n=t.__ScrollView;n.state="start",n.startX=e.changedTouches[0].clientX,n.startY=e.changedTouches[0].clientY,n.maxX=n.overscrollX?null:t.scrollWidth-t.clientWidth,n.maxY=n.overscrollY?null:t.scrollHeight-t.clientHeight}function k(e){e.currentTarget.__ScrollView.state=""}function S(e){e.__ScrollView=null,removeEvent(e,"touchstart",E),removeEvent(e,"touchmove",w),removeEvent(e,"touchend",k),removeEvent(e,"scroll",C)}function C(e){if("closed"!==_||(0,r.isLandscapePhone)())return m=!1,void(u&&clearTimeout(u));m=!0;var t=e.target.__ScrollView.topBanner;h&&h.topBanner&&t?N(e.target,t.show,t.hide):N(e.target,1/0,0),u&&clearTimeout(u),u=setTimeout(function(){m=!1,M()},100)}function M(){if(!m)if(f)f=!1;else if(!(0,r.isLandscapePhone)()){window.pageYOffset;"closed"===_&&(r.isWKWebView||(s=document.documentElement.offsetHeight,l=innerHeight,c=s===l,"show"===d?(d=null,requestAnimationFrame(F)):"hide"===d&&(d=null,requestAnimationFrame(j))))}}function P(e,t){r.isIPad?h.topBanner||setTimeout(function(){j()},400):90===Math.abs(window.orientation)?(addEvent(window,"resize",T),document.body.style.height="",h.layoutHeight=null,t?setTimeout(function(){window.scrollTo(0,-300),T()}):setTimeout(function(){window.scrollTo(0,-300)},400)):(removeEvent(window,"resize",T),h.layoutOffset=null,H(),h.topBanner||setTimeout(function(){j()},400))}function T(){if("closed"===_){var e=document.body.offsetHeight,t=e-innerHeight;h.layoutOffset=t,H(),window.scrollTo(0,e)}}function D(){pageYOffset&&(_="opened",removeEvent(window,"scroll",D))}function I(e){A=!0}function x(e){A&&e.preventDefault()}function O(e){var t=e&&e.target,n=0===e.eventPhase&&t.getAttribute("autofocus"),a=!1;return"textarea"!==t.tagName.toLowerCase()||n||(a=!0),"input"!==t.tagName.toLowerCase()||["checkbox","radio","image","submit"].includes(t.type)||n||(a=!0),"select"===t.tagName.toLowerCase()&&(a=!0),a}function B(e){if(O(e)){var t,n=e&&e.target;_="opening",addEvent(window,"scroll",D),window.isCustomScroll&&(t=n.dataset.scrollviewposition),i.onOpen(t,{exitIfStarted:!0})}}function L(e){O(e)&&i.onClose({exitIfStarted:!0})}function R(){removeEvent(window,"scroll",D),_="closed",setTimeout(function(){(0,r.isLandscapePhone)()?T():M()},100)}function N(e,t,n){var a=e.scrollTop;a<=-t&&(c||d)?(d="show",window.scrollTo(0,-10)):a>=n&&(!c||d)&&(d="hide",window.scrollTo(0,10))}function j(){window.scrollTo(0,300)}function F(){window.scrollTo(0,-300)}function H(){var e=h.layoutOffset;h.layoutElement.style.top=e?e+"px":""}},RHkR:function(e,t,n){"use strict";var a,i=(a=n("myok"))&&a.__esModule?a:{default:a};function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}window.groupInvitationClick=function(e,t){var n=t.$btn,a=n.getAttribute("href");(n.nextElementSibling||n.previousElementSibling).remove(),ajax.post(a,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n    <div class="notification__tempText">'.concat(e,"</div>\n  ")},window.apiCallAction=function(e,t,n,a,r,o,s){var l=s.$btn,c=l.getAttribute("href"),u=l.nextElementSibling||l.previousElementSibling,d=t?'<span class="notification__tempIcon '.concat(t,'Icon"></span>'):"";a&&!confirm(a)||(i.default.setLoading(l,!0),ajax.post(c,{_ajax:1},{onDone:function(){i.default.setLoading(l,!1),u&&u.remove(),l.closest(".BtnStack").outerHTML='<div class="notification__tempText">'.concat(d).concat(e,"</div>")}}))},window.NotifierPage={notifyMarkAsViewed:function(e){ajax.post("feed.php",{_ajax:1,section:"notifications",hash:e,action:"mark_as_viewed"})}},window.NotifyItem={_onPhotoTagAcceptClick:function(e,t,n){var a=n.$btn,i=a.getAttribute("href");a.nextElementSibling||a.previousElementSibling;ajax.post(i,{_ajax:1},{onDone:function(){}}),a.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(t,"</div>\n    ")},_onPhotoTagDeclineClick:function(e,t,n){var a=n.$btn,i=a.getAttribute("href");a.nextElementSibling||a.previousElementSibling;ajax.post(i,{_ajax:1},{onDone:function(){}}),a.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(t,"</div>\n    ")},_onHideClick:function(e,t,n){e.preventDefault();var a=e.target,i=a.getAttribute("href"),r=i+"&action=hide",o=i+"&action=restore";(!n||confirm(n))&&ajax.post(r,{_ajax:1},{onDone:function(){var e=a.closest(".notificationList__items")||a.closest(".notificationList"),n=a.closest(".notification"),i=n.getAttribute("id"),r=e.closest(".notificationList");if(hide(n),NotifyItem._onBodyScroll(),r.classList.contains("notificationList_type_unread")){var s=r.$(".Pad__title"),l=parseInt(s.innerText,10)-1;s.innerText=langNumeric(l,lang.mobile_notifications_new)}var c=!0;each(geByClass("notification",e),function(e,t){isVisible(t)&&(c=!1)}),c&&r.classList.add("Pad_empty");var u=window.Snackbar;u&&u.init&&u.init({text:t,action:{url:o,text:lang.mobile_notifications_restore,callback:["NotifyItem._onRestoreClick","event",i]}})}})},_onRestoreClick:function(e,t,n){var a=n.id,i=n.url;e.preventDefault();var r=ge(t);ajax.post(i,{_ajax:1},{onDone:function(){ge(t).style.display="",Snackbar.close(a);var e=r.closest(".notificationList__items")||r.closest(".notificationList"),n=e.closest(".notificationList");if(n.classList.contains("notificationList_type_unread")){var i=n.$(".Pad__title"),o=parseInt(i.innerText,10)+1;i.innerText=langNumeric(o,lang.mobile_notifications_new)}var s=!0;each(geByClass("notification",e),function(e,t){isVisible(t)&&(s=!1)}),s||n.classList.remove("Pad_empty")}})},_onBodyScroll:function(){$$(".notification_actionsOpen").forEach(function(e){e.classList.remove("notification_actionsOpen")}),window.removeEventListener("scroll",NotifyItem._onBodyScroll)},_onActionTriggerClick:function(e){window.addEventListener("scroll",NotifyItem._onBodyScroll);var t=e.closest(".notification");t.classList.remove("notification_reverse"),t.classList.toggle("notification_actionsOpen"),$$(".notification_actionsOpen").forEach(function(e){e!==t&&e.classList.remove("notification_actionsOpen")}),t.$(".notification__actionsBubble").getBoundingClientRect().y<50&&t.classList.add("notification_reverse")}},window.FriendRequest={_onAcceptClick:function(e,t){var n=t.$btn,a=n.getAttribute("href"),i=n.nextElementSibling||n.previousElementSibling;i&&i.remove(),ajax.post(a,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(e,"</div>\n    ")},_onDeclineClick:function(e,t){var n=t.$btn,a=n.getAttribute("href"),i=n.nextElementSibling||n.previousElementSibling;i&&i.remove(),ajax.post(a,{_ajax:1},{onDone:function(){}}),n.closest(".BtnStack").outerHTML='\n      <div class="notification__tempText">'.concat(e,"</div>\n    ")}},window.GroupNotify={deleteSource:function(e,t){return ajax.post("feed.php",{gid:e,hash:t,act:"group_notify_delete_source"},{onDone:function(){}}),!1},addSource:function(e,t,n){this.processQuery("group_notify_add_source",e,t,n)},editSource:function(e,t){this.processQuery("group_notify_edit_source",e,t)},processQuery:function(e,t,n,a){var i=$(".group_notify_general .Control_type_switcher input.Control__native").checked?1:0,o={};$$(".group_notify_params .Control_type_switcher input.Control__native").forEach(function(e){o["type_"+e.name]=e.checked?1:0}),ajax.post("feed.php",r({gid:t,hash:n,unmuted:i,from:a},o,{act:e}),{onDone:function(){}})},gn_grProcess:function(e,t,n,a){ajax.post("club"+e,{act:"user_action",mid:t,hash:n,from:"top_notifier",action:a},{onDone:function(){}})}}},RVJ9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"open",{enumerable:!0,get:function(){return a.open}}),Object.defineProperty(t,"init",{enumerable:!0,get:function(){return a.init}});var a=n("Mf5j");window.ZeroVKPopup={open:a.open,init:a.init}},RVNN:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("FflB"))&&a.__esModule?a:{default:a}).default;t.default=i},RikE:function(e,t,n){"use strict";var a=n("UxAg");window.TabRow={setSelectedTab:function(e,t){var n=(0,a.$)(r.tabRowById(e)),o=(0,a.$)(r.tabSelected,n),s=(0,a.$)(r.tabById(t),n);o&&o.classList.remove(i.selected),s&&s.classList.add(i.selected)},setTabUrl:function(e,t,n){var i=(0,a.$)(r.tabRowById(e)),o=(0,a.$)(r.tabById(t),i);o&&o.setAttribute("href",n)}};var i={selected:"TabRow__tab_selected"},r={tabRowById:function(e){return'.TabRow[data-id="'.concat(e,'"]')},tabById:function(e){return'.TabRow__tab[data-id="'.concat(e,'"]')},tabSelected:".TabRow__tab_selected"}},RkGL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("+cqQ"))&&a.__esModule?a:{default:a};var r={_onMouseDown:(0,i.default)(),_onCancelClick:(0,i.default)()};window.MoneyTransferButton=r;var o=r;t.default=o},"S6+Z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMOJI_HINTS=t.EMOJI_REPLACES=t.EMOJI_PREFIXED_REPLACES=t.skinToneModifierRegex=t.emojiRegex=void 0;t.emojiRegex=function(){return/(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g};t.skinToneModifierRegex=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/;t.EMOJI_PREFIXED_REPLACES={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g};t.EMOJI_REPLACES={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g};t.EMOJI_HINTS={e29da4:[0,"<3"],f09f988a:[1,":-)"],f09f9883:[2,":-D"],f09f9889:[3,";-)"],f09f9886:[4,"xD"],f09f989c:[5,";-P"],f09f988b:[6,":-p"],f09f988d:[7,"8-)"],f09f988e:[8,"B-)"],f09f9892:[9,":-("],f09f988f:[10,";-]"],f09f9894:[11,"3("],f09f98a2:[12,":'("],f09f98ad:[13,":_("],f09f98a9:[14,":(("],f09f98a8:[15,":o"],f09f9890:[16,":|"],f09f988c:[17,"3-)"],f09f98a0:[18,">("],f09f98a1:[19,">(("],f09f9887:[20,"O:)"],f09f98b0:[21,";o"],f09f98b3:[22,"8|"],f09f98b2:[23,"8o"],f09f98b7:[24,":X"],f09f989a:[25,":-*"],f09f9888:[26,"}:)"],f09f918d:[27,":like:"],f09f918e:[28,":dislike:"],e2989d:[29,":up:"],e29c8c:[30,":v:"],f09f918c:[31,":ok:"]}},SRbS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={}},T24x:function(e,t,n){"use strict";var a=n("BZzM"),i=n("QMH7"),r={onChange:se(),onRestore:se(),fast_load:!1,need_hard_go:!1,getHash:function(e){if("#player"===e.hash)return!!window.isNewNavigation&&e.path+e.hash;var t=qs2obj(e.params);return delete t.z,e.path+obj2qs(t)},getAlias:function(e){if(!e)return!1;var t=(e||"").split("?"),n=t[0],a=qs2obj(t[1]);return a.from&&delete a.offset,delete a.from,delete a.z,delete a.ref,Object.keys(a).forEach(function(e){0===e.indexOf("_")&&delete a[e]}),n+obj2qs(a)},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,s=window,l=s.zlayer,c=s.cur,u=s.nav,d=s.menu,f=s.audioplayer,h=scrollTop(),p=null;window.isNewMail&&toggleClass("vk__page_mail",window.bodyNode,"/mail"===e),l.opened()&&(h=l._st);var A=n.forceUpdate&&t.newHTML,m=!A&&u.hasUpdate(o,e,t),_=!!m||u.needUpdate(o,e,t),v=0;if(!n.force&&!m&&_||A?(v=scrollTop(),p=remove("m"),each(geByClass("_cntr",p),function(){remove(this)}),each(geByClass("ScrollView",p),function(){(0,i.unhealScroll)(this)}),remove(geByClass1("_cntrs",p))):each(geByClass("ScrollView",geByClass1("m")),function(){(0,i.unhealScroll)(this)}),!n.after&&!r.fast_load){var g=r.getHash(u),y=o||t.options||{};o&&o.is_native_back&&(y.prev_tab=y.native_prev),r.save(g,{html:null,st:h,page:p,state:r.stash(),cur:window.cur,options:y},!0)}if(n.before||r.clear(),(n.before||!n.before&&!n.after)&&(window.lm_qsearch_counter?window.lm_qsearch_counter++:window.lm_qsearch_counter=1),n.before){var b=o&&o.target;r.fast_load=!0,b&&addClass("__al_target",b);var w=p.cloneNode(!0);b&&removeClass("__al_target",b);var E=geByClass1("__al_target",w);removeClass("__al_target",E),n.beforeAppend&&n.beforeAppend(w,E),after(w,"l"),scrollTop(v),c.toggleHeaderSearch&&c.toggleHeaderSearch(!1),n.afterAppend&&n.afterAppend(w),d&&d.clear_hover(),d&&d.closeSearch(),d&&d.enabled(!0)}else{o&&o.zProcess&&o.zProcess(0,!0)&&delete o.zProcess;var k=!1;if(o&&u.set(o),r.need_hard_go)return u.hard_go(u.cur,null,{replace:!0});if(!n.force&&!m&&_||A){var S;if(t.title&&(document.title=t.title),A?(S=ce("div",{className:"layout__basis",id:"m"}),val(S,t.newHTML)):(S=t.page)?k=!0:(S=ce("div",{className:"layout__basis",id:"m"}),val(S,t.html)),d.opened()){var C=ce("div",{id:"m_helper",onclick:d.close});append(C,S)}after(S,"l")}r.fast_load=!1,thover.clear(),!m&&_&&(t.lm&&d.refresh(t.lm),t.bc&&(window.bodyNode.className=t.bc),l.opened(),o&&o.zProcess?o.zProcess(0,!1)&&delete o.zProcess:l.close()),n.force||(k&&(window.qsearch.isCachedPage=!0),t.js&&evalJs(t.js),k&&(window.qsearch.isCachedPage=!1),t.state&&r.stash(t.state),t.cur&&extend(window.cur,t.cur),o&&(t.options=o),post.wallActionsHide(),r.save(e,t));var M=o?o.nav&&o.nav.hash:u.hash;if(m||_)if(m)Tabbar.showUpdateButton(m.currentCache.d.page);else if(t.st||!M){var P=window.isCustomScroll&&hasClass("ScrollView","mcont")?1:0;scrollTop(t.st||P),scrollTop(t.st||P,10)}else M?scrollToHash(M):n.no_scroll&&!n.force?(scrollTop(h),scrollTop(h,10)):scrollToHash();else;f&&f.initAudio(),AudioMessagePlayer&&AudioMessagePlayer.redrawWaves()}var T=window,D=T.Tabs;onBodyResize(D.actualizeShowMoreVisibility),D.actualizeShowMoreVisibility(),(0,a.resizePosters)(),r.onChange(!0,o&&o.nav&&o.nav.push)},save:function(e,t,n){if(e){var a=window.nav,i=n?a.page_get(e,t.options.prev_tab):{};i&&a.page_set(e,extend(i,t),r.getAlias(e))}},restore:function(e){var t=window.nav,n=t.page_get(e);return n||(n=t.page_get(r.getAlias(e))),!!n&&(r.onRestore(!0),n)},stash:function(e){var t=window.cur;return window.cur&&t.stash&&t.stash(e)||!1},clear:function(){var e=window.cur,t=window.zlayer,n=window.menu,a=window.tooltip;onBodyScroll("__clear"),onBodyResize("__clear"),n&&n.initEvents(),t.isReady&&t.initEvents(),a&&a.clear(),window.cur&&e.destroy&&each(e.destroy,function(){this()}),window.cur={destroy:[]}},hideHeader:function(e){var t=geByClass1("mhead",e);hide(t)},setMhead:function(e,t,n,a){var i=geByClass1("mhead",e),r=geByClass1("mhb_logo",i),o=geByClass1("mh_header",e),s=!1,l=window.nav,c=document.body,u=geByClass1("SliderTabs",i),d=geByClass1("header__right",i),f=geByClass1("header__gear",i);if(u&&remove(u),d&&remove(d),f&&remove(f),removeClass("vk_header_tabs",c),n){!0===n?s=l.path+(l.params?"?"+l.params:""):n&&(s=n),t||(t=val(o)||"&nbsp;");var h=geByClass1("mhb_back",e),p="",A=hasClass("mh_nobr",h)?" mh_nobr":"",m=a?' onclick="'+a+'"':"";if(p="/"==s?'<div class="hb_wrap mhb_back'+A+'"'+m+'><h1 class="hb_btn mh_header">'+t+"</h1></div>":'\n        <div class="header__center hb_wrap mhb_back '.concat(A,'">\n          <a class="header__back al_back" href="').concat(escapeAttr(s),'" accesskey="0" ').concat(m,'></a>\n          <h1 class="header__title hb_btn mh_header mhi_back">').concat(t,"</h1>\n        </div>\n      "),i&&r){var _=geByClass1("mhb_notify",e);val(i,(window.al&&window.al.menu?'<a href="/" class="hb_wrap mhb_home" accesskey="*" onclick="return menu.toggle(event);"><div class="hb_btn mhi_home">&nbsp;</div></a>':'<a href="/" class="hb_wrap mhb_home mhb_vkhome" accesskey="*"><div class="hb_btn mhi_home mhi_vkhome">&nbsp;</div></a>')+'<div id="header_msgs" class="hb_wrap mhb_notify'+(!_||hasClass("mhb_no_notify",_)?" mhb_no_notify":"")+'">'+val(_)+"</div>"+p)}else h&&(h.outerHTML=p)}else t&&val(o,t)}};window.page=r},T9Df:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("gD36"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.BookmarksPageItem=i.default},TAKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POPUP_NAV_PREFIX=t.POPUP_DISAPPEAR_TIME=t.default=void 0;var a=s(n("1By4")),i=s(n("Po+v")),r=n("UxAg"),o=s(n("j80l"));function s(e){return e&&e.__esModule?e:{default:e}}var l="pop_";t.POPUP_NAV_PREFIX=l;var c=200;t.POPUP_DISAPPEAR_TIME=c,Object.assign(i.default,{open:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.hash,i=n.oncloseCallback;S(e),_=Boolean(n.forceScrollDisable),t&&(e=e.cloneNode(!0),document.body.appendChild(e),e.appendedToBody=!0);e.classList.add(f.open);var r=e.$(h.scroll);E(e),i&&g.push([e,i]);if(r){if(b(e,r),e.onResizeHandler=function(){b(e,r)},addEvent(window,"resize",e.onResizeHandler),!window.MutationObserver)return e;e.scrollContentObserver=new MutationObserver(e.onResizeHandler),e.scrollContentObserver.observe(r,{childList:!0,subtree:!0})}if(a){var o="#".concat(l).concat(a);nav.saveScrollPosition(),nav.set({nav:extend({},nav,{path:nav.path,push:"#".concat(l).concat(a)})}),v[o]=e}return e},close:w});var u=i.default;t.default=u,i.default._onOverlayClick=y,i.default._onTouchMove=function(){};var d,f={popup:"Popup",open:"Popup_open",wrap:"Popup__wrap",hasScroll:"Popup_hasScroll",scrollView:"ScrollView",closing:"Popup--closing"},h={open:".".concat(f.open),popup:".".concat(f.popup),wrap:".".concat(f.wrap),scroll:".Popup__scroll",header:".Popup__header",footer:".Popup__footer"},p=!1,A=null,m=null,_=!1,v={},g=[];function y(e,t,n){var i=e.closest(h.popup);t&&a.default.handle(t,{$popup:i}),n&&w(i)}function b(e,t){var n=e.$(h.header),a=e.$(h.footer);t.scrollHeight-6>t.offsetHeight?(addClass(e,f.hasScroll),addClass(t,f.scrollView),ContentScrollView.restore()):(removeClass(e,f.hasScroll),removeClass(t,f.scrollView),t.scrollTop=0);var i=getCh(),r=0,o=0;n&&(r=n.offsetHeight),a&&(o=a.offsetHeight);var s=Math.min(i-r-o-100,420);setStyle(t,"max-height","".concat(s,"px"))}function w(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).smooth;e&&!e.classList.contains(f.popup)&&(e=e.closest(h.popup)),e||(e=(0,r.$)(h.open));var n=(0,r.$)(h.wrap,e);if(t)return e.classList.add(f.closing),setStyle.transform(n,1,[0,"100%"]),setTimeout(function(){w(e,!1)},c);if(e.classList.remove(f.open),e.appendedToBody&&document.body.contains(e)&&document.body.removeChild(e),e.classList.remove(f.closing),setStyle.transform(n),removeEvent(window,"resize",e.onResizeHandler),e.scrollContentObserver&&e.scrollContentObserver.disconnect(),(0,r.$)(h.open)||k(),nav.cur&&nav.cur.startsWith("#"+l)){var a=o.default.make(nav.path,qs2obj(nav.params));nav.set({nav:extend({},nav,{cur:nav.path,path:nav.path||"",push:a||""})})}var i,s=(i=e,(g.find(function(e){return e[0]===i})||[])[1]);s&&(s(),S(e)),window.cur&&window.cur.app&&window.cur.app.frame&&window.cur.app.frame.focus()}function E(e){if(window.MutationObserver&&!p){var t=document.body;A=t.style.overflow,p=!0,browser.ios||browser.ipad||(t.style.overflow="hidden"),_&&(t.style.height="100%",document.documentElement.style.overflow="hidden"),m=new MutationObserver(function(){t.contains(e)||k()}),d=scrollTop(),document.body&&(document.body.classList.add("fixed"),setStyle(document.body,{top:"-".concat(d,"px")}),browser.safari&&getCw()<882&&document.scrollingElement&&(document.scrollingElement.scrollTop=d,setTimeout(function(){document.scrollingElement.scrollTop=d},100),setTimeout(function(){document.scrollingElement.scrollTop=d},300))),m.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}}function k(){window.MutationObserver&&p&&(document.body.style.overflow=A,_&&(document.documentElement.style.overflow="initial"),m.disconnect(),document.body&&(document.body.classList.remove("fixed"),setStyle(document.body,{top:""}),scrollTop(d)),p=!1)}function S(e){var t=g.findIndex(function(t){return t[0]===e});t>=0&&g.splice(t,1)}nav.onPopState&&nav.onPopState(function(){var e=v[nav.cur];e&&(w(e),delete v[nav.cur])})},TGUg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAudioArtistsString=function(e,t){var n="";return e.forEach(function(a,i){var r="/audio?performer=1&q="+encodeURIComponent(a.name),o=window.getWebHost?window.getWebHost():"";a.id&&(r="/artist/".concat(a.id)),n+=t?'<a class="artist_link" href="'.concat(o).concat(r,'">').concat(a.name,"</a>"):a.name,i<e.length-1&&(n+=", ")}),n}},TORN:function(e,t,n){"use strict";var a=n("J8bf");!function(){function e(){if(geByClass1("tabs_block_hideable")){var e=geByClass1("tabs_block");geByClass1("tabs_list").offsetHeight>geByClass1("tabs_list_more").offsetHeight?removeClass("tabs_block_without_show_more",e):addClass("tabs_block_without_show_more",e)}}onDOMReady(e),onBodyResize(e),window.Tabs={actualizeShowMoreVisibility:e,toggle:function(e){var t=gpeByClass("tabs_block",e);hasClass("tabs_block_opened",t)?(0,a.setCookie)("remixm_tabs_expanded","",-1):(0,a.setCookie)("remixm_tabs_expanded",1),toggleClass("tabs_block_opened",t)}}}()},TYsd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("1By4"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Wd=i.default},TcbA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("2mXy"),i=s(n("TYsd")),r=s(n("TxHJ")),o=s(n("kr3z"));n("OcsD");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,f(t).call(this,e))).onSendClick=function(e){e.preventDefault();var t=n.state.info,a=Object.keys(t).map(function(e){return"".concat(e,": ").concat(t[e])}).join("\n");o.default.post("/?device",{_ajax:!0,device_info:a},{onDone:function(e){1===e?(self.setState({needSendButton:!1}),Snackbar.init({text:getLang("mobile_device_info_sent")})):Snackbar.init({text:getLang("mobile_unknown_error")})}})},n.state=c({},e),n}var n,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,a.Component),n=t,(s=[{key:"_testAudio",value:function(){return!!window.Audio&&(new Audio).canPlayType("audio/mpeg")}},{key:"_testPhotoView",value:function(e){var t=document.createElement("div").style,n=[];return void 0!==t.webkitTransform&&n.push("webkitTransform"),void 0!==t.MozTransform&&n.push("MozTransform"),void 0!==t.msTransform&&n.push("msTransform"),void 0!==t.OTransform&&n.push("OTransform"),e+" ("+n.join(", ").replace(/^(, )+|(, )+$|(, )(, )+/g,"$3")+")"}},{key:"_testFileAPI",value:function(e){return e+" ("+[window.XMLHttpRequest?"XMLHttpRequest":"",window.XDomainRequest?"XDomainRequest":"",window.FormData?"FormData":"",window.FileReader?"FileReader":"",window.XMLHttpRequest&&XMLHttpRequest.sendAsBinary?"sendAsBinary":"",window.ArrayBuffer?"ArrayBuffer":"",window.Uint8Array?"Uint8Array":"",window.MozBlobBuilder?"MozBlobBuilder":"",window.WebKitBlobBuilder?"WebKitBlobBuilder":"",window.BlobBuilder?"BlobBuilder":""].join(", ").replace(/^(, )+|(, )+$|(, )(, )+/g,"$3")+")"}},{key:"componentDidMount",value:function(){var e=this.state.info;e.Audio=this._testAudio(),e["Fullscreen Photoview"]=this._testPhotoView(e["Fullscreen Photoview"]),e.FileAPI=this._testFileAPI(e.FileAPI),this.setState({info:e})}},{key:"render",value:function(){return i.default.preact(r.default,c({},this.state,{onSendClick:this.onSendClick}))}}])&&u(n.prototype,s),l&&u(n,l),t}();t.default=p},Tjn9:function(e,t,n){"use strict";function a(e){(e=ge(e))&&(addClass(e,"profileEdit_selected"),setTimeout(function(){addClass(e,"profileEdit_animated"),setTimeout(function(){removeClass(e,"profileEdit_selected"),removeClass(e,"profileEdit_animated")},1e3)},1500))}function i(e){(e=ge(e))&&setTimeout(function(){var t=getXY(e)[1],n=getSize("mhead")[1],i=scrollGetY(),r=getCh();t<n+i||t>i+r?setTimeout(function(){scrollTo(0,t-n),a(e)},0):a(e)},0)}window.ProfileEditor={init:function(){var e=(qs2obj(nav.params)||{}).hl;e&&i(geByClass1("_"+e))},highlightRow:a,scrollHighlightRow:i}},TuGt:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("Yaig"))&&a.__esModule?a:{default:a}).default;t.default=i},TxHJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("29dZ"))&&a.__esModule?a:{default:a},r=n("fdw3");var o=function(e){var t=e.info||{};return{inner:[{inner:[{inner:[Object.keys(t).map(function(e){var n=t[e];return"boolean"==typeof n&&(n=n?"yes":"no"),function(e,t){return{inner:[{inner:[e],tag:"b"},"\n      :\n      ",{inner:[t],tag:"i"}],tag:"div"}}(e,n)})],class:"fi_row",tag:"div"},{inner:[{inner:[{inner:[{inner:[{inner:"Audio tag not support",tag:"b"}],src:"//vk.com/mp3/bb1.mp3",tag:"source"}],preload:"none",controls:"controls",style:"width: 100%;",tag:"audio"}],style:"color: #777;",tag:"div"}],class:"fi_row",tag:"div"},{inner:[{inner:[{type:"hidden",id:"device_info_text",name:"device_info",value:e.fallbackText,tag:"input"},{inner:[e.needSendButton&&(0,i.default)({inner:[(0,r.getLang)("mobile_send_device_info")],submit:!0,stretch:!0,onClick:e.onSendClick})],class:"cp_buttons_block",tag:"div"}],action:"/?device",method:"post",tag:"form"}],class:"fi_row",tag:"div"}],class:"form_item",tag:"div"}],class:"PageBlock DeviceInfo fit_box",style:"color: #777; line-height: 1.7",tag:"div"}};t.default=o},TxR4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiSymbolToByteHex=function(e){var t=e.split("").map(function(e){return e.charCodeAt(0).toString(16)}).filter(function(e){return"fe0f"!==e.toLowerCase()}).map(function(e){return String.fromCodePoint(parseInt(e,16))}).join("");return encodeURIComponent(t).replace(/%/gi,"").toLowerCase()},t.emojiByteHexToSymbol=function(e){var t=e.length%2==1,n=t?e.slice(0,1):"",a=t?e.slice(1):e,i="";try{i=decodeURIComponent("%"+(r=a,r.split("").reduce(function(e,t,n){return e+t+((n+1)%2==0?" ":"")},"").trim().split(/\s+/)).join("%"))}catch(e){}var r;return n+i},t.emojiRemoveSkinToneModifiers=function(e){return e.replace((0,a.emojiRegex)(),i)};var a=n("S6+Z");function i(e){return e.replace(a.skinToneModifierRegex,"")}},U34x:function(e,t,n){"use strict";var a="dropdown_open",i={_onTogglerClick:function(e,t){preventEvent(e),stopEvent(e);var n=gpeByClass("dropdown",t);if(toggleClass(n,a),!1!==n.isFirstClick){n.isFirstClick=!1;var i=function(){removeClass(n,a)};addEvent(window,"click",i),window.cur.destroy.push(function(){removeEvent(window,"click",i),n.isFirstClick=!0})}}};window.Dropdown=i},UH2D:function(e,t,n){"use strict";l(n("+cqQ"));var a=n("irqS"),i=n("BZzM"),r=(l(n("s0aB")),function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("FZH1"))),o=l(n("GR/G"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){return e&&e.__esModule?e:{default:e}}Object.assign(r.default,{updateClass:p,clearSystemMessage2:function(){remove(geByClass1("service_msg_box"))},onSystemMessageClick:function(){!function(){var e=store.mail,t=e.cur;e.peers[t.peerId].systemMessageCode=null,p("peer"),A()}()},resetPrevScraps:function(){c={folder:[],search:[],peer:[]}},redrawPeer:function(){h("peer",store.mail.scraps.peer),$$(".mailScrap_peer").forEach(function(e){return e.className=(0,r.MailScrap_class)("peer")}),$$(".mailScrap__empty_peer").forEach(function(e){return e.innerHTML=(0,r.MailScrap_EmptyInner)("peer")})},redrawFolder:function(e){var t=store.mail,n=t.cur,a=t.scraps;n.folder;h("folder",a.folder,e),$$(".mailScrap_folder").forEach(function(e){return e.className=(0,r.MailScrap_class)("folder")}),$$(".mailScrap__empty_folder").forEach(function(e){return e.innerHTML=(0,r.MailScrap_EmptyInner)("folder")})},redrawSearch:function(){$$(".mailScrap__items_search").forEach(function(e){return e.innerHTML=(0,r.MailScrap_ItemsInner)("search")}),$$(".mailScrap_search").forEach(function(e){return e.className=(0,r.MailScrap_class)("search")}),$$(".mailScrap__empty_search").forEach(function(e){return e.innerHTML=(0,r.MailScrap_EmptyInner)("search")})},redrawMRs:function(e){h("mrs",store.mail.scraps.mrs,e),$$(".mailScrap_mrs").forEach(function(e){return e.className=(0,r.MailScrap_class)("mrs")}),$$(".mailScrap__empty_mrs").forEach(function(e){return e.innerHTML=(0,r.MailScrap_EmptyInner)("mrs")})},redrawSystemMessage:A,folderSetItems:function(e){$$(".mailScrap__items_folder").forEach(function(t){return t.innerHTML=f(e,!0)}),$$(".mailScrap_folder").forEach(function(e){return e.className=(0,r.MailScrap_class)("folder")}),$$(".mailScrap__empty_folder").forEach(function(e){return e.innerHTML=(0,r.MailScrap_EmptyInner)("folder")})},folderAddItems:function(e){$$(".mailScrap__items_folder").forEach(function(t){return t.insertAdjacentHTML("beforeend",f(e))})},folderCutItems:function(e){$$(".mailScrap_folder .mailScrap__items").forEach(function(t){[].slice.call(t.children).slice(e).forEach(function(e){return t.removeChild(e)})})},peerAddElemAfter:function(e,t){var n=$(".mailScrap__items_peer");if(!n)return;var a=ceFromString(d([e],!0));n.appendChild(t),(0,o.default)(t,a),p("peer")},peerAddItemsBefore:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p("peer"),e=e.filter(unique).filter(function(e){return!$(".msg_id_".concat(e))});var n=a.Messenger.getConvoBody();n.scrollHeight,n.scrollTop,n.offsetHeight;window._preventedCheckTop=!0,setTimeout(function(){return window._preventedCheckTop=!1});var i=d(e,t),r='\n    <div class="load_before load_before_closed">\n      '.concat(i,"\n    </div>\n  ");return $$(".mailScrap__items_peer").forEach(function(e){return e.insertAdjacentHTML("afterbegin",r)}),void uMessenger.expandPeerBefore()},peerAddItemsAfter:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];arguments.length>2&&arguments[2];e=e.filter(unique).filter(function(e){return!$(".msg_id_".concat(e))}),$$(".mailScrap__items_peer").forEach(function(n){n.insertAdjacentHTML("beforeend",d(e,t))}),p("peer"),(0,i.resizePosters)()},peerReplaceItems:function(e){e.forEach(function(e){var t=$(".msg_id_".concat(e)),n=ceFromString(d([e],!0));(0,o.default)(t,n)}),(0,i.resizePosters)()},peerSetItems:function(e){e=e.filter(unique),$$(".mailScrap__items_peer").forEach(function(t){return t.innerHTML=d(e)})},peerGoToBottom:function(){var e=a.Messenger.getConvoBody();e.scrollTop=e.scrollHeight},removeDivider:u,checkDivider:function(){var e=last($(".mailScrap__items_peer").children);e&&e.classList.contains("msg__newMsgsDivider")&&u()}}),uVK.onReady(function(){if(store.mail&&store.mail.scraps){var e=store.mail.scraps;c.folder=e.folder.slice(),c.search=e.search.slice(),c.peer=e.peer.slice()}});var c={folder:[],search:[],peer:[]};function u(){remove($(".msg__newMsgsDivider"))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e.filter(unique);var n,a=store.mail,i=a.cur,o=a.msgs,s=!!$(".msg__newMsgsDivider");return e.map(function(e,a){var l=o[e];return a>0&&!s&&!t&&!n.isUnread&&l.isUnread&&l.authorId!==i.viewerId?(n=l,s=!0,(0,r.MailScrap_Item)("peer",e,!0)):(n=l,(0,r.MailScrap_Item)("peer",e))}).join("")}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(e=e.filter(unique)).map(function(e){return $(".mailScrap__items_folder .convo_id_".concat(e))&&!t?"":(0,r.MailScrap_Item)("folder",e)}).join("")}function h(e,t,n){!function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[];if(!e)return;a||(e.innerHTML="",a=[]);if(0===n.length)return void(e.innerHTML="");n.forEach(function(n,i){var r=a.indexOf(n);-1===r?(a.splice(i,0,n),domInsert(e,t(n),i)):r!==i&&(a.splice(r,1),a.splice(i,0,n),before(e.children[r],e.children[i]))}),a.forEach(function(t,a){-1===n.indexOf(t)&&i.push(e.children[a])}),i.forEach(remove)}($(".mailScrap__items_".concat(e)),function(t){return(0,r.MailScrap_Item)(e,t)},t,n)}function p(e){$$(".mailScrap_".concat(e)).forEach(function(t){return t.className=(0,r.MailScrap_class)(e)})}function A(){$$(".mailScrap__systemMessage").forEach(function(e){e.innerHTML=store.mail.cur.notification||""})}},USu8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uTyping_getPeerTyping=function(e){var t=store.mail.cur.typings[e];if(!t)return null;return t.mixed||t.audio||t.text},t.uTyping_getNames=function(e){if(!e)return[];for(var t=store.mail.members,n=e.users,a=n.length,i=[],r=0;r<a;r++){var o=t[n[r]];if(o){var s=1===a?o.name:o.shortName;i.push(s)}}return i},t.default=void 0;var a;(a=n("rKUZ"))&&a.__esModule;var i=function(){};t.default=i},UWnA:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("WWoJ"))&&a.__esModule?a:{default:a}).default;t.default=i},UlUB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,a,i=!1;return function r(){if(i)return n=arguments,void(a=this);e.apply(this,arguments),i=!0,setTimeout(function(){i=!1,n&&(r.apply(a,n),n=a=null)},t)}}},UuS6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickersAnimation=void 0;var a,i=(a=n("nJnv"))&&a.__esModule?a:{default:a};var r=function(){var e,t=!1,n=!1,a={},o={},s={},l={};function c(e){var t=f(e),n=1;if(t){hasClass(e,"animation_play")||(hide(geByClass1("sticker_img",e)),addClass(e,"animation_play")),t.play();var a=attr(e,"data-loop-count");a=parseInt(a),isNaN(a)&&(a=3),-1!==a&&(!t._cbs.loopComplete||t._cbs.loopComplete&&0===t._cbs.loopComplete.length)&&t.addEventListener("loopComplete",function i(r){var o=!0;a>=++n&&(o=!1),o&&(d(e,!1),""!==t._cbs.loopComplete&&t.removeEventListener("loopComplete",i),t.stop())})}}function u(e){var t=attr(e,"data-uid");return t||(t=attr(e,"data-uid",Math.random().toString(32).substr(2))),t}function d(e,t){l[u(e)]=t}function f(e){var t=attr(e,"data-uniq-id");if(!geByClass1("svg_sticker_animation",e))return!1;var n=o[t];return n||!1}function h(e,t){var n=f(e);if(n)"function"==typeof t&&t(n);else{var r=attr(e,"data-uniq-id");if(!l[u(e)]){d(e,!0);var s=attr(e,"data-animation-path"),c=attr(e,"data-sticker-id"),h=!1;if(c&&(h=a[c]?p(e):s&&p(e)),h){var A={container:e,renderer:"svg",loop:!0,autoplay:!1,name:r,rendererSettings:{scaleMode:"noScale",progressiveLoad:!0,hideOnTransparent:!0,className:"svg_sticker_animation"}};a[c]?A.animationData=a[c]:A.path=s;var m=geByClass1("svg_sticker_animation",e);if(m&&re(m),n=i.default.loadAnimation(A),!a[c])return void n.addEventListener("data_ready",function(){a[c]=n.animationData,o[r]=n,"function"==typeof t&&t(n)})}"function"==typeof t&&(o[r]=n,"function"==typeof t&&t(n))}}}return{checkSettingsAndLoadInWeb:function(e){if(StickersSettings.getAutoplay()){var t=ge("fc_msg"+e),n=geByClass1("sticker_animation",t);r.loadAndPlaySticker(n)}},checkSettingsAndLoad:function(e){if(StickersSettings.getAutoplay()){var t=$(".msg_id_".concat(e," .sticker_animation"));r.loadAndPlaySticker(t)}},loadStickerInMvkIMAndPlay:function(e,t){var n="_msg"+e;t&&(n="msg_id_"+e);var a=geByClass1("sticker_animation",geByClass1(n));r.loadAndPlayStickerWithTimer(a,500)},loadAutoplayAnimationStickers:function(e){if(e){if(n)return;n=!0}if(!t){t=!0;var a=geByClass("sticker_animation_autoplay");a&&each(a,function(e,t){h(t,function(){c(t)})}),t=!1}},loadAndPlaySticker:function(e){e&&requestAnimationFrame(function(){h(e,function(){c(e)})})},loadAndPlayStickerWithTimer:function(e,t){if(e&&!s[e]){t||(t=1e3);var n=ge(e);hasClass(n,"sticker_animation_disabled_timer")||(s[e]=setTimeout(function(){!n&&(n=ge(e),hasClass(n,"sticker_animation_disabled_timer"))||(r.loadAndPlaySticker(n),clearTimeout(s[e]),s[e]=!1)},t))}},reloadStickers:function(){o={}},touchStartSticker:function(t){t.addEventListener("contextmenu",r.preventContextMenu,!1),e=setTimeout(function(){r.loadAndPlaySticker(t)},500)},touchEndSticker:function(){e&&clearTimeout(e)},preventContextMenu:function(e){event.preventDefault(),event.stopPropagation()}};function p(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom;return t<window.innerHeight&&n>=0&&isVisible(e)}}();t.StickersAnimation=r},UvyM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("z9sQ"))&&a.__esModule?a:{default:a},r=n("fdw3");var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.is_icon,a=e.on_click||e.onClick,o=e.use_native_onclick,s=e.inner||e.children;isArray(s)&&1===s.length&&"string"==typeof s[0]&&(s=s[0]);var l=!1;"function"==typeof a&&(o=!0,l=!0);a&&!o&&(a=["Btn._onClick","event","this",a]);var c={class:[e.class,i.default.class("Btn",{theme:e.theme||"regular",size:e.size||"",stretch:e.stretch})],onclick:a,attrs:e.attrs};l&&(c.onClick=a,delete c.onclick);var u=e.hide?"; display: none;":"",d=e.style?e.style+u:u;if(t)return(0,r.mergeObjects)(c,{tag:"a",href:t,role:"button",style:d,inner:n?s:{class:"Btn__text",inner:s},target:e.open_in_new_tab?"_blank":null});var f=e.is_submit?"submit":null,h=e.type||f;return(0,r.mergeObjects)(c,{"aria-label":e["aria-label"],tag:"button",style:d,disabled:e.disabled,type:h,inner:n?s:{class:"Btn__text",inner:s}})};t.default=o},V1Nw:function(e,t,n){"use strict";function a(e,t,n){var a=0,i=e,r=[],o=!1;function s(){!r.length||a>0||o||(t(r),r=[])}return{pause:function(){a++},resume:function(){a>0&&(a--,s())},onLp:function(e,t,a){o||(i>=e?(i=t,r.push.apply(r,a),s()):n&&(o=!0,n(i).then(function(e){var t=e[1],n=e[2];i=t,o=!1,r.push.apply(r,n),s()})))}}}n.r(t),n.d(t,"createLongpollEventsQueue",function(){return a})},V1Rh:function(e,t,n){"use strict";var a=n("UxAg");window.Pad={addContent:function(e,t){t&&(0,a.$$)(i.pad(e)).forEach(function(e){var n=e.$(i.content)||e;e.classList.remove(r.empty),n.insertAdjacentHTML("beforeend",t)})}};var i={pad:function(e){return'.Pad[data-id="'.concat(e,'"]')},content:".Pad__content"},r={empty:"Pad_empty"}},V4qE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"init",{enumerable:!0,get:function(){return r.init}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return r.close}}),Object.defineProperty(t,"SNACKBAR_TYPE_SUCCESS",{enumerable:!0,get:function(){return r.SNACKBAR_TYPE_SUCCESS}}),Object.defineProperty(t,"SNACKBAR_TYPE_ERROR",{enumerable:!0,get:function(){return r.SNACKBAR_TYPE_ERROR}}),Object.defineProperty(t,"SNACKBAR_TYPE_BOOKMARK",{enumerable:!0,get:function(){return r.SNACKBAR_TYPE_BOOKMARK}}),Object.defineProperty(t,"SNACKBAR_TYPE_BULLYING",{enumerable:!0,get:function(){return r.SNACKBAR_TYPE_BULLYING}}),t.default=void 0;var a,i=(a=n("hclJ"))&&a.__esModule?a:{default:a},r=n("40dl");var o=i.default;t.default=o,window.SnackbarItem=i.default},VAls:function(e,t,n){"use strict";var a,i=(a=n("ylz1"))&&a.__esModule?a:{default:a};window.CartOrder=new i.default},VBqm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapAudioPlay=function(e,t){var n=e.play();n&&n.catch&&n.catch(function(e){(0,a.isFunction)(t)&&t(e)})};var a=n("jE6c")},VLMK:function(e,t,n){"use strict";var a,i,r=n("z8PJ");a="",i=function(){a=nav.cur,(0,r.gemiusTrackPage)()},onDOMReady(function(){i(),window.page.onChange(function(){a!==nav.cur&&i()})})},VRji:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initAutogrow",{enumerable:!0,get:function(){return r.initAutogrow}}),t.default=void 0;var a,i=(a=n("4azy"))&&a.__esModule?a:{default:a},r=n("bvP/");var o=i.default;t.default=o},VnbJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearWorkerTimeout=function(e){if(!e)return!1;isFinite(e)?clearTimeout(e):e.terminate()}},W0P9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=o,t.warn=function(){var e;r()&&(window.console.warn?(e=window.console).warn.apply(e,arguments):o.apply(void 0,arguments))},t.error=function(){var e;r()&&(window.console.error?(e=window.console).error.apply(e,arguments):o.apply(void 0,arguments))},t.debug=function(){var e;r()&&(window.console.debug?(e=window.console).debug.apply(e,arguments):o.apply(void 0,arguments))};var a=n("W9Tc"),i="js_console_logs";function r(){return window.console&&(0,a.partConfigEnabled)(i)}function o(){var e;r()&&(window.console.log&&(e=window.console).log.apply(e,arguments))}},W0fz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPodcast=function(e){if(!e)return!1;var t=isObject(e)?e.extra:e[a.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];isObject(t)||(t=JSON.parse(t||"{}"));return!!t.podcast};var a=n("uk5P")},W12k:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.questions=this.store.questions[t]||[]}var t,n,a;return t=e,(n=[{key:"render",value:function(){return i.default.elem({class:Bem.class("Questions",{}),inner:[{class:"Questions__header",inner:[{class:"Questions__table",inner:[{class:"Questions__cell",inner:{class:"Questions__title",inner:lang.mobile_stories_question_title}}]},{class:"Questions__close",onclick:"Stories.hideQuestions();"}]},{class:"Questions__body",inner:[{class:"Questions__inner",ontouchmove:"event.stopPropagation();",inner:this.questions.map(function(e){return{class:"Question","data-id":e.id,inner:[{class:"Question__content",inner:[{href:e.author.link,class:"Question__author",inner:e.isAnonymous?lang.mobile_stories_question_anonymous:e.author.name},{class:Bem.class("Question__text",{small:e.text.length>40}),inner:e.text}]},{class:Bem.class("Question__actions",{published:e.isPublished}),inner:lang.mobile_stories_question_actions,onclick:["Stories.openQuestionActions",e.id]}]}})}]}]})}}])&&r(t.prototype,n),a&&r(t,a),e}();t.default=o},W38l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e,t){var n=Date.now(),a=(0,i.getNetworkType)(),s=r.default.isLongPollingEnabled(),l={action:t,startTime:n,networkType:a,lpState:s};o[e]=l},t.mark=function(e,t){if(!o[e])return;var n=o[e],a=n.startTime,i=n.action,r=n.lpState,s=n.networkType;statlogsValueEvent("mvk_mail_send_time",Date.now()-a,i,t,r,s)},t.error=function(e,t,n){if(!o[e])return;var a=o[e],i=a.action,r=a.lpState,s=a.networkType;statlogsValueEvent("mvk_mail_send_error",0,i,t,n,r,s)},t.clean=function(e){delete o[e]},t.logQueueSize=function(e){statlogsValueEvent("mvk_mail_send_queue_size",e,(0,i.getNetworkType)())};var a,i=n("jE2t"),r=(a=n("WwUR"))&&a.__esModule?a:{default:a};var o={}},WCKs:function(e,t,n){"use strict";var a,i=n("UxAg"),r=(a=n("p5n7"))&&a.__esModule?a:{default:a};var o=need("Btn"),s=need("Control"),l=window.Join||(window.Join={});l._onCountryChange=d,l._onPhoneChange=f,l._onTermsAcceptChange=f;var c={eu:"Join_eu"},u={join:".Join",phone:".Join__phone",accept:".Join__accept",submit:".Join__submit"};function d(e){var t=e.$option,n=(0,i.$)(u.join),a="1"===t.getAttribute("data-eu");n.classList.toggle(c.eu,a);var o=(0,i.$)(u.phone),l=t.value;r.default.setPrefix(o,l),cur.calledPhoneExcludeCountries&&val((0,i.$)(".join_desc"),getLang(-1==indexOf(cur.calledPhoneExcludeCountries,t.getAttribute("data-id"))?"mobile_join_about_phone_with_call":"mobile_join_about_phone")),(0,i.$$)(u.accept).forEach(function(e){return s.setChecked(e,!1)}),f()}function f(){var e=Array.prototype.slice.call((0,i.$$)(u.accept)),t=(0,i.$)(u.phone),n=(0,i.$)(u.submit);if(n){var a=e.some(s.isChecked)&&r.default.getValue(t).trim().length>0;o.setDisabled(n,!a)}else(n=(0,i.$)('.button[type="submit"]')).disabled=!s.isChecked(e[0])}},WDxS:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("QD50"))&&a.__esModule?a:{default:a}).default;t.default=i},WS06:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Notifications=l,t.default=void 0;var a=n("QWOa"),i=n("CjAb"),r=n("NJ1W"),o=n("80md"),s=n("/xuI");function l(e){for(var t=Math.ceil((window.innerHeight-s.HEADER_HEIGHT)/170),n=[],l=0;l<t;l++)n.push((0,a.NotificationBlock)());return{inner:[(0,i.Header)({hideIcon:!0}),{inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,o.Line)()],grow:3}),(0,r.Col)({grow:2}),(0,r.Col)({inner:[(0,o.Line)()],grow:2})]})],class:"SkeletonNotifications__info",tag:"div"},n],class:"SkeletonNotifications Skeleton",tag:"div"}}var c=l;t.default=c},WTJf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OvalIsHidden=i,t.default=void 0;var a=function(e){return Wd.html({class:[Bem.class("Oval",{type:e.gray?"minor":e.type,hidden:i(e.value)}),e.mix],inner:e.value})};function i(e){return!e||e<=0}t.default=a},WWoJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Row=o,t.default=void 0;var a=r(n("8ZMO")),i=(r(n("p5n7")),r(n("I7Du")),r(n("9y81")));function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.anchor,n=e.attrs||{},r=e.style||{},o=e.url,s=o&&!r.no_go_icon;return{class:[e.mix||e.class,Bem.class("Row",{go:s,style_withBorder:r.with_border,style_withBorderForce:r.with_border_force,style_withHover:r.with_hover,style_smallPaddings:r.small_paddings,style_noPaddingTop:r.no_padding_top,style_noPaddingBottom:r.no_padding_bottom,style_tinyPaddingTop:r.tiny_padding_top,style_tinyPaddingBottom:r.tiny_padding_bottom,paddingTop_short:r.padding_top_short})],tag:e.tag||null,href:o,attrs:n,inner:[t?(0,a.default)({id:t}):null,s?Wd.wrap((0,i.default)({mix:"Row__go",icon:"chevron_right"})):null,e.content||e.inner]}}var s=o;t.default=s},WeE2:function(e,t,n){"use strict";var a=d(n("zEUu")),i=n("OcsD"),r=n("Ogzf"),o=d(n("TYsd")),s=function(e){if(e&&e.__esModule)return e;var t=u();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("t7Ww")),l=d(n("r/ag")),c=(d(n("29dZ")),n("QWbq"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var p={drag:{curEl:null},cachedPhoto:{}};window.ThumbsEdit={initialized:!1,_init:function(){onDOMReady(function(){window.ThumbsEdit.init(!1),page.onChange(function(){window.ThumbsEdit.init(!1,"/wall")})})},init:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nav.path;if(e||(e=$("#feed_add_form .cp_attached_wrap")),!e||0!==n.indexOf("/wall"))return this.initialized=!1,removeClass(document.body,"te_i"),void(p.destroyLongpress&&p.destroyLongpress());if(addClass(document.body,"te_i"),!geByClass1("ThumbsEdit",e)){var a=(0,i.ceFromString)(o.default.html({class:"ThumbsEdit",style:"width: 100%; height: 100%",id:"ThumbsEdit"})),r=(0,i.ceFromString)(o.default.html({class:["ThumbsEdit-wrap"," _preventMenuOpen"],inner:a}));r.appendChild(a),e.insertBefore(r,e.firstChild),p=h({},p,{previews:[],loaders:{},attachEl:a});var s=this.parsePreviews((0,i.getPreloadData)());this.initialized=!0,s.length&&(p.previews=s,this.draw(),(0,i.onBodyResize)(function(){return t.draw()}))}},parsePreviews:function(e){return e.map(function(e){return c.convert.apply(void 0,f(e))}).filter(function(e){var t=e.type;return(0,c.isValidThumbType)(t)})},draw:function(){var e=this,t=p,n=t.previews,a=t.attachEl,i=n[0]?(0,c.getRatio)(n[0]):c.THUMBS_CONTAINER_DEFAULT_RATIO,r={width:a.parentNode.offsetWidth,height:Math.min(Math.round(a.parentNode.offsetWidth/i),360),wide:!0},o=(0,c.processThumbs)(r.width,r.height,n,r),s=o.thumbs,l=o.height,u=o.width;p=h({},p,{thumbs:s,height:l,options:r});var d=document.createDocumentFragment();s.forEach(function(t,n){d.appendChild(e.createThumbEl(t,n))}),this.updateIds();var f=ce("div");f.id="ThumbsEdit-splitter",val(a,""),a.style.width=u+"px",a.parentNode.style.height=l+"px",a.appendChild(d),ge("ThumbsEdit-splitter")||a.parentNode.appendChild(f),mediaUpload.refreshUploadState(),this.updatePhotos()},update:function(e,t){var n=this;if(e=ge(e)){var a=e.id,r=ge(a),s=p.thumbs,l=p.height,u=p,d=u.options,f=u.drag,h=t[0]?(0,c.getRatio)(t[0]):c.THUMBS_CONTAINER_DEFAULT_RATIO,A=d.width,m=d.height;A&&m||(A=e.parentNode.offsetWidth,m=Math.min(Math.round(A/h),360)),d.width=A,d.height=m,d.wide=!0;var _=(0,c.processThumbs)(A,m,t,d),v=_.thumbs,g=_.height,y=_.width,b=(0,i.ceFromString)(o.default.html({class:"ThumbsEdit",style:"width: ".concat(y,"px; height: ").concat(g,"px; position: fixed; left: ").concat(f.wpos[0],"px; top: ").concat(f.wpos[1],"px; visibility: hidden")}));v.forEach(function(e,t){b.appendChild(n.createThumbEl(e,t,!0))}),document.body.appendChild(b);var w=this.getCoords(b,f.wpos);re(b),w.forEach(function(e,t){var n=p.drag.coords.find(function(t){return t.id===e.id});if(n){var a=geByClass1("Thumb",n.node),r=$("img",a),o=s[n.index],l=v.find(function(e){return e.id===o.id});p.drag.toIndex!==t&&i.setStyle.transform(a,1,[0,0]),n.height===e.height&&e.x===n.x&&e.y===n.y&&n.index!==p.drag.i||setTimeout(function(){i.setStyle.animate(a,"margin-left, margin-top, height, width, opacity, transform",{duration:c.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,i.setStyle)(a,{"margin-left":0,"margin-top":0,height:e.height,width:e.width,opacity:1}),i.setStyle.transform(a,1,[e.x-n.x,e.y-n.y]),i.setStyle.animate(a.parentNode,"background",{duration:c.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,i.setStyle)(a.parentNode,{func:"ease-in",background:"transparent"});var t=(0,c.crop)(l,e.width,e.height);r&&(i.setStyle.animate(r,Object.keys(t).join(),c.THUMB_DRAG_ANIMATION_DURATION+"ms"),(0,i.setStyle)(r,t))})}}),l!==g&&setTimeout(function(){[r,r.parentNode].forEach(function(e){i.setStyle.animate(e,"height",{duration:c.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,i.setStyle)(e,{height:g})})}),y>=A&&(i.setStyle.animate(r,"width",{duration:c.THUMB_DRAG_ANIMATION_DURATION+"ms"}),(0,i.setStyle)(r,{width:y})),setTimeout(function(){(0,i.setStyle)(r,{width:y}),p.thumbs=v,p.previews=t,p.height=g;var e=document.createDocumentFragment();v.forEach(function(t,a){e.appendChild(n.createThumbEl(t,a))}),r.innerHTML="",r.appendChild(e),p.drag.updating=!1,n.updatePhotos()},c.THUMB_DRAG_ANIMATION_DURATION)}else console.error("empty el to update")},createThumbEl:function(e,t){var n=e.image,s=e.width,l=e.height,u=e.type,d=(0,c.crop)(e,s,l),f=["Thumb-wrap","".concat("Thumb-wrap","--").concat(u)],h=0===e.id.indexOf("phototemp_"),A=h||s<=30||l<=60;h&&f.push("".concat("Thumb-wrap","--temp")),e.lastColumn&&f.push("last_column"),e.lastRow&&f.push("last_row");var m=p.previews[t],_=null;m.label&&(_=o.default.wrap(m.label));if(h&&m.orientation>1){var v=(s-l)/2;"\n        position: absolute;\n        right: ".concat(v,"px;\n        bottom: ").concat(-v,"px;\n        height: ").concat(s,"px;\n        width: ").concat(l,"px;\n       ")}var g=this.getCached(e.id,n.src);this.cachePhoto(e.id,n.src);var y=[{tag:"img",src:g?g.src:n.src,width:"".concat(Math.round(d.width)),height:"".concat(Math.round(d.height)),style:"margin-left: ".concat(d.marginLeft,"px; margin-top: ").concat(d.marginTop,"px;")},{class:"Thumb__overlay",inner:[!A&&{class:"Thumb__overlay-closeBtn",onclick:"ThumbsEdit.remove(null, ".concat(t,")")},_]},{tag:"input",type:"hidden",name:"attach"+(t+1)+"_type",value:u},{tag:"input",type:"hidden",name:"attach"+(t+1),value:e.id.slice(u.length,e.id.length)}];if(h){var b,w=Math.min(Math.min((d.width-24)/2,30),Math.min((d.height-24)/2,30));p.loaders[e.id]&&(b=p.loaders[e.id]);var E=a.default.init(b,w),k=E.component,S=E.id;p.loaders[e.id]=S,y.push(k)}var C=(0,i.ceFromString)(o.default.html({class:"Thumb",style:"width: ".concat(Math.round(s),"px; height: ").concat(Math.round(l),"px"),inner:y})),M=(0,i.ceFromString)(o.default.html({class:f.join(" "),style:"width: ".concat(Math.round(s),"px; height: ").concat(Math.round(l),"px"),"data-media":e.id,"data-index":t,"data-upload":m.upload}));return p.destroyLongpress=(0,r.onLongpress)(C,350,this.startDrag.bind(this,C)),addEvent(M,"click",this.showPopup.bind(this)),M.appendChild(C),M},addTempPreview:function(e){var t;if(p.attachEl){var n=this.parsePreviews([e]);(t=p.previews).push.apply(t,f(n)),this.draw()}},replaceTemp:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=p.previews.findIndex(function(t){return t.ownerId===e}),o=p.previews[r],s=t.split("_").ownerId,l=t.split("_").itemId;o.ownerId=s,o.owner_id=s,o.itemId=l,o.temp=!1,o.upload=e,o.list=n,o.photo.sizes=i,o.photo.id="photo"+t,o.photo.pid=l,o.data=o.photo,a.default.ready(p.loaders["phototemp_"+e]),this.draw()},onUploadProgress:function(e,t){a.default.update(p.loaders["phototemp_"+e],t)},preventScroll:function(e){preventEvent(e)},startDrag:function(e,t){if(addEvent(window,"touchmove",this.preventScroll),e.classList.contains("Thumb")&&!e.classList.contains("Thumb--moving")){window.navigator.vibrate&&navigator.vibrate(50),(0,i.setStyle)(document.body,"overflow","hidden"),(0,i.setStyle)(document.body,"max-height","100%"),(0,i.setStyle)(document.body,"user-select","none");var n=this.onDrag.bind(this),a=this.onDrop.bind(this);addEvent(window,"mousemove touchmove",n),addEvent(window,"mouseup touchend touchcancel",a),statlogsValueEvent("mvk_thumb_edit_interaction",""),p.drag=h({},p.drag,{curEl:e,curIndex:e.parentNode.dataset.index,dragListener:n,dropListener:a});var r=e.offsetWidth>=40&&e.offsetHeight>=80,o=e.parentNode.parentNode,s=$("img",e),l=intval(e.parentNode.getAttribute("data-index")),u=p.thumbs[l],d=getXY(o),f=getXY(e.parentNode),A=this.getCoords(o,d);p.drag.id=o.id,p.drag.i=l,p.drag.toIndex=l,p.drag.x=(t.pageX||t.detail.pageX)-f[0],p.drag.y=(t.pageY||t.detail.pageY)-f[1],p.drag.t=u,p.drag.w=u.width,p.drag.h=u.height,p.drag.pos=f,p.drag.wpos=d,p.drag.crop=(0,c.crop)(u,u.width,u.height),p.drag.coords=A,p.drag.needScale=r;var m=r?(0,c.scale)(u.width,u.height,.9*e.offsetWidth,.9*e.offsetHeight):[u.width,u.height],_=m[0],v=m[1],g=intval((u.width-_)*(browser.android?.5:p.drag.x/u.width)),y=intval((u.height-v)*(browser.android?.5:p.drag.y/u.height));addClass(e,"Thumb--moving"),(0,i.setStyle)(e,{zIndex:100}),(0,i.setStyle)(e.parentNode,{zIndex:100});var b=(0,c.crop)(u,_,v);(0,i.setStyle)(e,{opacity:.75,width:_,height:v,marginLeft:g,marginTop:y}),s&&(0,i.setStyle)(s,b),p.drag.state=!0}},onDrag:function(e){var t=p.drag.curEl;if(e.touches&&e.touches.length>1)return this.drop();var n=this._getClickCoord(e),a=n.x,r=n.y,o=p.drag,s=a-(o.pos[0]+o.x),l=r-(o.pos[1]+o.y);i.setStyle.transform(t,1,[s,l]);var u=o.wpos;s=o.pos[0]+intval(t.style.marginLeft)+s-u[0],l=o.pos[1]+intval(t.style.marginTop)+l-u[1];var d=s,f=l,h=(t.offsetWidth,t.offsetHeight,o.i),A=!1,m=o.i,_=-1,v=window.innerWidth>=480?c.THUMBS_MESH_GAP_MVK:c.THUMBS_MESH_GAP_MVK_SMALL,g={};if(o.coords.forEach(function(e,t){if(t!==o.i&&t!==_){e.offsetX=e.node.offsetWidth+v,e.offsetY=e.node.offsetHeight+v;var n=o.coords[t-1],a=o.coords[t+1],r=d+o.x,s=f+o.y,l=e.x+e.offsetX/2,c=e.y+e.offsetY/2,u=e.x+e.offsetX,p=e.y+e.offsetY,y=(n&&n.x===e.x&&n.y!=e.y&&0!=e.y||a&&a.x===e.x&&a.y!=e.y)&&0!=e.x,b=r>=l&&(a&&(r<=a.x+a.offsetX/2&&(a.offsetY===e.offsetY||r<u)||a.y!=e.y)||!a&&d<=u)&&s>e.y&&s<p,w=r<l&&r>=e.x&&(!n||n.y!=e.y&&!(n.x===e.x&&!a))&&s>e.y&&s<p,E=y&&s>=c&&s<p&&r>e.x&&r<u,k=y&&s<c&&s>=e.y&&r>e.x&&r<u;b=b&&!y,w=w&&!y&&!b,(b||w||E||k)&&(A=!0,m=e.index<o.i&&(b||E)?e.index+1:h<e.index&&(k||w)?e.index-1:e.index),m!==o.i?(i.setStyle.transform(e.node,1,[b?-5:w?5:0,E?-5:k?5:0]),b?(g.side="right",g.toIndex=e.index):w&&(g.side="left"),E?(g.side="down",g.toIndex=e.index):k&&(g.side="up")):i.setStyle.transform(e.node,1,[0,0]),b&&a&&a.y===e.y&&a.x>e.x&&h>e.index&&(i.setStyle.transform(e.node,1,[0,0]),i.setStyle.transform(e.node,1,[0,0]),i.setStyle.transform(a.node,1,[5,0]),_=t+1,g.side="left",g.toIndex=m),E&&a&&a.x===e.x&&a.y>e.y&&s<=c&&(i.setStyle.transform(a.node,1,[0,0]),_=t+1),k&&n&&n.x===e.x&&n.y<e.y&&s<=c&&(i.setStyle.transform(n.node,1,[0,-5]),i.setStyle.transform(e.node,1,[0,0]),g.side="down",g.toIndex=n.index),m===t&&"number"!=typeof g.toIndex&&(g.toIndex=e.index)}}),g&&(!o.split||o.split.toIndex!==g.toIndex||o.split.side!==g.side)){var y=ge("ThumbsEdit-splitter");if((0,i.setStyle)(y,{opacity:0}),o.split=g,"number"==typeof g.toIndex){var b=o.coords[g.toIndex].node,w=v===c.THUMBS_MESH_GAP_MVK_SMALL;"left"===o.split.side&&(0,i.setStyle)(y,{left:Math.max(0,b.offsetLeft-(w?0:1)),top:b.offsetTop+8,height:b.offsetHeight-16,width:"2px",opacity:1}),"right"===o.split.side&&(0,i.setStyle)(y,{left:Math.min(b.offsetLeft+b.offsetWidth-(w?2:1),p.options.width-2),top:b.offsetTop+8,height:b.offsetHeight-16,width:"2px",opacity:1}),"up"===o.split.side&&(0,i.setStyle)(y,{left:b.offsetLeft+8,top:b.offsetTop,height:"2px",width:b.offsetWidth-16,opacity:1}),"down"===o.split.side&&(0,i.setStyle)(y,{left:b.offsetLeft+8,top:b.offsetTop+b.offsetHeight-1,height:"2px",width:b.offsetWidth-16,opacity:1})}}return o.toIndex=A?m:o.i,cancelEvent(e)},onDrop:function(e){var t=p.drag;t.state=!1,t.updating=!0;var n=t.curEl,a=$("img",n),r="touchcancel".split(" ").includes(e.type);if(removeEvent(window,"mousemove touchmove",t.dragListener),removeEvent(window,"mouseup touchend touchcancel",t.dropListener),removeEvent(window,"touchmove",this.preventScroll),document.body.contains(t.curEl)){if((0,i.setStyle)(document.body,"overflow",null),(0,i.setStyle)(document.body,"max-height",null),(0,i.setStyle)(document.body,"user-select",null),i.setStyle.transform(n.parentNode,1,[0,0]),t.split)delete t.split,ge("ThumbsEdit-splitter").removeAttribute("style");if(!hasClass(n,"Thumb--moving"))return t.updating=!1,cancelEvent(e);if(r){var o=t.coords[t.toIndex].node;i.setStyle.transform(o,1,[0,0])}if(t.toIndex===t.i||r){var s=t.crop;i.setStyle.animate(n,"transform, margin-top, margin-left, width, height, opacity",{duration:"100ms"},function(){removeClass(n,"Thumb--moving")}),i.setStyle.animate(a,"transform, margin-top, margin-left, width, height, opacity",{duration:"100ms"});var l=p.thumbs[t.i];i.setStyle.transform(n,1,[0,0]),(0,i.setStyle)(n,{"margin-top":0,"margin-left":0,width:l.width,height:l.height,opacity:1,zIndex:null}),(0,i.setStyle)(n.parentNode,{zIndex:null}),a&&(0,i.setStyle)(a,s)}else{var u=p.previews;u=(0,c.move)(u,t.i,t.toIndex),this.update(t.id,u)}return cancelEvent(e)}},getCoords:function(e,t){var n=[];return t=t||getXY(e),f(Array.from(e.childNodes||[])).forEach(function(e,a){var i=getXY(e);n[a]={id:e.getAttribute("data-media"),x:intval(i[0]-t[0]),y:intval(i[1]-t[1]),width:intval(e.offsetWidth),height:intval(e.offsetHeight),index:intval(e.getAttribute("data-index")),node:e}}),n},remove:function(e,t){var n=p.previews[t];e&&l.default.close(e.target),mediaUpload.reset(null,null,n.remove,function(){p.previews=p.previews.filter(function(e,n){return n!==t}),ThumbsEdit.draw()})},showPopup:function(e){var t=e.target;if(!p.drag.state&&!t.classList.contains("Thumb--moving")&&!t.classList.contains("Thumb__overlay-closeBtn")){e.cancelable&&cancelEvent(e);var n=t.closest(".Thumb-wrap").getAttribute("data-index"),a=(0,i.ceFromString)(o.default.html(this.getPopup(n)));s.default.open(a,!0)}},getPopup:function(e){var t=p.previews[e],n=null;switch(t.type){case"doc":n='\n          Gif.openPopup(null, null, {\n            raw: "'.concat(t.doc.id.slice(3,t.doc.id.length),'",\n            hasVideo: ').concat(Gif.isMp4Support(),"\n          });\n          Popup.close(this);\n        ");break;case"photo":n='\n          photo.zopen(null, null, "'.concat(t.data.id.slice(5,t.data.id.length),'", "').concat(t.list,'", {\n            hideOverlay: true,\n            single: true,\n          });\n          Popup.close(this);\n        ')}var a=(0,s.ModalMenuBtn)({inner:getLang("mobile_delete"),onclick:"ThumbsEdit.remove(event, ".concat(e,")")}),i=null;return n&&!t.temp&&(i=(0,s.ModalMenuBtn)({inner:getLang("mobile_open"),onclick:"".concat(n)})),(0,s.default)({class:"ThumbsEdit__modal",close:!0,items:[i,a]})},_getClickCoord:function(e){return{x:e.touches?e.touches[0].pageX:e.pageX,y:e.touches?e.touches[0].pageY:e.pageY}},cachePhoto:function(e,t,n){var a=ce("img");if(a.src=t,p.cachedPhoto[e]){var i=p.cachedPhoto[e].find(function(e){return e.src===t});i?n&&n(i.src):a.onload=function(){p.cachedPhoto[e].push({width:a.width,height:a.height,src:t}),p.cachedPhoto[e].sort(function(e,t){return e.width>t.width?-1:e.width<t.width?1:0}),n&&n(t)}}else p.cachedPhoto[e]=[]},updatePhotos:function(){var e=this;p.thumbs.forEach(function(t){var n=$("[data-media=".concat(t.id,"] img"));n.src!==t.image.src&&e.cachePhoto(t.id,t.image.src,function(e){n.src=e})})},getCached:function(e,t){var n=ce("img");return n.src=t,n.complete?t:p.cachedPhoto[e]&&0!==p.cachedPhoto[e].length?p.cachedPhoto[e].find(function(e){var t=e.src,n=ce("img");return n.src=t,n.complete}):null},getThumbsCount:function(){return(p.thumbs||[]).length},updateIds:function(){var e=$$(".mr_x_wrap"),t=this.getThumbsCount()+1;e.forEach(function(e,n){var a=$$("input",e),i=t+n;a[0].name="attach".concat(i,"_type"),a[1].name="attach".concat(i)})}}},WgE6:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=Object.assign({},{tick:100,onEnd:function(){},onTick:function(){},onStart:function(){},onPause:function(){},onStop:function(){}},n);this.left=t,this.initialTime=t,this.tick=a.tick,this.onEnd=a.onEnd,this.onTick=a.onTick,this.onStart=a.onStart,this.onPause=a.onPause,this.onStop=a.onStop,this.started=!1}var t,n,i;return t=e,(n=[{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.started&&(this.pause(e),this.left=this.initialTime,e||this.onStop())}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.timer&&(this.timer=clearInterval(this.timer),this.started=!1,e||this.onPause())}},{key:"start",value:function(){var e=this;if(this.started)return!1;var t=new Date(Date.now()+this.left).getTime();this.started=!0,this.timer=setInterval(function(){var n=(new Date).getTime();e.left=t-n,e.left<=0?(e.onTick(0),e.onEnd(),e.stop(!0)):e.onTick(e.left)},this.tick),this.onStart()}},{key:"isStarted",value:function(){return this.started}},{key:"getTimeLeft",value:function(){return this.left}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},WwUR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=n("OcsD"),r=(a=n("+cqQ"))&&a.__esModule?a:{default:a},o=n("Ep6I"),s=n("V1Nw"),l=n("BxOC"),c=n("f01n");var u={onNewMsg:(0,r.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags, isService }"),onEditMsg:(0,r.default)("{ peerId, msgId, authorId, text, date, hasAttachments, flags }"),onMsgReadByMe:(0,r.default)("msgId","dialogId"),onMsgReadByOther:(0,r.default)("msgId","dialogId"),onOnlineChange:(0,r.default)("{ userId, isOnline, onlinePlatform, lastActionTime }"),onTyping:(0,r.default)("dialogId","authorId"),onMultiTyping:(0,r.default)("peerId","userIds","totalCount"),onRecordingAudio:(0,r.default)("peerId","userIds","totalCount"),onMsgImportantRemove:(0,r.default)("msgId"),onMsgImportantAdd:(0,r.default)("msgId"),onMsgRequestChange:(0,r.default)("peerId","type"),onMsgRemove:(0,r.default)("msgId"),onMsgListen:(0,r.default)("msgId"),onMsgRestore:(0,r.default)("msgId"),onPeerKeyboard:(0,r.default)("peerId"),onPeerBanner:(0,r.default)("peerId"),onPeerConvert:(0,r.default)("peerId","convertId"),onPeerAdmin:(0,r.default)("peerId","userId","isAdmin"),onDialogImportant:(0,r.default)("peerId","isImportant"),onDialogRemove:(0,r.default)("peerId"),onUnreadCount:(0,r.default)("count"),onResync:(0,r.default)(),_onLpEvents:(0,r.default)("Array<Object>"),init:function(e){u._lpConnect&&(u._onLpEvents.off(),u._lpConnect.stopConnection(),u._lpQueue=null,u._lpConnect=null),u._lpConfig=e},isLongPollingEnabled:function(){return!(!u._lpConnect||u._lpConnect.isStopped())},on:function(){clog("[longpoll] start"),window.addEventListener("online",f),window.addEventListener("offline",f),u._lpConnect?u._lpConnect.reinitConnection():u._createLongpoll(u._lpConfig)},off:function(){clog("[longpoll] stop"),window.removeEventListener("online",f),window.removeEventListener("offline",f),u._lpConnect&&u._lpConnect.stopConnection()},pause:function(){clog("[longpoll] pause"),u._lpQueue&&u._lpQueue.pause()},resume:function(){clog("[longpoll] resume"),u._lpQueue&&u._lpQueue.resume()},abortWaiting:function(){clog("[longpoll] abort waiting"),u._lpConnect.abortWaiting()},_createLongpoll:function(e){if(!u._lpConnect){var t=(0,s.createLongpollEventsQueue)(e.ts,function(e){u._onLpEvents(e)}),n=(0,o.createLongpollConnect)(e,{onEvents:function(e,n,a){a.forEach(function(a){t.onLp(e,n,[a])})},onHistoryLost:function(){clog("[longpoll] ts expired")},onKeyExpired:function(e){return clog("[longpoll] key expired"),(0,l.post)("/mail",{act:"get_key",user_id:e.id})},onLpBroken:function(){clog("[longpoll] broken, reload"),window.location.reload()}});u._lpQueue=t,u._lpConnect=n,u._onLpEvents(function(e){try{e.forEach(u._onEvent)}catch(e){console.error(e)}})}},_onEvent:function(e){var t=e.type;switch(t){case c.REPLACE_FLAGS:var n=e.flags,a=e.messageId;e.peerId;n&c.FLAG_IMPORTANT?u.onMsgImportantAdd(a):u.onMsgImportantRemove(a),n&c.FLAG_DELETED||n&c.FLAG_SPAM?u.onMsgRemove(a):u.onMsgRestore(a);break;case c.SET_FLAGS:var r=e.flags,o=e.messageId,s=e.peerId;r&c.FLAG_IMPORTANT&&u.onMsgImportantAdd(o),(r&c.FLAG_DELETED||r&c.FLAG_SPAM)&&u.onMsgRemove(o,s),r&c.FLAG_AUDIO_MESSAGE_LISTENED&&u.onMsgListen(o);break;case c.RESET_FLAGS:var l=e.flags,d=e.messageId;e.peerId;l&c.FLAG_IMPORTANT&&u.onMsgImportantRemove(d),(l&c.FLAG_DELETED||l&c.FLAG_SPAM)&&u.onMsgRestore(d);break;case c.ADD_MESSAGE:case c.EDIT_MESSAGE:case c.REPLACE_MESSAGE:var f=e.messageId,h=e.peerId,p=e.randomId,A=e.text,m=e.flags,_=e.attaches,v=e.kludges,g=e.date,y=(0,i.toInt)(v.from_admin)||null,b=function(e){if(e.flags&c.FLAG_OUTBOUND)return u._lpConfig.id;return e.userId}(e),w=!!v.source_act,E=t===c.EDIT_MESSAGE||t===c.REPLACE_MESSAGE,k=m&c.FLAG_OUTBOUND,S=!!(m&c.FLAG_STEALTH),C=v.keyboard,M=function(e,t){t&c.FLAG_HAS_REPLY&&function(e){e.fwd_count}(e)}(v,m),P={peerId:h,id:f,authorId:b,attaches:_,text:A,ts:g,flags:m,adminId:y,randomId:p,isService:E?void 0:w,edited:!!E||void 0,replaced:t===c.REPLACE_MESSAGE,keyboard:C,isStealth:S,isOut:k,hasReply:M};E?u.onEditMsg(P):u.onNewMsg(P);break;case c.READ_INBOUND:case c.READ_OUTBOUND:var T=e.peerId,D=e.upToId;e.unread;t===c.READ_INBOUND?u.onMsgReadByMe(D,T):u.onMsgReadByOther(D,T);break;case c.GOT_ONLINE:case c.GOT_OFFLINE:var I=e.userId,x=e.platform,O=(e.reason,e.lastSeenTs),B="mobile";x&&6!==x&&7!==x||(B="desktop"),u.onOnlineChange({userId:I,isOnline:t===c.GOT_ONLINE,onlinePlatform:B,lastActionTime:O});break;case c.RESET_DIRECTORIES:case c.SET_DIRECTORIES:var L=e.mask,R=e.peerId;e.local;L&c.FOLDER_IMPORTANT&&u.onDialogImportant(R,t===c.SET_DIRECTORIES);break;case c.REPLACE_DIRECTORIES:var N=e.mask,j=e.peerId;e.local;u.onDialogImportant(j,!!(N&c.FOLDER_IMPORTANT));break;case c.DELETE_DIALOG:var F=e.peerId;u.onDialogRemove(F);break;case c.CONVERSATION_UPDATED:var H=e.peerId,V=e.updateType,U=e.updateArg;if(11===V&&u.onPeerKeyboard(H),10===V&&u.onPeerBanner(H),13===V&&u.onPeerConvert(U,H),12===V){var z="";switch(U){case 3:z="created";break;case 2:z="rejected";break;case 1:z="accepted";break;case 0:z="canceled"}u.onMsgRequestChange(H,z)}3===V&&u.onPeerAdmin(H,U,!0),9===V&&u.onPeerAdmin(H,U,!1);break;case c.TYPING:var W=e.peerId,q=e.userIds,G=e.totalCount;e.ts;u.onMultiTyping(W,q,G);break;case c.RECORDING_AUDIO:var $=e.peerId,Y=e.userIds,Q=e.totalCount;e.ts;u.onRecordingAudio($,Y,Q);break;case c.VIDEO_CALL:break;case c.UNREAD_COUNT:var X=e.count,K=e.countNotMuted,J=e.showOnlyNotMuted;u.onUnreadCount(J?K:X);break;case c.NOTIFY_SETTINGS_CHANGED:break;case c.RESYNC:u.onResync()}}},d=u;function f(e){"online"===e.type?(clog("[longpoll] online"),u._lpConnect.reinitConnection()):(clog("[longpoll] offline"),u._lpConnect.stopConnection())}t.default=d},XBHu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioAds=void 0;var a=n("lkNA"),i=n("rEJs"),r=n("W0fz"),o=n("VnbJ"),s=n("YvCB");function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isPlaying=!1,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=t||{},this.playerVersion=n||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(a),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}var t,n,c;return t=e,(n=[{key:"isPlaying",value:function(){return this._isPlaying}},{key:"setAdsConfig",value:function(e){this._adsConfig=e}},{key:"getCurrentProgress",value:function(){return this._adsCurrentProgress}},{key:"getDuration",value:function(){return this._duration}},{key:"loadAdman",value:function(t){var n=this,i=function(e){return t&&t(e)};if(this._admanLoaded)i();else{var r=0;(0,a.loadScript)(e.ADMAN_SRC,{onLoad:function(){n._admanLoaded=!0,i()},onError:function(){window.abp?(n._admanLoaded=!0,i()):(3===(r+=1)&&(n._admanLoaded=!0),i("script_load_fail"))}})}}},{key:"_fetchAd",value:function(t,n,a,r,o){var s=this;this.loadAdman(function(l){if(!window.AdmanHTML)return s._sendEvent("no_adman",n,e.AD_TYPE,l),r&&r();s._adman=new AdmanHTML;var c={_SITEID:276,ver:251116,vk_id:vk.id,duration:t.duration,content_id:u(t.ownerId,t.id),vk_catid:e.CAT_IDS[n]||e.CAT_IDS.other};extend(c,t.ads||{}),nav.objLoc&&nav.objLoc.preview&&(c.preview=intval(nav.objLoc.preview)),cur.adsPreview&&(c.preview=1,c.vk_id=398724832),s._adman.setDebug(!!c.preview),s._adman.onError(function(){return r&&r()}),s._adman.onReady(function(){if(s._adman){var t=s._adman.getBannersForSection(e.AD_TYPE);t&&t.length?"statistics"===t[0].type?(s._play(!0,n),r&&r()):(s._sendEvent("received",n),a?(s._sendEvent("rejected",n,e.AD_TYPE,o),s.deinit(),r&&r()):(s._sendEvent("ready",n),s.player.notify(i.events.AD_READY),s._play(!1,n,r))):(a||s._sendEvent("not_received",n),r&&r())}}),s._adman.init({slot:3514,wrapper:s.isMvk?ce("div"):se("<div></div>"),params:c,browser:{adBlock:!!window.abp,mobile:!1}}),s._sendEvent("requested",n)})}},{key:"_sendEvent",value:function(e,t,n,a){var i=this,r=n?"/"+n:"",o=a?"/"+a:"";this._adEvents.push(e+"/"+t+r+o),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout(function(){ajax.post(i.adsStatUrl,{act:"ad_event",events:i._adEvents.join(","),v:i.playerVersion,abp:intval(window.abp)},{onFail:function(){return!0}}),i._adEvents=[]},500)}},{key:"_play",value:function(t,n,a){var r=this;this._adman.onCompleted(function(){r.deinit(!0),t?r._sendEvent("statistics",n):(r.player.notify(i.events.PROGRESS,0),r.player.notify(i.events.AD_COMPLETED),r._isPlaying=!1,r._adsCurrentProgress=0,r._sendEvent("completed",n),window.setDocumentTitle&&window.setDocumentTitle(r._adsPrevTitle),a&&a())}),this._adman.onStarted(function(){t||(r.player.setIsPlaying(!0),r.player.notify(i.events.PLAY),r.player.notify(i.events.PROGRESS,0),r.player.notify(i.events.AD_STARTED),r.updateVolume(),r._sendEvent("started",n))}),this._adman.onPaused(function(){r.player.setIsPlaying(!1),r.player.notify(i.events.PAUSE)}),this._adman.onPlayed(function(){r.player.setIsPlaying(!0),r.player.notify(i.events.PLAY)});var o=[.25,.5,.75];if(this._adman.onTimeRemained(function(e){r._duration=isNaN(e.duration)?0:e.duration,r._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,r.player.notify(i.events.PROGRESS,r._adsCurrentProgress,r._duration),each(o,function(e,t){if(r._adsCurrentProgress>=t)return o.shift(),r._sendEvent("progress_"+intval(100*t),n),!1})}),this._adman.start(e.AD_TYPE),t)return a&&a();this._isPlaying=!0,this._adsPrevTitle=document.title,this.isMvk||setDocumentTitle(getLang("global_audio_ad"))}},{key:"updateVolume",value:function(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}},{key:"deinit",value:function(e){this._adman=null,!e&&this.player.notify(i.events.AD_DEINITED)}},{key:"pause",value:function(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause())}},{key:"resume",value:function(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(i.events.PLAY))}},{key:"checkPlay",value:function(t,n){var a=this.player._getPlayingContextSection(),i=this._isAllowed(t),r=i.type,o=i.reason,s=function(){return n&&n()};switch(r){case e.ALLOW_ALLOWED:this._fetchAd(t,a,!1,s);break;case e.ALLOW_DISABLED:s();break;case e.ALLOW_REJECT:this._fetchAd(t,a,!0,!1,o),s()}}},{key:"_isAllowed",value:function(t){if(vk.widget)return{type:e.ALLOW_DISABLED};if((0,r.isPodcast)(t))return{type:e.ALLOW_DISABLED};if(window.browser&&window.browser.safari)return{type:e.ALLOW_DISABLED};var n=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(n){if(!n.enabled)return{type:e.ALLOW_DISABLED};if(cur.adsPreview)return{type:e.ALLOW_ALLOWED};if(n.day_limit_reached)return{type:e.ALLOW_REJECT,reason:e.REJECT_REASON_LIMIT};var a=this.player._getPlayingContextSection();return n.sections.indexOf(a)>-1?{type:e.ALLOW_ALLOWED}:{type:e.ALLOW_REJECT,reason:e.REJECT_REASON_SECTION}}return{type:e.ALLOW_REJECT,reason:e.REJECT_REASON_UNKNOWN}}},{key:"startPlay",value:function(e,t,n){var a=this;this._startAdsTO&&(0,o.clearWorkerTimeout)(this._startAdsTO),t?this._startAdsTO=(0,s.setWorkerTimeout)(function(){return a.checkPlay(e,n)},0):this.checkPlay(e,n)}}])&&l(t.prototype,n),c&&l(t,c),e}();function u(e,t){for(var n=e.toString(16),a=t.toString(16);a.length<8;)a="0"+a;return n+a}t.AudioAds=c,c.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",c.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},c.AD_TYPE="preroll",c.ALLOW_DISABLED=1,c.ALLOW_ALLOWED=2,c.ALLOW_REJECT=3,c.REJECT_REASON_UNKNOWN="unknown",c.REJECT_REASON_LIMIT="track_limit_exceeded",c.REJECT_REASON_SECTION="section_not_allowed"},XCiN:function(e,t,n){"use strict";var a=n("izth");window.isBootstrapInited||(window.cur={destroy:[]},window.lang={},(0,a.setDocumentDomain)(),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.isBootstrapInited=!0)},XLP4:function(e,t,n){"use strict";window.FeedAssistanceImportContacts={importContacts:function(e,t,n){if(!window.XMLHttpRequest||n)return;var i=domData(e,"service-id");return window.open(t),a[i]=e,!1}};var a={},i="feedAssistanceImportContacts__desc",r=!1;FeedAssistanceStats.registerTrackingCls("feedAssistance_importContacts"),FeedAssistanceStats.onStartViewElement(function(e){FeedAssistanceStats.getElementType(e)===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_IMPORT_CONTACTS&&(r=!0)}),Friends.onImportSuccess(function(){var e=arguments[0],t=arguments[2],n=a[e];if(n){var o=geByClass1(i,n);o.textContent=getLang("mobile_join_friends_found_count",t)}r&&FeedAssistanceStats.dispatchEvent({type:FeedAssistanceStats.EVENTS.EVENT_FEED_ASSISTANCE,data:FeedAssistanceStats.serializeEventData(FeedAssistanceStats.EVENTS.EVENT_FEED_ASSISTANCE,n,"m_mp",FeedAssistanceStats.EVENTS.SUB_EVENT_FILLED)})}),Friends.onImportFailed(function(e){var t=a[e];t&&(geByClass1(i,t).textContent=getLang("mobile_friends_import_error"))})},XLUH:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStatsPlayerAdapter=t.APP_STATE=t.FULL_SCREEN_STATE=t.BACKGROUND_STATE=t.UNKNOWN_STATE=void 0;t.UNKNOWN_STATE=0;t.BACKGROUND_STATE=1;t.FULL_SCREEN_STATE=2;t.APP_STATE=3;var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.listeners=[]}var t,n,i;return t=e,(n=[{key:"listen",value:function(e,t,n){var a=t.bind(n||this);this.listeners.push({event:e,fn:t,listener:a}),this.playerListen(e,a)}},{key:"unListen",value:function(e,t){var n=-1;if(each(this.listeners,function(a,i){if(i.event===e&&i.listener===t)return n=a,!1}),!(n<0)){var a=this.listeners[n];this.playerUnListen(e,a.listener),this.listeners.splice(n,1)}}},{key:"unListenAll",value:function(){for(var e;e=this.listeners[0];)this.unListen(e.event,e.listener)}},{key:"listenPlay",value:function(e,t){this.listen("play",e,t)}},{key:"listenPause",value:function(e,t){this.listen("pause",e,t)}},{key:"listenProgress",value:function(e,t){this.listen("progress",e,t)}},{key:"listenVolume",value:function(e,t){this.listen("volume",e,t)}},{key:"listenSeek",value:function(e,t){this.listen("seek",e,t)}},{key:"listenPlaylistChanged",value:function(e,t){this.listen("pl_changed",e,t)}},{key:"listenEnded",value:function(e,t){this.listen("ended",e,t)}},{key:"listenPlayNext",value:function(e,t){this.listen("play_next",e,t)}},{key:"listenAdCompleted",value:function(e,t){this.listen("ad_completed",e,t)}},{key:"playerListen",value:function(e,t){this.player.on(e,t)}},{key:"playerUnListen",value:function(e,t){this.player.off(e,t)}},{key:"getPausedBy",value:function(){return null}},{key:"getState",value:function(){return document.hidden?1:3}},{key:"getProgress",value:function(){return this.player.playerGetProgress()}},{key:"getProgressInSeconds",value:function(){return this.player.getProgressInSeconds()}},{key:"getVolume",value:function(){return this.player.getVolume()}},{key:"getAudioId",value:function(){return this.player.getAudioId()}},{key:"getAudio",value:function(){return this.player.getAudio()}},{key:"getAudioTrackCode",value:function(){return this.player.getAudioTrackCode()}},{key:"getPrevAudioId",value:function(){return this.player.getPrevAudioId()}},{key:"getPrevPlaylistId",value:function(){return this.player.getPrevPlaylistId()}},{key:"getPlaylistId",value:function(){return this.player.getPlaylistId()}},{key:"getContext",value:function(){return this.player.getContext()}},{key:"getSequence",value:function(){return this.player.getSequence()}},{key:"getType",value:function(){return this.player.getType()}},{key:"getListenedTime",value:function(){return this.player.getListenedTime()}},{key:"getSearchParams",value:function(){return this.player.getSearchParams()}},{key:"isPlaying",value:function(){return this.player.isPlaying()}},{key:"isAutoPlayed",value:function(){return this.player.isAutoPlayed()}},{key:"isRepeatCurrentAudio",value:function(){return this.player.isRepeatCurrentAudio()}},{key:"isRepeatAll",value:function(){return this.player.isRepeatAll()}},{key:"isShuffledPlaylist",value:function(){return this.player.isShuffledPlaylist()}},{key:"isRealPlaylist",value:function(){return this.player.isRealPlaylist()}},{key:"isRealPrevPlaylist",value:function(){return this.player.isRealPrevPlaylist()}},{key:"isPodcast",value:function(){return this.player.isPodcast()}},{key:"isAdPlaying",value:function(){return this.player.ads.isPlaying()}},{key:"isLastTrack",value:function(){return this.player.isLastTrack()}},{key:"hasPrevAudio",value:function(){return this.player.hasPrevAudio()}},{key:"hasPrevPlaylist",value:function(){return this.player.hasPrevPlaylist()}},{key:"hasPlaylist",value:function(){return this.player.hasPlaylist()}},{key:"hasSearchParams",value:function(){return this.player.hasSearchParams()}},{key:"isDebug",value:function(){return!1}},{key:"sendListenedData",value:function(e){return this.player.sendListenedData(e)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.AudioStatsPlayerAdapter=i},XRdp:function(e,t,n){"use strict";n("B34N")},XUaJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.close=function(e,t){t&&t.preventDefault(),r.default.close(e),o.default.post("/groups",{_ajax:1,act:"hide_warning_notification",notification_id:(0,i.domData)(e,"id"),group_id:(0,i.domData)(e,"gid"),hash:(0,i.domData)(e,"hash")})},t.leave=function(e,t){t&&t.preventDefault(),r.default.close(e),(0,a.$)("#m .header__back").click()};var a=n("UxAg"),i=n("OcsD"),r=s(n("t7Ww")),o=s(n("kr3z"));function s(e){return e&&e.__esModule?e:{default:e}}},Xeoq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showCaptcha=function(e,t){o.default.open({body:c(e),title:lang.mobile_captcha_enter_code,confirmText:lang.mobile_captcha_send_btn,cancelText:lang.mobile_cancel,class:"MailCaptcha__dialog",onConfirm:function(n,a){var s=(0,i.$)('[name="'.concat(e.key,'"]'),a);s=s&&s.value||"",o.default.close(),(0,r.mailRequest)(e.location,Object.assign({},e.post,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},e.key,s))).then(function(e){t(Promise.resolve(e))},function(e){t(Promise.reject(e))})},onClose:function(){o.default.close(),t(null)}})},t.renderBody=c;var a=l(n("TYsd")),i=n("UxAg"),r=n("qHA9"),o=l(n("iS9e")),s=l(n("p5n7"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return a.default.html({inner:[{class:"captcha_img",src:e.img,tag:"img"},{inner:[(0,s.default)({name:e.key})],class:"MailCaptcha__input",tag:"div"}],class:"MailCaptcha__box",tag:"div"})}},XlF1:function(e,t,n){"use strict";var a=n("UxAg"),i=window.Popup,r=window.Btn;window.AuthCheck={},AuthCheck._onDropConfirmationClick=l,AuthCheck._onResetSessionSubmit=c,AuthCheck._onCurBrowserDropClick=u;var o={popupByIndex:function(e){return".AuthCheck__popup_index_".concat(e)},dropConfirmation:function(e){return'.AuthCheck__dropConfirmation[data-index="'.concat(e,'"]')},dropConfirmationSubmit:".AuthCheck__dropConfirmationSubmit"},s={dropConfirmationSuccess:"AuthCheck__dropConfirmation_success"};function l(e){var t=(0,a.$)(o.popupByIndex(e));i.open(t)}function c(e,t){e.preventDefault();var n=e.target,l=(0,a.$)('iframe[name="'.concat(e.target.target,'"]')),c=n.$(o.dropConfirmationSubmit);n.submit(),r.setLoading(c,!0),addEvent(l,"load",function(){(0,a.$)(o.dropConfirmation(t)).classList.toggle(s.dropConfirmationSuccess),i.close(),r.setLoading(c,!1)})}function u(e){var t=e.$btn;r.setLoading(t,!0),ajax.click(t,{onDone:function(){(0,a.$)(o.dropConfirmation("0")).classList.toggle(s.dropConfirmationSuccess),i.close(),r.setLoading(t,!1)}})}},Y6JH:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("1HYu"))&&a.__esModule?a:{default:a}).default;t.default=i},YDEi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uConvo_getLastMsg=p,t.uConvo_getOnline=d,t.uConvo_getUnreadCount=f,t.uConvo_getTyping=A,t.uConvo_msgPreview=u,t.uConvo_getLastMsgId=h,t.default=void 0;l(n("bZ/P"));var a=l(n("TYsd")),i=(l(n("Mc5h")),l(n("s0aB"))),r=n("7jQU"),o=n("/Id8"),s=n("fdw3");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="last"===t,a=store.mail,r=a.peers[e],o=r.url,s=null;if(t){var l;n||(o="".concat(o,"&msg=").concat(t)),(l=n?p(e):a.msgs[t])&&(s={text:u(l),date:l.dateShort,unreadCount:f(e),muted:r.isMuted,typing:A(e),pending:l.pending,failed:l.failed})}return(0,i.default)({id:e,url:o,photos:r.avatarImages,title:r.title,online:d(r),important:r.isImportant,profileUrl:r.profileUrl,isLast:n,more:s})};function u(e){var t=window.lang,n=store.mail,i=!!e.attaches.call;if(e.isService&&!i)return a.default.html({tag:"span",inner:[a.default.wrap(e.serviceText)]});var r=e.body?a.default.wrap((0,o.Msg__textPreview)(e.body)):function(e){return{tag:"span",class:"convo__msgAttach",inner:(0,o.Msg__attachPreview)(e)}}(e),l="";return e.authorId===n.cur.userId&&e.peerId!==n.cur.userId?l=t.mobile_mail_you:(0,s.isChatPeer)(e.peerId)&&(l=(l=n.members[e.authorId].shortName).replace(/\.$/,"")),l&&(l+=": "),a.default.html({tag:"span",inner:[a.default.wrap(l),r]})}function d(e){return!!e.isOnline&&("desktop"===e.onlinePlatform?"desktop":"mobile")}function f(e){var t=function(e){return store.mail.peers[e]}(e).countUnread;if(0===t){var n=store.mail,a=p(e);a&&a.isUnread&&a.authorId===n.cur.viewerId&&(t=-1)}return t}function h(e){var t=store.mail,n=t.rolls.peer[e],a=t.presend&&t.presend.pending[e],i=t.presend&&t.presend.failed[e];if(a&&a.length)for(var r=a.length-1;r>=0;r--){var o=a[r];if(-1===o.indexOf("edit"))return o}if(i&&i.length)for(var s=i.length-1;s>=0;s--){var l=i[s];if(-1===l.indexOf("edit"))return l}return n&&n.length?last(n):null}function p(e){var t=store.mail.msgs,n=store.mail.presend,a=n&&n.msgs,i=h(e);return a&&a[i]?a[i]:i?t[i]:null}function A(e){var t,n,a=(0,r.uTyping_getPeerTyping)(e),i=a&&1===a.count&&a.users[0]===e;return a?("mixed"===a.type?(t="simple-dots",n="mixed"):"audio"===a.type?(t="audio",n="audio"):"text"===a.type&&(t="simple-dots",n=""),{typing:!!i||(0,r.uTyping_getNames)(a),typingCount:a.count,animation:t,text:n,dimmed:!1,compact:!0}):""}t.default=c},YQfe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SILENCE=void 0;t.SILENCE="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"},Yaig:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={_onCloseClick:function(e){e.stopPropagation(),e.preventDefault(),remove(geByClass1(i.class.btn))},class:{btn:"FloatBtn"}};i.class=a({},i.class,{open:i.class.btn+"_open"});var r=i;t.default=r},YhgQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("TuGt"))&&a.__esModule?a:{default:a},r=n("OcsD"),o=n("fKzu"),s=n("J8bf");var l,c=["/restore","/login","/authorize*","/join*","/","/settings","/album*","/terms","/privacy","/payments*","/attachments*","/page*","/blog*","/about","/privacy","/jobs","/dev","/legal","/data_protection","/safety","/activation*","/licence","/agelimits"];function u(){l&&l.classList.remove(i.default.class.open)}function d(){l&&l.classList.add(i.default.class.open)}onDOMReady(function(){!function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,r.isIosWebView)()||(0,r.isAndroidWebView)()||(0,r.isVkWebView)()||(n||(l=geByClass1(i.default.class.btn),page.onChange(e.bind(this))),t=t?t.split("?")[0]:nav.path,!/^\/photo/.test(t)&&u(),(0,o.isForbiddenPage)(t,c)||nav.getQuery("z")?(u(),setTimeout(u)):d())}(null,!1)});var f={_onCloseClick:function(e){i.default._onCloseClick(e),(0,s.setCookie)("remixregbtn",0,0)},show:d,hide:u};t.default=f},YvCB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setWorkerTimeout=function(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);var n=new Blob(["\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ".concat(t,");\n        }\n      }\n    ")]);try{var a=new Worker(window.URL.createObjectURL(n));return a.onmessage=function(){a.terminate(),e()},a.postMessage("start"),a}catch(n){return setTimeout(e,t)}}},Z9Of:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onOpen=function(e){if(A=e,m=!1,a=!1,r=0,o=0,l=0,c=0,_={},void 0,u="start",d=0,v=0,!f.isIPhone)return;if("top"!==A&&"bottom"!==A)return void document.body.classList.add("ScrollViewsDisabled");E()<f.IPHONE_KEYBOARD_REJECT_OFFSET&&k(0);var t=document.body;s=t.offsetHeight,t.offsetWidth,window.addEventListener("scroll",g),"top"===A&&(0,f.isLandscapePhone)()||(b(),y())},t.onClose=function(){"top"===A||"bottom"===A?(i&&clearTimeout(i),window.removeEventListener("scroll",g)):document.body.classList.remove("ScrollViewsDisabled");m=!1,A="",a=!1,s=0,0};var a,i,r,o,s,l,c,u,d,f=n("H5mD"),h=0,p=0,A="",m=!1,_={},v=0;function g(){if(b(),"top"!==A){if("bottom"===A){var e=pageYOffset,t=E();a&&(a=!1,e===l)||(f.isWKWebView?c<=5&&y():e>f.IPHONE_KEYBOARD_REJECT_OFFSET?e>t?(k(e),f.isWKWebView||y()):e<t?_[e]||e>w(t)?(_[e]=!0,y(s)):y():e!==w(t)&&y():t||(e<f.IOS_NO_KEYBOARD_ALLOWED_OFFSET?(r===e?o++:(r=e,o=1),o>=3&&(window.removeEventListener("scroll",g),k(r)),setTimeout(function(){y()},300)):y()))}}else{if((0,f.isLandscapePhone)())return;if(f.isWKWebView)return void(0!==pageYOffset&&y(0));var n=innerHeight;if("start"===u&&(n<s?u="animate":y(1)),"animate"===u)if(d=s-n,v||(v=Math.max(1,Math.min(4,Math.floor(d/10)))),d<=0)u="stop";else{var i=f.isIPad?f.iosMajor<11?3:2:1;y(Math.min(d,v)*i)}"stop"===u&&y(1)}}function y(e){a=!0;var t,n=E();"bottom"===A?t=e||(!n||f.isWKWebView||f.isIPad?s:w(n)):"top"===A&&(t=isFinite(e)?e:1),c++,l=t,window.scrollTo(0,t)}function b(){i&&clearTimeout(i),m||(i=setTimeout(function(){m=!0,i=null,window.removeEventListener("scroll",g)},500))}function w(e){return f.isIPad||f.isWKWebView?e:90===Math.abs(window.orientation)&&screen.width>=375?e:(f.isIPhoneX?e-=f.IPHONE_X_SAFARI_BOTTOM_BAR:e-=f.IPHONE_SAFARI_BOTTOM_BAR,e)}function E(){return 90===Math.abs(window.orientation)?h:p}function k(e){90===Math.abs(window.orientation)?h=e:p=e}},ZYIi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Select=o,t.default=void 0;var a=r(n("9y81")),i=r(n("z9sQ"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.on_change;return{class:[e.mix||e.class,i.default.class("Select",{disabled:e.disabled})],inner:[{class:"Select__native",tag:"select",name:e.name,disabled:e.disabled,onchange:t?["Select._onChange","this",t]:null,inner:e.options.map(function(e){return e?{class:"Select__option",tag:"option",value:e.value,selected:e.selected?"selected":null,inner:e.label,attrs:e.attrs}:null})},{outerHTML:(0,a.default)({mix:"Select__chevron",icon:"chevron_down"})}]}}var s=o;t.default=s},Ziv7:function(e,t,n){"use strict";var a=n("UxAg"),i=x(n("+cqQ")),r=x(n("bZ/P")),o=x(n("TYsd")),s=x(n("jk6M")),l=x(n("rKp0")),c=(x(n("Mc5h")),x(n("gy8s"))),u=(x(n("u33z")),I(n("V4qE"))),d=I(n("HGMY")),f=x(n("/Id8")),h=I(n("t7Ww")),p=x(n("r/ag")),A=x(n("29dZ")),m=n("hOuX"),_=n("N4ZS"),v=n("9M99"),g=n("H5mD"),y=I(n("aiw/")),b=n("Qz23"),w=n("jE6c"),E=n("hw56"),k=n("j80l"),S=x(n("wcVR")),C=I(n("dVvW")),M=x(n("B+U2")),P=n("DgYJ"),T=I(n("HdGT"));n("qHA9");function D(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return D=function(){return e},e}function I(e){if(e&&e.__esModule)return e;var t=D();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}function x(e){return e&&e.__esModule?e:{default:e}}Object.assign(C.default,{onToBottomClick:(0,i.default)(),onAttachedMsgsRemove:(0,i.default)(),onReplyClose:(0,i.default)(),onMessage:(0,i.default)(),showToBottom:function(){if(U)return;z&&(clearTimeout(z),z=null);addClass("uMailWrite__toBottom_visible",(0,a.$)(".uMailWrite__toBottom"))},hideToBottom:function(){clearTimeout(W),z=setTimeout(function(){removeClass("uMailWrite__toBottom_visible",(0,a.$)(".uMailWrite__toBottom"))},100)},preventShowToBottom:function(){U=!0,setTimeout(function(){U=!1},300)},openStickersPanel:re,redrawReply:_e,uiRedrawAttachments:ve,redrawToBottom:function(){(0,a.$$)(".uMailWrite__toBottom").forEach(function(e){return e.innerHTML=(0,C.uMailWrite_ToBottomInner)()})},drawStickers:ne,setModifiers:function(e){(0,a.$$)(".uMailWrite").forEach(function(t){var n=r.default.parseClass("uMailWrite",t.getAttribute("class"));t.setAttribute("class",r.default.class("uMailWrite",Object.assign({},n,e)))})},hideStickersPanel:ie,setText:Re,renderKeyboardIfNeeded:je,openKeyboard:He,init:function(){var e=store.mail,t=e.cur,n=(e.msgs,e.pendingReplies),i=t&&(0,E.getPeerDraft)(t.viewerId,t.peerId);i&&!t.editing&&i.text&&function(e){var t=document.createElement("textarea");t.innerHTML=e;var n=t.value;(0,a.$$)(".uMailWrite__textarea").forEach(function(e){return e.value=n});var i=(0,a.$)(".uMailWrite__textareaGhost");i.innerText=n,"\n"===last(n)&&(i.innerHTML+="&nbsp;");Q()}(i.text);"templates"===(0,E.getKeyboardType)()?fe():je();Ge(),K(),i&&!t.editing&&Array.isArray(i.msgs)&&(t.msgAttached[t.peerId]=i.msgs);if(i&&!t.editing&&isFinite(i.reply)){var r=f.default.getReplyDataFromHTML(i.reply);r&&(t.msgReply[t.peerId]=i.reply,n[i.reply]=r)}_e(),ve(t.peerId),(0,a.$$)(".uMailWrite__textarea").forEach(function(e){(0,b.setScrollView)(e,{topBanner:!1,overscrollY:!1})}),(0,a.$$)(".uMailWrite__attachments").forEach(function(e){(0,b.setScrollView)(e,{topBanner:!1,allowY:!1})})},reset:function(){(0,E.setKeyboardType)("")},loadTemplatePage:function(e,t,n){e.preventDefault(),uMessenger.loadMailPage(n)}}),uVK.onReady(X),C.default._onBlur=Te,C.default._onKeyUp=we,C.default._onKeyDown=Ce,C.default._onFocus=Pe,C.default._onInput=Ee,C.default._onSubmit=ye,C.default._onClick=Me,C.default._onAttachClick=pe,C.default._onStickersClick=ae,C.default._onKeyboardClick=oe,C.default._onKeyboardButtonClick=se,C.default._onDeleteTemplate=Ue,C.default._onConfirmDeleteTemplate=ze,C.default._onSendTouchEnd=be,C.default._onRetryFailedMsg=Ye,C.default._onDeleteFailedMsg=Qe,C.default._onCancelPendingMsg=Xe,C.default._onConfirmSendGeo=le,mediaUpload.onRemove(J),mediaUpload.onComplete(te),mediaUpload.onStart(Z),mediaUpload.onError(ee),post.onStickersTabSelected(Ae),post.onStickerClick(me),T.onSent(qe),T.onErrorMessage(Ke),f.default.onPendingClick($e),c.default.onOpen("uMailWrite_attachments")(Y),C.default.onToBottomClick(function(){var e=(0,a.$)(".uMailWrite__toBottom_visible");e&&e.classList.remove("uMailWrite__toBottom_visible"),l.default.removeDivider()}),C.default.onReplyClose(function(){var e=store.mail.cur;e.msgReply[e.peerId]=null,(0,E.setPeerDraft)(e.viewerId,e.peerId,{reply:void 0},e.editing),e.editing||ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),_e()}),C.default.onTemplateClick=function(e,t,n){var a;n&&(store.mail.cur.templates.some(function(e){if(e.id===n)return a=e,!0}),a&&Re((0,P.prepareTemplateText)(a.text)))},Mention.onOpen(function(){if(store.mail.cur){var e=store.mail.cur,t=e.peerMembers,n=e.peerId;t[n]||(t[n]=!0,ajaxRequest("/mail",{act:"get_members",peer_id:n},function(e){Object.assign(store.mail.members,e);var t=ke(n);Mention.update({items:t,defaultItems:t})},function(){t[n]=!1}))}});var O,B,L="uMailWrite__popupAttach_open",R="uMailWrite__popupStickers_open",N="uMailWrite__keyboard_open",j="uMailWrite__templates_open",F=!1,H={canAttachPoll:"uMailWrite_canAttachPoll"},V={mailWrite:".uMailWrite",pollAttachment:".attachment_type_poll"},U=!1,z=null,W=null,q=[],G=debounce(Ie,100),$=debounce(De,1e3);function Y(){function e(e,t){return e=e.replace(/&edit_msg_id=\d+/,"").replace(/=mailedit(-?\d+)/,"=mail$1"),store.mail.cur.editing&&(e=e.replace(/=mail(-?\d+)/,"=mailedit$1"),e+=t?"&edit_msg_id="+store.mail.cur.editing:""),e}(0,a.$$)("a.Unfold__item").forEach(function(t){var n=e(t.getAttribute("href"),!0);t.setAttribute("href",n)}),(0,a.$$)("input.inline_upload").forEach(function(t){t.setAttribute("data-upload-url",e(t.getAttribute("data-upload-url")))})}function Q(){var e=(0,a.$)(".uMailWrite__textareaGhost").offsetHeight;(0,a.$$)(".uMailWrite__textarea").forEach(function(t){return setStyle(t,"height",e)}),(0,a.$$)(".uMailWrite__main").forEach(function(t){return setStyle(t,"height",e)}),Ie()}function X(){if("/mail"===location.pathname||0===location.pathname.indexOf("/write")){var e=store.mail.cur;if(e&&e.peerId){var t=geBySel(".uMailWrite__attachments .medias_thumb").length,n=geBySel(".uMailWrite__attachments .medias_row").length,i=(e.msgAttached[e.peerId]||[]).length?1:0;e.hasAttachments=t+n+i>0,(0,a.$$)(".uMailWrite__attachments").forEach(function(t){toggleClass("uMailWrite__attachments_hasAttachments",t,e.hasAttachments)}),function(){var e=(0,a.$)(".uMailWrite__buttonAttach");if(!e)return;var t=(n=(0,a.$)(".uMailWrite__attachments"),(n?n.$$(".thumb_item").length+n.$$(".medias_row").length-n.$$(".fwd_item").length:0)>=10);var n;e.classList.add("uMailWrite__button_disabled",t),t?e.addEventListener("mousedown",Le,!0):e.removeEventListener("mousedown",Le,!0)}()}}}function K(){var e=store.mail.cur;e&&e.peerId&&(q=ke(e.peerId),Mention.init({defaultItems:q,items:q,appendTo:geByClass1("uMailWrite__main"),url:null,params:{},preferDomain:!0,afterInsert:function(t){var n=(0,a.$)(".uMailWrite__textareaGhost"),i=t.value;n.innerText=i,Q(),De(i,e.viewerId,e.peerId)}}))}function J(e){if(store.mail.cur){var t=store.mail,n=t.cur,i=t.peers,r=n.peerId;if(r&&(i[r].attachmentsHTML=geBySel1(".uMailWrite__attachments_".concat(r," .cp_attached_wrap")).outerHTML,ve(r)),e.closest(V.pollAttachment))(0,a.$)(V.mailWrite).classList.add(H.canAttachPoll)}}function Z(){store.mail.cur&&(X(),Ie())}function ee(){if(store.mail.cur){var e=store.mail,t=e.cur,n=(e.peers,t.peerId);n&&(ve(n),Messenger.scrollConvoToBottom())}}function te(){var e=store.mail,t=e.cur,n=e.peers;if(t){var a=t.peerId;a&&(n[a].attachmentsHTML=geBySel1(".uMailWrite__attachments_".concat(a," .cp_attached_wrap")).outerHTML,Ie())}}function ne(){var e=store.mail.cur,t=(0,a.$)(".uMailWrite__popupStickers");e&&t&&!t.childElementCount&&(t.innerHTML=e.stickersPanelHTML.replace(/mail0/g,"mail".concat(e.peerId)),(0,a.$$)(".sp_body",t).forEach(function(e){(0,b.setScrollView)(e,{topBanner:!1})}),(0,a.$$)(".scroller_wrap",t).forEach(function(e){(0,b.setScrollView)(e,{topBanner:!1,allowY:!1})}),post.stickersSelectTab(null,-1))}function ae(e){var t=(0,a.$)(".uMailWrite__popupStickers"),n=hasClass(R,t);e.preventDefault(),ne(),Ve("stickers"),n?ie():re()}function ie(){"stickers"===(0,E.getKeyboardType)()&&(0,E.setKeyboardType)("");var e=(0,a.$)(".uMailWrite__popupStickers");removeClass(R,e),xe(!1);var t=ge("stickers_panel");t&&"block"===t.style.display&&(t.style.display="none")}function re(){(0,E.setKeyboardType)("stickers");var e=(0,a.$)(".uMailWrite__popupStickers");addClass(R,e),post.stickersInit(),xe(!0)}function oe(e){var t=(0,a.$)(".uMailWrite__keyboard"),n=hasClass(N,t);e.preventDefault(),Ve("buttons"),n?ce({store:!0}):ue({store:!0})}function se(e,t,n){var a,i=n.authorId,o=n.inline,s=n.msgId,l=JSON.parse((0,w.replaceEntities)(n.action)),c=l.type,d=l.payload,f=l.rawLabel,h=store.mail,p=h.cur,v=h.members,g=h.peers,y=h.msgs,b=v[i],E=(0,m.random)();if(s){var C=y[s];a=C.peerId}else a=p.peerId;var M,P=g[a],T=f||"";if(a>=2e9)if(b.domain)M="@".concat(b.domain," ").concat(T);else{var D=b.url.replace(/^\//,"");M="@".concat(D," (").concat(b.firstName,") ").concat(T)}else M=T;var I=c,x=o?"inline":"normal";if("open_app"===I&&(I="app"),statlogsValueEvent("message_send_from_keyboard",0,p.viewerId,a,i,I,x),"vkpay"!==c)if("open_app"!==c)if("open_link"!==c){if("location"!==c)Be({act:"send",to:a,from:"dialog",hash:P.hashSend,message:M,media:"",_af:p._af,random_id:E,payload:d}),o&&!p.peerId&&nav.go((0,k.makeUrl)("/mail",{act:"show",peer:a,community:nav.getQuery("community")}));else S.default.init()?(A.default.setLoading(e,!0,"blue"),S.default.getCurrentPosition(function(t){var n=t.coords,i=n.latitude,o=n.longitude;A.default.setLoading(e,!1),MailDialog.open({body:lang.mobile_mail_geo_send_question,confirmText:lang.mobile_mail_geo_send_confirm,cancelText:lang.mobile_cancel,onConfirm:r.default.onClick("uMailWrite._onConfirmSendGeo",i,o,d,M,a)})},function(){A.default.setLoading(e,!1),u.init({text:lang.mobile_mail_geo_not_available})},{maximumAge:100,enableHighAccuracy:!0,timeout:1e4})):u.init({text:lang.mobile_mail_geo_not_available})}else{var O=l.link,B=(0,_.wrapAwayIfExternal)(O,!0);nav.hard_go(B)}else{var L=l.app_id,R=l.hash,N=(0,k.makeUrl)("/app".concat(L),{from:nav.cur.slice(1)});nav.hard_go("".concat(N,"#").concat(R))}else{var j=l.hash,F=(0,k.makeUrl)("/app6217559",{from:nav.cur.slice(1)});nav.hard_go("".concat(F,"#").concat(j))}}function le(e,t,n,a,i){var r=store.mail,o=r.cur,s=r.peers[i],l=(0,m.random)();Be({act:"send",to:i,from:"dialog",hash:s.hashSend,message:a,media:"",_af:o._af,random_id:l,payload:n,attach1_type:"map",attach1:"".concat(e,"_").concat(t)}),MailDialog.close(),nav.go((0,k.makeUrl)("/mail",{act:"show",peer:i,community:nav.getQuery("community")}))}function ce(e){"buttons"===(0,E.getKeyboardType)()&&(0,E.setKeyboardType)("");var t=(0,a.$)(".uMailWrite__keyboard");if(removeClass(N,t),Oe(!1),e&&e.store){var n=store.mail.cur.peerId,i=store.mail.peers[n];i&&i.keyboard&&(O[n]=i.keyboard.chat_local_id,lsSet("mail_keyboard_hidden",O))}}function ue(e){(0,E.setKeyboardType)("buttons");var t=(0,a.$)(".uMailWrite__keyboard"),n=e&&e.forceRender;addClass(N,t),Oe(!0);var i=(0,E.getKeyboardState)(store.mail.cur.peerId);!n&&!!i.rendered||function(){var e=store.mail,t=e.cur,n=e.peers,i=t.peerId&&n[t.peerId];if(!i||!i.keyboard||!i.keyboard.buttons)return;var r=o.default.render((0,M.default)({keyboard:i.keyboard})),s=(0,a.$)(".uMailWrite__keyboard");s.innerHTML=r,(0,b.setScrollView)(s,{topBanner:!1}),(0,E.getKeyboardState)(t.peerId).rendered=!0}(),e&&e.store&&de()}function de(){var e=store.mail.cur.peerId;O&&(delete O[e],lsSet("mail_keyboard_hidden",O))}function fe(){(0,E.setKeyboardType)("templates");var e=(0,a.$)(".uMailWrite__templates");addClass(j,e),Ie(),Fe()}function he(){"templates"===(0,E.getKeyboardType)()&&(0,E.setKeyboardType)("");var e=(0,a.$)(".uMailWrite__templates");removeClass(j,e),Ie()}function pe(e){var t=(0,a.$)(".uMailWrite__popupAttach"),n=(0,a.$)(".uMailWrite__popupStickers");e.preventDefault(),e.stopPropagation(),hasClass(R,n)&&removeClass(R,n),hasClass(L,t)?removeClass(L,t):(addClass(L,t),addEvent(window,"click",function e(n){removeClass(L,t);removeEvent(window,"click",e)}))}function Ae(){store.mail.cur&&(geByClass1("sp_body")&&(cur.scroller&&cur.scroller.destroy(),geByClass1("sp_body").scrollTop=0,removeClass("scroller_wrap",geByClass1("sp_cont")),geByClass("sp_page").forEach(function(e){return removeClass("scroller_page",e)})))}function me(e,t){if(store.mail.cur){var n=store.mail,i=n.cur,r=n.peers,o=(geByClass1("uMailWrite"),(0,a.$)(".uMailWrite__popupStickers")),s=(0,m.random)(),l=0===t.indexOf("suggestion"),c={act:"send",to:i.peerId,from:"dialog",hash:r[i.peerId].hashSend,message:"",media:"sticker".concat(e),_af:i._af,random_id:s,sticker_referrer:t},u=i.msgReply[i.peerId];if(u&&(c.attached_messages=u,c.has_reply=!0,(0,E.setPeerDraft)(i.viewerId,i.peerId,{reply:void 0}),ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),i.msgReply[i.peerId]=null),l){var d=(0,a.$)(".uMailWrite__textarea");d.value="",De("",i.viewerId,i.peerId),Ee({},d)}return Be(c),Ie(),_e(),F&&(removeClass(R,o),xe(!1)),!0}}function _e(){var e=store.mail,t=e.cur,n=e.replies,i=t.msgReply[t.peerId],r="";if(t.editing){var o=n[i];o&&(r=o.preview_url)}else{var s=i&&f.default.getElem(i);if(s){var l=(0,a.$)(".thumbs_map .thumb_map_img_as_div",s);(r=l&&l.style.backgroundImage)&&(r=r.replace(/^url\((['"])?/,"").replace(/(['"])?\)$/,""))}}(0,a.$$)(".uMailWrite__reply").forEach(function(e){e.outerHTML=(0,C.uMailWrite_Reply)(r)})}function ve(e){(0,a.$$)(".uMailWrite__attachments_".concat(e)).forEach(function(t){t.outerHTML=(0,C.uMailWrite_Attachments)(e)}),X(),(0,a.$)(".uMailWrite__textarea")&&Ie();var t=(0,a.$)(V.mailWrite);if(t){var n=!!t.$(V.pollAttachment);t.classList.toggle(H.canAttachPoll,!n)}}function ye(e){if(e&&e.preventDefault(),!mediaUpload.checkUploading())return!1;var t,n=(0,a.$)(".uMailWrite__textarea"),i=store.mail,r=i.cur,o=i.peers,c=(0,m.random)(),u=store.mail.cur.editing,d=u&&store.mail.msgs[u],f=d?{act:"edit_message",id:u,peerId:d.peerId,hash:o[r.peerId].hashSend}:{act:"send",to:r.peerId,from:"dialog",hash:o[r.peerId].hashSend,_af:r._af,random_id:c,entrypoint:store.mail.cur.mvk_entrypoint||""};if(!Ne())return d?MsgDeleteDialog.open({isEditing:!0}):r.groupId&&(t=(0,a.$)(".uMailWrite__templates"),Ve("templates"),hasClass(j,t)?he():fe()),!1;each(geByClass1("uMailWrite"),function(e,t){return!(t.name&&!t.disabled)||("radio"===t.type&&!t.checked||("checkbox"===t.type&&!t.checked||("button"===t.type||("submit"===t.type||("image"===t.type||void(f[t.name]=t.value))))))}),u?(uMailHat.onCancelEditing(!0),Be(f)):(Be(f),store.mail.cur.mvk_entrypoint="",(0,E.popPeerAttachments)(r.peerId),n.value="",De("",r.viewerId,r.peerId),(0,E.setPeerDraft)(r.viewerId,r.peerId,{msgs:void 0,reply:void 0},r.editing),r.msgReply[r.peerId]&&!r.editing&&ajaxRequest("/mail",{act:"reply_cancel",peer_id:store.mail.cur.peerId,hash:store.mail.hash.reply}),r.msgAttached[r.peerId]=[],r.msgReply[r.peerId]=null,Ee({},n)),l.default.onSystemMessageClick(),ve(r.peerId),_e(),StickersHints.actualizeVisibility(),g.isIOS?(n.focus(),setTimeout(function(){return n.focus()})):s.default.msie_edge||(n.focus(),requestAnimationFrame(function(){return n.focus()}))}function be(e){s.default.msie_edge&&(e.preventDefault(),ye(e))}function we(){var e=we,t=e.typingData||(e.typingData={});if(0!==(0,a.$)(".uMailWrite__textarea").value.length&&!store.mail.cur.editing){var n=Date.now(),i=store.mail,r=i.cur,o=i.peers,s=r.peerId;s<=-2e9||t[s]&&n-t[s]<5e3||(t[s]=n,ajaxRequest("/mail",{_ajax:1,act:"typing",peer:s,hash:o[s].hashTyping,community:nav.getQuery("community")}))}}function Ee(e,t){var n=(0,a.$)(".uMailWrite__textareaGhost"),i=t.value;n.innerText=i,"\n"===last(i)&&(n.innerHTML+="&nbsp;");var r=store.mail.cur,o=n.offsetHeight;(0,a.$$)(".uMailWrite__textarea").forEach(function(e){return setStyle(e,"height",o)}),(0,a.$$)(".uMailWrite__main").forEach(function(e){return setStyle(e,"height",o)}),G(),r&&$(i,r.viewerId,r.peerId),Se(e,t,function(){Mention.onKeyUp(e,t)})}function ke(e){var t=store.mail,n=t.peers,a=t.members,i=t.cur,r=n[e].memberIds||[],o=[],s=[];return r.forEach(function(e,t){if(e!==i.viewerId){var n=a[e];if(n){var r=[n.id,n.name,n.url.replace("/","@"),n.avatar,n.url.replace("/",""),null,null,null,n.firstName,n.domain];o.push(r)}else{var l=["fake"+t,"...","@...",a[0].avatar,"",null,null,null,"...",null];s.push(l)}}}),o.concat(s)}function Se(e,t,n){q.length&&(!hasClass("Mention_inited",geByClass1("uMailWrite__main"))&&K(),n(e,t))}function Ce(e,t){Se(e,t,function(){Mention.onKeyDown(e,t)}),(10==e.keyCode||13==e.keyCode&&(e.ctrlKey||e.metaKey))&&ye()}function Me(e,t){Se(e,t,function(){Mention.onClick(e,t)})}function Pe(e,t){(0,E.setKeyboardType)("text");var n=function(){ne(),Ve("text"),StickersHints.init({peerId:store.mail.cur.peerId}),Se(e,t,function(){Mention.onFocus(e,t)})};g.isIOS?n():requestAnimationFrame(function(){requestAnimationFrame(function(){n()})}),y.onOpen("bottom")}function Te(e,t){if("text"===(0,E.getKeyboardType)()&&(0,E.setKeyboardType)(""),y.onClose(),$._timer&&clearTimeout($._timer),store.mail&&store.mail.cur){var n=store.mail.cur,a=n.viewerId,i=n.peerId;De(t.value,a,i)}}function De(e,t,n){var a=store.mail.cur.editing;(0,E.setPeerDraft)(t,n,{text:e},a)}function Ie(){var e=store.mail,t=e.cur,n=(e.queue,e.flags);if(t.peerId){var i=!Ne(),o=!mediaUpload.checkUploading(),s=!!t.editing,l={sendActive:!i&&!s&&!o,loading:o,editAccept:s&&!i,editRemove:s&&i},c=n.templates&&!(s||!t.groupId||!i||l.loading||l.uploading);l.templates=c&&"templates"!==(0,E.getKeyboardType)(),l.templatesActive=c&&"templates"===(0,E.getKeyboardType)();var u=!(l.sendActive||l.loading||l.editAccept||l.editRemove||l.templates||l.templatesActive);l.disabled=u;var d=r.default.class("uMailWrite__button","uMailWrite__buttonSend",l);(0,a.$$)(".uMailWrite__buttonSend").forEach(function(e){return e.className=d})}}function xe(e){var t=r.default.class("uMailWrite__button","uMailWrite__buttonStickers",{active:e});(0,a.$$)(".uMailWrite__buttonStickers").forEach(function(e){return e.className=t})}function Oe(e){var t=r.default.class("uMailWrite__button","uMailWrite__buttonKeyboard",{active:e});(0,a.$$)(".uMailWrite__buttonKeyboard").forEach(function(e){return e.className=t})}function Be(e){if(store.mail.cur){var t=store.mail.cur,n=t.ref,a=t.refSource,i=e.to;if(a&&(e.ref_source=a,e.ref=n,store.mail.refSource=void 0,store.mail.ref=void 0),T.send(e),i){var r=store.mail.peers[i];if(r&&r.keyboard&&r.keyboard.one_time)r.keyboard=null,(0,E.getKeyboardState)(i).updateTime=Date.now(),je()}Ie()}}function Le(e){e.stopPropagation(),alert(lang.mobile_mail_attachments_limit)}function Re(e){var t=document.createElement("textarea");t.innerHTML=e;var n=t.value,i=(0,a.$$)(".uMailWrite__textarea");i.forEach(function(e){return e.value=n}),Ee({},i[0])}function Ne(){return function(){var e=store.mail,t=e.cur;e.peers;return!!t&&t.hasAttachments}()||!!(0,a.$)(".uMailWrite__textarea").value.trim()}function je(e){if((0,a.$)(".uMailWrite__keyboard")){var t,n=store.mail,i=n.cur,o=n.peers,s=i.peerId&&o[i.peerId];t=!(i.groupId||!s||s.closed||s.kicked)&&!(!s.keyboard||!s.keyboard.buttons.length);var l=(0,a.$)(".uMailWrite"),c=r.default.parseClass("uMailWrite",l.className);if(c.keyboard!==t&&(l.className=r.default.class("uMailWrite",Object.assign({},c,{keyboard:t}))),(0,E.getKeyboardState)(i.peerId).rendered=!1,t){O||(O=lsGet("mail_keyboard_hidden")||{});var u=s.keyboard,d=O[i.peerId],f=(e&&e.update,!(0,E.getKeyboardType)()||"buttons"===(0,E.getKeyboardType)()||"text"===(0,E.getKeyboardType)()),h=!1;d&&(d==u.chat_local_id?f=!1:h=!0),f?He("buttons",{store:h}):h&&de()}else ce()}}function Fe(){var e=store.mail,t=e.cur,n=e.peers,i=t.peerId&&n[t.peerId];if(t.groupId&&i&&!i.closed&&!i.kicked){var r=(0,a.$)(".uMailWrite__templatesBody"),o=t.templates;if(r)return o?void function(e,t){e.innerHTML=(0,P.uMailWrite_TemplatesContent)(t)}(r,o):(function(e){e.innerHTML=(0,P.uMailWrite_TemplatesLoading)()}(r),B||(B=new Promise(function(e){ajaxRequest("/mail",{act:"get_templates"},function(t){e(t)},function(t){e()})})),void B.then(function(e){B=null,store.mail&&store.mail.cur&&(store.mail.cur.templates=e),Fe()}))}}function He(e,t){switch(Ve(e),e){case"stickers":re();break;case"buttons":ue(t);break;case"text":(n=(0,a.$)(".uMailWrite__textarea"))&&n.focus();break;case"templates":fe()}var n}function Ve(e){var t;"stickers"!==e&&ie(),"buttons"!==e&&ce(),"text"!==e&&(t=(0,a.$)(".uMailWrite__textarea"))&&document.activeElement===t&&t.blur(),"templates"!==e&&he()}function Ue(e){var t=store.mail.cur.templates.find(function(t){return t.id===e});if(t){var n=lang.mobile_mail_templates_delete_popup_text;n=n.replace("{name}",(0,v.emojiToHTML)(t.name)),MailDialog.open({body:n,confirmText:lang.mobile_mail_delete_popup_delete,cancelText:lang.mobile_mail_delete_popup_cancel,onConfirm:r.default.onClick("uMailWrite._onConfirmDeleteTemplate",e)})}}function ze(e){var t=store.mail.cur.templates,n=t.findIndex(function(t){return t.id===e});if(-1!==n){var i=t[n],r=(0,a.$)(".uMailWrite__templatesRow".concat(i.id));i.deleting=!0,r.classList.add("uMailWrite__templatesRow_hidden"),ajaxRequest("/mail",{act:"delete_template",hash:store.mail.hash.templateDelete,id:e},function(n){if(n.error)We(e);else{var a=t.findIndex(function(t){return t.id===e});t.splice(a,1),Fe()}},function(){We(e)})}MailDialog.close()}function We(e){var t=store.mail.cur.templates,n=(0,a.$)(".uMailWrite__templatesRow".concat(e)),i=t.findIndex(function(t){return t.id===e}),r=t[i];r.deleting=!1,n.classList.remove("uMailWrite__templatesRow_hidden");var o=lang.mobile_mail_templates_delete_error;o=o.replace("{name}",r.name),u.init({text:o,action:{text:lang.mobile_mail_templates_toast_action_ok,callback:function(e,t){var n=t.id;u.close(n)}}})}function qe(){l.default.clearSystemMessage2(),remove(geByClass1("message__newMsgsDivider")),remove(geByClass1("Unfold__item_returnToChat"))}function Ge(){var e=store.mail,t=e.cur,n=e.presend,a=e.pendingReplies,i=[],r=n.failed[t.peerId]||[],o=n.pending[t.peerId]||[];(r.length||o.length)&&(r.concat(o).map(function(e){var t=n.msgs[e];if(t)if(0===t.sendId.indexOf("edit"))C.default.onMessage(t);else{if(t.reply){var r=f.default.getReplyDataFromHTML(t.reply);r&&(a[t.reply]=r)}i.push(t)}}),d.setMsgs(i))}function $e(e,t,n){var a;n?a=[(0,h.ModalMenuBtn)({inner:lang.mobile_mail_presend_menu_retry,onclick:["uMailWrite._onRetryFailedMsg","this",t]}),(0,h.ModalMenuBtn)({inner:lang.mobile_mail_presend_menu_delete,onclick:["uMailWrite._onDeleteFailedMsg","this",t]})]:a=[(0,h.ModalMenuBtn)({inner:lang.mobile_mail_presend_menu_cancel,onclick:["uMailWrite._onCancelPendingMsg","this",t]})];var i=(0,h.default)({class:"",close:!0,closeText:lang.mobile_mail_presend_menu_close,items:a});p.default.open(o.default.elem(i),!0)}function Ye(e,t){h.default.close(e);var n=store.mail.presend.msgs[t];(0,E.removeFailedMsg)(n),T.retry(t,function(e){var t=store.mail.cur.peerId,n=store.mail.peers[t];return e.data.hash=n.hashSend,e})}function Qe(e,t){h.default.close(e),T.remove(t)}function Xe(e,t){h.default.close(e),T.remove(t)}function Ke(e){u.init({duration:0,text:e,action:{text:lang.mobile_mail_templates_toast_action_ok,callback:function(e,t){var n=t.id;u.close(n)}}})}},ZoJ6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("bZ/P")),i=o(n("9y81")),r=n("fdw3");function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=window.lang,n=(0,r.isNewNavigation)(),o=e.query;return Wd.html({class:[Bem.class("mailFilter",{hasQuery:!!o}),e.mix],inner:[Wd.wrap((0,i.default)({icon:"search"})),{class:"mailFilter__input",tag:"input",placeholder:t.mobile_search,value:o,oninput:["MailFilter._onInput","this"],attrs:a.default.onFocus("MailFilter._onFocus")},{class:"mailFilter__right",inner:[n?null:Wd.wrap((0,i.default)({mix:"mailFilter__create",icon:"plus",url:e.createUrl})),Wd.wrap((0,i.default)({mix:"mailFilter__clear",icon:"close12",attrs:a.default.onMouseDown("MailFilter._onClearMouseDown","this")}))]}]})};t.default=s},Zoa4:function(e,t,n){"use strict";var a=u(n("+cqQ")),i=u(n("jk6M")),r=u(n("CkGd")),o=u(n("QBkA")),s=function(e){if(e&&e.__esModule)return e;var t=c();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("lQx8")),l=n("Qz23");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function d(){(0,l.cleanScrollView)(s.Messenger.getConvoBody()),removeEvent(s.Messenger.getConvoBody(),"touchstart",f,{passive:!0})}function f(e){var t=e.target.closest(".msg__sticker");t&&Msg.onStickerTouchStart(e,t),(t||e.target.closest(".msg"))&&Msg._onTouchStart()}function h(e,t){$$(".messenger__layer_".concat(e)).forEach(function(e){e.classList.toggle("messenger__layer_loading",t)})}function p(e){return $(".messenger__layer_".concat(e," .messenger__body"))}function A(e){s.Messenger.onMainScroll(e)}function m(e){s.Messenger.onConvoScroll(e),e._isScrolling=!0,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!window._preventedCheckTop&&(e&&function(e){return e.scrollHeight&&e.scrollTop<=2.5*window.innerHeight}(e))}(e)&&s.Messenger.onConvoAtTop(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&function(e){return e.scrollHeight&&e.scrollHeight-e.scrollTop-e.offsetHeight<=1.5*window.innerHeight}(e)}(e)&&s.Messenger.onConvoAtBottom(),e._scrollingTimer&&clearTimeout(e._scrollingTimer),e._scrollingTimer=setTimeout(function(){e._isScrolling=!1},100)}function _(){var e=s.Messenger.getConvoBody();e&&(e.prevHeight&&e.prevHeight!==e.offsetHeight&&function(e,t){e.scrollTop=e.scrollHeight-e.offsetHeight-t}(e,e.scrollBottom),e.prevHeight=e.offsetHeight,e.scrollBottom=function(e){return e.scrollHeight-e.scrollTop-e.offsetHeight}(e),v&&requestAnimationFrame(_))}Object.assign(s.Messenger,{scrollMainBodyToTop:function(){$(".messenger__layer_main .messenger__body").scrollTop=0},onMainScroll:(0,a.default)("scrollElem"),onQueryChange:o.default.onChange,onQueryClear:o.default.onClear,onSearchMsgsClick:(0,a.default)(),setQuery:o.default.setQuery,setQuerySilently:o.default.setQuerySilently,getMainBody:function(e){return p("main")},setMainLoading:function(e){return h("main",e)},onConvoAtTop:(0,a.default)(),onConvoAtBottom:(0,a.default)(),onConvoScroll:(0,a.default)("scrollElem"),setConvoLoading:function(e){return h("convo",e)},getConvoBody:function(){return p("convo")},scrollConvoToBottom:function(){var e=s.Messenger.getConvoBody();e&&(e.scrollTop=e.scrollHeight)},redrawConvoLayer:function(){var e=(0,s.Messenger_renderConvoLayer)();d(),$$(".messenger__layer_convo").forEach(function(t){t.innerHTML=e})},cleanConvoBody:d,setupConvoBody:function(){(0,l.setScrollView)(s.Messenger.getConvoBody(),{topBanner:!1}),addEvent(s.Messenger.getConvoBody(),"touchstart",f,{passive:!0})},getPageLayer:function(){return $(".messenger__layer_page")}}),s.Messenger._onMainScroll=A,s.Messenger._onConvoScroll=m,s.Messenger._onSearchMsgsClick=s.Messenger.onSearchMsgsClick;var v=!1;if(s.default.startPolling=function(){v=!0,_()},s.default.stopPolling=function(){v=!1},Object.assign(s.default,{redraw:function(){$$(".uMessenger").forEach(function(e){return e.outerHTML=(0,s.default)()})},redrawView:function(){$$(".uMessenger").forEach(function(e){return e.className=(0,s.uMessenger_class)()});var e=store.mail,t=e.cur,n=e.peers;t.peerId&&(b(),r.default.togglePin(n[t.peerId].canPin));w()},redrawMailActions:function(){var e=(0,s.uMessenger_hasSelectedMsgs)();$$(".messenger__layer_convo").forEach(function(t){t.$(".messenger__footer").classList.toggle("messenger__footer_actionsOpen",e),r.default.update();var n=store.mail,a=n.cur,i=n.peers;if(!a.peerId||!i[a.peerId].isIncomingMR){var o=t.$(".messenger__write").offsetHeight,s=t.$(".messenger__acts").offsetHeight-o,l=t.$(".messenger__body");requestAnimationFrame(function(){!l._fixed&&s&&(l.style.paddingBottom=s+"px",l._fixed=!0),s<=0&&(l.style.paddingBottom=0,l._fixed=!1)})}})},redrawPinnedMsg:b,setPinnedVisibility:function(e){var t=store.mail,n=t.peers,a=t.cur,i=n[a.peerId].hasPinnedMsg;$$(".messenger").forEach(function(t){t.classList.toggle("messenger_pinnedVisible",i&&e),t.classList.toggle("messenger_pinnedHidden",i&&!e)})},redrawBanner:function(){var e=(0,s.uMessenger_getBanner)();$$(".messenger__banner").forEach(function(t){t.innerHTML=e,t.classList.toggle("messenger__bannerVisible",!!e)})},redrawMRsHint:w,expandPeerBefore:function(){if(!$(".load_before_closed"))return;var e=s.Messenger.getConvoBody();if(i.default.safari_mobile){var t=function(){var t=$$(".load_before_closed"),n=e.scrollHeight-e.scrollTop-e.offsetHeight;setStyle(e,"overflow","hidden"),t.forEach(function(e){return e.classList.remove("load_before_closed")});var a=e.scrollHeight-n-e.offsetHeight;setStyle(e,"overflow","auto"),e.scrollTop=a,AudioMessagePlayer.redrawWaves()};e.isScrolling?(y&&clearInterval(y),y=setInterval(function(){e.isScrolling||(clearInterval(y),t())},10)):t()}else if(e.scrollTop<=184){var n=$$(".load_before_closed"),a=e.scrollHeight-e.scrollTop-e.offsetHeight;n.forEach(function(e){return e.classList.remove("load_before_closed")});var r=e.scrollHeight-a-e.offsetHeight;e.scrollTop=r,AudioMessagePlayer.redrawWaves()}},scrollToMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Msg.getElem(e);if(!a)return!1;var i=s.Messenger.getConvoBody();if($(".mailScrap__loading_before"),t)i.scrollTop=a.offsetTop-.18*i.offsetHeight;else{var r=$(".typing_id_curConvo").offsetHeight;i.scrollTop=a.offsetTop-.5*(i.offsetHeight+2)+(a.offsetHeight+r)/2,a.offsetHeight>i.offsetHeight&&(i.scrollTop=a.offsetTop)}return n&&(addClass("msg_highlight",a),setTimeout(function(){removeClass("msg_highlight",a)},1500)),!0},loadMailPage:(0,a.default)()}),i.default.safari_mobile){var g=null;s.Messenger.onConvoScroll(function(e){e.isScrolling=!0,g&&clearTimeout(g),g=setTimeout(function(){return e.isScrolling=!1},50)})}var y=null;function b(){var e=store.mail,t=e.peers,n=e.cur,a=(0,s.uMessenger_getPinnedMsg)(),i=t[n.peerId].hasPinnedMsg;$(".messenger__pinned").innerHTML=a,MailHat_convo.setHasPinnedMsg(i)}function w(){var e=store.mail.cur,t=e.countMR,n=t&&"all"===e.folder&&!e.query&&!e.forwardFromId,a=$(".messenger__mrsHint");if(n){var i=t?(0,s.uMessenger_renderMRsHint)(t):"";a.innerHTML=i}a.classList.toggle("messenger__mrsHint_hidden",!n)}},"Zw+j":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){var t=e.items.map(function(e){return{tag:"li",class:"OrderFieldsList__item",inner:[{inner:e.title,class:"OrderFieldsList__title",tag:"span"},{inner:Wd.wrap(e.text),class:"OrderFieldsList__text",tag:"span"}]}});return{tag:"ul",class:"OrderFieldsList ".concat(e.class?e.class:""),inner:t}};t.default=a},a0wW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLAG_SUPPORTS_HISTORY_API=t.FLAG_GIF_AUTOPLAY=t.FLAG_MP4=t.default=void 0;var a,i=(a=n("jk6M"))&&a.__esModule?a:{default:a},r=n("J8bf");function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s={};t.FLAG_MP4=0;t.FLAG_GIF_AUTOPLAY=1;t.FLAG_SUPPORTS_HISTORY_API=2;var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getFeatures",value:function(){return s}},{key:"detectMp4Support",value:function(){var e=i.default.meizu||i.default.mi||i.default.uc_mini||0!==i.default.ios&&i.default.ios<10||i.default.chrome&&i.default.version.split(".")[0]<53,t=!1,n=document.createElement("video");return n.canPlayType&&""!==n.canPlayType("video/mp4")&&(t=!0),s.mp4=t,this.setFlag(0,t&&!e),t}},{key:"detectAutoplay",value:function(){var e=this;return new Promise(function(t){if(s.autoplay)t(!0);else{if(i.default.ios&&i.default.safari_mobile&&parseInt(i.default.version,10)>=10)return s.autoplay=!0,void t(!0);s.autoplay=!1;var n=ce("video"),a=ce("source");a.src="data:video/mp4;base64,AAAAFGZ0eXBNU05WAAACAE1TTlYAAAOUbW9vdgAAAGxtdmhkAAAAAM9ghv7PYIb+AAACWAAACu8AAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAnh0cmFrAAAAXHRraGQAAAAHz2CG/s9ghv4AAAABAAAAAAAACu8AAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAFAAAAA4AAAAAAHgbWRpYQAAACBtZGhkAAAAAM9ghv7PYIb+AAALuAAANq8AAAAAAAAAIWhkbHIAAAAAbWhscnZpZGVBVlMgAAAAAAABAB4AAAABl21pbmYAAAAUdm1oZAAAAAAAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAVdzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAFAAOABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAEmNvbHJuY2xjAAEAAQABAAAAL2F2Y0MBTUAz/+EAGGdNQDOadCk/LgIgAAADACAAAAMA0eMGVAEABGjuPIAAAAAYc3R0cwAAAAAAAAABAAAADgAAA+gAAAAUc3RzcwAAAAAAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAADgAAAAEAAABMc3RzegAAAAAAAAAAAAAADgAAAE8AAAAOAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA0AAAANAAAADQAAAA4AAAAOAAAAFHN0Y28AAAAAAAAAAQAAA7AAAAA0dXVpZFVTTVQh0k/Ou4hpXPrJx0AAAAAcTVREVAABABIAAAAKVcQAAAAAAAEAAAAAAAAAqHV1aWRVU01UIdJPzruIaVz6ycdAAAAAkE1URFQABAAMAAAAC1XEAAACHAAeAAAABBXHAAEAQQBWAFMAIABNAGUAZABpAGEAAAAqAAAAASoOAAEAZABlAHQAZQBjAHQAXwBhAHUAdABvAHAAbABhAHkAAAAyAAAAA1XEAAEAMgAwADAANQBtAGUALwAwADcALwAwADYAMAA2ACAAMwA6ADUAOgAwAAABA21kYXQAAAAYZ01AM5p0KT8uAiAAAAMAIAAAAwDR4wZUAAAABGjuPIAAAAAnZYiAIAAR//eBLT+oL1eA2Nlb/edvwWZflzEVLlhlXtJvSAEGRA3ZAAAACkGaAQCyJ/8AFBAAAAAJQZoCATP/AOmBAAAACUGaAwGz/wDpgAAAAAlBmgQCM/8A6YEAAAAJQZoFArP/AOmBAAAACUGaBgMz/wDpgQAAAAlBmgcDs/8A6YEAAAAJQZoIBDP/AOmAAAAACUGaCQSz/wDpgAAAAAlBmgoFM/8A6YEAAAAJQZoLBbP/AOmAAAAACkGaDAYyJ/8AFBAAAAAKQZoNBrIv/4cMeQ==";var r=ce("source");r.src="data:video/webm;base64,GkXfo49CgoR3ZWJtQoeBAUKFgQEYU4BnAQAAAAAAF60RTZt0vE27jFOrhBVJqWZTrIIQA027jFOrhBZUrmtTrIIQbE27jFOrhBFNm3RTrIIXmU27jFOrhBxTu2tTrIIWs+xPvwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFUmpZuQq17GDD0JATYCjbGliZWJtbCB2MC43LjcgKyBsaWJtYXRyb3NrYSB2MC44LjFXQY9BVlNNYXRyb3NrYUZpbGVEiYRFnEAARGGIBc2Lz1QNtgBzpJCy3XZ0KNuKNZS4+fDpFxzUFlSua9iu1teBAXPFhL4G+bmDgQG5gQGIgQFVqoEAnIEAbeeBASMxT4Q/gAAAVe6BAIaFVl9WUDiqgQEj44OEE95DVSK1nIN1bmTgkbCBULqBPJqBAFSwgVBUuoE87EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB9DtnVB4eeBAKC4obaBAAAAkAMAnQEqUAA8AABHCIWFiIWEiAICAAamYnoOC6cfJa8f5Zvda4D+/7YOf//nNefQYACgnKGWgQFNANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQKbANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQPoANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQU1ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQaDANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQfQANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQkdANEBAAEQEBRgAGFgv9AAIiGAAPuC/rOgnKGWgQprANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQu4ANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ0FANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgQ5TANEBAAEQEAAYABhYL/QACIhgAPuC/rKgnKGWgQ+gANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRDtANEBAAEQEAAYABhYL/QACIhgAPuC/rOgnKGWgRI7ANEBAAEQEAAYABhYL/QACIhgAPuC/rIcU7trQOC7jLOBALeH94EB8YIUzLuNs4IBTbeH94EB8YIUzLuNs4ICm7eH94EB8YIUzLuNs4ID6LeH94EB8YIUzLuNs4IFNbeH94EB8YIUzLuNs4IGg7eH94EB8YIUzLuNs4IH0LeH94EB8YIUzLuNs4IJHbeH94EB8YIUzLuNs4IKa7eH94EB8YIUzLuNs4ILuLeH94EB8YIUzLuNs4INBbeH94EB8YIUzLuNs4IOU7eH94EB8YIUzLuNs4IPoLeH94EB8YIUzLuNs4IQ7beH94EB8YIUzLuNs4ISO7eH94EB8YIUzBFNm3SPTbuMU6uEH0O2dVOsghTM",append(r,n),append(a,n),n.style.position="fixed",n.style.left="5000px",attr(n,"id","base64testvideo"),attr(n,"playsinline","playsinline"),attr(n,"webkit-playsinline","webkit-playsinline"),attr(n,"muted","muted"),attr(n,"autoplay","autoplay"),attr(n,"loop","loop"),append(n,document.body);var o=ge("base64testvideo");if(i.default.mobile&&i.default.ios&&i.default.ios<10)return s.autoplay=!1,remove(n),t(!1),void clearTimeout(e.autoDetectTimeout);if(!i.default.safari_mobile||i.default.safari_mobile&&parseInt(i.default.version,10)>=10){var l=n.play();void 0!==l&&l.then(function(){s.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)}).catch(function(a){s.autoplay=!1,remove(n),t(!1),clearTimeout(e.autoDetectTimeout)})}o.onplay=function(){s.autoplay=!0,remove(n),t(!0),clearTimeout(e.autoDetectTimeout)},e.autoDetectTimeout=setTimeout(function(){o.paused||(s.autoplay=!0),remove(n),t(s.autoplay)},250)}})}},{key:"getFlags",value:function(){return((0,r.getCookie)("remixff")||"").split("").map(function(e){return+e?"1":"0"}).join("")}},{key:"getFlag",value:function(e){var t=this.getFlags();return!!toInt(t[e])}},{key:"setFlag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,r.getCookie)("remixff")||"",a=n.split("");e>=a.length&&(a=Array.from(Array(e),function(e,t){return a[t]||"0"})),a[e]=t?"1":"0";var i=a.join("");(0,r.setCookie)("remixff",i,10)}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}();onDOMReady(function(){l.detectMp4Support()});var c=l;t.default=c},a1OB:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerFlash=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t||{},window._flashVoiceInstance=this}var t,n,r;return t=e,r=[{key:"onAudioFinishCallback",value:function(){var e=window._flashVoiceInstance;e.opts.onEnd&&e.opts.onEnd()}},{key:"onAudioProgressCallback",value:function(e,t){var n=window._flashVoiceInstance;t&&(n._total=t,n._currProgress=e/t,n.opts.onProgressUpdate&&n.opts.onProgressUpdate(n._currProgress))}},{key:"onAudioLoadProgressCallback",value:function(e,t){var n=window._flashVoiceInstance;n._currBuffered=e/t,n.opts.onBufferUpdate&&n.opts.onBufferUpdate(n._currBuffered)}}],(n=[{key:"fadeVolume",value:function(e,t){return this.setVolume(e),t()}},{key:"destroy",value:function(){re(e.PLAYER_EL_ID)}},{key:"onReady",value:function(t){if(this._player)return t(!0);if(!1===this._player)return t(!1);this._onReady=t,ge(e.PLAYER_EL_ID)||document.body.appendChild(ce("div",{id:e.PLAYER_EL_ID,className:"fixed"}));var n=this;renderFlash(e.PLAYER_EL_ID,{url:"/swf/audio_lite.swf",id:"flash_voice_player",height:2},{swliveconnect:"true",allowscriptaccess:"always",wmode:"opaque"},{onPlayFinish:"VoicePlayerFlash.onAudioFinishCallback",onLoadProgress:"VoicePlayerFlash.onAudioLoadProgressCallback",onPlayProgress:"VoicePlayerFlash.onAudioProgressCallback"})&&setTimeout(function(){n._checkFlashLoaded()},50)}},{key:"setUrl",value:function(e,t){this._trackOptions={},t&&"object"===a(t)&&(this._trackOptions=t,t=t.callback),this._url!=e?(this._url=e,this._player&&this._player.loadAudio(e),t&&t(!0)):t&&t(!0)}},{key:"setVolume",value:function(e){this._player&&this._player.setVolume&&this._player.setVolume(e)}},{key:"play",value:function(){this._player&&this._player.playAudio()}},{key:"seek",value:function(e){var t=(this._total||0)*e;this._player&&this._player.playAudio(t)}},{key:"pause",value:function(){this._player&&this._player.pauseAudio()}},{key:"isFullyLoaded",value:function(){return!1}},{key:"getPlayedTime",value:function(){return 0}},{key:"getCurrentProgress",value:function(){return this._currProgress||0}},{key:"getCurrentBuffered",value:function(){return this._currBuffered||0}},{key:"stop",value:function(){this._player&&this._player.stopAudio()}},{key:"_checkFlashLoaded",value:function(){var e=ge("flash_voice_player");if(this._checks=this._checks||0,this._checks++,this._checks>10){this._player=!1;var t=this._onReady;return t&&t(!1)}if(e&&e.paused){this._player=e;var n=this._onReady;n&&n(!0),this._onReady=null}else{var a=this;setTimeout(function(){a._checkFlashLoaded()},100)}}},{key:"type",get:function(){return"flash"}},{key:"loaded",get:function(){return!!this._player}}])&&i(t.prototype,n),r&&i(t,r),e}();t.PlayerFlash=r,window.VoicePlayerFlash=r,r.PLAYER_EL_ID="flash_voice"},aXSb:function(e,t,n){"use strict";var a=10;window.CreatePost={setMaxAttach:function(e){a=e},checkAttaches:function(){CreatePost.toggleEnableAttaches(mediaUpload.getAttachesCount()<a)},toggleEnableAttaches:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];geByClass("cp_attach_btn","feed_add_form").forEach(function(t){t.classList.toggle("cp_disabled_btn",!e)}),["photo","video","audio","doc","poll"].forEach(function(t){Unfold.toggleItemEnabled(Unfold.getByName("attaches"),t,e)})}}},"aiw/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onOpen=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).exitIfStarted,n=void 0!==t&&t;if(!o.isIOS||o.iosMajor<8)return;if(u&&n)return;if(c)return;A=e,u=!0,f&&(clearTimeout(f),f=null);if("bottom"===e){if(((0,o.isLandscapePhone)()||!m&&!_)&&!r.onOpen())return;!m&&_&&i.onOpen(e),m&&a.onOpen()}else!m&&_&&i.onOpen(e);p.length&&p.forEach(function(e){return e()});c=!0,u=!1},t.onClose=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).exitIfStarted,t=void 0!==e&&e;if(!o.isIOS||o.iosMajor<8)return;if(d&&t)return;if(d=!0,"bottom"===A){if(((0,o.isLandscapePhone)()||!m&&!_)&&!r.onClose())return;if(!c)return;!m&&_&&i.onClose(),m&&a.onClose()}else!m&&_&&i.onClose();c=!1,d=!1,A=null,f&&clearTimeout(f);f=setTimeout(function(){scrollTo(0,0),h.length&&h.forEach(function(e){return e()})},10)},t.isKeyboardOpen=function(){return c},t.onCloseCallback=function(e){-1===h.indexOf(e)&&h.push(e)},t.offCloseCallback=function(e){var t=h.indexOf(e);-1!==t&&h.splice(t,1)},t.onOpenCallback=function(e){-1===p.indexOf(e)&&p.push(e)},t.offOpenCallback=function(e){var t=p.indexOf(e);-1!==t&&p.splice(t,1)};var a=l(n("QO40")),i=l(n("Z9Of")),r=l(n("GYEY")),o=n("H5mD");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}var c=!1,u=!1,d=!1,f=null,h=[],p=[],A=null,m=o.isScrollBasedViewport&&(o.isIPad||o.isWKWebView),_=o.isScrollBasedViewport&&o.iosMajor<=12},bRFj:function(e,t,n){"use strict";window.Friends={onImportSuccess:befall("serviceId","friendsHtml","total"),onImportFailed:befall("serviceId"),accept:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o;h(i,e,t,n,a,r,s,l,c)},decline:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o;h(r,e,t,n,a,i,s,l,c)},makeImportRequest:function(e,t,n){if(!window.XMLHttpRequest)return void(window.location=e);ajax.plainpost(e,{_ajax:1},function(e){return function(e,t,n){var a=parseJSON(e),i=a.user,r=a.user_hash,o=a.contacts,h=s+n;if(a.error)return void p(n);ajax.post(h,{_ajax:1,user:i,userhash:r,hash:t,contacts:o},{onDone:function(e,t){return function(e,t,n){var a=geByClass1(l),i=geByClass1(u);addClass(c,a),i&&(i.innerHTML=t,addClass(d,i));autoScroll(function(){return geByClass1(f)},ImportedFriends,{no_cache:!0}),Friends.onImportSuccess(e,t,n),window.opener&&window.opener.Friends.onImportSuccess(e,t,n)}(n,e,t)},onFail:function(){return p(n)}})}(e,t,n)},function(){return p(n)},!0)}};var a="/friends",i="accept",r="decline",o=null,s="/friends.php?act=save_contacts&type=",l="friendsImport__loading",c=l+"_hidden",u="friendsImport__result",d=u+"_shown",f="friendsList__footerBtn_showMore";function h(e,t,n,i,r,o,s,l,c){var u={act:e,hash:n,id:t};i&&(u.from=i),r&&(u.block_id=r),o&&(u.ref=o),s&&(u.track_code=s);var d=a+obj2qs(u);ajax.post(d,{_ajax:1},{onDone:l,onFail:c})}function p(e){Friends.onImportFailed(e),window.opener&&(window.opener.Friends.onImportFailed(e),window.close())}},bYEY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("iGfS"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.uBell=i.default},"bZ/P":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("SRbS"))&&a.__esModule?a:{default:a};n("zb1z"),n("dbQR"),n("l90V"),n("c0X5");var r=i.default;t.default=r,window.q=i.default},blmJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("0Zid"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.PrometheusEditConfirm=i.default},"bvP/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAutogrow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=ce("span");setStyle(n,{width:"".concat(e.clientWidth,"px")}),n.innerText="_",append(n,e.parentNode);var a=n.clientHeight;addEvent(e,"input",function(){n.innerText=e.value,e.rows=Math.max(1,Math.min(t,Math.ceil(n.clientHeight/a)))})}},c0X5:function(e,t,n){"use strict";var a,i=(a=n("SRbS"))&&a.__esModule?a:{default:a};Object.assign(i.default,{class:function(){for(var e=[],t=null,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return a.forEach(function(n){"string"==typeof n?(e.push(n),t=n):n&&(e=e.concat(function(e,t){var n=[];"string"==typeof t&&(t=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,!0));return Object.keys(t).forEach(function(a){var i=t[a];!0===i?n.push("".concat(e,"_").concat(a)):i&&n.push("".concat(e,"_").concat(a,"_").concat(i))}),n}(t,n)))}),e.join(" ")},parseClass:function(e,t){var n={};return t.trim().split(/\s+/).forEach(function(t){if(t!==e){var a=t.replace("".concat(e,"_"),"").split("_");n[a[0]]=!(a.length>1)||a[1]}}),n}})},cGUQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromQueryString=function(e){if(!e)return{};var t={};return e=e.split("&"),(0,a.each)(e,function(e,n){var a=n.split("=");if(a[0]){var i=o(a[1]+"");if("[]"===a[0].substr(a.length-2)){var r=o(a[0].substr(0,a.length-2));t[r]||(t[r]=[]),t[r].push(i)}else t[o(a[0])]=i}}),t},t.toQueryString=function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)&&null!=e[i]&&!(0,a.isFunction)(e[i]))if((0,a.isArray)(e[i]))for(var o=0,s=0,l=e[i].length;o<l;++o)null==e[i][o]||(0,a.isFunction)(e[i][o])||(n.push(r(i)+"["+s+"]="+r(e[i][o])),++s);else n.push(r(i)+"="+r(e[i]));t||n.sort();return n.join("&")};var a=n("jE6c"),i={},r=function(e){if(i[e])return e;try{return encodeURIComponent(e)}catch(e){return""}},o=function(e){try{return decodeURIComponent(e)}catch(t){return i[e]=1,e}}},cLcH:function(e,t,n){"use strict";window.FeedAssistanceExploreBait={onSubscribeLinkClick:function(e,t,n,f,h,A){var m=hasClass(e,a),_=m?f:n,v=m?getLang(l):getLang(s),g=!m,y=geByClass1(o,e),b=(w=e,E=domCA(w,d),intval(domData(E,"block-id")));var w,E;y&&(toggleClass(i,y,g),toggleClass(r,y,!g));attr(e,"aria-label",escapeAttr(v)),toggleClass(a,e,g),h===u?function(e,t,n,a){var i=n?Groups.leave:Groups.enter,r=n?FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;a&&p(r),i.call(Groups,e,t,c)}(t,_,m,A):function(e,t,n,a,i){var r=n?Friends.decline:Friends.accept,o=n?FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE;i&&p(o),r.call(Friends,e,t,c,a)}(t,_,m,b,A);return!1}},FeedAssistanceStats.registerTrackingCls("post_exploreBait"),FeedAssistanceStats.onStartViewElement(function(e){if(FeedAssistanceStats.getElementType(e)===FeedAssistanceStats.BLOCKS.BLOCK_TYPE_EXPLORE_BAIT){if(e._exploreBaitClickHandlerAdded)return;f=!0,addEvent(e,"click",function(e){!function(e){var t=e.target,n=!0,a=!1,i=void 0;try{for(var r,o=A[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){if(!0===r.value.call(null,t))return}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}(e)}),e._exploreBaitClickHandlerAdded=!0}}),nav.onBeforeGo(function(e){if(!f)return void(h=!1);if(!function(e){return e.tagName&&"explore-bait"===domData(e,"post-type")}(e))return;h=hasClass("item_replies",e),function(e){for(var t=0,n=["pi_text_more","wi_date","pi_text","i_replies","v_replies","item_replies"];t<n.length;t++){if(hasClass(n[t],e))return p(FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPENED),!0}}(e)}),page.onChange(function(){if(!f)return;h&&function(){var e=ge("nc_submit");addEvent(e,"click",function(){p(FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_COMMENT)})}()});var a="post__subscribeBtn_unsubscribe",i="post__subscribeBtnIcon_unsubscribe",r="post__subscribeBtnIcon_subscribe",o="post__subscribeBtnIcon",s="mobile_groups_you_are_in_public",l="mobile_groups_public_subscribe",c="feed",u="group",d=".post_exploreBait",f=!1,h=!1;function p(e){FeedAssistanceStats.dispatchEvent({type:FeedAssistanceStats.EVENTS.EVENT_EXPLORE_BAIT,data:FeedAssistanceStats.serializeEventData(FeedAssistanceStats.EVENTS.EVENT_EXPLORE_BAIT_SUB,e)})}var A=[function(e){if("A"!==e.tagName||!hasClass("item_sel",e))return hasClass("item_like",e)?(p(FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE),!0):(hasClass("i_like",e)||hasClass("v_like",e))&&!hasClass("item_sel",domPN(e))?(p(FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_LIKE),!0):void 0},function(e){if(domData(e,"post-owner-type"))return p("user"===domData(e,"post-owner-type")?FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_USER:FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP),!0},function(e){var t={report:FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_REPORT,hide:FeedAssistanceStats.EVENTS.SUB_EVENT_EXPLORE_BAIT_HIDE}[domData(e,"post-action")];if(t)return p(t),!0}]},ciqL:function(e,t,n){"use strict";var a={show:function(e,t){window.grecaptcha?grecaptcha.reset():(window.recaptchaCallback=function(){a.onCallback(e)},document.body.appendChild(ce("script",{type:"text/javascript",src:"https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+t})))},onResponse:function(e){ge("field_recaptcha").value=e,ge("recaptcha_form").submit()},onCallback:function(e){if(grecaptcha&&e){var t=geByClass1("recaptcha_box"),n=geByClass1("recaptcha",t);n&&(val(n,""),grecaptcha.render(n,{sitekey:e,callback:a.onResponse}))}}};window.ReCaptcha=a},d124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("wMVj"))&&a.__esModule?a:{default:a};var r=!1,o={start:function(e,t,n){"%page_id%"!==e&&(r||(r=!0,setTimeout(function(){var a={headers:{"X-AppShell-Start-Id":e,"X-AppShell-Start":t},zProcess:function(){}};n&&"%page_path%"!==n?i.default.go(n,{push_only:!0,replace:!0},a):i.default.go(i.default.cur,null,a)})))}};t.default=o},d8Vu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stickers=void 0;var a={},i=function(e,t,n,i){delete a[t],1===i?Emoji.favorite.addFavoriteSticker(e,t,n):-1===i&&Emoji.favorite.deleteFavoriteSticker(e,t,n)};var r={toggleFavorite:function(e,t,n){if(t&&t.stopPropagation(),!hasClass(e,"on")&&Emoji.stickers[Emoji.TAB_FAVORITE_STICKERS].stickers.length>=Emoji.favoriteLimit&&!Emoji.favoriteLimitNoticed){var r=langStr(getLang("purchases_stickers_favorite_limit_notice"),"%s",Emoji.favoriteLimit);return setTimeout(showFastBox(getLang("global_error"),r).hide,3e3),ajax.post("stickers.php",{act:"favorite_limit_noticed",value:1}),Emoji.favoriteLimitNoticed=!0,!1}var o=attr(e,"data-sticker-id"),s=attr(e,"data-hash");return!(!o||!s)&&(!a[o]&&(a[o]=1,toggleClass(e,"on"),void ajax.post("/stickers.php",{act:"toggle_favorite",sticker_id:o,hash:s},{onDone:i.pbind(n,o,e)})))},getStickerUrl:function(e,t){var n={id:e,size:t};return window.isMVK?rs(window.store.stickers.url_template,n):getTemplate("stickers_sticker_url",n)}};t.Stickers=r},dVvW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uMailWrite_Reply=M,t.uMailWrite_Attachments=P,t.uMailWrite_ToBottomInner=S,t.default=void 0;var a=u(n("bZ/P")),i=(u(n("TYsd")),u(n("Mc5h"))),r=u(n("9y81")),o=u(n("AXyT")),s=u(n("gy8s")),l=(u(n("29dZ")),u(n("Y6JH"))),c=n("/Id8");u(n("BoyB"));function u(e){return e&&e.__esModule?e:{default:e}}function d(){var e=E(['\n    <input type="hidden" name="attached_messages" value="','" />\n  ']);return d=function(){return e},e}function f(){var e=E(['\n    <div class="uMailWrite__attachedMsgs">\n      ',"\n      ","\n      ",'\n      <div class="uMailWrite__attachedMsgsText">',"</div>\n    </div>\n  "]);return f=function(){return e},e}function h(){var e=E(['\n    <div class="',' _preventMenuOpen">\n      ',"\n      ","\n    </div>\n  "]);return h=function(){return e},e}function p(){var e=E(['\n    <div class="','">\n      ',"\n      ","\n      ","\n    </div>\n  "]);return p=function(){return e},e}function A(){var e=E(['\n    <div class="uMailWrite__templates">\n      <div class="uMailWrite__templatesHeader">\n        ','\n        <a class="uMailWrite__templatesAdd" href="','" ',">\n          ",'\n        </a>\n      </div>\n      <div class="uMailWrite__templatesBody ScrollView"></div>\n    </div>\n  ']);return A=function(){return e},e}function m(){var e=E(['\n    <div class="uMailWrite__buttonKeyboardIcon"></div>\n  ']);return m=function(){return e},e}function _(){var e=E(['\n    <div class="uMailWrite__keyboard ScrollView">\n\n    </div>\n  ']);return _=function(){return e},e}function v(){var e=E(['\n    <div class="uMailWrite__SVGIcon uMailWrite__SVGIcon_','"></div>\n  ']);return v=function(){return e},e}function g(){var e=E(['\n    <div class="uMailWrite__main">\n      <div class="uMailWrite__button uMailWrite__buttonAttach">','</div>\n      <div class="uMailWrite__button uMailWrite__buttonKeyboard" ',">",'</div>\n      <div class="uMailWrite__button uMailWrite__buttonStickers" ',">","",'</div>\n      <button class="','" type="submit" ',">\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ",'\n      </button>\n      <div class="uMailWrite__textareaContainer">\n        <textarea\n          class="uMailWrite__textarea"\n          name="message"\n          placeholder="','"\n          maxlength="4096"\n          ',"\n          ","\n          ","\n          ","\n          ","\n          ","\n          ",'\n        ></textarea>\n        <div class="uMailWrite__textareaGhost"></div>\n      </div>\n    </div>\n  ']);return g=function(){return e},e}function y(){var e=E(["\n    ","\n    ","\n  "]);return y=function(){return e},e}function b(){var e=E(['\n    <form\n      class="','"\n      method="POST"\n      action="/mail?act=send&to=',"&hash=","&from=dialog",'"\n      ','\n    >\n      <div class="uMailWrite__toBottom" ',">","</div>\n      ","\n      ","\n      ","\n      ","\n      ","\n      ","\n    </form>\n  "]);return b=function(){return e},e}function w(){var e=E(['\n      <div class="uMailWrite uMailWrite_unableToWrite">\n        ','\n        <div class="uMailWrite__unableToWriteText">\n          ',"\n        </div>\n      </div>\n    "]);return w=function(){return e},e}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=function(){var e=window.lang,t=store.mail,n=t.cur.peerId;if(!n)return'<form class="uMailWrite"></form>';var o=t.peers[n];if(o.unableToWrite){if(o.isChannel)return"";var c=o.kickedMessage||e.mobile_msg_mail_privacy_error,u=(0,r.default)({mix:"uMailWrite__unableToWriteIcon",icon:"warning"});return a.default.html(w(),u,c)}var d=a.default.onSubmit("uMailWrite._onSubmit","event","this"),f=a.default.onClick("uMailWrite.onToBottomClick"),h=(0,i.default)({mix:"uMailWrite__popupStickers _preventMenuOpen",inner:""}),p=M(null),v=P(n),y=function(e){var t=window.lang,n=store.mail,i=n.cur,o=n.queue,c=("/attachments?act=stickers&target=mail".concat(e),a.default.onMouseDown("uMailWrite._onStickersClick","event")),u=a.default.onMouseDown("uMailWrite._onKeyboardClick","event"),d=n.peers[e],f=i.groupId,h=Math.abs(f),p=f?"&community=".concat(h):"",A=(0,s.default)({icon:"attach",name:"uMailWrite_attachments",position:"bottomLeft",items:[{text:i.inlineUploadHTML.replace(/mail\d+/g,"mail".concat(e)),icon:(0,l.default)("mail-attachments","camera_24")},{text:t.mobile_attachments_add_photo_vk,url:"/attachments?act=choose_photo&target=mail".concat(e).concat(p),icon:(0,l.default)("mail-attachments","gallery_24")},{text:t.mobile_attachments_add_video,url:"/attachments?act=choose_video&target=mail".concat(e).concat(p),icon:(0,l.default)("mail-attachments","video_24")},{text:t.mobile_attachments_add_audio,url:"/attachments?act=choose_audio&target=mail".concat(e).concat(p),icon:(0,l.default)("mail-attachments","music_24")},{text:t.mobile_attachments_add_doc,url:"/attachments?act=choose_doc&target=mail".concat(e).concat(p),icon:(0,l.default)("mail-attachments","document_24")},d.canSendGift?{text:t.mobile_attachments_add_gift,url:"/gifts".concat(e,"?act=send&from=mail&ref=media_selector"),icon:(0,l.default)("mail-attachments","gift_24")}:null,d.canAttachMoney?{text:t.mobile_attachments_add_money,url:"/attachments?act=attach_money&target=mail".concat(e).concat(p),icon:(0,l.default)("mail-attachments","money_transfer_24")}:null,d.canAttachPoll?{text:t.mobile_attachments_add_poll,url:"/attachments?act=attach_poll&target=mail".concat(e).concat(p),icon:(0,l.default)("mail-attachments","poll_24"),mix:"uMailWrite__pollUnfoldItem"}:null]}),_=a.default.onKeyUp("uMailWrite._onKeyUp"),v=a.default.onInput("uMailWrite._onInput","event","this"),y=a.default.onKeyDown("uMailWrite._onKeyDown","event","this"),b=a.default.onFocus("uMailWrite._onFocus","event","this"),w=a.default.onBlur("uMailWrite._onBlur","event","this"),E=a.default.onClick("uMailWrite._onClick","event","this"),k=a.default.onTouchEnd("uMailWrite._onSendTouchEnd","event","this"),S=(0,r.default)({mix:"uMailWrite__buttonSendIcon",icon:"send"}),M=(0,r.default)({mix:"uMailWrite__buttonSendIcon",icon:"send",active:!0}),P=C("accept"),T=C("remove"),D=C("templates"),I=C("templatesActive"),x=(0,r.default)({mix:"uMailWrite__buttonSendIcon",icon:"spinner"}),O=(0,r.default)({mix:"uMailWrite__buttonStickersIcon",icon:"sticker"}),B=(0,r.default)({mix:"uMailWrite__buttonStickersIcon",icon:"sticker",active:!0}),L=a.default.html(m()),R=d.attachmentsHTML.length,N=i.msgAttached[i.peerId],j=N&&N.length,F=!!(o[i.peerId]||[]).length,H=a.default.class("uMailWrite__button","uMailWrite__buttonSend",{send:!0,sendActive:!!(R>150||j),loading:F});return a.default.html(g(),A,u,L,c,O,B,H,k,S,M,x,P,T,D,I,t.mobile_mail_message_placeholder,b,_,v,y,b,w,E)}(n),E=a.default.html(_()),k=function(){var e=window.lang,t=(0,r.default)({icon:"plus"}),n=store.mail.cur.peerId,i=store.mail.cur.communityParam,o="/mail?act=template&from="+n+i,s=a.default.onClick("uMailWrite.loadTemplatePage","event","this",o);return a.default.html(A(),e.mobile_mail_templates_panel_title,o,s,t)}(),T=S(),D=a.default.class("uMailWrite",{canAttachMoney:!!o.canAttachMoney,canAttachPoll:!0});return a.default.html(b(),D,n,o.hashSend,t.cur.communityParam,d,f,T,p,v,y,h,E,k)};function S(){var e=store.mail,t=e.cur,n=e.peers,i=n[t.peerId]?n[t.peerId].countUnread:null,s=i?(0,o.default)({mix:"uMailWrite__toBottomValue",value:i}):"",l=(0,r.default)({mix:"uMailWrite__toBottomIcon",icon:"arrowDown"});return a.default.html(y(),s,l)}function C(e){return a.default.html(v(),e)}function M(e){var t=store.mail.cur,n=store.mail.members,i=t.peerId,r=t.msgReply[i],o=null;r&&(o=store.mail.forwards[r]||store.mail.msgs[r]);var s="",l="";if(o){var u=(0,c.Msg__authorName)(n[o.authorId],i,t.userId);s=(0,c.Msg__reply)(o,u,e),l='\n      <input type="hidden" name="attached_messages" value="'.concat(r,'" />\n      <input type="hidden" name="has_reply" value="true" />\n    '),t.editing&&(l+='\n        <input type="hidden" name="mail_edit_attach_fwd" value="1" />\n      ')}var d=a.default.class("uMailWrite__reply",{visible:!!s}),f=MailButton({class:"uMailWrite__replyClose",onClick:a.default.onClick("uMailWrite.onReplyClose")});return a.default.html(p(),d,s,f,l)}function P(e){var t=store.mail,n=t.cur,i=t.peers[e].attachmentsHTML,o=a.default.class("uMailWrite__attachments",function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,!0)),s=n.msgAttached[e]||[],l=s.length,c="";l>0&&(c=function(e,t){var n=window.lang,i=a.default.onClick("uMailWrite.onAttachedMsgsRemove"),o=(0,r.default)({mix:"uMailWrite__attachedMsgsIcon",icon:"msgMini"}),s=(0,r.default)({mix:"uMailWrite__attachedMsgsRemove",icon:"close9",attrs:i}),l=langNumeric(e,n.mobile_mail_messages),c=function(e){return a.default.html(d(),e)}(t);return a.default.html(f(),c,s,o,l)}(l,s.join(";")));return a.default.html(h(),o,c,i)}t.default=k},dbQR:function(e,t,n){"use strict";var a,i=(a=n("SRbS"))&&a.__esModule?a:{default:a};function r(e,t){return"".concat(e,'="').concat(t,'"')}function o(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r(e,s(n))}}function s(e){var t=e[0],n=e.slice(1).map(l).join(", ");return"".concat(t,"(").concat(n,")")}function l(e){return"number"==typeof e||"event"===e||"this"===e?e:JSON.stringify(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39").replace(/</g,"&lt;").replace(/>/g,"&gt;")}Object.assign(i.default,{attr:r,onBlur:o("onblur"),onClick:o("onclick"),onFocus:o("onfocus"),onInput:o("oninput"),onKeyDown:o("onkeydown"),onKeyPress:o("onkeypress"),onKeyUp:o("onkeyup"),onMouseDown:o("onmousedown"),onMouseUp:o("onmouseup"),onScroll:o("onscroll"),onSubmit:o("onsubmit"),onTouchEnd:o("ontouchend"),onTouchMove:o("ontouchmove"),onTouchStart:o("ontouchstart"),onWheel:o("onwheel"),onChange:o("onchange")})},eFmH:function(e,t,n){"use strict";var a,i=(a=n("jk6M"))&&a.__esModule?a:{default:a},r=n("H5mD");function o(e,t,n){if(r.isWKWebView){attr(t,"onclick",""),attr(t,"href","vk://vk.com/write"+(2e9+e));var a=new Event("click");return t.dispatchEvent(a),void setTimeout(function(){attr(t,"href","/mail?act=show&chat="+e),t.textContent=n})}i.default.android?location.href="https://vk.com/write"+(2e9+e):r.isIOS?(attr(t,"onclick",""),attr(t,"href","/mail?act=show&chat="+e),t.textContent=n,location.href="vk://vk.com/write"+(2e9+e)):location.href="/mail?act=show&chat="+e}window.ChatPreview={join:function(e,t,n){return ajax.post(e,{},{onDone:function(e){o(e,t,n)}}),!1},open:function(e,t,n){return setTimeout(function(){o(e,t,n)}),!1}}},eGQV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=u,t.isStandalone=function(){return c},t.isOfflineCapable=d;var a=o(n("i/4A")),i=o(n("50sn")),r=o(n("OGfC"));function o(e){return e&&e.__esModule?e:{default:e}}var s,l=new a.default;window.sw_client=l,window.SWClient=a.default,window.initPushNotifier=function(){try{window.PushNotifier=r.default,window.pushNotifier=new r.default(l,a.default)}catch(e){}};var c=!1;function u(){window.addEventListener&&(!function(){if(c=!0===navigator.standalone||window.matchMedia&&matchMedia("(display-mode: standalone)").matches,!history.replaceState)return;var e=location.search;if((e=(e=(e=e.replace(/(\?|&)mode\=([^&]+)(&)?/,"$1")).replace(/(\?|&)__appshell_fallback\=([^&]+)(&)?/,"$1")).replace(/(\?|&)+$/,""))!==location.search){var t=location.pathname+e+location.hash;history.replaceState(null,"",t)}}(),function(){if(!a.default.isSupported())return;l.listenMessages(),navigator.serviceWorker.addEventListener("message",function(e){var t=e.data;t&&t.action&&"update-ready"===t.action&&(hasUpdate=!0)})}(),window.addEventListener("beforeinstallprompt",function(e){e.preventDefault()}),window.addEventListener("appinstalled",function(){statlogsValueEvent("pwa_installed_event",1)}),"complete"===document.readyState?f():window.addEventListener("load",function(){f()}))}function d(){return void 0===s&&(s=!(!a.default.isSupported()||!navigator.serviceWorker.controller)),s}function f(){window.vk&&window.vk.sw&&(l.register(window.vk.sw).then(function(e){},function(e){if(e!==a.default.SW_NOT_AVAILABLE_ERROR)throw e}),a.default.isSupported()&&navigator.serviceWorker.getRegistration().then(function(e){!function(e){if(!d())return;e&&e.active&&e.installing&&e.installing.postMessage({action:"activate"})}(e)}),(0,i.default)())}u()},eR1x:function(e,t,n){"use strict";var a=n("UxAg"),i=function(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("NSb7"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}Object.assign(i.default,{setTyping:function(e,t){var n="string"==typeof e?(0,a.$)(".typing_id_".concat(e)):e,r=n.$(".typing__names");n.classList.toggle("typing_empty",(0,i.TypingIsEmpty)(t.typingCount)),r.innerHTML=(0,i.TypingRenderNames)(t)},getElem:function(e){return(0,a.$)(".typing_id_".concat(e))}})},eVa8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAudioPerformers=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",o=!(0,a.isPodcast)(e)&&t;isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS])&&(n=(0,i.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],o));isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS])&&(n+=" feat. ",n+=(0,i.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],o));if(!n){var s=e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]?e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g,""):"";if(o){var l="/audio?performer=1&q="+encodeURIComponent(s);n='<a class="artist_link" data-performer="'.concat(s,'" href="').concat(l,'">').concat(s,"</a>")}else n=s}return n};var a=n("W0fz"),i=n("TGUg"),r=n("uk5P")},eZEc:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("Zw+j"))&&a.__esModule?a:{default:a}).default;t.default=i},el8Q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("29dZ")),i=o(n("r/ag")),r=o(n("p5n7"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return(0,i.default)({class:"CartQtyPopup",content:[{inner:[{class:"CartQtyPopup__message",inner:[{class:"CartQtyPopup__messageTitle",inner:lang.mobile_market_cart_change_quantity_title},{class:"CartQtyPopup__messageText",inner:lang.mobile_market_cart_change_quantity_text}]},{tag:"table",attrs:{cellpadding:0,cellspacing:0,border:0},inner:{tag:"tr",inner:[{tag:"td",class:"CartQtyPopup__inputWrapper",inner:(0,r.default)({value:e.quantity,on_change:["Cart.view.setQuantity","this"],on_key_down:"void",maxlength:10,type:"number",spellcheck:lang.mobile_market_cart_change_quantity_text})},{tag:"td",inner:{inner:langNumeric("",lang.mobile_market_items_count_short),class:"CartQtyPopup__pc"}},{tag:"td",inner:(0,a.default)({inner:lang.mobile_market_cart_change_quantity_button,on_click:"Cart.view.changeQuantity",size:"large",attrs:{"data-item-id":e.id}})}]}}]}]})};t.default=s},eoxF:function(e,t,n){"use strict";var a=function(){var e=null,t=!1,n=!1,i={},r=[],o=0,s=null,l="",c="";function u(e,t){return!t&&v(e)}function d(e){n=!1;var a=ge("medias_map"),i=ge("attached_wrap");a||(a=ce("div",{id:"medias_map",className:"pi_medias"}),append(a,i));var r=+e[1]||0,o=e[3]||"",s=e[4]||"",l=e[5]||"",c=(+e[6].lat||0)+"_"+(+e[6].lng||0),u=geByClass1("medias_map",a),d='<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">'+o+(l?", "+l:s?", "+s:"")+"</div>",f='<input type="hidden" name="place_id" value="'+r+'"><input type="hidden" name="place" value="'+c+'">';if(u)val(u,d+f);else{d='<div class="medias_map">'+d+f+"</div>";val(a,d)}addClass("cp_geo_btn_sel","geo_btn"),t=!0,show(a)}function f(t){return v(e)}function h(){val("place_add_box",""),hide("place_add_box"),show("places_box")}function p(t,n){A();var a=i[n];a&&(e={latitude:+a[6].lat||0,longitude:+a[6].lng||0},n?d(a):m(e,a))}function A(e){if(!s)return!0;val("m",s),s=null,scrollToEl(geByClass1("create_post_extra","mcont"));var t=nav.path+(nav.params?"?"+nav.params:"");return nav.go(t,null,{push_only:!0,no_push:e}),!1}function m(e,a){n=!0;var i=ge("medias_map"),r=ge("attached_wrap");i||(i=ce("div",{id:"medias_map",className:"pi_medias"}),r.appendChild(i));var o=e.latitude,s=e.longitude,l=(window.devicePixelRatio,a&&a[4]||!1),c=geByClass1("medias_map",i),u=l?'<div class="medias_map_close" onclick="checkin.remove();"><i class="i_close">&nbsp;</i></div><div class="medias_map_label" onclick="checkin.changePlace();">'+l+"</div>":"",d='<input type="hidden" name="map" value="'+(o+"_"+s+"_0")+'">';c?val(c,u+""+d):val(i,'<div class="medias_map">'+u+d+"</div>");t=!0,addClass("cp_geo_btn_sel","geo_btn"),show(i)}function _(){e=null,i={},r=[],o=0,ajax.post(c,{_ajax:1}),remove("medias_map")}function v(e){var t=window.al;remove("feed_extra_field");var n=Math.round(1e8*e.latitude)/1e8,a=Math.round(1e8*e.longitude)/1e8,i=gpeByTag("form","geo_btn"),r=ce("input",{id:"feed_extra_field",type:"hidden",name:"add_place",value:n+","+a});if(!i)return nav.go(nav.path+"?act=places&lat="+n+"&lng="+a);var o=!1;return each(i,function(e,t){if("submit"===t.type)return o=t,!1}),o?(append(r,i),window.al&&t.ver?nav.go(o,null,{removeAfterNextResponse:!1}):i.submit()):void 0}function g(t){t&&t.coords&&u(e={latitude:+t.coords.latitude||0,longitude:+t.coords.longitude||0})}function y(e){a.remove(),hide("geo_waiting")}return{toggle:function(){t?a.remove():a.add()},addNewPlace:function(){var t=val("place_name_fld"),n=val("place_address_fld");return t?(lockButton("place_add_btn"),ajax.post("/places.php",{_ajax:1,act:"add_place",latitude:e.latitude,longitude:e.longitude,title:t,address:n,hash:l},{onDone:function(e,t){if(unlockButton("place_add_btn"),e){var n={};n[e]=t,extend(i,n),r.splice(r[0]?0:1,0,e),h(),p(null,e)}},onFail:function(){unlockButton("place_add_btn");var e=Array.prototype.slice.call(arguments),t=e.shift(),n=ge("place_add_form");switch(t){case 2:n&&n.submit()}}}),!1):(elfocus("place_name_fld"),!1)},addPlaceShow:function(t,n){var a=window.lang,i="/places.php"+obj2qs({act:"add_place",latitude:e.latitude,longitude:e.longitude,hash:l});val("place_add_box",'<h4 class="sub_header">'+a.mobile_geo_new_place_header+'</h4><div class="form_item fi_fat"><form id="place_add_form" action="'+i+'" method="post"><dl class="fi_row"><dt class="fi_label">'+a.mobile_geo_place_name_label+'</dt><dd class="iwrap"><input type="text" class="textfield" id="place_name_fld" name="title" /></dd></dl><dl class="fi_row"><dt class="fi_label">'+a.mobile_geo_place_address_label+'</dt><dd class="iwrap"><input type="text" class="textfield" id="place_address_fld" name="address" /></dd></dl><dl class="fi_row"><dd><input class="button" type="submit" id="place_add_btn" value="'+a.mobile_geo_place_add_btn+'" onclick="return checkin.addNewPlace(this);" /><a class="near_btn" onclick="checkin.addPlaceCancel(); return false;">'+a.mobile_cancel+"</a></dd></dl></form></div>"),val("place_name_fld",unescapeAttr(t)||""),val("place_address_fld",unescapeAttr(n)||""),hide("places_box"),show("place_add_box"),t?elfocus("place_address_fld"):elfocus("place_name_fld")},addPlaceCancel:h,selectPlace:p,changePlace:f,back:A,refreshCurrentPosition:function(){geo.getCurrentPosition(g,y)},getCurrentAddress:function(){return i[0]&&i[0][5]||""},savePlaces:function(e){extend(i,e)},add:function(n){if(!n&&t)return f();n&&(n.latitude||n.longitude)&&n.place?(e={latitude:+n.latitude||0,longitude:+n.longitude||0},n.place[1]?d(n.place):m(e,n.place),u(e,!0)):(geo.getCurrentPosition(g,y),show("geo_waiting"))},add_place:function(n){if(!n&&t)return f();n&&(n.latitude||n.longitude)&&n.place?(e={latitude:+n.latitude||0,longitude:+n.longitude||0},n.place[1]?d(n.place):m(e,n.place),u(e,!0)):(geo.getCurrentPosition(g,y),show("geo_waiting"))},remove:function(){t=!1,removeClass("cp_geo_btn_sel","geo_btn"),_()},stash:function(a){if(!a)return[e,t,n,i,r,o,s];e=a[0],t=a[1],n=a[2],i=a[3],r=a[4],o=a[5],s=a[6]},init:function(u,d,f){return hide("geo_waiting"),e=null,t=!1,n=!1,i={},r=[],o=0,s=null,l=d||"",c=f||"",u&&a.add(u),geo.init()}}}();window.checkin=a},eyw1:function(e,t,n){"use strict";var a=function(){var e="/club",t="enter",n="leave",a=null;function i(t,n,a,i,r,o){var s=e+n+obj2qs({act:t,hash:a,id:n,from:i});ajax.post(s,{_ajax:1},{onDone:r,onFail:o})}return{enter:function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a;i(t,e,n,r,o,s)},leave:function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a;i(n,e,t,r,o,s)}}}();window.Groups=a},f01n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteEvent=function(e){var t=i(e,2)[1];return{type:r,localId:t}},t.replaceFlagsEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:s,messageId:n,mask:a,peerId:r}},t.setFlagsEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:o,messageId:n,flags:a,peerId:r}},t.resetFlagsEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:l,messageId:n,flags:a,peerId:r}},t.addMessageEvent=V,t.editMessageEvent=function(e){var t=V(e);return t.type=L,t},t.replaceMessageEvent=function(e){var t=V(e);return t.type=R,t},t.editMessageLocallyEvent=function(e){return extend({},e,{type:L})},t.readInboundEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:u,peerId:n,upToId:a,unread:r}},t.readOutboundEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:d,peerId:n,upToId:a,unread:r}},t.gotOnlineEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:f,userId:-n,platform:a,lastSeenTs:r}},t.gotOfflineEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:h,userId:-n,reason:a,lastSeenTs:r}},t.resetDirectoriesEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:w,peerId:n,mask:a,local:void 0!==r&&r}},t.replaceDirectoriesEvent=function(e){var t=i(e,3),n=t[1],a=t[2];return{type:E,peerId:n,mask:a}},t.setDirectoriesEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:k,peerId:n,mask:a,local:void 0!==r&&r}},t.deleteDialogEvent=function(e){var t=i(e,3),n=t[1],a=t[2];return{type:B,peerId:n,localId:a}},t.chatChangedEvent=function(e){var t=i(e,3),n=t[1],a=t[2];return{type:p,chatId:n,self:a}},t.chatUpdatedEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:A,peerId:a,updateType:n,updateArg:r}},t.typingEvent=function(e){var t=i(e,5),n=t[1],a=t[2],r=t[3],o=t[4];return{type:m,peerId:n,userIds:a,totalCount:r,ts:o}},t.recordingAudioEvent=function(e){var t=i(e,5),n=t[1],a=t[2],r=t[3],o=t[4];return{type:_,peerId:n,userIds:a,totalCount:r,ts:o}},t.videoCallEvent=function(e){var t=i(e,3),n=t[1],a=t[2];return{type:v,userId:n,callId:a}},t.unreadCountEvent=function(e){var t=i(e,4),n=t[1],a=t[2],r=t[3];return{type:g,count:n,countNotMuted:a,showOnlyNotMuted:r}},t.notifySettingsChangedEvent=function(e){var t=i(e,2)[1],n=void 0===t?{}:t;return{type:y,peerId:n.peer_id,sound:n.sound,disabledUntil:n.disabled_until}},t.refreshMessageEvent=function(e){var t=i(e,2)[1],n=void 0===t?{}:t,a=V([!1,n.id,n.flags,n.peer_id,n.date,n.message,extend(n.kludges,{title:n.title||""}),{},n.random_id,n.chat_local_id,n.update_time]);return a.type=L,a},t.audioStartEvent=function(e){var t=i(e,2)[1],n=void 0===t?{}:t;return{type:N,uuid:n.uuid,deviceName:n.device_name||""}},t.emptyEvent=function(e){return{type:b,params:e}},t.transitionEvent=function(e){return{type:M,state:e}},t.resyncEvent=function(){return{type:S}},t.refreshLpKeyEvent=function(e){var t=i(e,3),n=t[1],a=t[2];return{type:C,key:n,url:a}},t.waitingForReconnectEvent=function(e){var t=i(e,2)[1];return{type:j,timeout:t}},t.reconnectingEvent=function(){return{type:F}},t.reconnectedEvent=function(){return{type:H}},t.resetPeer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:P,cancelSearch:e,removeActivePeer:t}},t.changePeer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return{type:D,peerId:e,msgid:t,forward:n,cancelSearch:a,entryPoint:i}},t.changeTab=function(e){return{type:I,tab:e}},t.failedMessage=function(e,t,n){return{type:x,message:t,peer:e,error:n}},t.mutexEvent=function(e){var t=i(e,6),n=(t[0],t[1]),a=t[2],r=t[3],o=t[4],s=t[5];return{type:T,free:!!intval(n)||intval(o)===vk.id,resource:a,peerId:intval(r),who:intval(o),name:s}},t.resendEvent=function(e,t){return{type:O,message:t,peerId:e}},t.MESSAGE_REQUEST_STATUS_NEW=t.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED=t.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED=t.MAIL_CHAT_UPDATE_TYPE_USER_KICKED=t.MAIL_CHAT_UPDATE_TYPE_USER_LEFT=t.MAIL_CHAT_UPDATE_TYPE_USER_JOINED=t.MAIL_CHAT_UPDATE_TYPE_PINNED=t.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED=t.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED=t.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED=t.FOLDER_HAS_BANNER=t.FOLDER_UNRESPOND=t.FOLDER_IMPORTANT=t.FLAG_AUDIO_MESSAGE_LISTENED=t.FLAG_HAS_REPLY=t.FLAG_STEALTH=t.FLAG_MEDIA=t.FLAG_DELETED=t.FLAG_SPAM=t.FLAG_FRIENDS=t.FLAG_CHAT=t.FLAG_IMPORTANT=t.FLAG_OUTBOUND=t.FLAG_UNREAD=t.RECONNECTED=t.RECONNECTING=t.WAITING_FOR_RECONNECT=t.AUDIO_START=t.REPLACE_MESSAGE=t.EDIT_MESSAGE=t.DELETE_DIALOG=t.RESEND=t.FAILED_MESSAGE=t.CHANGE_TAB=t.CHANGE_PEER=t.MUTEX=t.RESET_PEER=t.TRANSITION=t.REFRESH_LP_KEY=t.RESYNC=t.SET_DIRECTORIES=t.REPLACE_DIRECTORIES=t.RESET_DIRECTORIES=t.EMPTY=t.NOTIFY_SETTINGS_CHANGED=t.UNREAD_COUNT=t.VIDEO_CALL=t.RECORDING_AUDIO=t.TYPING=t.CONVERSATION_UPDATED=t.CHAT_CHANGED=t.GOT_OFFLINE=t.GOT_ONLINE=t.READ_OUTBOUND=t.READ_INBOUND=t.ADD_MESSAGE=t.RESET_FLAGS=t.REPLACE_FLAGS=t.SET_FLAGS=t.DELETE=void 0;var a=n("rudk");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r="event_delete";t.DELETE=r;var o="event_set_flags";t.SET_FLAGS=o;var s="event_replace_flags";t.REPLACE_FLAGS=s;var l="event_reset_flags";t.RESET_FLAGS=l;var c="event_add_message";t.ADD_MESSAGE=c;var u="event_read_inbound";t.READ_INBOUND=u;var d="event_read_outbound";t.READ_OUTBOUND=d;var f="event_got_online";t.GOT_ONLINE=f;var h="event_got_offline";t.GOT_OFFLINE=h;var p="event_chat_changed";t.CHAT_CHANGED=p;var A="event_chat_updated";t.CONVERSATION_UPDATED=A;var m="event_typing";t.TYPING=m;var _="event_recoding_audio";t.RECORDING_AUDIO=_;var v="event_video_call";t.VIDEO_CALL=v;var g="event_unread_count";t.UNREAD_COUNT=g;var y="event_notify_settings_changed";t.NOTIFY_SETTINGS_CHANGED=y;var b="event_empty";t.EMPTY=b;var w="event_reset_directories";t.RESET_DIRECTORIES=w;var E="event_replace_directories";t.REPLACE_DIRECTORIES=E;var k="event_set_directories";t.SET_DIRECTORIES=k;var S="event_resync";t.RESYNC=S;var C="event_refresh_lp_key";t.REFRESH_LP_KEY=C;var M="transition_event";t.TRANSITION=M;var P="reset_peer";t.RESET_PEER=P;var T="mutex";t.MUTEX=T;var D="change_peer";t.CHANGE_PEER=D;var I="event_change_tab";t.CHANGE_TAB=I;var x="event_failed_message";t.FAILED_MESSAGE=x;var O="event_resend";t.RESEND=O;var B="event_delete_dialog";t.DELETE_DIALOG=B;var L="event_edit_message";t.EDIT_MESSAGE=L;var R="event_replace_message";t.REPLACE_MESSAGE=R;var N="event_audio_start";t.AUDIO_START=N;var j="event_waiting_for_reconnect";t.WAITING_FOR_RECONNECT=j;var F="event_reconnecting";t.RECONNECTING=F;var H="event_reconnected";t.RECONNECTED=H;t.FLAG_UNREAD=1;t.FLAG_OUTBOUND=2;t.FLAG_IMPORTANT=8;t.FLAG_CHAT=16;t.FLAG_FRIENDS=32;t.FLAG_SPAM=64;t.FLAG_DELETED=128;t.FLAG_MEDIA=512;t.FLAG_STEALTH=65536;t.FLAG_HAS_REPLY=1<<21;t.FLAG_AUDIO_MESSAGE_LISTENED=4096;t.FOLDER_IMPORTANT=1;t.FOLDER_UNRESPOND=2;t.FOLDER_HAS_BANNER=8;t.MAIL_CHAT_UPDATE_TYPE_TITLE_CHANGED=1;t.MAIL_CHAT_UPDATE_TYPE_AVATAR_CHANGED=2;t.MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED=3;t.MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED=4;t.MAIL_CHAT_UPDATE_TYPE_PINNED=5;t.MAIL_CHAT_UPDATE_TYPE_USER_JOINED=6;t.MAIL_CHAT_UPDATE_TYPE_USER_LEFT=7;t.MAIL_CHAT_UPDATE_TYPE_USER_KICKED=8;t.MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED=9;t.MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED=10;t.MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED=11;t.MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED=12;t.MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED=13;function V(e){var t=i(e,11),n=t[1],r=t[2],o=t[3],s=t[4],l=t[5],u=t[6],d=t[7],f=t[8],h=t[9],p=t[10],A=extend(u,d||void 0);return{type:c,messageId:intval(n),flags:intval(r),peerId:intval(o),date:intval(s),attaches:(0,a.convertKludgesToAttaches)(A,n),subject:u.title||"",text:l,kludges:A,randomId:intval(f),userId:(0,a.isChatPeer)(o)?intval(A.from):intval(o),update_time:p,chat_local_id:h}}t.MESSAGE_REQUEST_STATUS_NEW=3},f9C2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recommended=o,t.default=void 0;var a=n("/zOt"),i=n("seaN"),r=n("/xuI");function o(e){for(var t=Math.ceil((window.innerHeight-r.HEADER_HEIGHT)/210),n=[],o=0;o<t;o++)n.push((0,a.WallBlock)());return{inner:[(0,i.SearchHeader)(),n],class:"SkeletonRecommended Skeleton",tag:"div"}}var s=o;t.default=s},fKzu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForbiddenPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find(function(t){return"*"===t[t.length-1]?e.startsWith(t.slice(0,t.length-1)):e===t})}},fOXz:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Artist=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"follow",value:function(t,n,a,i){lockButton(i),ajax.post("/audio",{_ajax:1,act:"artist_follow",ref:n,hash:a,artist_id:t},{onDone:function(a){unlockButton(i),i.classList.add("ArtistCover__followBtn__followed"),i.onclick=function(r){r.preventDefault(),e.unfollow(t,n,a,i)}},onFail:function(){return unlockButton(i)}})}},{key:"unfollow",value:function(t,n,a,i){lockButton(i),ajax.post("/audio",{_ajax:1,act:"artist_unfollow",ref:n,hash:a,artist_id:t},{onDone:function(a){unlockButton(i),i.classList.remove("ArtistCover__followBtn__followed"),i.classList.contains("ArtistCover__followBtn__canFollow")&&(i.onclick=function(r){r.preventDefault(),e.follow(t,n,a,i)})},onFail:function(){return unlockButton(i)}})}},{key:"trackToOfficial",value:function(e,t){ajax.post("/audio",{_ajax:1,act:"artist_track_to_official",hash:e,url:t})}}],(n=null)&&a(t.prototype,n),i&&a(t,i),e}();t.Artist=i},fP8X:function(e,t,n){"use strict";var a,i=n("UxAg"),r=(a=n("j80l"))&&a.__esModule?a:{default:a},o=n("W9Tc");var s=need("nav"),l=need("page"),c=need("ajax"),u=need("audioplayer"),d=need("TabRow"),f=need("AudioSerp");window.uAudioSerp={},uAudioSerp._onQueryChange=g,uAudioSerp._init=v;var h=300,p={},A=!1,m=null,_=null;function v(){var e,t=need("cur");(e=b(s.getQuery("q")))&&(p[e]=f.getFoundHtml()),t.processNav=y,u.onAdd(w),u.onDel(w)}function g(e){var t=e.query,n=b(t);function a(){var e=!0;n||(e=!1),!n&&A&&(cur.processNav=null,f.toggleTabs(!1),f.setView("spinner"),A=!1),s.go(r.default.make(s.path,{q:n?t:"",tab:e})),cur.processNav=y}_&&_.abort(),m&&clearTimeout(m),f.toggleTabs(!0),n in p||!n?a():(f.setView("spinner"),m=setTimeout(a,h))}function y(e){var t=s.path,n=e.nav.path,a=qs2obj(s.params),h=qs2obj(e.nav.params);if(t!==n||h.act)return l.save(s.cur,{title:document.title,bc:(0,i.$)("body").className,html:(0,i.$)(".basis").outerHTML,js:s.getPageJs()}),p={},A=!0,u.onAdd.off(w),u.onDel.off(w),_&&_.abort(),!1;if(!(0,o.partConfigEnabled)("audio_recommendations_new_catalog")&&a.tab!==h.tab){var m=h.tab||"owned";f.setTab(m),d.setSelectedTab("uAudioSerp",m)}var v=h.q||"",g=b(v);if(t.q!==h.q&&_&&_.abort(),!(0,o.partConfigEnabled)("audio_recommendations_new_catalog")){var y=r.default.make(t,{q:v,tab:null}),E=r.default.make(t,{q:v,tab:"global"});d.setTabUrl("uAudioSerp","owned",y),d.setTabUrl("uAudioSerp","global",E)}return SearchPanel.setQuery("uAudioSerp",v),v?g in p?(f.setFoundHtml(p[g]),f.setView("found")):(f.setView("spinner"),_=c.post(t,{q:v,_ajax:1},{onDone:function(e){f.setFoundHtml(e),f.setView("found"),p[g]=e}})):f.setView("owned"),!0}function b(e){return(e||"").trim().toLowerCase()}function w(){p={},A=!0}},fWqt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("vkUM"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var r=a;t.default=r,window.MsgDeleteDialog=a},fYoA:function(e,t,n){"use strict";window.SettingsNotifyGroup={},SettingsNotifyGroup._onChange=i;var a={notifyGroup:".settingsNotifyGroup",description:".settingsNotifyGroup__description"};function i(e,t){t.$control.closest(a.notifyGroup).$(a.description).innerHTML=e}},fdw3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return(0,r.isObject)(e)},t.isJS=function(){return!0},t.log=function(){var e;(e=console).log.apply(e,arguments)},t.mergeObjects=function(e,t){return Object.assign(e,t)},t.concatValues=function(e,t){return e+t},t.isNewNavigation=function(){return window.isNewNavigation},t.isFinite=function(e){return window.isFinite(e)},t.getLang=function(e){return window.getLang(e)},t.insertBetween=function(e,t){var n=[];return e.forEach(function(a,i){var r=e[i+1],o=e[i+2];a&&n.push(a),a&&(r||o)&&n.push(t)}),n},t.wrapCommunityMailUrl=function(e){return(0,i.wrapCommunityUrl)(e)},t.mailReplaceMentions=function(e,t){return e.replace(i.MENTION_REGEXP,t)},t.mailReplaceDomainMentions=function(e,t){return e.replace(i.MENTION_DOMAIN_REGEXP,t)},t.getState=function(e){return window.isomorphicState[e]||[]},t.flatten=function e(t){var n=[];t.forEach(function(t){t instanceof Array?n=n.concat(e(t)):n.push(t)});return n},Object.defineProperty(t,"emojiToHTML",{enumerable:!0,get:function(){return a.emojiToHTML}}),Object.defineProperty(t,"isChatPeer",{enumerable:!0,get:function(){return i.isChatPeer}}),Object.defineProperty(t,"isForwardedMessageId",{enumerable:!0,get:function(){return i.isForwardedMessageId}}),Object.defineProperty(t,"extend",{enumerable:!0,get:function(){return r.extend}}),Object.defineProperty(t,"makeUrl",{enumerable:!0,get:function(){return o.makeUrl}});var a=n("9M99"),i=n("qHA9"),r=n("OcsD"),o=n("j80l")},fntf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoryAuthor=t.StickerTypes=t.ERROR_CLASS=t.VIDEO_MUTED_CLASS=void 0;var a=s(n("TYsd")),i=n("jk6M"),r=s(n("oHC7")),o=s(n("WgE6"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}t.VIDEO_MUTED_CLASS="StoryAuthor_videoMuted";t.ERROR_CLASS="StoryAuthor_error";t.StickerTypes={hashtag:1,mention:2,question:3,place:4,music:5,storyReply:6,owner:7,link:8,marketItem:9};var u=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.data=n,this.state={authorIndex:t};var o=this.getCurrentStoryIndex();this.setCurrentStoryIndex(o),this.story=new r.default(this.data.items[o],this.data.author,t,o),this.authorStoriesHTML=a.default.html(this.story.render()),this.progressItemElems=null,Stories.onRender(function(){i.updateStory()})}var t,n,s;return t=e,(n=[{key:"getCurrentStory",value:function(){if(this.story)return this.story}},{key:"destroy",value:function(){this.story&&this.story.destroy()}},{key:"update",value:function(){var e=this.data.index;this.destroy(),this.story=new r.default(this.data.items[e],this.data.author,this.state.authorIndex,e),this.authorStoriesHTML=a.default.html(this.story.render())}},{key:"updateHeader",value:function(){this.authorElems=Stories.getAuthorElems(),this.authorElem=this.authorElems[this.state.authorIndex],this.progressItemElems=Array.from(geByClass("StoryAuthor__progressItem",this.authorElem)),this.drawFilledProgressItems()}},{key:"updateStory",value:function(){var e=this;this.authorElems=Stories.getAuthorElems(),this.authorElem=this.authorElems[this.state.authorIndex];var t=geByClass1("Story__body",this.authorElem);this.story.update(t),this.story.onVideoData(function(n){n.authorIndex,n.storyIndex;var a=e.story.getDuration(),i=e.story.getType(),r=e.store.isStopped;if(e.countdown=new o.default(a,{tick:13,onTick:function(t){var n=(100-Math.min(t/a*100,100))/100;e.drawCurrentProgress(n)},onEnd:function(){"video"!==i&&(e.drawCurrentProgress(100),Stories.nextStory(!0),removeClass(e.authorElem,"StoryAuthor_paused"))},onPause:function(){e.story.pause(),addClass(e.authorElem,"StoryAuthor_paused")},onStart:function(){e.story.play(),removeClass(e.authorElem,"StoryAuthor_videoHold"),removeClass(e.authorElem,"StoryAuthor_paused")}}),"photo"!==i&&"broken"!==i||r){if("video"===i){var s=e.story.getVideoState(),l=e.story.getVideo();addClass(t,"Story__body_video"),4!==s||r||l.paused||e.countdown.start()}}else e.countdown.start()}),this.story.onVideoEndedEvent(function(){e.drawCurrentProgress(100),Stories.nextStory(!0)}),this.story.onVideoPauseEvent(function(){e.countdown&&e.countdown.pause()}),this.story.onVideoBuffering(function(){e.countdown&&e.countdown.pause()}),this.story.onVideoPlayEvent(function(){e.countdown&&!e.store.isStopped&&e.countdown.start()}),this.story.onAutoPlay(function(){var t=window.lang,n=e.story.getVideo();Stories.pauseAudio();var a=geByClass1("Story__body",e.authorElem),i=Stories.isGoodBrowser();n.play(),n.paused&&!i?e.story.renderError(e.authorElem,a,t.mobile_stories_inline_video_error):!e.countdown||e.store.isStopped||n.paused?i&&n.paused&&addClass(e.authorElem,"StoryAuthor_videoHold"):e.countdown.start(),n.muted&&addClass(e.authorElem,"StoryAuthor_videoMuted"),Stories._showFeatureTooltipIfNeeded()}),this.story.onDestroy(function(){e.countdown&&(e.countdown.stop(),e.countdown=null)}),Stories._showFeatureTooltipIfNeeded()}},{key:"getCountDown",value:function(){if(this.countdown)return this.countdown}},{key:"getFirstUnreadStoryIndex",value:function(){if(Stories._hasContext("all"))return 0;var e=this.data.items.findIndex(function(e){return!0===e.unread});return-1!==e?e:0}},{key:"getCurrentStoryIndex",value:function(){if(!this.data.index){var e=this.getFirstUnreadStoryIndex();this.setCurrentStoryIndex(e)}return this.data.index}},{key:"drawCurrentProgress",value:function(e){if(this.progressItemElems){var t=this.progressItemElems[this.data.index];setStyle.transform(geByClass1("StoryAuthor__progressItemCurrent",t),[e,1])}}},{key:"drawFilledProgressItems",value:function(){var e=this.data.index;if(this.progressItemElems)for(each(this.progressItemElems,function(e,t){removeClass(t,"StoryAuthor__progressItem_filled")});e>=0;)addClass(this.progressItemElems[--e],"StoryAuthor__progressItem_filled")}},{key:"setCurrentStoryIndex",value:function(e){this.data.index=e,this.drawFilledProgressItems()}},{key:"renderEmpty",value:function(){var e=this.story.getPreview(),t=Stories.getWidth();return a.default.html({class:"StoryAuthor StoryAuthor_empty",style:"width: ".concat(t,"px;"),attrs:{"data-src":e}})}},{key:"render",value:function(){var e,t,n,r=window.lang,o=Stories.getWidth(),s=i.isTouch?"ontouchstart":"onmousedown",c=i.isTouch?"ontouchend":"onmouseup";return a.default.html({class:"StoryAuthor StoryAuthor_inited",style:"width: ".concat(o,"px;"),inner:[{class:"StoryAuthor__header",inner:{class:"StoryAuthor__progress",inner:this.data.items.map(function(){return{class:"StoryAuthor__progressItem",inner:{class:"StoryAuthor__progressItemBar",inner:{class:"StoryAuthor__progressItemCurrent"}}}})}},(e={class:"StoryAuthor__muted"},l(e,s,"Stories.unMute(this, event);"),l(e,"inner",[{class:"Story__icon Story__icon_unmute"},{class:"StoryAuthor__muted_text",inner:r.mobile_stories_unmute}]),e),(t={class:"StoryAuthor__next"},l(t,s,"Stories.onTouchStart(event);"),l(t,c,"Stories.onTouchEnd(event);"),l(t,"ontouchcancel","Stories.onTouchEnd(event);"),t),(n={class:"StoryAuthor__prev"},l(n,s,"Stories.onTouchStart(event);"),l(n,c,"Stories.onTouchEnd(event, true);"),l(n,"ontouchcancel","Stories.onTouchEnd(event, true);"),n),{class:"StoryAuthor__body",inner:this.authorStoriesHTML}]})}}])&&c(t.prototype,n),s&&c(t,s),e}();t.StoryAuthor=u},fw35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("wMVj")),i=r(n("29dZ"));function r(e){return e&&e.__esModule?e:{default:e}}var o={reload:function(e){i.default.setDisabled(e,!0),!1===navigator.onLine?setTimeout(function(){i.default.setDisabled(e,!1)},500):a.default.reload()}};t.default=o},gD36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};var r=function(e){var t=!(!e.tags||!e.tags.length)&&e.tags;return{class:"Owner__tags",inner:t?[{class:"Owner__tags_icon Icon Icon_tagLabel"},t.map(function(e){return{class:"Owner__tag",inner:i.default.wrap(e.name)}})]:null}};t.default=r},gF8j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s,t.getVisibilityState=u,t.getVisiblityEvent=d;var a,i=(a=n("uQjJ"))&&a.__esModule?a:{default:a},r=n("JuPy");var o=browser.iphone||browser.ipad||browser.ipod;function s(e){this.started=!1,this.is_idle=!0,this.activeTimeStart=null,this.cbActiveB=this.cbActive.bind(this),this.cbInactiveB=this.cbInactive.bind(this),this.onVisiblityChange=this.onVisiblityChange.bind(this),this.opts=extend({triggerEvents:"mousemove keydown",onIdleCb:function(){},onUnIdleCb:function(){},focusElement:e.element,element:null,idleTimeout:3e4},e)}function l(e,t,n){(0,r.isMvk)()?window.addEvent(e,t,n,{passive:!0}):window.addEvent(e,t,n)}function c(e,t,n){(0,r.isMvk)()?window.removeEvent(e,t,n,{passive:!0}):window.removeEvent(e,t,n)}function u(){return document.visibilityState||document.webkitVisibilityState}function d(){var e="visibilitychange";return document.visibilityState||(document.webkitVisibilityState?e+="webkit":e=""),e}extend(s.prototype,i.default.prototype),extend(s.prototype,{stop:function(){this.started=!1,c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),(0,r.isMvk)()&&this._isTopLevel()&&d()&&c(document,d(),this.onVisiblityChange),(0,r.isMvk)()&&o||(c(this.opts.focusElement,"focus",this.cbActiveB),c(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.setIdleTo),clearTimeout(this.checkIdleCbTo),clearTimeout(this.sendCbTO),this.is_idle=!0,this.opts.parentManager&&this.opts.parentManager.off("idle",this.cbInactiveB)},idle:function(e){this.is_idle=!0,e||this.opts.onIdleCb(),this.emit("idle")},unidle:function(e){this.is_idle=!1,e||this.opts.onUnIdleCb(),this.emit("unidle")},start:function(){this.started=!0,!(0,r.isMvk)()&&browser.mobile||(this.is_idle=!this._isFocused(),this.opts.parentManager&&this.opts.parentManager.on("idle",this.cbInactiveB),(0,r.isMvk)()&&this._isTopLevel()&&d()&&l(document,d(),this.onVisiblityChange),(0,r.isMvk)()&&o||(l(this.opts.focusElement,"focus",this.cbActiveB),l(this.opts.focusElement,"blur",this.cbInactiveB)),clearTimeout(this.checkIdleCbTo),this.checkIdleCb(),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},checkIdleCb:function(){this.started&&(l(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.setIdleTo),this.setIdleTo=setTimeout(this.cbInactiveB,this.opts.idleTimeout))},cbActive:function(){this.started&&(this.activeTimeStart=(new Date).getTime(),clearTimeout(this.setIdleTo),this.is_idle&&(this.is_idle=!1,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("unidle"),this.opts.onUnIdleCb&&this.opts.onUnIdleCb()}.bind(this),100)),c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),clearTimeout(this.checkIdleCbTo),this.checkIdleCbTo=setTimeout(this.checkIdleCb.bind(this),this.opts.idleTimeout))},cbInactive:function(){this.started&&(this.activeTimeStart=null,this.is_idle||(this.is_idle=!0,clearTimeout(this.sendCbTO),this.sendCbTO=setTimeout(function(){this.emit("idle"),this.opts.onIdleCb&&this.opts.onIdleCb()}.bind(this),100)),clearTimeout(this.checkIdleCbTo),c(this.opts.element,this.opts.triggerEvents,this.cbActiveB),l(this.opts.element,this.opts.triggerEvents,this.cbActiveB),this.checkIdleCbTo=setTimeout(this.checkIdleCb,this.opts.idleTimeout))},getActiveTime:function(){return!this.is_idle&&this.activeTimeStart?(new Date).getTime()-this.activeTimeStart:0},onVisiblityChange:function(){"visible"===u()?this.cbActiveB():this.cbInactiveB()},_isTopLevel:function(){var e=this.opts.focusElement;return e===window||e===document},_isFocused:function(){var e=this.opts.focusElement;if(this._isTopLevel()){var t=u();return"string"==typeof t&&"visible"===t}return document.activeElement===e}})},gLrT:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("B+E1"))&&a.__esModule?a:{default:a}).default;t.default=i},gMTq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n("TYsd")),i=n("DkIl"),r=l(n("rKp0")),o=l(n("29dZ")),s=l(n("bZ/P"));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=window.lang,n=(0,i.MailHat)({type:"page",left:(0,i.MailHat__icon)({icon:"back",url:"/mail"}),center:(0,i.MailHat__Title)({title:t.mobile_mail_mrs_page_title})}),l=[{class:"MessageRequestsPage__content ScrollView",inner:[{class:"MessageRequestsPage__info",inner:t.mobile_mail_mrs_page_info},a.default.wrap((0,r.default)({scrap:"mrs"}))]},e.count?{class:"MessageRequestsPage__footer",inner:[(0,o.default)({theme:"negative",size:"large",type:"button",inner:t.mobile_mail_mrs_button_reject_all,attrs:s.default.onClick("MessageRequestsPage.rejectAll","event","this")})]}:null];return{class:"messenger__page MessageRequestsPage",inner:[{class:"messenger__header",inner:a.default.wrap(n)},{class:"messenger__body",inner:l}]}};t.default=c},gNTM:function(e,t,n){"use strict";var a=function(){var e=null,t=!1;function n(e,t){var n=ge("medias_map"),a=ge("attached_wrap");n||(n=ce("div",{id:"medias_map",className:"pi_medias"}),a.appendChild(n));var i=e.latitude,r=e.longitude,o=(window.devicePixelRatio,geByClass1("medias_map",n)),s=t?'<div class="medias_map_close"><i class="i_close">&nbsp;</i></div><div class="medias_map_label">'+t+"</div>":"",l='<input type="hidden" name="map" value="'+(i+"_"+r+"_0")+'">';o?val(o,s+""+l):val(n,'<div class="meias_row medias_map" onclick="geoloc.remove();">'+s+l+"</div>");show(n)}function i(){e=null,remove("medias_map")}function r(t){var a;t&&t.coords&&(e={latitude:+t.coords.latitude||0,longitude:+t.coords.longitude||0},a=e,ajax.post("/places.php",{_ajax:1,act:"map_label",lat:a.latitude,lng:a.longitude},{onDone:function(e){hide("geo_waiting"),n(a,e)},onFail:o}))}function o(e){a.remove(),hide("geo_waiting")}return{toggle:function(){t?a.remove():a.add()},add:function(a){!a&&t||(t=!0,addClass("cp_geo_btn_sel","geo_btn"),a&&(a.latitude||a.longitude)?n(e={latitude:+a.latitude||0,longitude:+a.longitude||0},a.label):(geo.getCurrentPosition(r,o),show("geo_waiting")))},remove:function(){t&&(t=!1,removeClass("cp_geo_btn_sel","geo_btn"),i())},init:function(e){return e&&a.add(e),geo.init()}}}();window.geoloc=a},gTod:function(e,t,n){"use strict";var a=n("UxAg");function i(){(0,a.$)(r.self).classList.toggle(o.restCodesShown)}window.ReservedCodes={},ReservedCodes._onShowRestCodesClick=i;var r={self:".ReservedCodes"},o={restCodesShown:"ReservedCodes_restCodesShown"}},gUYQ:function(e,t,n){"use strict";var a,i=n("UxAg"),r=n("BZzM"),o=n("OcsD"),s=(a=n("BoyB"))&&a.__esModule?a:{default:a},l=n("V4qE");var c={onDone:function(e,t,n,a){var i=(0,o.ge)(e)||(0,o.geByClass1)("like_box","z")||(0,o.geByClass1)("like_box")||(0,o.geByClass1)("wall_item_for_like_"+e);if(i&&e){var r,s,l=(0,o.geByClass1)("item_repost",i);(0,o.hasClass)("wall_item",i)||(0,o.hasClass)("market_item",i)?s=(0,o.geByClass1)("wi_like_wrap",i):(0,o.hasClass)("ReplyItem",i)?r=(0,o.geByClass1)("ReplyItem__likeWrap",i):s=(0,o.geByClass1)("item_like",i),r||(r=(0,o.geByClass1)("like_wrap",i)),s&&(s.innerHTML=t||"",(0,o.toggleClass)("is_empty",s,!t),(0,o.toggle)(s,t)),l&&(l.innerHTML=n||"",(0,o.toggle)(l,n)),r&&(0,o.val)(r,a||"")}},onFail:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();switch(t){case 2:nav.hard_go(e[0])}}},u={onDone:function(e,t,n,a,i){var r=window,s=r.photo;if(c.onDone.apply(this,arguments),this.photo_id){var l=s.get(this.photo_id);if(l){var u=(0,o.ce)("div",{innerHTML:l.likes});(0,o.val)((0,o.geByClass1)("item_like",u),t),l.likes=(0,o.val)(u),l.publish='<span class="item_repost">'+n+"</span>",l.likes_cnt=(0,o.intval)(((0,o.attr)((0,o.geByClass1)("v_like",u),"data-like_count")||"").replace(/\D+/g,"")),l.likes_me=i;u=(0,o.ce)("div",{innerHTML:l.actions});var d=(0,o.geByClass1)("like_wrap",u);(0,o.val)(d,a),l.actions=(0,o.val)(u),s.save(l)}}},onFail:c.onFail},d={onDone:function(e){var t=window.photo;if(this.photo_id){if(!e.error){var n={};"confirm"===e.type?n={type:l.SNACKBAR_TYPE_SUCCESS,text:getLang("mobile_msg_photos_tag_confirmed")}:"delete"===e.type&&(n={type:l.SNACKBAR_TYPE_SUCCESS,text:getLang("mobile_msg_photos_tag_deleted")}),Snackbar.init(n)}var a=t.get(this.photo_id);a&&(a.tag_info="",t.save(a));var i=(0,o.geByClass1)("photo_view"),r=(0,o.geByClass1)("pv_tag_wrap",i);(0,o.val)(r,"")}}},f={onDone:function(e,t,n){var a=window.photo,i=window.menu,r=(0,o.geByClass1)("photo_view"),s=(0,o.geByClass1)("photo_msg"),l=!!t;if(r&&s){(0,o.val)(s,t||""),(0,o.toggleClass)("photo_deleted",r,l);var c=a.get(e);c&&(c.deleted=t,a.save(c)),n&&i&&i.refresh({pp:n})}}},h={onDone:function(e,t){var n=window.isNewMail&&(0,i.$)(".messenger")&&this.link.closest(".msg");if((0,o.val)(e,t),n){var a=Number(n.className.match(/msg_id_(\d+)/)[1]);store.mail.msgs[a].textFull=n.$(".msg__text").innerHTML}}},p={onDone:function(e){this.link&&((0,o.after)(cdf(e),(0,o.gpeByClass)("pic_body_wrap",this.link)),(0,o.hide)(this.link))}},A={onStart:function(){(0,o.addClass)("cm_item_loading",this.link)},onDone:function(e){this.link&&(0,o.val)(this.link.parentNode,e)}},m={onDone:function(e,t){if(e){var n=window.photo;(0,o.remove)(e+"_msg");var a=(0,o.ge)(e);if(a){if(t){var i=(0,o.ce)("div",{id:e+"_msg",className:(a.className||"")+" post_message_item"});(0,o.val)(i,'<div class="pi_cont">'+t+"</div>"),(0,o.after)(i,a),(0,o.hide)(a),(0,o.geByClass1)("rtm_reply_wrap",a)&&window.reply&&window.reply.edithide()}else(0,o.show)(e);if(this.photo_id){var r=n.get(this.photo_id);if(r){var s=(0,o.geByClass1)("photoview"),l=(0,o.geByClass1)("comments_wrap",s);r.comments_html=(0,o.val)(l)}}}}}},_={onDone:function(e,t,n,a){if(e){(0,o.remove)(e+"_msg");var i=(0,o.ge)(e);if(i)if(t){var r=(/^([a-z]+)_item$/i.exec(n||"")||[])[1]||"inline",s=(0,o.ce)("div",{id:e+"_msg",className:r+"_item "+r+"_message_item"}),l=a||"message_item_cont";(0,o.val)(s,'<div class="'+l+'">'+t+"</div>"),(0,o.after)(s,i),(0,o.hide)(i)}else!1===t?(0,o.hide)(i):(0,o.show)(i)}}},v={onDone:function(e,t,n){if(e){var a=(0,o.ge)(e),i=(0,o.getY)(a)||(0,o.getY)(e+"_msg"),r=(0,o.getH)(a)||(0,o.getH)(e+"_msg"),s=i+(u<320?r:0)-(0,o.scrollTop)();if((0,o.remove)(e+"_msg"),a){var l=(0,o.hasClass)("wall_item",a)||(0,o.hasClass)("post",a)?"wall":"post";if(n){var c=(0,o.ce)("div",{id:e+"_msg",className:l+"_item post_message_item"});(0,o.val)(c,'<div class="pi_cont">'+n+"</div>"),(0,o.after)(c,a)}if(t){(0,o.each)((0,o.geByClass)(l+"_item"),function(){var e=!!this.id&&this.id.match(/^wall((-?\d+)_(-?\d+)(_\d+)?)$/),a=(0,o.attr)(this,"data-copy"),i=!!a&&a.match(/^(-?\d+)_(-?\d+)$/);if(!e)return!0;(!e[4]&&e[2]==t||e[4]&&e[3]==t||i&&i[1]==t)&&(0,o.toggleClass)("post_item_ignored",this,n)});var u=(0,o.getCw)(),d=(i=(0,o.getY)(a)||(0,o.getY)(e+"_msg"),r=(0,o.getH)(a)||(0,o.getH)(e+"_msg"),i+(u<320?r:0)-s);(0,o.geByClass1)("wall_item")===a&&(d=0),(0,o.scrollTop)(d)}}}}},g={onDone:function(e,t){if(e){var n=(0,o.ge)(e);if((0,o.remove)(e+"_msg"),n&&t){var a=(0,o.hasClass)("wall_item",n)||(0,o.hasClass)("post",n)?"wall":"post",i=(0,o.ce)("div",{id:e+"_msg",className:a+"_item post_message_item"});(0,o.val)(i,'<div class="pi_cont">'+t+"</div>"),(0,o.after)(i,n)}(0,o.toggleClass)("post_item_ignored",n,t)}}},y={onDone:function(e,t,n){if(e){var a=(0,o.ge)(e);if((0,o.remove)(e+"_msg"),a){if(n){var i=(0,o.ce)("div",{id:e+"_msg",className:"wall_item post_message_item"});(0,o.val)(i,'<div class="pi_cont">'+n+"</div>"),(0,o.after)(i,a)}(0,o.toggleClass)("post_item_ignored",a)}}}},b={onStart:function(){var e=(0,o.gpeByClass)("show_more_wrap",this.link),t=(0,o.geByClass1)("show_more",e)||this.link,n=(0,o.ce)("div",{id:"show_more_loading",className:"show_more_loading",innerHTML:'<i class="i_loading">&nbsp;</i>'}),a=(0,o.ce)("div",{id:"show_more_wrap",className:"show_more_wrap"});(0,o.attr)(n,"data-href",(0,o.getHref)(t)),a.appendChild(n),(0,o.before)(a,e),(0,o.remove)(e)},onDone:function(e){var t=window.cur;ajax.tAlProcess=(new Date).getTime();var n=(0,o.ge)("show_more_wrap"),a=cdf(e);(0,o.before)(a,n),(0,o.remove)(n),ajax.prepare_click("mcont"),(0,o.onBodyScrollForce)(100),ajax.tAlModule=t.module,ajax.tAlRender=(new Date).getTime(),Gif.onUpdate(),(0,r.resizePosters)()}},w={onStart:b.onStart,onDone:function(e,t){b.onDone.apply(null,arguments),Bookmarks.pushItemsToStore(t)}},E={onStart:b.onStart,onDone:function(e,t){var n=window.cur;ajax.tAlProcess=(new Date).getTime();var a=(0,o.geByClass1)("photos_page","mcont"),i=(0,o.ge)("show_more_wrap"),s=cdf(t);e=e.replace(/<img src="([^"]+)" class="/gi,'<img data-src="$1" class="_image ');var l=cdf(e);a&&a.appendChild(l),(0,o.before)(s,i),(0,o.remove)(i),ajax.prepare_click("mcont"),(0,o.onBodyScrollForce)(100),ajax.tAlModule=n.module,ajax.tAlRender=(new Date).getTime(),(0,r.resizePosters)()}},k={onStart:b.onStart,onDone:function(e,t){var n=window.cur;ajax.tAlProcess=(new Date).getTime();var a=(0,o.geByClass1)("audios_block",(0,o.geByClass1)("audios","mcont")),i=(0,o.ge)("show_more_wrap"),r=cdf(t),s=cdf(e);a&&a.appendChild(s),(0,o.before)(r,i),(0,o.remove)(i),ajax.prepare_click("mcont"),ajax.tAlModule=n.module,ajax.tAlRender=(new Date).getTime()}},S={onDone:function(e){var t=this.link.parentNode;(0,o.val)(t,e)}},C={onStart:function(){(0,o.addClass)("mva_item_loading",this.link)},onDone:function(e,t){(0,o.removeClass)("mva_item_loading",this.link),e.upload_url||t&&nav.hard_go(t),ownerPhotoUpload&&ownerPhotoUpload.crop(e)||t&&nav.hard_go(t)},onFail:function(){(0,o.removeClass)("mva_item_loading",this.link)}},M={onStart:function(){var e=this.link,t=(0,o.gpeByClass)("notify_lite",e);if(t)return(0,o.remove)(t);for(;e=e.parentNode;)if((0,o.hasClass)("notify_item",e)){(0,o.hasClass)("notify_panel",e.parentNode)?(0,o.remove)(e.parentNode):(0,o.remove)(e);break}}},P={onStart:function(){var e=(0,o.geByClass)("pagination","mcont");(0,o.each)(e,function(e,t){(0,o.before)((0,o.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)})},onDone:function(e,t,n){var a=window.mail,i=(0,o.ge)("messages"+t);i&&((0,o.val)(i,e),a.onMessagesRepainted(!0),!this.save&&(0,o.scrollToEl)()),this.save&&a.saveDialog({messages:e},t),this.clear&&((0,o.val)((0,o.geByTag1)("textarea","write_form"),""),(0,o.remove)((0,o.geByClass1)("pi_medias","write_form"))),(0,o.removeClass)("cp_attach_btn_sel",(0,o.geByClass1)("cp_attach_btn")),window.isNewMail&&MailScrap.clearSystemMessage2(),n&&n.play_animation_msg_id&&StickersSettings.getAutoplay()&&StickersAnimation.loadStickerInMvkIMAndPlay(n.play_animation_msg_id)},onFail:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();switch(t){case 2:this.link.form&&this.link.form.submit()}}},T={onStart:function(){var e=(0,o.geByClass)("pagination","mcont");(0,o.each)(e,function(e,t){(0,o.before)((0,o.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)})},onDone:function(e,t){var n=window.mail,a=(0,o.ge)("dialogs");a&&((0,o.val)(a,e),!this.no_scroll&&(0,o.scrollToEl)(),n.cacheDialogsPage()),n.save(t)}},D={onFail:function(e,t){if(e===ajax.RESPONSE_CAPTCHA){var n=this.link&&this.link.form,a=n&&n.code?n.code.value:"";t+="&code=".concat(a),nav.hard_go(t)}}},I={onStart:function(){var e=(0,o.gpeByClass)("friendsList__showMoreBtnWrap",this.link),t=(0,o.geByClass1)("friendsList__showMoreBtn",e)||this.link,n=(0,o.ce)("div",{id:"show_more_loading",className:"wait_loading"}),a=(0,o.ce)("div",{id:"show_more_wrap",className:"friendsList__showMoreBtnWrap"});(0,o.attr)(n,"data-href",(0,o.getHref)(t)),a.appendChild(n),(0,o.before)(a,e),(0,o.remove)(e)},onFail:function(){var e=this,t=this.link.getAttribute("data-href")||this.link.getAttribute("href");setTimeout(function(){ajax.post(t,{_ajax:1},{onDone:I.onDone.bind(e),onFail:I.onFail.bind(e)})},500)},onDone:b.onDone},x={onDone:function(e,t){if(e){var n=(0,o.ge)(e);n&&n.parentNode&&t&&(0,o.replace)(cdf(t),n.parentNode)}}},O={onDone:function(e,t){if(e){var n=(0,o.geByClass)(e);if(n.length&&t)for(var a=0,i=n.length;a<i;a++)n[a].parentNode&&(0,o.replace)(cdf(t),n[a].parentNode)}}},B={onStart:function(){this.link.classList.add("wia_item--loading")},onDone:function(e,t,n,a,i){if(e){var r=(0,o.geByClass)(e);if(r.length&&t)for(var s=0,l=r.length;s<l;s++)r[s].parentNode&&(0,o.replace)(cdf(t),r[s].parentNode);Share.setBookmarkState(a,i),n&&Bookmarks.showSuccessSnack(n)}}},L={onDone:function(e,t,n,a){if(e){var i=(0,o.ge)(e);if(i){var r=(0,o.geByClass1)("wia_close",i);if(r&&((0,o.val)(r,n),r.href=t),(0,o.hasClass)("single_wall_item",i)){var s=(0,o.ge)("nc_form"),l=(0,o.geByClass1)("wall_replies");s?(0,o.toggle)(s,!!a):a&&(l?domInsert(l,a):(domInsertAfter((0,o.ce)("div",{innerHTML:a}),i),l=(0,o.geByClass1)("wall_replies"))),(0,o.toggleClass)("closed_comments",l,!a)}}}}},R={onStart:function(){var e=domPN(this.link),t=(0,o.geByClass1)("Loading",e);t||(t=(0,o.ceFromString)((0,s.default)({})),append(t,e)),(0,o.addClass)("RepliesThreadNext_loading",e)},onDone:function(e,t,n,a){var i,s=domPN(this.link),l=(0,o.hasClass)("RepliesThreadNext_prev",s),c=0,u=cdf(e);if(domChildren(u).forEach(function(e){(0,o.ge)(e.id)&&re(e)}),l?(i=(0,o.gpeByClass)("wall_replies",s),c=(0,o.getH)(i),(0,o.after)(u,s)):(0,o.before)(u,s),a?(this.link.href=a,(0,o.removeClass)("RepliesThreadNext_loading",s)):re(s),Gif.onUpdate(),(0,r.resizePosters)(),n&&(cur.replyNames=(0,o.extend)(cur.replyNames||{},n)),t&&t.length&&Mention.addItems(t),l){var d=(0,o.getH)(i)-c;(0,o.scrollTop)((0,o.scrollTop)()+d)}(0,o.onBodyScrollForce)()},onFail:function(){var e=domPN(this.link),t=(0,o.geByClass1)("i_loading",e);(0,o.hide)(t),(0,o.show)(this.link),(0,o.removeClass)("RepliesThreadNext_loading",e)}},N={onDone:function(e,t,n){var a=(0,o.geByClass1)("RepliesWrap");a.innerHTML=e,Gif.onUpdate(),(0,r.resizePosters)(),n&&(0,o.extend)(cur.replyNames,n),t&&t.length&&Mention.addItems(t),(0,o.scrollTop)((0,o.getH)(a)+(0,o.getY)(a))}},j={onDone:function(e,t,n,a){if(e){var i=(0,o.ge)(e);if(i){if(a)(0,o.geByClass)("ReplyItem__message_type_"+a,i).forEach(function(e){re(e)});var r=(0,o.geByClass1)("ReplyItem__wrap",i),s=(0,o.geByClass)("ReplyItem__message",i),l=s.pop();if(t){var c=cdf(t);(0,o.hide)(l||r),(0,o.after)(c,l||r),(0,o.geByClass1)("rtm_reply_wrap",i)&&window.reply&&window.reply.edithide()}else a||(re(l),l=s.pop()),(0,o.show)(l||r);if(n){var u=(0,o.ge)("RepliesThread"+n);u&&(0,o.toggle)(u,!t)}}}}};window.Like=c,window.PhotoLike=u,window.PhotoTag=d,window.PhotoDelete=f,window.Poll=h,window.CopyHistory=p,window.ToggleMenu=A,window.Comment=m,window.ItemDelete=_,window.FeedIgnore=v,window.FeedIgnoreItem=g,window.FeedIgnoreComments=y,window.Wall=b,window.Bookmark=w,window.BookmarkToggle=B,window.Photos=E,window.Audios=k,window.FixPost=S,window.ProfileMove=C,window.Notify=M,window.Dialog=P,window.Dialogs=T,window.LoginCheckAuthCodePage=D,window.WallSubscribe=x,window.FeedSubscribe=O,window.ImportedFriends=I,window.CloseComments=L,window.RepliesNext=R,window.RepliesLast=N,window.ReplyAction=j,window.MiniAppsCatalogResetRecent=function(e){if(e.dataset.section){var t={act:"mini_apps_reset_recent",hash:e.dataset.hash||""};ajax.post("/apps.php",t,{onDone:function(){var t=(0,o.ge)("mini_apps_"+e.dataset.section);t&&t.remove()}})}}},gfsL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("29dZ")),i=o(n("pWCx")),r=o(n("14By"));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){for(var t=[],n=0,o=0,s=0;s<e.items.length;s++){var l=e.items[s];t.push((0,i.default)(l,e.groupings,e.variantsData,e.priceTemplate)),o+=l.quantity,l.deleted||(n+=l.totalPrice)}return{class:"Cart",inner:[{class:"CartItems",inner:t},{class:"Cart__price",inner:[{tag:"span",class:"Cart__price-inner",inner:(0,r.default)({count:o,totalPrice:n,priceTemplate:e.priceTemplate})}]},(0,a.default)({inner:lang("mobile_market_cart_go_to_order_button"),stretch:!0,size:"large",on_click:["Cart.goToOrder",e.group_id]})]}};t.default=s},giB6:function(e,t,n){"use strict";var a;var i={onClose:(0,((a=n("+cqQ"))&&a.__esModule?a:{default:a}).default)(),inited:!1,width:!1,height:!1,onResize:null,_lastNav:!1,_opened:!1,_destroy:!1,init:function(){i.inited||(i.inited=!0,i.initEvents())},initEvents:function(){var e=function(e){i.fixHeight(vkNow()+2e3,e)};addEvent(window,"orientationchange",e),onBodyResize(e),e(!0)},opened:function(){return hasClass("z_opened",window.bodyNode)!==i.opened&&toggleClass("z_opened",window.bodyNode,i._opened),i._opened},toggle:function(e,t){return!!checkEvent(e)||(i.opened()?i.close(e,t):i.open(e,t),!1)},open:function(e,t){return!!checkEvent(e)||!i.opened()&&(thover.clear(),i.init(),i._st=scrollTop(),i._lastNav=!1,addClass("z_opened",window.bodyNode),i._opened=!0,i.fixHeight(vkNow()+2e3,!0),scrollTop(0),!1)},close:function(e,t){return!!checkEvent(e)||!!i.opened()&&(thover.clear(),val("z",""),removeClass("z_opened",window.bodyNode),i._lastNav={cur:nav.cur,path:nav.path,params:nav.params,hash:nav.hash},i._opened=!1,i._destroy&&(i._destroy(),i._destroy=!1),scrollTop(i._st,1),i._st=!1,i.onResize=null,i.onClose(),!1)},updateSize:function(){var e=ge("z");e&&e.offsetWidth&&e.offsetHeight&&(i.width=e.offsetWidth,i.height=e.offsetHeight,i.onResize&&i.onResize())},fixHeight:function(e,t){if((i._opened||t)&&(e&&!(vkNow()>e)||t)){var n=getCw(),a=getCh();(i._lastWidth!=n||i._lastHeight!=a||t)&&(i._lastWidth=n,i._lastHeight=a,setStyle("z","height",a),i.updateSize(),scrollTop()||scrollTop(0)),clearTimeout(i._fixTo),i._fixTo=setTimeout(i.fixHeight,50,e)}},create:function(e,t){val("z",e),i._destroy=t}};window.zlayer=i},gmHQ:function(e,t,n){"use strict";var a,i,r,o=n("UxAg"),s=_(n("gfsL")),l=_(n("HV9n")),c=_(n("r/ag")),u=_(n("KuI6")),d=_(n("el8Q")),f=_(n("14By")),h=function(e){if(e&&e.__esModule)return e;var t=m();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("t7Ww")),p=_(n("Y6JH")),A=_(n("gLrT"));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function _(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var w=function(){function e(t){g(this,e),this.items=t,this.recalcTotalPrice()}return b(e,[{key:"getItem",value:function(e){return this.items.find(function(t){return t.id===e})}},{key:"changeQuantity",value:function(e,t){var n=this.getItem(e);n.quantity=t,n.totalPrice=n.quantity*n.price,n.totalPriceFormatted=langNumeric(n.totalPrice.toFixed(2),s.default.priceTemplate,!0),this.recalcTotalPrice(),this.onQuantityChange(n)}},{key:"changeVariant",value:function(e,t,n,i){var r=this,o=Object.assign([],e.variants,v({},t,n));null!==i&&(o[1]=i),ajax.post("market.php",{act:"cart_change_variant",grouping_id:e.groupingId,group_id:e.groupId,item_id:e.itemId,variants:o,hash:a},{loader:!0,onDone:function(e){var t=r.items.findIndex(function(t){return t.id===e.id});r.items=Object.assign([],r.items,v({},t,e)),r.recalcTotalPrice(),r.onVariantChanged(e)},onFail:function(){r.onVariantChanged(e)}})}},{key:"recalcTotalPrice",value:function(){this.totalPrice=this.items.reduce(function(e,t){return e+(t.deleted?0:t.totalPrice)},0)}},{key:"deleteItem",value:function(e){var t=this.getItem(e);if(t){ajax.post("market.php",{act:"cart_change_quantity",group_id:t.groupId,item_id:t.itemId,quantity:0,hash:a},{loader:!0});var n=this.items.findIndex(function(e){return e.id===t.id});this.items=this.items.slice(0,n).concat(this.items.slice(n+1)),this.recalcTotalPrice(),this.onItemDelete(t.id)}}}]),e}(),E=function(){function e(t,n){var i=this;g(this,e),this.openDeletePopup=function(e){var t=(0,h.default)({class:"CartItem__deletePopup",close:!0,items:[(0,h.ModalMenuBtn)({attrs:{"data-item-id":e},inner:[{class:"CartItem__deletePopupTrashIcon",inner:(0,p.default)("market","cart_trash")},{tag:"span",inner:lang.mobile_market_cart_delete_item}],onclick:["Cart.view.deleteItem","this"]})],closeText:lang.mobile_cancel});i._deletePopupEl=c.default.open(Wd.elem(t),!0)},this.closeDeletePopup=function(){c.default.close(i._deletePopupEl)},this.changeQuantity=function(e){var t=Number(e.$btn.dataset.itemId);c.default.close(i._quantityPopupEl);var n=i.vm.getItem(t),o=i.vm.popupQuantity;o&&(r.changeQuantity(n.id,o),ajax.post("market.php",{act:"cart_change_quantity",group_id:n.groupId,item_id:n.itemId,quantity:o,hash:a},{loader:!0})),i._quantityPopupEl=null,i.vm.popupQuantity=null},this.changeVariant=function(e,t,n){var a=e.value,r=null;if(0===n){var l=s.default.groupings[t.groupingId][a];r=Object.keys(l).find(function(e){return l[e]})}(0,o.$$)(".CartItem__variantSelect",e.closest(".CartItem__properties")).forEach(function(e){e.setAttribute("disabled","")}),i.vm.changeVariant(t,n,a,r)},this.deleteItem=function(e){var t=Number(e.dataset.itemId);i.vm.deleteItem(t),i.closeDeletePopup()},this.vm=t,this.groupId=n,this.vm.onQuantityChange=function(e){var t=i.getItemEl(e.id);(0,o.$)(".CartItem__quantity",t).innerHTML=langNumeric(e.quantity,lang.mobile_market_items_count_short),(0,o.$)(".CartItem__price",t).innerHTML=(0,A.default)(e.totalPrice,s.default.priceTemplate),i.renderTotalPrice()},this.vm.onVariantChanged=function(e){i.getItemEl(e.id).outerHTML=Wd.html((0,l.default)(e,s.default.groupings,s.default.variantsData,s.default.priceTemplate)),i.renderTotalPrice()},this.vm.onItemDelete=function(e){i.vm.items.length?(i.getItemEl(e).remove(),i.renderTotalPrice()):i.renderEmptyCart()}}return b(e,[{key:"getListEl",value:function(){return(0,o.$)(".CartItems")}},{key:"renderEmptyCart",value:function(){(0,o.$)(".PageBlock").innerHTML=Wd.html((0,u.default)({title:lang.mobile_market_cart_empty_title,text:lang.mobile_market_cart_empty_text,button_text:lang.mobile_market_cart_go_to_goods,url:"/market-".concat(this.groupId)}))}},{key:"getItemEl",value:function(e){return(0,o.$)('[data-id="'.concat(e,'"]'),this.getListEl())}},{key:"renderTotalPrice",value:function(){var e=this.vm.items.reduce(function(e,t){return e+t.quantity},0);(0,o.$)(".Cart__price").innerHTML=Wd.html((0,f.default)({count:e,totalPrice:r.totalPrice,priceTemplate:s.default.priceTemplate}))}},{key:"openQuantityChangePopup",value:function(e){var t=this.vm.getItem(e),n=(0,d.default)(t);this._quantityPopupEl=c.default.open(Wd.elem(n),!0)}},{key:"setQuantity",value:function(e){var t=Math.max(1,Math.min(Number(e.value),s.default.maxCartItemQuantity));""!==e.value&&(e.value=t),this.vm.popupQuantity=t}}]),e}();s.default.init=function(e){s.default.groupings=e.groupings,s.default.variantsData=e.variantsData,s.default.priceTemplate=e.priceTemplate,s.default.maxCartItemQuantity=e.max_cart_item_quantity,a=e.hash,i=e.items,r=new w(i),s.default.view=new E(r,e.group_id)},s.default.goToOrder=function(e){nav.go("/cart_order".concat(e))}},gunf:function(e,t,n){"use strict";window.LoginHistory={_onSubmit:function(e,t,n){var a=geByClass1("loginHistory__iframe");preventEvent(e),t.submit(),addEvent(a,"load",function(){return nav.go(n,null,{isForm:!0})})}}},gy8s:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("9Hyc"))&&a.__esModule?a:{default:a};n("hJNM");var r=i.default;t.default=r,window.Unfold=i.default},h1CJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e,t,n,a){var r=(0,i.default)({class:"CopyrightPopup",header:{title:getLang("mobile_wall_post_copyright_source")},content:{inner:[t,{class:"Popup__buttons",inner:[Btn({class:"Popup__button",inner:getLang("mobile_wall_post_copyright_go"),theme:"regular",use_native_onclick:!0,on_click:"CopyrightPopup.go(this, '".concat(n,"', ").concat(a?1:0,")")})]}]}});i.default.open(Wd.elem(r),!0)},t.go=function(e,t,n){if(i.default.close(e),t.startsWith("/story"))return void Stories.init(t.substr(1),{source:"view_source"});var a;if(a=/^\/?narrative(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(t))return void Stories.init("".concat(a[1],"/narrative").concat(a[1],"_").concat(a[2]),{source:"view_source"});/^@-?[\d\w._]+-[\d\w.-]+/.test(t.substr(1))&&(t+="?from=".concat(nav.cur));if(n)return void window.open(t,"post_copyright");return nav.go(t,null)};n("OcsD");var a,i=function(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("Po+v"));(a=n("z9sQ"))&&a.__esModule;function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}},h27l:function(e,t,n){"use strict";n("PovR");function a(e){pushNotifier.canBeEnabled().then(function(t){var n=!!e.$control&&geByTag1("input",e.$control);n&&(t?pushNotifier.setupSubscription().then(function(){!function(e){var t=ce("input",{type:"submit"},{display:"none"});e.$control.form.appendChild(t),ajax.click(t),e.$control.form.removeChild(t)}(e)}).catch(function(e){PushNotifier.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS===e?(n.checked=!1,addClass("Popup_open",geByClass1("pageAllowPushPopup"))):n.checked=!1}):n.checked=!1)})}window.SettingsNotifyPush={},SettingsNotifyPush._onSwitch=a},hJNM:function(e,t,n){"use strict";var a=function(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("jk6M")),i=o(n("AXyT")),r=o(n("9Hyc"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}Object.assign(r.default,{onOpen:befall.kind("unfoldName"),getByName:function(e){return $(c.unfoldByName(e))},setActive:function(e,t){var n,a;1===arguments.length?e=(a=e).closest(c.unfold):a=e.$(c.itemByName(t));if((n=e.$(c.itemActive))&&a){n.classList.remove(l.itemActive),a.classList.add(l.itemActive);var i=e.$(c.triggerText),r=a.$(c.itemText);i.innerText=r.textContent.trim()}},setCount:function(e,t,n){var a=e.$(c.itemCountByName(t));i.default.setValue(a,n)},setTitle:function(e,t,n){e.$(c.itemByName(t)).$(c.itemText).innerText=n},toggleItemEnabled:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.$(c.itemByName(t));a&&a.classList.toggle(l.itemDisabled,!n)},changePosition:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.classList.remove(l.positionTopLeft,l.positionTopRight,l.positionBottomLeft,l.positionBottomRight),t=n?a?l.positionTopLeft:l.positionBottomLeft:a?l.positionTopRight:l.positionBottomRight;e.classList.add(t)}}),r.default._onTriggerMouseDown=d,r.default._onTriggerClick=u;var l={itemActive:"Unfold__item_active",itemDisabled:"Unfold__item_disabled",open:"Unfold_open",positionTopLeft:"Unfold_position_topLeft",positionTopRight:"Unfold_position_topRight",positionBottomLeft:"Unfold_position_bottomLeft",positionBottomRight:"Unfold_position_bottomRight"},c={unfold:".Unfold",unfoldByName:function(e){return'.Unfold[data-name="'.concat(e,'"]')},itemActive:".".concat(l.itemActive),itemByName:function(e){return".Unfold__item_name_".concat(e)},itemCountByName:function(e){return"".concat(c.itemByName(e)," .Unfold__itemCount")},item:".Unfold__item",itemDisabled:".".concat(l.itemDisabled),triggerText:".Unfold__triggerText",itemText:".Unfold__itemText",popup:".Unfold__popup"};function u(e){preventEvent(e)}function d(e){var t=e.closest(c.unfold),n=a.isTouch?"touchend":"mousedown",i=a.isTouch?"touchend":"mouseup",o=!a.isTouch&&window.innerWidth<882,s=t.getAttribute("data-name"),u=!1;function d(){t.classList.remove(l.open),document.removeEventListener("keydown",h),document.removeEventListener("touchmove",f),document.removeEventListener(n,A,!0),document.removeEventListener(i,p,!0)}function f(e){e.target.closest(c.popup)||d(),u=!0}function h(e){27===e.keyCode&&d()}function p(){document.addEventListener(n,A,!0)}function A(e){if(u)u=!1;else{var t=e.target.closest(c.itemDisabled);if(!t){var n=e.target.closest("".concat(c.item,"[href]"));if(n)return void(a.default.safari&&a.default.safari_mobile&&a.default.version<9?setTimeout(d,500):(cancelEvent(e),nav.onBeforeGo(function(){d()}),nav.go(n)));if(n=e.target.closest("".concat(c.item,"[onmousedown]")))return void setTimeout(d);if(n=e.target.closest("label".concat(c.item)))return void(a.default.safari&&a.default.safari_mobile&&a.default.version<9?setTimeout(d,500):setTimeout(d));if(n=e.target.closest("input[onchange]"))return void(a.default.safari&&a.default.safari_mobile&&a.default.version<9?setTimeout(d,500):setTimeout(d))}(a.isTouch||o||t)&&(e.preventDefault(),e.stopImmediatePropagation()),(o||!a.isTouch&&t)&&document.addEventListener("click",m,!0),t||d()}}function m(e){e.preventDefault(),e.stopImmediatePropagation(),document.removeEventListener("click",m,!0)}s&&r.default.onOpen(s)(),t.classList.add(l.open),document.addEventListener("keydown",h),document.addEventListener("touchmove",f),a.default.msie_mobile?document.addEventListener(i,p,!0):document.addEventListener(n,A,!0)}},hOuX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.random=function(){try{if(window.crypto){var e=new Int32Array(1);return crypto.getRandomValues(e),Math.abs(e.reduce(function(e,t){return e+t}))}}catch(e){}return intval(rand(0,a).toFixed(0))},t.MAX_INTERGER=t.MAX_SAFE_INTEGER=void 0;t.MAX_SAFE_INTEGER=9007199254740991;var a=2147483647;t.MAX_INTERGER=a},"hb+4":function(e,t,n){"use strict";var a=n("OcsD"),i=h(n("TYsd")),r=f(n("t7Ww")),o=h(n("r/ag")),s=f(n("5s+S")),l=h(n("LMQ1")),c=h(n("BoyB")),u=n("V4qE");function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){if(e&&e.__esModule)return e;var t=d();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var A=2;window.Replies={init:function(e){!function(e){e&&function(){var e=(0,a.geByClass1)("wall_replies"),t=(0,a.domLC)(e);if(!t||!(0,a.hasClass)("RepliesThreadNext",t))return;var n=(0,a.geByClass1)("RepliesThreadNext__link",t);(0,a.autoScroll)(function(){if((0,a.domPN)(t)&&!(0,a.hasClass)("RepliesThreadNext_loading",t))return n},RepliesNext,{no_cache:!0})}();(function(){var e=(0,a.ge)("reply_field");if(!e||(0,a.hasClass)("RepliesField_static",e))return;var t=window.onBodyScroll,n=!1;t((0,a.throttle)(function(t){var i=t+(0,a.getCh)(),r=(0,a.getH)(e),o=i<(0,a.getY)(e)+r;o&&!n?((0,a.setStyle)(e,{height:r}),(0,a.addClass)("RepliesField_fixed",e)):!o&&n&&((0,a.removeClass)("RepliesField_fixed",e),(0,a.setStyle)(e,{height:null})),n=o},10)),(0,a.onBodyScrollForce)()})(),function(e){var t=(0,a.ge)("replies_to_last"),n=(0,a.geByClass1)("RepliesWrap");if(!t||!n)return;var i=(0,a.ge)("reply_field"),r=(0,a.hasClass)("RepliesField_static",i),o=(0,a.getY)(n),s=window.onBodyScroll,l=!1;w(),s((0,a.throttle)(function(e){var s=e+(0,a.getCh)(),c=i&&!r?(0,a.getY)(i)-m:o+(0,a.getH)(n)-m,u=o<e&&s<c;u!==l&&((0,a.toggleClass)("Replies_last_shown",t,u),l=u)},10))}()}(e);var t=(0,a.ge)("reply_field"),n=(0,a.ge)("reply_field_text");mediaUpload&&t&&(mediaUpload.onStart(E),mediaUpload.onRemove(function(){E(),n.focus()}));if(t){var i=window.cur;i.onStickersToggleCallbacks=i.onStickersToggleCallbacks||[],i.onStickersToggleCallbacks.push(function(e){if((0,a.onBodyScrollForce)(),b(),e){var t=(0,a.geByTag1)("a","stickers_panel");t&&t.focus()}else n.focus()}),y()}},replyTo:function(e,t,n,i){if((0,a.checkEvent)(e))return!0;if(window.cur.replyTo!==n&&T)return N(),!0;n=n||0,(0,a.geByClass)("ReplyItem_active").forEach(function(e){(0,a.removeClass)("ReplyItem_active",e)});var r,o=(0,a.ge)("reply_field"),s=(0,a.ge)("reply_field_text"),l=(0,a.hasClass)("RepliesField_static",o),c=!!window.post&&window.post.replyNamesRE(),u=(0,a.val)(s),d="";if(n){if(r=(0,a.ge)("wall_reply"+t+"_"+n))if(l||(0,a.addClass)("ReplyItem_active",r),!(0,a.hasClass)("ReplyItem_deleted",r)&&i){var f=window.cur.replyNames[i]||{},h=f[0]||"";d=f[1]||"",u=u?c?u.replace(c,h):u:h,window.post&&window.post.onReplyClick(!0,h)}else u=c?u.replace(c,""):u}else u=c?u.replace(c,""):u;(0,a.val)(s,replaceEntities(u));var p=(0,a.ge)("reply_field_to"),A=(0,a.geByClass1)("RepliesField__infoName",p);(0,a.val)(A,(0,a.htsc)(d)),(0,a.toggleClass)("RepliesField__infoItem_shown",p,n&&d),(0,a.toggleClass)("RepliesField__infoItem_shown","reply_field_to_empty",n&&!d);var m=(0,a.ge)("reply_field_info"),_=(0,a.ge)("reply_field_from");if((0,a.toggleClass)("RepliesField__info_shown",m,n||_),(0,a.toggleClass)("RepliesField__info_single",m,n&&!_||!n&&_),(0,a.val)("field_reply_to",n),(0,a.val)("field_reply_to_name",n&&d?"1":""),window.cur.replyTo=n,(0,a.val)("field_timestamp",O()),l)if(r)Unfold.changePosition(Unfold.getByName("attaches"),!0,!1),domInsertAfter(o,r);else{Unfold.changePosition(Unfold.getByName("attaches"),!0,!0);var v=(0,a.geByClass1)("wall_replies");domInsertBefore(o,v)}return b(),y(),elfocus(s),(0,a.cancelEvent)(e)},showMoreActions:function(e,t){var n=(0,a.ge)("reply_more_"+e);if(!n)return;var s=(0,a.geByClass)("ReplyItem__action",n),l=[];s.forEach(function(e){l.push((0,r.ModalMenuBtn)({inner:(0,a.val)(e),onclick:"Replies.onClickMoreAction('"+e.id+"', event)"}))});var c=(0,r.default)({close:!0,items:l}),u=(0,a.ceFromString)(i.default.html(c));u=o.default.open(u,!0,{oncloseCallback:function(){var t=(0,a.ge)("reply_more"+e);t&&t.focus()}});var d=(0,a.geByClass1)("ModalMenu__btn",u);d&&d.focus();return(0,a.cancelEvent)(t)},onClickMoreAction:function(e,t){t&&o.default.close(t.target);var n=(0,a.ge)(e);if(!n)return;n.click()},onFieldInput:y,toggleStickers:function(e,t){if(T)return(0,a.cancelEvent)(t);return window.post.stickersToggle(e),(0,a.cancelEvent)(t)},replyAsShow:function(e,t){var n,s=!!window.cur.replyAs;L(_),s?n=C(window.cur.replyAs):(n=i.default.wrap((0,c.default)({large:!0})),function(e){if(window.cur.replyAsLoading)return;var t=window.ajax;window.cur.replyAsLoading=!0,t.post("/wall.php",{act:"get_reply_clubs_list",post_oid:e,modal:1},{onDone:function(e){window.cur.replyAs=e;var t=(0,a.ge)("reply_as_users_list");if(t){var n=C(e);(0,a.val)(t,i.default.html(n));var r=(0,a.geByClass1)("ModalMenuUserList__item",t);r&&r.focus()}delete window.cur.replyAsLoading},onFail:function(){delete window.cur.replyAsLoading}})}(t));var l=(0,r.default)({title:(0,a.getLang)("mobile_wall_reply_as_title"),close:!0,items:[{id:"reply_as_users_list",inner:n}]}),u=(0,a.ceFromString)(i.default.html(l));if(o.default.open(u,!0),s){var d=(0,a.geByClass1)("ModalMenuUserList__item",(0,a.ge)("reply_as_users_list"));d&&d.focus()}return(0,a.cancelEvent)(e)},replyAsChange:function(e,t,n,i){var o=(0,a.ge)("reply_field_from"),s=(0,a.geByClass1)("RepliesField__infoName",o);return(0,a.val)(s,(0,a.htsc)(i)),(0,a.val)("field_from_oid",n),r.default.close(t),(0,a.ge)("reply_field_text").focus(),(0,a.cancelEvent)(e)},checkSendButton:function(e){if(!S())return(0,a.cancelEvent)(e)},onClickLastReplies:function(e,t){var n=(0,a.geByClass1)("wall_replies"),i=(0,a.domLC)(n),r=i&&(0,a.hasClass)("RepliesThreadNext",i);if(r){var o=(0,a.geByClass1)("Loading",i);o||(o=(0,a.ceFromString)((0,c.default)({})),append(o,i)),(0,a.addClass)("RepliesThreadNext_loading",i)}if((0,a.removeClass)("RepliesWrap_last_shown",e),window.scrollTo(0,document.body.scrollHeight),r)return i.focus(),ajax.click(e,window.RepliesLast);i&&((0,a.hasClass)("RepliesThread",i)&&(i=(0,a.domPS)(i)),(0,a.hasClass)("ReplyItem",i)&&(0,a.geByClass1)("ReplyItem__name",i).focus());return(0,a.cancelEvent)(t)},onSubmitForm:function(e,t){if(O())N();else{if(e.preventDefault(),D)return;D=!0;var n=$('textarea[name="message"]',t),r=n?n.value:"",o=p(location.pathname.match(/^\/wall(-?[0-9]+)_([0-9]+)$/),3),s=o[1],c=o[2];ajax.post("/wall.php",{act:"check_comment",oid:s,post_oid:c,text:r},{onDone:function(e){D=!1;var t=e.timestamp;if(e.delay){var n=1e3*e.delay;B(t);var r,o=$("#reply_field");(0,a.hasClass)("RepliesField_fixed",o)?r=(0,a.getH)(o)+5:(0,a.hasClass)("RepliesField_static",o)||(r=(0,a.getH)($("body"))-(0,a.getY)(o)+5),P=Snackbar.init({type:u.SNACKBAR_TYPE_BULLYING,text:e.description,bottom:r,duration:n}),M=setTimeout(function(){R(),N()},n),function(e){var t=$("#nc_submit"),n=$(".RepliesField__field"),r=i.default.elem({class:"RepliesField__action RepliesField__action_cancel",inner:(0,l.default)({duration:e/1e3}),onclick:["Replies.abortTimer",v]});T=!0;var o=$(".RepliesField__action_attach"),s=$(".RepliesField__action_smile");o&&o.classList.add(g),s&&s.classList.add(g),n.appendChild(r),(0,a.hide)(t)}(n)}else B(t),N()},onFail:function(){D=!1,N()}})}},abortTimer:L,setCurrentTimestamp:B};var m=50,_="editing",v="button",g="RepliesField__action_disabled";function y(){var e=(0,a.ge)("reply_field_text"),t=(0,a.ge)("reply_field_text_fake"),n=e.value;t.innerText=n,"\n"===(0,a.last)(n)&&(t.innerHTML+="&nbsp;");var i=(0,a.getH)(t);(0,a.getH)(e)!==i&&((0,a.setStyle)(e,{height:i}),b()),k(),L(_)}function b(){var e=(0,a.ge)("reply_field");(0,a.hasClass)("RepliesField_static",e)||(0,a.hasClass)("RepliesField_fixed",e)&&((0,a.setStyle)(e,{height:(0,a.getH)((0,a.geByClass1)("RepliesField_wrap",e))}),w(),(0,a.onBodyScrollForce)())}function w(){var e=(0,a.ge)("replies_to_last"),t=(0,a.ge)("reply_field");if(e&&t&&!(0,a.hasClass)("RepliesField_static",t)){var n=domData(e,"bottom");n||(n=parseInt(getStyle(e,"bottom"))||20,domData(e,"bottom",n)),(0,a.setStyle)(e,"bottom",(0,a.getH)(t)+parseInt(n))}}function E(){k(),b();var e=(mediaUpload?mediaUpload.getAttachesCount():0)<A;["photo_device","photo","video","audio","doc"].forEach(function(t){Unfold.toggleItemEnabled(Unfold.getByName("attaches"),t,e)})}function k(){var e=(0,a.ge)("nc_submit");e&&(0,a.toggleClass)("RepliesField__action_send_active",e,S())}function S(){var e=((0,a.ge)("reply_field_text")||{}).value;return trim(e)||mediaUpload&&mediaUpload.getAttachesCount()}function C(e){var t=[];return e.forEach(function(e){t.push((0,s.ModalMenuUserListItem)({href:e[2],image:e[1],name:e[3],onclick:"return Replies.replyAsChange(event, this, ".concat(parseInt(e[0]),", '").concat(e[4],"')")}))}),(0,s.default)({users:t})}var M,P,T=!1,D=!1,I={};function x(){T=!1,clearTimeout(M),Snackbar.close(P),R()}function O(){return I["".concat(window.cur.replyTo)]}function B(e){I["".concat(window.cur.replyTo)]=e,(0,a.val)("field_timestamp",e)}function L(e){if(T){var t=p(location.pathname.match(/^\/wall(-?[0-9]+)_([0-9]+)$/),3),n=t[1],a=t[2],i=O();ajax.post("/wall.php",{act:"cancel_check_comment",oid:n,post_oid:a,reason:e,timestamp:i})}x()}function R(){var e=$("#nc_submit"),t=($(".RepliesField__field"),$(".RepliesField__action_cancel")),n=$(".RepliesField__action_attach"),i=$(".RepliesField__action_smile");n&&n.classList.remove(g),i&&i.classList.remove(g),(0,a.remove)(t),(0,a.show)(e)}function N(){var e=$("#nc_submit");nav.go(e,event),B(0)}nav.onBeforeGo(function(e,t){var n=location.pathname.substr(1,4);isString(e)&&e.substr(1,4)!==n&&"wall"===n&&(I={})}),page.onChange(function(e,t){x()})},hclJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("z9sQ")),i=s(n("29dZ")),r=s(n("Y6JH")),o=n("fdw3");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(!e.type||e.image),n={class:a.default.class("SnackbarItem__cell",{left:!0,image:!!e.image,icon:t})},s={class:a.default.class("SnackbarItem__cell",{right:!0,avatar:!!e.avatar})},l=!1,c=!1;if(e.type){l=!0;var u=null;switch(e.type){case 1:u=(0,r.default)("common","snackbar_done_24");break;case 2:u=(0,r.default)("common","snackbar_error_24");break;case 3:u=(0,r.default)("common","favorites_24");break;case 4:u=(0,r.default)("wall","error_fill_24")}n.inner={class:"SnackbarItem__icon",inner:u}}e.image&&(l=!0,n.inner={class:"SnackbarItem__image",inner:{tag:"img",src:e.image}});e.action&&(c=!0,s.inner=(0,i.default)({theme:"none",class:"SnackbarItem__action",url:e.action.url,on_click:e.action.onclick,use_native_onclick:!0,inner:Wd.wrap(e.action.text),attrs:e.action.attrs}));e.avatar&&(c=!0,s.inner={tag:"img",class:"SnackbarItem__avatar",src:e.avatar});return{style:e.style?e.style:"",class:(0,o.concatValues)("SnackbarItem_".concat(e.id," "),a.default.class("SnackbarItem",{static:!!e.static,vertical:!!e.vertical,hasIcon:t},"--")),attrs:{"data-snackbar-id":e.id},inner:[{class:"SnackbarItem__table",inner:[l?n:null,e.text?{class:a.default.class("SnackbarItem__cell",{text:!0}),inner:{class:"SnackbarItem__text",inner:Wd.wrap(e.text)}}:null,c?s:null]}]}};t.default=l},hm4I:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("C7ju"))&&a.__esModule?a:{default:a}).default;t.default=i},hrk0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NewPostBlock=o,t.default=void 0;var a=n("n9zS"),i=n("80md"),r=n("NJ1W");function o(e){return{inner:[(0,r.Row)({inner:[(0,r.Col)({inner:[(0,a.Circle)({size:36})],auto:!0}),(0,r.Col)({inner:[(0,i.Line)()]}),(0,r.Col)(),(0,r.Col)({inner:[(0,a.Circle)({size:20})],auto:!0})],justify:"center"})],class:"SkeletonNewPostBlock",tag:"div"}}var s=o;t.default=s},hw56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyboardState=function(e){var t=store.mail.cur.keyboards,n=t[e];n||(n=t[e]={});return n},t.getKeyboardType=function(){if(!store.mail.cur)return"";return store.mail.cur.keyboardType||""},t.setKeyboardType=function(e){if(!store.mail.cur)return;store.mail.cur.keyboardType=e},t.loadDrafts=r,t.getPeerDraft=function(e,t){var n=r(e);return n[t]||(n[t]={})},t.setPeerDraft=function(e,t,n,a){var r=store.mail.cur.drafts;r||(r=store.mail.cur.drafts=r||{});if(a){var o=r[t],s=o&&o.editing&&o.editing.id===a?o.editing:void 0;r[t]=i({},o,{editing:i({},s,n,{id:a})})}else r[t]=i({},r[t],n,{editing:void 0});lsSet("mail_drafts_".concat(e),r)},t.pushPeerAttachments=function(e,t){var n=store.mail.peers[e];n.attachmentsStack.push(n.attachmentsHTML),n.attachmentsHTML=t},t.popPeerAttachments=function(e){var t=store.mail.peers[e],n=t.attachmentsStack.pop();n||(n=Brick({mix:"cp_attached_wrap",attrs:'id="attached_wrap"'}));t.attachmentsHTML=n},t.setPeerTyping=function(e,t){var n=store.mail.cur.typings[e];n||(n=store.mail.cur.typings[e]={});"text"!==t.type&&"audio"!==t.type||(t.count?n[t.type]=t:n[t.type]=null);if(n.text&&n.audio){var a=s(n.text,n.audio);n.mixed=a.count>1?a:null}else n.mixed=null},t.removePeerTypingUser=function(e,t){var n=store.mail.cur.typings[e];if(!n)return;var a=n.audio,i=n.text;a&&((a=o(a,t)).count?n.audio=a:n.audio=null);i&&((i=o(i,t)).count?n.text=i:n.text=null);if(n.text&&n.audio){var r=s(n.text,n.audio);n.mixed=r.count>1?r:null}else n.mixed=null},t.filterPeerTypingUser=o,t.replacePeer=function(e,t){var n=store.mail,a=n.scraps.folder,i=a.indexOf(e);-1!==i&&(t?a.splice(i,1,t):a.splice(i,1));Object.keys(n.rolls.folder).forEach(function(a){var i=n.rolls.folder[a],r=i.indexOf(e);-1!==r&&(t?i.splice(r,1,t):i.splice(r,1))}),t&&(n.rolls.peer[t]=n.rolls.peer[e],n.reached.peer.before[t]=n.reached.peer.before[e],n.reached.peer.after[t]=n.reached.peer.after[e]);e!==t&&(n.rolls.peer[e]&&n.rolls.peer[e].forEach(function(a){var i=n.msgs[a];i&&(t?(i.peerId=t,i.authorId===e&&(i.authorId=t)):delete n.msgs[a])}),delete n.rolls.peer[e],delete n.reached.peer.before[e],delete n.reached.peer.after[e],delete n.members[e],delete n.peers[e])},t.removePeer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=store.mail;if(!1!==t.lists){var a=n.scraps.folder,i=a.indexOf(e);-1!==i&&a.splice(i,1),Object.keys(n.rolls.folder).forEach(function(t){var a=n.rolls.folder[t],i=a.indexOf(e);-1!==i&&a.splice(i,1)})}!1!==t.msgs&&n.rolls.peer[e]&&n.rolls.peer[e].forEach(function(e){n.msgs[e]&&delete n.msgs[e]});!1!==t.lists&&(delete n.rolls.peer[e],delete n.reached.peer.before[e],delete n.reached.peer.after[e]);!1!==t.data&&(delete n.members[e],delete n.peers[e])},t.addPeer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=store.mail;if(t.msgs){var a=t.msgs;n.rolls.peer[e]=a,n.reached.peer.before[e]=!1,n.reached.peer.after[e]=!1}else n.rolls.peer[e]||(n.rolls.peer[e]=[],n.reached.peer.before[e]=!1,n.reached.peer.after[e]=!1);var i=n.msgs[n.rolls.peer[e][0]];n.rolls.folder.all.unshift(e),n.cur.folder&&n.scraps.folder.unshift(e);i&&(i.isUnread&&n.rolls.folder.unread.unshift(e),i.isImportant&&n.rolls.folder.important.unshift(e))},t.addPendingMsg=function(e){var t=store.mail.presend;t.pending[e.peerId]||(t.pending[e.peerId]=[]);t.msgs[e.sendId]=e,t.pending[e.peerId].push(e.sendId)},t.getPendingMsg=function(e,t){var n=store.mail.presend;if(!n.pending[t])return null;return n.msgs[e]},t.removePendingMsg=function(e){var t=store.mail.presend;if(!t.pending[e.peerId])return;var n=e.sendId;delete t.msgs[n],t.pending[e.peerId]=t.pending[e.peerId].filter(function(e){return e!==n})},t.removeFailedMsg=function(e){var t=store.mail.presend;if(!t.failed[e.peerId])return;var n=e.sendId;delete t.msgs[n],t.failed[e.peerId]=t.failed[e.peerId].filter(function(e){return e!==n})},t.failAllPendingMsgs=function(){var e=store.mail.presend,t={};Object.keys(e.msgs).forEach(function(n){var a=e.msgs[n];a.pending=!1,a.failed=!0,t[a.peerId]||(t[a.peerId]=[]),t[a.peerId].push(n)},{}),e.pending={},e.failed=t},t.queueToPresendMsgs=function(e){var t={};Object.keys(e.items).forEach(function(n){var i=e.items[n];t[n]=(0,a.sendDataToMessage)(i.data.data,-1!==e.failed.indexOf(n))});var n={};e.pending.forEach(function(e){var a=t[e];n[a.peerId]||(n[a.peerId]=[]),n[a.peerId].push(e)},{});var i={};e.failed.forEach(function(e){var n=t[e];i[n.peerId]||(i[n.peerId]=[]),i[n.peerId].push(e)},{}),store.mail.presend={msgs:t,pending:n,failed:i}},n("2IoG");var a=n("qHA9");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e){var t=store.mail.cur.drafts;return t||(t=lsGet("mail_drafts_".concat(e)),t=store.mail.cur.drafts=t||{}),t}function o(e,t){var n=e.users.filter(function(e){return e!==t});return n.length!==e.users.length&&(e.count=e.count-(e.users.length-n.length),e.users=n),e}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e.count+=t.count,t.users.reduce(function(e,t){return-1===e.users.indexOf(t)?e.users.push(t):e.count--,e},e)},{users:[],count:0,type:"mixed"})}},hxrZ:function(e,t,n){"use strict";n("TxR4");var a,i=n("S6+Z"),r=n("qHA9"),o=n("OcsD"),s=(a=n("s53I"))&&a.__esModule?a:{default:a};function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}window.StickersHints=function(){var e,t,n,a,c,u,d=864e5,f=300,h=64,p=8,A=4,m=!0,_=0,v=new s.default({mvk:!0});i.EMOJI_HINTS;function g(e){var i=window.cur;if(n=geByTag1("textarea",gpeByTag("form",geByClass1("cp_sticker_btn"))),v.setConfig(e),n&&!n.initialized){var r=function(e){var t=n.value.length;t-_>1,_=t,y(),m&&(!function(){C()&&vkNow()-M()>d*(2+Math.random())&&b();e=function(e){e*=1e3,C()&&e>M()&&b()},ajax.post("/attachments",{_ajax:1,act:"stickers_hints_change_date"},{onDone:e});var e}(),m=!1)};n.initialized=!0,c=geByClass1("stickersHints"),a=geByClass1("stickersHints__content"),addEvent(n,"focus",y),addEvent(n,"input",r),addEvent(document,"click",w),onBodyResize(E),onBodyResize(T),i.destroy.push(function(){c=null,a=null,n=null,removeEvent(n,"focus",y),removeEvent(n,"input",r),removeEvent(document,"click",w),onBodyResize("__clear",E),onBodyResize("__clear",T),t&&t.destroy(),_=0}),document.activeElement===n&&y()}}function y(){var i;n&&(e&&clearTimeout(e),i=function(i){var o=v.getQueries(n.value).find(function(e){return i.hasOwnProperty(e)}),s=o&&i[o];s?e=setTimeout(function(){var e,n=s.userStickers||[],i=s.promotedStickers||[];if(n.length>0||i.length>0){var l=[];each(n,function(e,t){l.push(k({stickerId:t,query:o,isPromoted:!1}))}),each(i,function(e,t){l.push(k({stickerId:t,query:o,isPromoted:!0}))}),v.isBotLinkEnabled()&&l.push((e=(0,r.getStickerSize)(),Wd.html({inner:[{inner:[{class:"th_img",src:v.getBotLinkImageUrl(e),tag:"img"}],class:"sticker_thumb",href:v.getBotLinkUrl(),onclick:"StickersHints.onSuggestionsBotLinkClick();",target:"_blank",tag:"a"}],class:"sticker_item",tag:"div"}))),a.innerHTML=l.join(""),show(c),E(),T(),(t=new Scroller(c)).init()}},f):(t&&t.destroy(),hide(c))},u?i(u):C()?(u=lsGet("stickers_keywords").keywords,i(u)):S(function(e){u=e,P(e),i(e)}))}function b(){S(function(e){u=e,P(e),y()})}function w(t){var a=t.target;a===n||gpeByClass(a,"stickersHints")||(hide(c),e&&clearTimeout(e))}function E(){attr(a,"style","")}function k(e){var t=e.isPromoted,n=t?"":"onclick=\"return StickersHints.onStickerThumbClick(event, this, {{stickerId}}, '{{stickerReferrer}}');\"",a=t?'href="/attachments?'+["act=stickers_store","target="+attr(c,"data-target"),"sticker_id={{stickerId}}","from=inline","sticker_referrer={{stickerReferrer}}"].join("&")+'"':"",i=Stickers.getStickerUrl(e.stickerId,(0,r.getStickerSize)());return('<div class="sticker_item sticker{{stickerId}} {{promotedClass}}">        <a class="sticker_thumb thumb_item" '+a+" "+n+'>          <img class="th_img" src="{{stickerUrl}}" />        </a>      </div>').replace(/{{stickerId}}/g,e.stickerId).replace(/{{stickerUrl}}/g,i).replace("{{promotedClass}}",t?"sticker_item_promoted":"").replace("{{stickerReferrer}}","suggestion_"+e.query)}function S(e){ajax.post("/attachments",{_ajax:1,act:"stickers_hints_keywords"},{onDone:function(t){e(function(e){var t={};return each(e,function(e,n){var a=n.user_stickers,i=n.promoted_stickers;each(n.words,function(e,n){t[n]={userStickers:a,promotedStickers:i}})}),t}(t))}})}function C(){return Boolean(lsGet("stickers_keywords"))}function M(){return lsGet("stickers_keywords").time}function P(e){!e||isEmpty(e)?lsSet("stickers_keywords"):lsSet("stickers_keywords",{keywords:e,time:vkNow()})}function T(){var e=geByClass1("stickersHints__callout");if(e){var t=e.offsetWidth-A,n=t/h,a=n%1;a<.3?n=Math.floor(n)-.5:a>.7&&(n=Math.ceil(n)-.5);var i=Math.round(t/n-p);each(geByClass("sticker_item",e),function(e,t){var n=geByClass1("sticker_thumb",t),a=geByClass1("th_img",t);setStyle(t,"width",i),setStyle(t,"height",i),setStyle(n,"width",i),setStyle(n,"height",i),setStyle(a,"height",i)})}}return onDOMReady(function(){lsCheck()&&!geByClass1("vk_stickers_hints_support_no")&&(post.onStickersInit(function(){g()}),geByClass1("stickersHints")&&g())}),ajax.onRedirect(function(e){qs2obj(e.split("?")[1]).invalidate_stickers_hints&&b()}),post.onReplyClick(function(e){var t=window.cur;e,setTimeout(y,10),t.destroy.push(function(){;""})}),{actualizeVisibility:y,init:g,onStickerThumbClick:function(t,a,i,r){window.isNewMail&&preventEvent(t);var o=gpeByClass("sticker_item",a),s=geByClass1("th_img",o);return attr(o,"style",""),attr(a,"style",""),attr(s,"style",""),hide(c),n.value="",e&&clearTimeout(e),post.sendSticker(a,i,!0,r)},onCheckboxLabelClick:function(e,t){setTimeout(function(){!function(e,t,n){var a={_ajax:1,act:"stickers_hints_enabled",value:e,hash:t};ajax.post("/attachments",a,{onDone:n})}(val(geByTag1("input",e.parentElement))?1:0,t,b)},0)},onCheckboxAutoAnimationLabelClick:function(e,t){setTimeout(function(){!function(e,t,n){var a={_ajax:1,act:"stickers_auto_animation_enabled",value:e,hash:t};ajax.post("/attachments",a,{onDone:n})}(val(geByTag1("input",e.parentElement))?1:0,t,b)},0)},onSuggestionsBotLinkClick:function(){o.statlogsValueEvent.apply(void 0,[v.getBotLinkClickStatName(),0].concat(l(v.getBotLinkClickStatKeys())))}}}()},"i/4A":function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.registration=null,this._handlers=[]}var t,n,i;return t=e,i=[{key:"isSupported",value:function(){try{return!(!window.fetch||!navigator.serviceWorker)}catch(e){return!1}}}],(n=[{key:"listenMessages",value:function(){navigator.serviceWorker.addEventListener("message",this._onmessage.bind(this))}},{key:"register",value:function(t){if(!e.isSupported())return Promise.reject("SW: serviceWorker is unavailable");var n=t&&t.url;return n?navigator.serviceWorker.register(n,{scope:"/",updateViaCache:"none"}).then(function(e){return this.registration||(this.registration=e),e}.bind(this)):Promise.reject("SW: incorrect url")}},{key:"getRegistration",value:function(){return e.isSupported()?navigator.serviceWorker.ready.then(function(e){return this.registration||(this.registration=e),e}.bind(this)):Promise.reject("SW: serviceWorker is unavailable")}},{key:"unregister",value:function(){this.registration&&this.registration.unregister(),this._handlers.forEach(function(e){return e[0].removeEventListener(e[1],e[2])}),this._handlers=[]}},{key:"update",value:function(){this.registration&&this.registration.update()}},{key:"_addEventListener",value:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!1;this._handlers.forEach(function(a){a[0]===e&&a[1]===t&&a[2]===n&&(i=!0)}),i&&!a||(this._handlers.push([e,t,n]),e.addEventListener(t,n))}},{key:"action_devicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"action",value:function(e,t){var n=null;return n=Array.isArray(e)?e:[[e,t]],this._message({actions:n}).then(function(e){return e.answers?Promise.resolve(1===n.length?e.answers[0]:e.answers):Promise.reject(new Error("ServiceWorker answer is incorrect"))})}},{key:"_message",value:function(e){var t=this;return this.getRegistration().then(function(){return new Promise(function(t,n){var a=new MessageChannel;a.port1.onmessage=function(e){this._messageCheck(e)?t(e.data.data):n(new Error("ServiceWorker message is incorrect"))}.bind(this),this.registration.active.postMessage(this._messageWrap(e),[a.port2])}.bind(t))})}},{key:"_onmessage",value:function(e){if(this._messageCheck(e)){var t=e.data.data;if(t.actions&&Array.isArray(t.actions)){var n=[];t.actions.forEach(function(t){var a="action_"+t[0],i=t[1],r=this[a]?this[a](i,e):void 0;r instanceof Promise||(r=Promise.resolve(r)),n.push(r)}.bind(this)),Promise.all(n).then(function(t){var n={};t.forEach(function(e,t){void 0!==e&&(n[t]=e)}),Object.keys(n).length&&e.ports[0].postMessage(this._messageWrap({answers:n}))}.bind(this))}}}},{key:"_messageCheck",value:function(e){return(""===e.origin||e.origin.match(/^https:\/\/([a-zA-Z0-9\-\.]+\.)?vk\.com$/))&&e.data&&e.data.data&&"sw"===e.data.type}},{key:"_messageWrap",value:function(e){return{type:"sw",data:e}}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i,i.SW_NOT_AVAILABLE_ERROR="SW: serviceWorker is unavailable"},i0zL:function(e,t,n){"use strict";var a=u(n("+cqQ")),i=(n("UxAg"),u(n("TYsd"))),r=u(n("HHQA")),o=u(n("i3N4")),s=u(n("5V+s")),l=(n("OcsD"),n("K0hv")),c=n("tqgD");function u(e){return e&&e.__esModule?e:{default:e}}var d=2,f=window.ajax,h=window.thover,p=window.nav,A=window.page,m=window.PhotoLike,_=window.zlayer,v=window.photo,g=300,y=function(){var e=!1,t=!1,n=!1,u=!1,b=!1,w=!1,E=!1,k=!1,S=!1,C=!1,M=!1,P=!1,T=!1,D=!1,I=!1,x=!1,O=!1,B=!1,L=!1,R=!1,N=!1,j=!1,F=!1,H={},V={min_scale:1,max_scale:3,min_scale_limit:.5,max_scale_limit:5,anim_duration:g,inertia_duration:300,bounce_diff:1.5,crop_padding:20,crop_size:250,fps:0};function U(e){var t=getCw()/2,n=getCh()/2;if(e.touches){for(var a=0,i=0,r=0,o=Math.min(2,e.touches.length);a<o;a++)i+=e.touches[a].pageX,r+=e.touches[a].pageY,0;return o?{pageX:i/o-t,pageY:r/o-n}:{pageX:-t,pageY:-n}}return{pageX:e.pageX-t,pageY:e.pageY-n}}function z(e,t){var n=null,a=t?attr(M,"data-original-src")||M.src:e.src;if(H[a])return H[a];if(t&&(e=function(){var e=ce("img");return e.src=attr(M,"data-original-src")||M.src,e}()),void 0!==e.naturalWidth)n={width:e.naturalWidth,height:e.naturalHeight};else if("VIDEO"===e.tagName)n={width:e.clientWidth,height:e.clientHeight};else{(new Image).src=e.src,n={width:e.width,height:e.height}}return n.width&&n.height&&(H[a]=n),n}function W(e){var t=attr(e,"data-id");return q((rn(Jt).tags||{})[t]||[])}function q(e){return e[0]?{coords:{x:e[0][0],y:e[0][1],w:e[0][2],h:e[0][3]},name:e[1],href:e[2],al:e[3]}:{}}function G(e){setStyle(t,"overflow",e?"visible":"hidden")}var $=null,Y=null;function Q(e,n,a,i,r,o,s,l,c){if(!V.fps||c){var u=!1,d=!!l&&function(){u||(u=!0,l())};o?(t&&setStyle.animate(t,"transform",{duration:o,func:s},d),M&&setStyle.animate(M,!1===r?"transform":"transform, opacity",{duration:o,func:s},d),D&&setStyle.animate(D,!1===r?"transform":"transform, opacity",{duration:o,func:s},d),I&&setStyle.animate(I,!1===r?"transform":"transform, opacity",{duration:o,func:s},d),b&&setStyle.animate(b,!1===r?"transform":"transform, opacity",{duration:o,func:s},d),We=!0):We&&(t&&setStyle.animate(t),M&&setStyle.animate(M),D&&setStyle.animate(D),I&&setStyle.animate(I),b&&setStyle.animate(b),We=!1),setStyle.transform(t,{translate:[n,0]}),setStyle.transform(M,e,[a,i]),Ht(e,a,i),!1!==r&&(setStyle(M,"opacity",r),Me||Pe?(setStyle(D,"opacity",r),Te=!0):(setStyle(I,"opacity",r),xe=!0),function(e,t){var n=window.lang;if(e){var a=_.height,i=a/5,r=a/3.5,o=Math.abs(e),s=o>20?e+(e>0?20-e:-20-e)/V.bounce_diff:e,l=0===t?0:Math.max(0,Math.min((o-20)/i,.75));t>0&&setStyle.transform(b,{translate:[0,s]}),setStyle(b,"opacity",l);var c=o>r,u=c?"":e>0?" zpv_close_move_down":" zpv_close_move_up",d=c?n.mobile_zphoto_release_to_close:n.mobile_zphoto_move_to_close;val(b,'<div class="zpv_close_msg'+u+'">'+d+"</div>"),(b.is_down&&e<0||!b.is_down&&e>0)&&Rt(e>0)}else setStyle.transform(b,{translate:[0,0]}),setStyle(b,"opacity",0)}(i,r)),Lt(e)}else $=[e,n,a,i,r,o,s,l,!0],Y||X()}function X(){$&&(Q.apply(window,$),$=null),clearTimeout(Y),Y=V.fps?setTimeout(X,1e3/V.fps):null}function K(e,t,n){gt(!0),Q(pe,se,fe,he,qe,e,t,n),qe=!1}function J(e,t,n,a){Q(e.currentScale,e.curBodyX,e.currentX,e.currentY,!1,t,n,a)}function Z(e){e=function(e){if(!e)return e;var t={width:M.width||M.clientWidth,height:M.height||M.clientHeight},n=t.width/2,a=t.height/2;return[e[0]+n,e[1]+a]}(e||[0,0]),setStyle.transformOrigin(M,e)}function ee(){(F=en.max_src&&pe>2)?M.src!==en.max_src&&(attr(M,"data-original-src",en.src),attr(M,"data-src",en.max_src),sn(en.max_src)):!F&&M.src!==en.src&&M&&(attr(M,"data-src",en.src),ln(en.src),M.style.width="")}var te,ne,ae,ie,re,oe,se,le,ue,de,fe,he,pe,Ae,me,_e,ve,ye,be,we,Ee,ke,Se,Ce,Me,Pe,Te,De,Ie,xe,Oe,Be,Le,Re,Ne,je,Fe,He,Ve,Ue,ze,We,qe,Ge=!1,$e=!1,Ye=null;function Qe(e){var t=e[1].pageX-e[0].pageX,n=e[1].pageY-e[0].pageY;return{distance:Math.sqrt(t*t+n*n),angle:180*Math.atan2(n,t)/Math.PI}}function Xe(e){var t=Qe(e);if(Ge){var n=t.distance/Ge.scale,a=t.angle-Ge.rotation;a<-180&&(a+=360),a>180&&(a-=360),extend(Ge,{startDistance:n,startAngle:a})}else Ge={startDistance:t.distance,startAngle:t.angle,scale:1,rotation:0}}function Ke(e){return extend({originalEvent:e},e,function(e){if(!Ge)return{scale:1,rotation:0};if(e.length<2)return{scale:Ge.scale,rotation:Ge.rotation};var t=Qe(e),n=t.distance/Ge.startDistance,a=t.angle-Ge.startAngle;a<-90&&(a+=360),a>270&&(a-=360);var i={scale:n,rotation:a};return extend(Ge,i),i}(e.touches),U(e))}function Je(e){var t=e.touches;t&&(t.length>5||t.length<2?Ge&&(Bt(Ke(e)),Ge=!1):Ge?Xe(t):(xt(Ke(e)),Xe(t)))}function Ze(e){var t=e.touches;t&&(t.length>5||t.length<2?Ge&&(Bt(Ke(e)),Ge=!1):Ge&&Ot(Ke(e)))}function et(e){var t=e.touches;t&&((t.length>5||t.length<2)&&Ge&&(Bt(Ke(e)),Ge=!1),Ge&&Xe(t))}function tt(e){preventEvent(e);var t=(e.detail?e.detail:e.wheelDelta)>0?1.05:.95,n=extend({originalEvent:e},e);$e||($e=1,Tt(e),xt(extend(n,{scale:$e}))),$e*=t,Ot(extend(n,{scale:$e})),clearTimeout(Ye),Ye=setTimeout(function(){Bt(extend(n,{scale:$e})),It(e),$e=!1},200)}function nt(){te=0,ne=0,ae=0,ie=0,re=1,oe=!0,se=0,le=0,ue=0,de=1,fe=0,he=0,pe=1,Ae=!1,me=!1,_e=!1,ve=!1,ye=!1,be=!1,we=!1,Ee=!1,ke=!1,Te=!1,De=!1,Ie=!1,xe=!1,Oe=!1,Be=!1,Le=!1,!1,He=!1,Ve=!1,Ue=!1,ze=!1}function at(){return{lastScale:re,deltaX:te,deltaY:ne,pointX:ae,pointY:ie,curScale:de,currentScale:pe,curX:le,curY:ue,currentX:fe,currentY:he,curBodyX:se}}function it(e,t,n){n=n||at(),e=e||{};var a=extend({},n,e);if(isUndefined(e.deltaX)||isUndefined(e.deltaY)?isUndefined(e.pointX)||isUndefined(e.pointY)?isUndefined(e.lastScale)?isUndefined(e.currentScale)?isUndefined(e.curScale)||(a.currentScale=a.lastScale*a.curScale,a.curX=a.pointX-a.deltaX*a.curScale,a.curY=a.pointY-a.deltaY*a.curScale,a.currentX=a.curX/a.currentScale,a.currentY=a.curY/a.currentScale):(a.curScale=a.currentScale/a.lastScale,a.curX=a.pointX-a.deltaX*a.curScale,a.curY=a.pointY-a.deltaY*a.curScale,a.currentX=a.curX/a.currentScale,a.currentY=a.curY/a.currentScale):(a.curScale=1,a.currentScale=a.curScale*a.lastScale):(a.curX=a.pointX-a.deltaX*a.curScale,a.curY=a.pointY-a.deltaY*a.curScale,a.currentX=a.curX/a.currentScale,a.currentY=a.curY/a.currentScale):(a.pointX=a.curX+a.deltaX*a.curScale,a.pointY=a.curY+a.deltaY*a.curScale),isUndefined(e.curX)||(a.curX=e.curX,a.currentX=a.curX/a.currentScale),isUndefined(e.curY)||(a.curY=e.curY,a.currentY=a.curY/a.currentScale),t)return a;te=a.deltaX,ne=a.deltaY,ae=a.pointX,ie=a.pointY,re=a.lastScale,de=a.curScale,pe=a.currentScale,le=a.curX,ue=a.curY,fe=a.currentX,he=a.currentY,se=a.curBodyX}function rt(){var e=_.width||getCw(),t=_.height||getCh();if(j)var n=e,a=Math.min(V.crop_size,n-2*V.crop_padding),i=a,r=a;else i=e,r=t;return{width:i,height:r}}function ot(e){var t=rt().width,n=((M.width||M.clientWidth)*e-t)/2,a=-n;return n<=0&&(a=n=0),{min:a,max:n}}function st(e){var t=rt().height,n=((M.height||M.clientHeight)*e-t)/2,a=-n;return n<=0&&(a=n=0),{min:a,max:n}}function lt(){var e=1,t=V.max_scale;if(j){e=1,t=(Xt?Xt[0]:{max_scale:V.max_scale}).max_scale}else{var n=z(M,!0);e=V.min_scale,t=Math.max(V.max_scale,n.width/getCw(),(n.height||n.clientHeight)/getCh())}return{min:e,max:t}}function ct(e){var t=_.height||getCh(),a=Math.abs(Zt)>=10,i=Math.abs(e)>1,r=t/3.5,o=Math.abs(ue);return ue*e<0&&(a=!0),e=e||0,o>r||!a&&i?(function(e){var t=_.height||getCh(),a=2*Math.abs(he)>t?.85:1.7;it({curY:(e>1?t:e<-1?-t:ue>0?t:-t)/a}),qe=0,K(150,"ease-in",ut),setStyle(n,"width",0),je=!0}(e),!0):(Mt()&&(qe=1,K(300),ve=!1,Pe&&(Pe=!1,Ut(!0))),!1)}function ut(){L&&y.close()}function dt(){!1!==Re&&(G(!1),fn(Re),setStyle.transform(P),setStyle.transform(T),Q(1,0,0,0,1),Z(),Re=!1)}function ft(){var e=1.05*(_.width||getCw());fe-=(e+se)/pe,se=-e,Re=Jt+1,Zt--,K(g,"ease-out",dt),$t(!1,!0),Pe=!1,y.onPhotoChange&&y.onPhotoChange(Jt+1,{no_open:!0,local:R,crop:j})}function ht(){var e=1.05*(_.width||getCw());fe+=(e-se)/pe,se=e,Re=Jt-1,Zt++,K(g,"ease-out",dt),$t(!1,!0),Pe=!1,y.onPhotoChange&&y.onPhotoChange(Jt-1,{no_open:!0,local:R,crop:j})}function pt(){if(!Ve)return!1;var e=function(){if(!Ve||Ve.length<2)return[0,0,0];for(var e=vkNow(),t=!1,n=Ve.pop(),a=Ve.length-1;a>=0;a--){if((i=e-Ve[a][0])>150)break;t=Ve[a]}if(!t||!n)return[0,0,0];var i,r=n[1].pageX-t[1].pageX,o=n[1].pageY-t[1].pageY,s=Math.sqrt(r*r+o*o);return(i=n[0]-t[0])?[s/i,r/i,o/i]:[0,0,0]}(),t=e[0],n=e[1],a=e[2];if(mt(),!t)return!1;var i=_e||ve?5.1:4.7,r=t/i,o=n*r-i*r*r/2,s=a*r-i*r*r/2;if(r*=530,o*=140,s*=140,t<.1||!o&&!s)return!1;if(!ve){var l={};_e||(l.curX=le+o,l.curY=ue+s),it(l);var c=ot(pe);l={},le<c.min?l.curBodyX=oe?le-c.min:0:le>c.max&&(l.curBodyX=oe?le-c.max:0),it(l)}return _e?4.7*n:ve?4.7*a:r}function At(e){Ve||(Ve=[]),Ve.push([vkNow(),e]),Ve=Ve.slice(-20)}function mt(){Ve=!1}function _t(e,t){var n,a,i,r,o,s,l,c,u,d=(n=[e.curX,e.curY],a=e.currentScale,i=[t.curX,t.curY],r=t.currentScale,o=n[0],s=n[1],l=i[0],c=i[1],1!=(u=r/a)&&[o+(o-l)/(u-1),s+(s-c)/(u-1)]);if(!d)return!1;var f=d[0],h=d[1];return e.deltaX=f-e.curX,e.deltaY=h-e.curY,e.currentX=e.curX/e.currentScale+f-f/e.currentScale,e.currentY=e.curY/e.currentScale+h-h/e.currentScale,t.deltaX=f-t.curX,t.deltaY=h-t.curY,t.currentX=t.curX/t.currentScale+f-f/t.currentScale,t.currentY=t.curY/t.currentScale+h-h/t.currentScale,d}function vt(e,t,n){var a,i,r,o,s,l,c,u,d,f,h,p,A,m,v,g=_.width||getCw(),y=_.height||getCh(),b=!1,w=(Math.min(50,g/7),z(M)),E=g/w.width,k=y/w.height,S=Math.min(1,E,k),C=W(e).coords,P=geByClass1("zpv_tl",e),T=getW(P),D=getH(P),I=(Math.min((g-30)/Math.max(C.w*w.width*S/100,T),(y-30)/(C.h*w.height*S/100+D+5)),function(){i=w.width*S*n.currentScale,r=w.height*S*n.currentScale,o=g/2-i/2+n.currentX*n.currentScale,s=y/2-r/2+n.currentY*n.currentScale,u=o+C.x*i/100,d=s+C.y*r/100,l=C.w*i/100,c=C.h*r/100,a=u+l/2-T/2,d+c+5,h=Math.min(u,a),f=Math.max(l,T),A=h+f,m=(p=d)+(c+D+5),v={}});return n=(n=it(v,t,n))||at(),I(),h<15?(v.curX=n.curX+(15-h),b=!0):A>g-15&&(v.curX=n.curX-(A-g+15),b=!0),p<15&&(v.curY=n.curY+(15-p),b=!0),n=(n=it(v,t,n))||at(),I(),m>y-15&&(v.curY=n.curY-(m-y+15),b=!0),n=it(v,t,n),t?n:b}function gt(e){ze&&(ze=!1,Z(),e||K(),Nt(Me,!0),jt(!Me,!0),setTimeout(function(){ee()},300))}function yt(e,t,n){var a={};return n=n||at(),a.lastScale=e,n=it(a,t,n),!!t&&n}function bt(e,t,n){var a={};if(n=n||at(),!Pt())return!!t&&n;a.curScale=e,n=(n=it(a,t,n))||at();var i=lt();return a={currentScale:n.currentScale},n.currentScale<i.min?a.currentScale=n.currentScale+(i.min-n.currentScale)/V.bounce_diff:n.currentScale>i.max&&(a.currentScale=n.currentScale+(i.max-n.currentScale)/V.bounce_diff),n=it(a,t,n),!!t&&n}function wt(e,t){if(!Pt())return!1;var n=!1,a={};t=t||at();var i=lt();return t.currentScale<i.min?(a.currentScale=i.min,n=!0):t.currentScale>i.max&&(a.currentScale=i.max,n=!0),t=it(a,e,t),e?t:n}function Et(e){if(!Pt())return!1;var t={pageX:0,pageY:0},n=at(),a=null,i=_t(n,a=Mt(!0,a=Ct(t,!0,a=wt(!0,a=bt(e=1==e?1/re:e,!0,a=St(t,!0,n))))));i&&(Z(i),J(n),ze=!0),ze&&(Nt(!1,!0),jt(!1,!0)),St(t),bt(e),wt(),Ct(t),Mt(),ze?J(a,g,!1,gt):K(300),yt(pe)}function kt(e){if(!Pt())return!1;var t=at(),n=null,a=_t(t,n=Mt(!0,n=wt(!0,n=vt(e,!0,t))));a&&(Z(a),J(t),ze=!0),vt(e)&&(Ie||(Ie=t)),ze&&(Nt(!1,!0),jt(!1,!0)),wt(),Mt(),ze?J(n,g,!1,gt):K(g),yt(pe)}function St(e,t,n){var a={};return n=n||at(),a.deltaX=(e.pageX-n.curX)/n.curScale,a.deltaY=(e.pageY-n.curY)/n.curScale,n=it(a,t,n),!!t&&n}function Ct(e,t,n){var a={};n=n||at(),a.pointX=e.pageX,a.pointY=e.pageY;var i=ot(n.currentScale),r=st(n.currentScale),o=(!Ae&&!r.max&&!r.min||_e||!Pt())&&!ve;(ve||j&&!Ae&&!i.max&&!i.min)&&(a.curX=0),o&&(a.curY=n.curY),n=it(a,t,n),a={};var s=!1;return(n=n||at()).curX<=i.min?ye?(s=!0,a.curBodyX=n.curX-i.min):(a.curX=n.curX+(i.min-n.curX)/V.bounce_diff,a.curBodyX=oe?a.curX-i.min:0):n.curX>=i.max&&(be?(s=!0,a.curBodyX=n.curX-i.max):(a.curX=n.curX+(i.max-n.curX)/V.bounce_diff,a.curBodyX=oe?a.curX-i.max:0)),n.curY<r.min?o?a.curY=r.min:ve||(a.curY=n.curY+(r.min-n.curY)/V.bounce_diff):n.curY>r.max&&(o?a.curY=r.max:ve||(a.curY=n.curY+(r.max-n.curY)/V.bounce_diff)),n=it(a,t,n),t?n:s}function Mt(e,t){var n=!1,a={},i=ot((t=t||at()).currentScale),r=st(t.currentScale),o=!Ae&&!r.max&&!r.min||_e||!Pt()&&!ve;return ve&&(a.curX=0),o&&(a.curY=t.curY),t.curX<i.min?(a.curX=i.min,a.curBodyX=0,n=!0):t.curX>i.max&&(a.curX=i.max,a.curBodyX=0,n=!0),t.curY<r.min?(a.curY=r.min,n=!0):t.curY>r.max&&(a.curY=r.max,n=!0),t=it(a,e,t),e?t:n}function Pt(){return!B&&(!!j||Kt[en.src])}function Tt(e){if(scrollTop()||scrollTop(0),!je){if(e&&"mousedown"==e.type&&preventEvent(e),e.touches&&e.touches.length||!x){if(dt(),!me&&!Ae){He=U(e);var t=ot(pe);le<=t.min&&(ye=!1!==rn(Jt+1)),le>=t.max&&(be=!1!==rn(Jt-1))}if(me||B)we=Ee=ke=!1,Se=!1;else{clearTimeout(Ce);var n=U(e);we&&vkNow()-we<500&&Ee&&(a=n,r=(i=Ee).pageX-a.pageX,o=i.pageY-a.pageY,Math.sqrt(r*r+o*o)<50)?(ke=vkNow(),Se=!1):(we=vkNow(),Ee=n,Se=vkNow())}B||(me=!0)}var a,i,r,o;Ae||(oe=!0,G(!0)),Be=U(e),mt(),At(Be),St(Be)}}function Dt(e){if(!je&&(preventEvent(e),me)){if(we=Ee=ke=!1,Se=!1,At(Be=U(e)),Ue){if(!(Ue<vkNow()))return void mt();Ue=!1,St(Be),K()}if(He&&!_e&&!ve){var t=Math.abs(Be.pageX-He.pageX),n=Math.abs(Be.pageY-He.pageY),a=st(pe);if(!(n>5||t>5))return;n>5&&t<=5&&(1!=pe||Ae||B||j?(a.max||a.min)&&(ye=be=!1):(ve=!0,Me&&(Pe=!0),Ut(!1),Rt(Be.pageY-He.pageY>0))),He=!1,St(Be)}!Ct(Be)||_e||ve||B||(_e=!0,Be.pageX),function(){if(!ve)return;var e=Math.abs(ue),t=_.height/2;qe=1-.5*e/t}(),K(),_e&&Math.abs(se)>getCw()&&It(extend({originalEvent:e},e,{touches:[]}))}}function It(e){if(!je)if(Fe)Fe=!1;else{if(preventEvent(e),e.touches&&!e.touches.length||!x){var t=pt();if(_e)c=t,u=(_.width||getCw())/2,c=c||0,((se<-u||c<-1)&&ye?(ft(),1):(se>u||c>1)&&be?(ht(),1):(Mt()&&K(300),0))&&(nt(),G(!0));else if(ve)ct(t);else if(ke&&vkNow()-ke<1e3){!function(e){if(!Pt())return!1;var t=lt(),n={pageX:ae,pageY:ie},a=(pe>1?1:t.max)/re,i=at(),r=null;r=Mt(!0,r=Ct(n,!0,r=bt(a,!0))),e&&(r=Mt(!0,r=vt(e,!0,r)));var o=_t(i,r);o&&(Z(o),J(i),ze=!0),ze&&(Nt(!1,!0),jt(!1,!0)),bt(a),Ct(n),Mt(),e&&(vt(e),Mt()),ze?J(r,g,!1,gt):K(g),yt(pe),zt()}(r=e&&Te&&(hasClass("zpv_tag",e.target)?e.target:gpeByClass("zpv_tag",e.target))),we=Ee=ke=!1}else Mt()?K(300):t&&(Mt(),K(t,"cubic-bezier(0, 1, 1, 1)"));if(setTimeout(function(){ee()},300),Se)if(vkNow()-Se>700||e&&"touchcancel"==e.type)Se=!1;else{if(Se=!1,e)var n=hasClass("zpv_header",e.target)?e.target:gpeByClass("zpv_header",e.target),a=hasClass("zpv_zoom_btns",e.target)?e.target:gpeByClass("zpv_zoom_btns",e.target),i=hasClass("zpv_bottom_body",e.target)?e.target:gpeByClass("zpv_bottom_body",e.target),r=Te&&(hasClass("zpv_tag",e.target)?e.target:gpeByClass("zpv_tag",e.target)),o=xe&&e.target.closest(".Photo__marketTag"),l=Te&&e.target.closest(".Photo__marketShowMoreButton");e&&(n||a||i||r||o||l)?r?function(e,t){if(!Ne)return!1;if(!Te)return!0;W(e);if(hasClass("zpv_tag_selected",e))return hasClass("zpv_tl_wrap",t.target)||gpeByClass("zpv_tl_wrap",t.target)?p.go(e,t):(kt(e),cancelEvent(t),!1);De&&(we=Ee=ke=!1),removeClass("zpv_tag_selected",De),De=e,Vt(e),addClass("zpv_tag_selected",De);Me&&(Pe=!0);Ut(!1),kt(e),cancelEvent(t)}(r,e):a?(we=Ee=ke=!1,hasClass("zpv_zoomin",e.target)||gpeByClass("zpv_zoomin",e.target)?function(e){!!Ne&&(h.highlight=!1,h.end(e),!Ae&&!_e&&(!(lt().max<=pe)&&(cancelEvent(e),Et(j?1.25:1.45))))}(e):function(e){!!Ne&&(h.highlight=!1,h.end(e),!Ae&&!_e&&(!(lt().min>=pe)&&(cancelEvent(e),Et(j?.8:1))))}(e)):o?p.go(o.dataset.url):l&&s.default._openItemsPopup(l.dataset.itemsJson):De?$t(e):j||(Ce=setTimeout(function(){Ut(),Nt(Me),jt(!Me)},500))}me=!1,_e=ye=be=!1,mt()}var c,u;e.touches&&(e.touches.length>1||1==e.touches.length&&_e)&&St(Be=U(e)),(e.touches&&!e.touches.length||!x)&&(He=!1)}}function xt(e){if(!je&&(preventEvent(e),we=Ee=ke=!1,Se=!1,mt(),!_e&&!ve)){de=1,re=pe,Ae=!0,ye=be=!1;var t=ot(pe);(t.min>=-5||t.max<=5)&&(oe=!1,G(!1)),St(U(e)),Nt(!1,!0),jt(!1,!0)}}function Ot(e){je||(preventEvent(e),we=Ee=ke=!1,Se=!1,mt(),_e||ve||(Le=U(e),bt(e.scale),Ct(Le),K(),zt()))}function Bt(e){je||(preventEvent(e),we=Ee=ke=!1,Se=!1,mt(),_e||ve||(wt()&&((e.touches&&e.touches.length||!x)&&Ct(Le),Mt(),K(100),Ue=vkNow()+100),Ae=!1,Nt(Me,!0),jt(!Me,!0)))}function Lt(e){var t=lt(),n=e<t.max,a=e>t.min;toggleClass("zpv_zb_disabled",S,!n),toggleClass("zpv_zb_disabled",C,!a)}function Rt(e){e?setStyle(b,{top:-35,bottom:"auto"}):setStyle(b,{top:"auto",bottom:-35}),b.is_down=e}function Nt(e,t){var n=Te;if(e){if(!Pt())return;if(!Me&&!Pe||Ae)return}Te=e,e&&Ht(pe,fe,he,t||n!==e),n!==e&&(e&&Vt(De),Ft(D,e,t))}function jt(e,t){var n=xe;xe=e,e&&Ht(pe,fe,he,t||n!==e),Ft(I,e,t)}function Ft(e,t,n){e&&setStyle.animate(e,!n&&"opacity",{duration:200,func:"linear"},function(){setStyle(e,"visibility",t?"visible":"hidden")}),e&&setStyle(e,"visibility",t||!n?"visible":"hidden"),e&&setStyle(e,"opacity",t?1:0)}function Ht(e,t,n,a){if(!Ae){var i=_.width||getCw(),r=_.height||getCh(),o=z(M),s=i/o.width,l=r/o.height,c=Math.min(1,s,l),u=o.width*c*e,d=o.height*c*e,f=i/2-u/2+t*e,h=r/2-d/2+n*e;Te&&(a&&D&&setStyle.animate(D),setStyle(D,{width:Math.round(u),height:Math.round(d)}),setStyle.transform(D,{translate:[Math.round(f),Math.round(h)]})),xe&&(a&&I&&setStyle.animate(I),setStyle(I,{width:Math.round(u),height:Math.round(d)}),setStyle.transform(I,{translate:[Math.round(f),Math.round(h)]}),Oe||(!function(){function e(e,t){var n=e.getBoundingClientRect(),a=I.getBoundingClientRect();n.left<a.left+t?e.style.left="".concat(a.left-n.left+t,"px"):n.right>a.left+a.width-t&&(e.style.left="".concat(a.left+a.width-n.right-t,"px"))}Array.from(I.children).forEach(function(t){if(t.classList.contains("Photo__marketTag")){var n=t.$(".Photo__marketTagInner"),a=t.$(".Photo__marketTagArrow");e(n,10),e(a,20)}})}(),Oe=!0))}}function Vt(e){if(e){var t=z(M),n=_.width||getCw(),a=_.height||getCh(),i=n/t.width,r=a/t.height,o=Math.min(1,i,r),s=t.width*o*pe,l=t.height*o*pe,c=W(e).coords,u=geByClass1("zpv_tl",e),d=getW(u),f=getH(u),h=c.x*s/100,p=c.y*l/100,A=c.w*s/100,m=c.h*l/100,v=h+A/2-d/2,g=p+m+5,y=n>s?0-(n-s)/2:0,b=n>s?s+(n-s)/2:s,w=a>l?l+(a-l)/2:l,E=0,k=0;v<y+2?E=y+2-v:v+d>b-2&&(E=b-2-v-d),g+f>w-5&&(k=m>3*f?w-5-g-f:-m-f-10),setStyle.transform(u,{translate:[Math.ceil(E),Math.ceil(k)]})}}function Ut(e){if(void 0!==e){if(Me===e)return;Me=!e}else Pe=!1;setStyle(n,"width","auto"),n&&setStyle.animate(n,"opacity",{duration:200,func:"linear"},function(){setStyle.animate(n),setStyle(n,"width",Me?"auto":0)}),Me?(setStyle(n,"opacity",0),Me=!1):(setStyle(n,"opacity",1),Me=!0)}function zt(){_.height<604&&!De&&!j&&(pe>1.25?(Me&&(Pe=!0),Ut(!1)):Pe&&(Pe=!1,Ut(!0)))}function Wt(e){Ne&&(me||Ae||_e||e&&e.touches&&e.touches.length>1||(cancelEvent(e),y.close()))}function qt(e){if(!(me||Ae||_e||!e||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=ot(pe);37==e.keyCode?(cancelEvent(e),le>=t.max&&!1!==rn(Jt-1)&&(G(!0),ht())):39==e.keyCode?(cancelEvent(e),le<=t.min&&!1!==rn(Jt+1)&&(G(!0),ft())):27==e.keyCode&&Wt(e)}}function Gt(){j?pn():(Nt(Te,!0),jt(xe,!0))}function $t(e,t){return!(!Ne&&!t)&&(!De||(removeClass("zpv_tag_selected",De),De=!1,Pe&&pe<=1.25&&(Pe=!1,Ut(!0)),cancelEvent(e),!1))}function Yt(e){"touchstart"==e.type?Ne=!e.touches||1==e.touches.length:"touchmove"==e.type?(Ne=!1,preventEvent(e)):"click"==e.type&&(Ne||(cancelEvent(e),Ne=!0))}function Qt(e){"touchstart"==e.type?je=!0:"touchmove"==e.type?(je=!0,preventEvent(e)):(je=e.touches&&e.length,Fe=!je)}var Xt=!1,Kt={},Jt=!1,Zt=!1,en=!1,tn=!1,nn=!1;function an(e,t,n,a){var i=t||len(e);if(e&&!n||(Xt=null),Xt||(Xt=new Array(i)),Xt.length!=i){var r=Xt;Xt=new Array(i),extend(Xt,r)}extend(Xt,e);var o=function(e){for(var t in Xt)if(Xt[t].id==e)return+t;return-1}(en.id);-1==o&&(o=Jt),a||fn(o)}function rn(e){return!(e>=Xt.length)&&(!(e<0)&&(Xt[e]||{src:!0}))}function on(e,t,n){var a=z(e),i=rt();j&&(Xt[0].loaded=t,t&&(a.width>a.height?setStyle(e,{height:i.height}):setStyle(e,{width:i.width}),setStyle(e,{minWidth:0,maxWidth:"none"})),pn(!0));if(dn()){if(a.width*d>=i.width){var r=i.width/(a.width||a.clientWidth);if(a.height*r>=i.height)return;de=r,re=r,pe=r,setStyle.transform(M,r)}"VIDEO"===e.tagName&&e.play()}show(e),M===e&&(Nt(t,!t),jt(t&&!Me,!t))}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Kt[e])ln(e);else if(t){var n=ce("video",{src:e}),a=!1,i=function(){a||(a=!0,Kt[e]=!0,ln(e),n=null)};addEvent(n,"canplay",i),addEvent(n,"onload",i),n.load()}else{var r=new Image;r.addEventListener("load",function t(){Kt[e]=!0,ln(e),r.removeEventListener("load",t),r=null},!1),r.src=e}}function ln(e){[M,P,T].forEach(function(t){var n=gpeByClass("zpv_thumb_item",t),a=attr(t,"data-src");a===e&&(t.src=a,on(t,!0),"VIDEO"!==t.tagName&&removeClass("zpv_ti_loading",n),attr(t,"data-src",!1),dn()&&statlogsValueEvent("gif_play",0,"VIDEO"===t.tagName?"mp4":"gif"))})}function cn(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=gpeByClass("zpv_thumb_item",e);a&&(addClass("zpv_ti_loading",i),setTimeout(function(){setStyle(M,{display:"block"})})),a&&(n=!1),t?!0!==t?e.src===t?on(e,!0):Kt[t]?(e.src=t,on(e,!0)):(n?(e.src=n,on(e,!1)):hide(e),attr(e,"data-src",t),sn(t,a),addClass("zpv_ti_loading",i)):(n?(e.src=n,on(e,!1)):hide(e),addClass("zpv_ti_loading",i)):hide(e)}function un(){if(L){!function(){window.lang;var e="";if(dn())e=getLang("mobile_gif_popup_title");else{e=getLang("mobile_photos_photoview_header")||"";var t=!1!==Re?Re:Jt;e=(e=e.replace("%s",t+1)).replace(/%s|{count}/,Xt.length)}val("zpv_summary",e)}(),Lt(pe);var e=rn(!1!==Re?Re:Jt);if(e&&!0!==e.src){var t="";each(e.tags,function(e,n){if(!e||0==e)return!0;var a=q(n),i=a.coords,r=a.href?' data-href="'+a.href+'" data-name="'+escapeAttr(a.name)+'"':"",o=a.al?(a.href?" al"+a.al:"")+" "+a.al:"";t+='<div class="zpv_tag'+o+'" style="left: '+i.x+"%; top: "+i.y+"%; width: "+i.w+"%; height: "+i.h+'%;" data-id="'+e+'"'+r+'><div class="fill"></div><div class="zpv_tl_wrap" id="zpv_tl_wrap"><div class="zpv_tl'+(a.href?"":" zpv_tl_plain")+'">'+htsc(a.name)+"</div></div></div>"});var n="",a=e.market_tags&&e.market_tags.tags,s=a&&a.length,l="";s&&(l=i.default.html((0,o.default)({items:escape(JSON.stringify(a))})),a.forEach(function(e){n+=i.default.html((0,r.default)(e))})),val(D,t),val(I,n),val(w,'<div class="zpv_photo_desc">'.concat(e.caption||"","</div>").concat(l,'<div class="zpv_bottom_bg"></div>')),toggle(w,!!e.caption||s);var d="";if(R||p.getQuery("community"))d="";else{var f=e.tags&&e.tags[0]||0;d="<tr>"+('<td class="row_table_column"><a href="'+e.like_url+'" class="item_button item_like'+(e.likes_me?" item_likes_me":"")+'" onclick="return photoview.likePhoto(this, \''+e.id+'\');"><i class="i_icon i_like"></i>'+(e.likes_cnt?'<b class="v_value v_like">'+formatNum(e.likes_cnt)+"</b>":"")+"</a></td>")+('<td class="row_table_column"><a href="'+e.photo_url+'#comments" class="item_button item_replies al_photo" onclick="return photoview.openPhoto(this, event, true);"><i class="i_icon i_replies"></i>'+(e.replies_cnt?'<b class="v_value v_replies">'+e.replies_cnt+"</b>":"")+"</a></td>")+('<td class="row_table_last_column"><a href="'+e.photo_url+'" class="item_button item_tags al_photo" onclick="return photoview.openPhoto(this, event);"><i class="i_icon i_tags"></i>'+(f?'<b class="v_value v_tags">'+f+"</b>":"")+"</a></td>")+"</tr>"}val(E,d),(0,c.appendQRPhotoButton)(e.photo_url),show(u)}else hide(u)}}function dn(){return en.isDoc}function fn(e){L&&(Jt=Math.max(0,Math.min(e||0,Xt.length)),en=rn(Jt),nn=rn(Jt-1),tn=rn(Jt+1),cn(M,en.src,"/images/mobile/blank.gif",en.hasVideo),cn(T,tn.src),cn(P,nn.src),un(),y.onUpdate&&y.onUpdate())}function hn(){if(L&&N&&Xt){var e=Xt[0];if(!e.loaded&&e.progress){var t=geByClass1("zpvu_progress","zpv_center");setStyle(t,{width:100*e.progress+"%",visibility:"visible"})}if(!e.read&&e.thumb){e.read=!0;var n=geByClass1("zpv_upload_box","zpv_center"),a=geByClass1("zpv_upload_img",n);setStyle(a,{backgroundImage:"url("+e.thumb+")"}),removeClass("zpv_thumb_uploading",n)}}}function pn(t){if(L&&j&&Xt){var n=Xt[0],a=!!n.saving;if(toggleClass("item_disabled","zpv_save_button",a||!n.loaded),toggleClass("item_disabled","zpv_cancel_button",a),toggleClass("zpv_crop_saving",e,a),B=a,t||cn(M,n.src,"/images/mobile/blank.gif"),n.loaded&&n.rect&&!n.rect_inited){n.rect_inited=!0;var i=rt(),r=n.rect[0],o=n.rect[1],s=n.rect[2],l={};l.currentScale=1/s,it(l),wt(),Mt(),l={};var c=(M.width||M.clientWidth)*pe,u=(M.height||M.clientHeight)*pe,d=r*c,f=o*u;l.curX=(c-i.width)/2-d,l.curY=(u-i.height)/2-f,it(l),Mt(),K(0)}}}function An(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];L||(Se=!1,Ce=!1,Me=!0,Pe=!1,Re=!1,Ne=!0,je=!1,Fe=!1,We=!1,qe=!1,B=!1,R=!1,N=!1,j=!1,nt(),function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=window.lang,o="";o=a?(0,l._getLayer)(i):'<div id="z_photoview"><div class="zpv_siblings"><div id="zpv_left" class="zpv_thumb_item"><img class="zpv_img" alt=""></div><div id="zpv_right" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_body"><div id="zpv_center" class="zpv_thumb_item"><img class="zpv_img" alt=""></div></div><div class="zpv_close_msg_wrap"><div class="zpv_close_msg">'+r.mobile_zphoto_move_to_close+'</div></div><div class="zpv_controls"><div class="mhead zpv_header"><a class="zpv_close_btn" onclick="return photoview.closePhoto(event);"><i class="zpv_close_icon"></i></a><div class="hb_wrap"><h1 id="zpv_summary" class="hb_btn mh_header"></h1></div></div><div class="zpv_zoom_btns"><a class="zpv_zoom_btn zpv_zoomin"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a><a class="zpv_zoom_btn zpv_zoomout"><b class="zpv_zb_wrap"><i class="i_icon"></i></b></a></div><div class="zpv_bottom"><div class="zpv_photo_desc_wrap"></div><div class="zpv_bottom_body"><table class="zpv_values like_box row_table"></table></div></div></div><div class="zpv_tags"></div><div class="zpv_market_tags"></div><div class="zpva zpv_crop"><div class="zpv_crop_box"></div><div class="zpv_crop_loading"></div></div></div>';var s="/images/mobile/zpv_icons"+(hasClass("x2",window.bodyNode)?"_2x":"")+".png?2";(new Image).src=s,_.create(o,mn),e=ge("z_photoview"),geByClass1("zpv_body",e),t=geByClass1("zpv_siblings",e),n=geByClass1("zpv_controls",e),k=geByClass1("zpv_zoom_btns",e),b=geByClass1("zpv_close_msg_wrap",e),u=geByClass1("zpv_bottom",e),w=geByClass1("zpv_photo_desc_wrap",e),E=geByClass1("zpv_values",u),S=geByClass1("zpv_zoomin",k),C=geByClass1("zpv_zoomout",k),D=geByClass1("zpv_tags",e),I=geByClass1("zpv_market_tags",e),geByClass1("zpv_crop",e),M=geByClass1("zpv_img","zpv_center"),P=geByClass1("zpv_img","zpv_left"),T=geByClass1("zpv_img","zpv_right"),"VIDEO"===M.tagName&&(M.controls=!1)}(a,i),function(){if(x=void 0!==document.ontouchmove,O=!1,x){var t=geByClass1("zpv_header",e),n=geByClass1("zpv_bottom_body",e);addEvent(t,"touchstart touchmove touchend touchcancel",Qt),addEvent(n,"touchstart touchmove touchend touchcancel",Qt),addEvent(e,"touchstart touchmove click",Yt),addEvent(e,"touchstart",Tt),addEvent(e,"touchmove",Dt),addEvent(e,"touchend touchcancel",It),O?(addEvent(e,"gesturestart",xt),addEvent(e,"gesturechange",Ot),addEvent(e,"gestureend",Bt)):(addEvent(e,"touchstart",Je),addEvent(e,"touchmove",Ze),addEvent(e,"touchend touchcancel",et),addEvent(e,"gesturestart gesturechange gestureend",cancelEvent))}else addEvent(e,"mousedown",Tt),addEvent(e,"mousemove",Dt),addEvent(window,"mouseup",It),addEvent(window,"mousewheel",tt),addEvent(window,"keydown",qt)}(),L=!0,reflow(e),scrollTop()||scrollTop(0))}function mn(){L&&(!function(){if(x){var t=geByClass1("zpv_header",e),n=geByClass1("zpv_bottom_body",e);removeEvent(t,"touchstart touchmove touchend touchcancel",Qt),removeEvent(n,"touchstart touchmove touchend touchcancel",Qt),removeEvent(e,"touchstart touchmove click",Yt),removeEvent(e,"touchstart",Tt),removeEvent(e,"touchmove",Dt),removeEvent(e,"touchend touchcancel",It),O?(removeEvent(e,"gesturestart",xt),removeEvent(e,"gesturechange",Ot),removeEvent(e,"gestureend",Bt)):(removeEvent(e,"touchstart",Je),removeEvent(e,"touchmove",Ze),removeEvent(e,"touchend touchcancel",et),removeEvent(e,"gesturestart gesturechange gestureend",cancelEvent))}else removeEvent(e,"mousedown",Tt),removeEvent(e,"mousemove",Dt),removeEvent(window,"mouseup",It),removeEvent(window,"mousewheel",tt),removeEvent(window,"keydown",qt)}(),e=t=n=b=!1,u=E=!1,k=S=C=!1,M=P=T=D=!1,L=!1,Xt=null)}return{onShow:(0,a.default)(),onHide:(0,a.default)(),likePhoto:function(e,t){return!!Ne&&(h.highlight=!1,h.end(),en.likes_me?(en.likes_me=!1,--en.likes_cnt):(en.likes_me=!0,++en.likes_cnt),un(),f.click(e,extend({photo_id:t},m)))},openPhoto:function(e,t,n){var a=window.cur;if(!Ne)return!1;var i=a.replyNames,r=a.sticker_panel,o=a.stickers,s=p.go(e,t,{local:!0,fast:!0,beforeAppend:function(e){val(geByClass1("mcont",e),'<div class="pcont"><div class="media_view photo_view"><div class="pv_summary"><div class="summary_loading" style="display: none;"><i class="i_loading"></i></div></div><div class="pv_tag_wrap"></div><div class="pv_body pv_touch pv_touch_full pv_hidden_icons"><a class="thumb_item"><div class="pv_photo_wrap" id="pv_photo_tags" onclick="return photo.closeTags(event);"><img src="/images/mobile/blank.gif" class="ph_img" alt="" /></div></a><div class="pv_nav"><table class="row_table pv_nav_cont"><tr><td class="pv_nav_left"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_z"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td><td class="pv_nav_right"><a class="pv_nav_link"><span class="pv_icon"><i class="i_icon"></i></span></a></td></tr></table></div></div><div class="pv_footer"></div></div></div>'),val("m",e.innerHTML)}});extend(a,{replyNames:i,sticker_panel:r,stickers:o,processNav:function(e){var t;if(t=/^\/photo(-?\d+_\d+)$/i.exec(e.nav.path)){var n=qs2obj(e.nav.params),a=qs2obj(p.params);if(n.act)return!1;if(n.offset!=a.offset)return!1;if(n.list!=a.list&&!a.z)return!1;e.onPreNav&&e.onPreNav();var i=n.list||"",r=n.rev?"/rev":"";return!v.open(t[1],i+r,null,n.from,!0)}return!1}}),a.destroy.push(function(){v.clear()});var l=window.lang;if(!s&&!(s=p.go(e,t,{force:!0}))){var c=!0;if(_._lastNav){var u=_._lastNav,d=qs2obj(u.params);delete d.z,c=u.path+obj2qs(d)+u.hash}A.setMhead("m",l.mobile_photos_photo_head_title,c),v.showIcons()}return!0},closePhoto:Wt,savePhoto:function(e,t){if(!Ne)return!1;if(h.highlight=!1,h.end(),hasClass("item_disabled",e))return!1;if(!j||!Xt)return!1;var n=Xt[0],a=rt(),i=M.width*pe,r=(M.height||M.clientHeight)*pe,o=(i-a.width)/2-le,s=(r-a.height)/2-ue,l=1/pe,c=o/i,u=s/r;return n.onSelect&&n.onSelect(c,u,l),!1},cancelPhoto:function(e,t){return!!Ne&&(h.highlight=!1,h.end(),!hasClass("item_disabled",e)&&Wt())},onClose:null,onUpdate:null,onPhotoChange:null,saveSource:an,opened:function(){return L},openCrop:function(t,n){n=n||{};var a=!L;N?N=!1:An(),j=!0,B=!1,Xt=[t],a&&(_.open(),_.onResize=Gt),function(){if(L&&j){var t=window.lang;val("zpv_summary",t.mobile_zphoto_owner_crop_header),removeClass("zpv_mode_[a-z]+",e,!0),addClass("zpv_mode_crop",e),Lt(pe),M.parentNode||(val("zpv_center",""),append(M,"zpv_center"));var n='<tr><td class="row_table_column"><a class="item_button" id="zpv_save_button" onclick="return photoview.savePhoto(this);"><i class="i_icon i_save"></i><span class="v_value">'+t.mobile_zphoto_save_btn+'</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" id="zpv_cancel_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">'+t.mobile_zphoto_cancel_btn+"</span></a></td></tr>";val(E,n),show(u),pn()}}()},updateCrop:function(e){if(!Xt)return!1;e=extend(Xt[0]||{},e),Xt=[e],pn()},openUpload:function(t,n){n=n||{},An(),N=!0,B=!0,Xt=[t],_.open(),_.onResize=Gt,function(){if(L&&N){var t=window.lang;val("zpv_summary",t.mobile_zphoto_upload_header),removeClass("zpv_mode_[a-z]+",e,!0),addClass("zpv_mode_upload",e);remove(M),val("zpv_center",'<div class="zpva zpv_upload_box zpv_thumb_uploading"><div class="zpv_upload_img"></div><div class="zpvu_progress_wrap"><div class="zpvu_progress"></div></div></div>');var n='<tr><td class="row_table_column" width="50%"><a class="item_button item_disabled" onclick="return false;"><i class="i_icon i_save"></i><span class="v_value">'+t.mobile_zphoto_save_btn+'</span></a></td><td class="row_table_last_column" width="50%"><a class="item_button" onclick="return photoview.cancelPhoto(this);"><i class="i_icon i_cancel"></i><span class="v_value">'+t.mobile_zphoto_cancel_btn+"</span></a></td></tr>";val(E,n),show(u),hn()}}()},updateUpload:function(e){if(!Xt)return!1;e=extend(Xt[0]||{},e),Xt=[e],en=!1,hn()},open:function(e,t,n){var a,i;y.onShow(),An((n=n||{}).isDoc,n.hasVideo),R=n.local||!1,t&&an(t,!1,!1,!0),fn(e),Zt=0,_.open(),_.onResize=Gt,a=geByClass1("zpv_close_msg",b),i=getW(a),setStyle(b,{width:i||250})},close:function(){y.onHide(),y.onClose&&y.onClose({local:R})||_.close()}}}();window.photoview=y},i3N4:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("8kEl"))&&a.__esModule?a:{default:a}).default;t.default=i},i5VY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("eZEc"))&&a.__esModule?a:{default:a};var r=function(e){var t=window.lang;return{inner:[{inner:e.order_title,tag:"h2",class:"Order__title"},{tag:"a",class:"Order__detailsLink",inner:t.mobile_market_order_details,href:"/orders?order_id=".concat(e.id)},(0,i.default)({class:"Order__info",items:[{title:t.mobile_market_order_status,text:e.status_text},{title:t.mobile_market_order_total_price,text:e.total_price},{title:t.mobile_market_order_date,text:e.order_date},{title:t.mobile_market_order_shop,text:e.group_link}]}),{inner:o(e.items_thumbs,e.id),class:"Order__thumb"}],class:"OrderList__item"}};function o(e,t){return e.map(function(e){var n={};return e[1]&&(n={inner:"+".concat(e[1]),class:"Order__thumbOverlay",href:"/orders?order_id=".concat(t)}),{style:'background-image: url("'.concat(e[0],'")'),inner:n,class:"Order__thumbItem"}})}t.default=r},i8t0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"open",{enumerable:!0,get:function(){return a.open}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return a.go}});var a=n("h1CJ");window.CopyrightPopup={open:a.open,go:a.go}},iDzD:function(e,t,n){"use strict";function a(e){return{class:["Anchor",e.mix],id:e.id,tag:"div"}}Object.defineProperty(t,"__esModule",{value:!0}),t.Anchor=a,t.default=void 0;var i=a;t.default=i},"iE+E":function(e,t,n){"use strict";var a,i,r,o,s,l,c=(a=n("+cqQ"))&&a.__esModule?a:{default:a};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.FeedAssistanceStats=(u(i={register:Fe,forceRegister:function(e,t){e[E]=Ve(e),e[S]=t,we.push(e)},onScroll:throttle(ze,50),onStartViewElement:(0,c.default)("element"),onEndViewElement:(0,c.default)("element"),onStopTrackElement:(0,c.default)("element"),onViewedElement:(0,c.default)("element"),onBeforePageChange:$e,onPageChanged:Ye,getElementType:Ve,registerElements:Ne,registerTrackingCls:function(e){Be.push(e)},unregisterTrackingCls:Re},"unregisterTrackingCls",Re),u(i,"setParenViewableX",function(e,t){e[R]=t}),u(i,"forceProcessTrack",He),u(i,"dispatchElementEvent",function(e,t){var n=function(e){return he[e]}(vt(t[E]||Ve(t),e));Ke({type:e,data:n(t)})}),u(i,"dispatchEvent",function(e){Ke(e)}),u(i,"serializeEventData",Ue),u(i,"clearElemsCache",function(){we.forEach(function(e){e[T]=!1,e[D]=!1})}),u(i,"_debug",function(){return{started:Ee,tracking:we,events:Oe,blindTop:Se,blindBottom:Ce}}),u(i,"getFromRef",Mt),u(i,"getRoot",Pt),u(i,"BLOCKS",{}),u(i,"EVENTS",{}),i);var d=.5,f=.25,h=500,p=3e5,A=2500,m=1e4,_=6e3,v=2e4,g=3e4,y=5e3,b=36e4,w=100,E="_feedAssistanceStatsType",k="_feedAssistanceStatsIdled",S="_feedAssistanceStatsModule",C="_feedAssistanceStatsStarted",M="_feedAssistanceStatsProcessed",P="_feedAssistanceStatsEventTs",T="_feedAssistanceStatsCachedY",D="_feedAssistanceStatsCachedX",I="_feedAssistanceStatsLeft",x="_feedAssistanceStatsHeight",O="_feedAssistanceStatsWidth",B="_feedAssistanceStatsTop",L="_feedAssistanceStatsBottom",R="_feedAssistanceStatsParentViewableX",N="BLOCK_TYPE_RECOMMENDED_SLIDER",j="BLOCK_TYPE_DEFAULT",F="BLOCK_TYPE_EXPLORE_BAIT",H="BLOCK_TYPE_PROFILE_PHOTO",V="BLOCK_TYPE_PROMO_BUTTON",U="BLOCK_TYPE_IMPORT_CONTACTS",z="BLOCK_TYPE_PUSH_SWITCH",W="explore_bait",q="feed_assistance",G="hide",$="promo_button",Y="SUB_EXPLORE_BAIT",Q="view",X="like",K="comment",J="opened",Z="subscribe",ee="unsubscribe",te="open_user",ne="open_group",ae="hide",ie="report",re="seen",oe="filled",se="enable_push",le="decline_push",ce="SUB_PROMO_BUTTON",ue="clicked",de=(u(r={},N,"view_block"),u(r,V,"view_block"),u(r,F,W),u(r,H,q),u(r,U,q),u(r,z,q),r),fe=(u(o={},N,500),u(o,F,h),u(o,H,h),u(o,U,h),u(o,z,h),o),he=(u(s={},vt(N,"view_block"),function(e){var t=geByClass1("Slider__scroll",e),n=domData(t,"code");return Ue("view_block","",e,domData(t,"ref"),n)}),u(s,vt(V,"view_block"),function(e){return Ue("view_block",geByClass1("feedAssistancePromoButtonInstallApp__button",e)?"promo_install_app":"promo_button",e)}),u(s,vt(F,W),function(){return Ue(Y,Q)}),u(s,vt(H,q),function(e){return Ue(q,e,"m_ph",re)}),u(s,vt(U,q),function(e){return Ue(q,e,"m_mp",re)}),u(s,vt(z,q),function(e){return Ue(q,e,"m_push_switch",re)}),s),pe=(u(l={},"view_block",function(e,t,n,a){return n=n||Mt(t),[e,domChildIndex(t),Tt(t),n,a].join("|")}),u(l,Y,function(e){return e}),u(l,q,function(e,t,n){return[t,n,Mt(e)].join("|")}),u(l,G,function(e,t){return[e,Tt(t),domChildIndex(t),Mt(t)].join("|")}),u(l,ce,function(e,t,n){return[domChildIndex(e),t,n||""].join("|")}),l),Ae="feed_other",me="feedAssistance",_e="feedAssistanceStat.events",ve="feedAssistanceStat.idled",ye="/feed",be="assistance_stats",we=[],Ee=[],ke=Date.now(),Se=0,Ce=0,Me=!1,Pe=null,Te=null,De=null,Ie=null,xe=null,Oe=[],Be=[],Le=!1;function Re(e){wt(Be,e)}function Ne(){var e=[];each(Be,function(){e=e.concat(geByClass(this))}),each(e,function(){Fe(this,"feed")})}function je(){Ne();var e=pt();e.length&&(ut(e),At()),He(),at()}function Fe(e,t){!e[E]&&function(e){return!~we.indexOf(e)}(e)&&(e[E]=Ve(e),e[S]=t,we.push(e))}function He(){Qe(scrollGetY(),getCh())}function Ve(e){return e[E]?e[E]:hasClass("feedAssistance_recommendedFriends",e)?N:hasClass("post_exploreBait",e)?F:hasClass("feedAssistance_profilePhoto",e)?H:hasClass("feedAssistance_promoButton",e)?V:hasClass("feedAssistance_importContacts",e)?U:hasClass("feedAssistance_pushNotificationsSwitch",e)?z:j}function Ue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return pe[e].apply(pe,n)}function ze(e,t){var n,a=ze;Qe(e||scrollGetY(),t||getCh()),Me||Le?(clearTimeout(a.timer),a.timer=setTimeout(We,150),Le=!1):(Me=!0,nt(),n=ge("vk_head"),Se=n&&n.offsetHeight,Ce=0)}function We(){nt(),tt(),Me=!1}function qe(){nt(),Ct(Ee),ut(Oe.concat(_t(Ee))),kt(Ee),Oe=[],Ee=[],it()}function Ge(){Ee.forEach(function(e){e[C]=Date.now()}),dt(null),ft(null),tt(),it(),at()}function $e(){nt(),Ct(Ee),Oe=Oe.concat(_t(Ee)),kt(Ee),Ee=[],Le=!0,tt()}function Ye(){Ne(),He()}function Qe(e,t){var n=[];we.forEach(function(a){bt(a)?n.push(a):!function(e,t,n){return!e[C]&&Ze(e,d,t,n)&&et(e,d)}(a,e,t)?!function(e,t,n){return e[C]&&(!Ze(e,f,t,n)||!et(e,f))}(a,e,t)?Je(a)&&(Xe(a),FeedAssistanceStats.onViewedElement(a)):(a[k]?delete a[k]:(Xe(a),FeedAssistanceStats.onEndViewElement(a)),delete a[C]):(a[C]=Date.now(),Ee.push(a),FeedAssistanceStats.onStartViewElement(a))}),n.forEach(function(e){wt(we,e),FeedAssistanceStats.onStopTrackElement(e)})}function Xe(e){wt(Ee,e),St(e),Ke(yt(e)),Et(e)}function Ke(e){e&&Oe.push(e)}function Je(e){return!!e[C]&&Math.min(p,Date.now()-e[C])>function(e){var t=Ve(e);return fe[t]||h}(e)}function Ze(e,t,n,a){if(!e)return!1;e[T]||(e[T]=!0,e[x]=e.offsetHeight,e[B]=n+e.getBoundingClientRect().top,e[L]=e[B]+e[x]);var i=a-Se-Ce,r=n+Se,o=n+a-Ce,s=e[x],l=e[B],c=e[L];return(c>r&&l<o?Math.min(o,c)-Math.max(r,l):0)>=Math.min(i*t,s*t)}function et(e,t){var n=e[R];n&&!n[D]&&~we.indexOf(n)&&(n[D]=!0,n[O]=n.clientWidth,n[I]=n.getBoundingClientRect().left+n.clientLeft),e[D]||(e[D]=!0,e[O]=e.offsetWidth);var a=n?n[O]||n.clientWidth:getCw(),i=n?n[I]||n.getBoundingClientRect().left+0:0,r=a+i,o=e[O],s=e.getBoundingClientRect().left,l=o+s,c=o*t,u=o*Math.max(0,1-t);return s+c>=i&&l-u<=r}function tt(){Pe=setTimeout(rt,A),Te=setTimeout(ot,m),De=setTimeout(st,_),Ie=setTimeout(lt,v)}function nt(){clearTimeout(Pe),clearTimeout(Te),clearTimeout(De),clearTimeout(Ie)}function at(){xe=setInterval(ct,g)}function it(){clearInterval(xe)}function rt(){Oe.length&&dt(Oe)}function ot(){ut(Oe),Oe=[],dt(null)}function st(){Ee.length&&(ft(_t(Ee)),De=setTimeout(st,y))}function lt(){clearTimeout(De),Ct(Ee),ut(_t(Ee)),kt(Ee),Ee.forEach(function(e){e[k]=!0}),Ee=[],ft(null)}function ct(){Oe.length>=w&&ot()}function ut(e){if(e&&e.length){var t={act:be};t=extend(t,(n={},each(e,function(){n[this.type]?n[this.type].push(this.data):n[this.type]=[this.data]}),n)),ajax.post(ye,t)}var n}function dt(e){ht(_e,e)}function ft(e){ht(ve,e)}function ht(e,t){var n=lsGet(e)||{};t?n[ke]=t:delete n[ke],lsSet(e,n)}function pt(){var e=pt,t=[],n=lsGet(_e)||{},a=lsGet(ve)||{};return e.iterator||(e.iterator=function(e){return function(n){mt(n)&&(t=t.concat(e[n]))}}),Object.keys(n).forEach(e.iterator(n)),Object.keys(a).forEach(e.iterator(a)),t}function At(){var e=At,t=lsGet(_e)||{},n=lsGet(ve)||{};e.iterator||(e.iterator=function(e){return function(t){mt(t)&&delete e[t]}}),Object.keys(t).forEach(e.iterator(t)),Object.keys(n).forEach(e.iterator(n)),lsSet(_e,t),lsSet(ve,n)}function mt(e){var t=Number(e);return t!==ke&&Date.now()-t>=b}function _t(e){var t=[];return e.forEach(function(e){var n=yt(e);n&&t.push(n)}),t}function vt(e,t){return e+"_"+t}function gt(e,t){return(0,he[vt(e[E],t)])(e)}function yt(e){if(bt(e))return null;if(!Je(e))return null;var t=function(e){return de[e[E]]}(e);return{type:t,data:gt(e,t)}}function bt(e){return e[M]||!document.body.contains(e)}function wt(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function Et(e){bt(e)||Je(e)&&(e[M]=!0)}function kt(e){each(e,function(){Et(this)})}function St(e){e[P]=Date.now()}function Ct(e){e.forEach(St)}function Mt(e){return(e=Pt(e))&&domData(e,"from-ref")||Ae}function Pt(e){return hasClass(e,me)||(e=domCA(e,"."+me)),e}function Tt(e){var t=(new Date).getTime();return e&&(e[P]||e[C])||t}FeedAssistanceStats.BLOCKS={BLOCK_TYPE_RECOMMENDED_SLIDER:N,BLOCK_TYPE_EXPLORE_BAIT:F,BLOCK_TYPE_PROFILE_PHOTO:H,BLOCK_TYPE_PROMO_BUTTON:V,BLOCK_TYPE_IMPORT_CONTACTS:U},FeedAssistanceStats.EVENTS={EVENT_EXPLORE_BAIT:W,EVENT_EXPLORE_BAIT_SUB:Y,EVENT_FEED_ASSISTANCE:q,SUB_EVENT_EXPLORE_BAIT_VIEW:Q,SUB_EVENT_EXPLORE_BAIT_LIKE:X,SUB_EVENT_EXPLORE_BAIT_COMMENT:K,SUB_EVENT_EXPLORE_BAIT_OPENED:J,SUB_EVENT_EXPLORE_BAIT_SUBSCRIBE:Z,SUB_EVENT_EXPLORE_BAIT_UNSUBSCRIBE:ee,SUB_EVENT_EXPLORE_BAIT_OPEN_USER:te,SUB_EVENT_EXPLORE_BAIT_OPEN_GROUP:ne,SUB_EVENT_EXPLORE_BAIT_HIDE:ae,SUB_EVENT_EXPLORE_BAIT_REPORT:ie,SUB_EVENT_SEEN:re,SUB_EVENT_FILLED:oe,EVENT_HIDE_BLOCK:G,SUB_EVENT_ENABLE_PUSH:se,SUB_EVENT_DECLINE_PUSH:le,EVENT_PROMO_BUTTON:$,EVENT_PROMO_BUTTON_SUB:ce,SUB_EVENT_PROMO_BUTTON_CLICK:ue},addEvent(window,"blur",qe),addEvent(window,"focus",Ge),onDOMReady(function(){setTimeout(je,500)}),addEvent(window,"scroll",function(){ze(scrollGetY(),getCh())}),nav.onBeforeGo(function(){return $e()}),page.onChange(function(){return Ye()})},iGfS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("QQoL"))&&a.__esModule?a:{default:a};var r=function(){var e=window.store,t="/feed?section=notifications";return(0,i.default)({url:t,count:e.notificationsCount,onclick:["nav.onMenuItemClick",t]})};t.default=r},iHpm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("OcsD");var a={class:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_",a=[e];return Object.keys(t).forEach(function(r){if(i(r)){var o=t[r];!0===o?a.push("".concat(e).concat(n).concat(r)):i(o)&&a.push("".concat(e).concat(n).concat(r).concat(n).concat(o))}}),a.join(" ")},setMod:function(e,t,n){var a,r=new RegExp("\\s*".concat(t,"(_[-a-zA-Z]+)?"));a=!0===n?" ".concat(t):i(n)?" ".concat(t,"_").concat(n):"";r.test(e.className)?e.className=e.className.replace(r,a):e.className+=a}};function i(e){return"number"==typeof e||"string"==typeof e&&e}t.default=a},iN5q:function(e,t,n){"use strict";n("RkGL"),n("21le"),n("4rnG")},iS9e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("rUE2"))&&a.__esModule?a:{default:a};n("pYST");var r=i.default;t.default=r,window.MailDialog=i.default},iUjD:function(e,t,n){"use strict";var a=n("UxAg"),i=l(n("bZ/P")),r=l(n("+cqQ")),o=l(n("gy8s")),s=n("k9Tg");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){(0,a.$$)(".mailHat").forEach(function(t){var n=i.default.parseClass("mailHat",t.getAttribute("class"));t.setAttribute("class",i.default.class("mailHat",Object.assign({},n,e)))})}Object.assign(s.MailHat_main,{onUnreadClick:(0,r.default)(),onBurgerClick:(0,r.default)(),onCancelForwardTap:(0,r.default)(),setFolder:function(e){(0,a.$$)(".mailHat__folder").forEach(function(t){o.default.setActive(t,e)})},setUnreadCount:function(e){(0,a.$$)(".mailHat_type_main").forEach(function(t){var n=t.$(".mailHat__unread"),a=t.$(".mailHat__unreadCount");n.classList.toggle("mailHat__unread_hasUnread",e>0),a.outerHTML=(0,s.MailHat__unreadCount)(e)})},setImportantCount:function(e){(0,a.$$)(".mailHat__folder").forEach(function(t){o.default.setCount(t,"important",e)})},setForwarding:function(e){(0,a.$$)(".mailHat_type_main").forEach(function(t){return t.classList.toggle("mailHat_forwarding",e)})},setModifiers:c}),Object.assign(s.MailHat_convo,{onBackTap:(0,r.default)(),onCancelEditingTap:(0,r.default)(),setOnline:function(e,t){var n=(0,s.MailHat_getOnlineText)(e,t);(0,a.$$)(".mailHat__convoDetailsText").forEach(function(e){return e.innerText=n})},setMobile:function(e){(0,a.$$)(".mailHat__convo").forEach(function(t){return t.classList.toggle("mailHat__convo_mobile",e)})},setHasPinnedMsg:function(e){(0,a.$$)(".mailHat_type_convo").forEach(function(t){return t.classList.toggle("mailHat_hasPinnedMsg",e)})},setModifiers:c})},irqS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Messenger",{enumerable:!0,get:function(){return a.Messenger}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("lQx8"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("Zoa4"),n("FLY7");var r=a.default;t.default=r,window.uMessenger=a.default,window.Messenger=a.Messenger},"is+u":function(e,t,n){"use strict";var a=need("Voting");function i(e){o(e.$voting,e.url)}function r(e,t){o(t.$voting,e,!0)}function o(e,t,n){var i=setTimeout(function(){a.setLoading(e)},140);ajax.post(t,{_ajax:1},{onDone:function(t,r){domData(e,"is-web-view")&&a._onPollChanged&&a._onPollChanged(e,n),clearTimeout(i),a.setHtml(t,r)}})}window.uVoting={},uVoting._onSubmit=i,uVoting._onRevoteClick=r},izth:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDocumentDomain=function(){var e=(document.domain||"").match(/(m\.)?([a-zA-Z]+\.[a-zA-Z]+\.?)$/);window.locDomain="https:"===location.protocol?e[2]:e[0];var t=navigator.userAgent.toLowerCase();!/opera/i.test(t)&&/msie 6/i.test(t)&&document.domain===window.locDomain||(document.domain=window.locDomain)}},j3An:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyle=function(e){return new Promise(function(t,n){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=e,a.onload=function(){return t(a)},a.onerror=function(){return n(new Error("Stylesheet load error for ".concat(e)))},document.head.appendChild(a)})},t.loadScript=function(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){return t(null,n)},n.onerror=function(){return t(new Error("Script load error for ".concat(e)))},document.head.appendChild(n)},t.addStyleSheetOldBrowser=function(e){var t=(n=e,new Promise(function(e,t){var a=new XMLHttpRequest;a.open("GET",n),a.onload=function(){200===a.status?e(a.response):t(a.response)},a.onerror=function(){t(a.response)},a.send()}));var n;return t.then(function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}),t},t.supportsOnload=function(){if(void 0!==a)return a;try{var e=document.createElement("b");e.style.display="flex",a="flex"===e.style.display}catch(e){a=!1}return a}},j80l:function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.makeUrl=r,t.parseURL=function(e){var t=window.ce("a",{href:e}),n=o.reduce(function(e,n){return e[n]=t[n],e},{});return n.requestUri="".concat(n.pathname).concat(n.search),n},t.default=void 0;var i=window.Url={make:r};function r(e,t){var n=need("nav");if(!t)return e;var i=a(e.split("?"),2),r=i[0],o=i[1],s={},l=[];return o&&o.split("&").map(function(e){var n=a(e.split("="),2),i=n[0],r=n[1];i in t||(t[i]=r)}),Object.keys(t).forEach(function(e){var a,i=t[e];!0===i&&(i=n.getQuery(e)),("string"==typeof(a=i)&&a||function(e){return"number"==typeof e&&!isNaN(e)}(i))&&(s[e]=i)}),Object.keys(s).forEach(function(e){l.push("".concat(e,"=").concat(encodeURIComponent(s[e])))}),0===l.length?r:"".concat(r,"?").concat(l.join("&"))}t.default=i;var o=["protocol","hostname","host","pathname","port","search","hash","href"]},jE2t:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNetworkType=function(){if(!1===navigator.onLine)return"none";var e=navigator.connection||navigator.webkitConnection||navigator.mozConnection;if(!e)return"unknown";if(e.effectiveType)return e.effectiveType;var t=+(e.downlinkMax||e.downlink);if(t)return t<50?"slow-2g":t<70?"2g":t<700?"3g":"4g";return a[e.type]||"unknown"};var a={bluetooth:"2g",cellular:"2g",ethernet:"4g",mixed:"unknown",none:"none",other:"unknown",unknown:"unknown",wifi:"3g",wimax:"4g"}},jIm5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n("29dZ")),i=c(n("vpQl")),r=c(n("JAxc")),o=c(n("RVNN")),s=c(n("4JX2")),l=n("fdw3");function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=!e.is_orders_enabled&&e.contact_cell,n=[(0,i.default)(e.price_cell),e.variants?(0,s.default)(e.variants):null,e.is_orders_enabled?{class:"MarketItem__addButtonWrapper",inner:(0,r.default)({quantity:e.initial_quantity,item_id:e.item_id,group_id:e.group_id,hash:e.hash})}:null,{inner:[(0,i.default)(e.author_cell),(0,i.default)(e.wiki_cell)]},e.is_my_mall?(0,o.default)():null,{inner:[{inner:Wd.wrap(e.description),class:"MarketItem__description"},{inner:Wd.wrap(e.stats),class:"MarketItem__stats"}]},t?(0,a.default)(e.contact_cell):null,Wd.wrap(e.likes_shares),Wd.wrap(e.likes)];return Wd.html({class:"pcont",inner:{class:"PageBlock MarketItem",inner:[{inner:e.message},{class:"MarketItem__photoView photo_view",inner:[{class:"pv_body ".concat(e.photo_wrap_class),inner:[Wd.wrap(e.photo),Wd.wrap(e.nav)]},{class:"Biatlon",id:"market_biatlon"}]},{id:"market".concat(e.item_raw),class:"MarketItem__content",inner:(0,l.insertBetween)(n,{class:"MarketItem__delimiter"})},{class:"comments_wrap bl_cont",inner:Wd.wrap(e.comments)}]}})};t.default=u},jLRy:function(e,t,n){"use strict";var a=n("UxAg"),i=need("nav");window.PinnedMsg={onHideClick:befall(),getByMsgId:function(e){return(0,a.$)(r.pinnedMsg(e))}};var r={pinnedMsg:function(e){return'.pinnedMsg[data-msg-id="'.concat(e,'"]')}};function o(e,t){i.go(t,e)}PinnedMsg._onClick=o,PinnedMsg._onHideClick=PinnedMsg.onHideClick},jMiB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("fw35"))&&a.__esModule?a:{default:a};window.OfflinePage=i.default;var r=i.default;t.default=r},jXv2:function(e,t,n){"use strict";var a=d(n("pOpT")),i=d(n("T9Df")),r=d(n("HON1")),o=d(n("TYsd")),s=n("V4qE"),l=n("OcsD"),c=n("UxAg"),u=n("J8bf");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var A=window.Popup,m=window.ActionMenu,_=window.attr,v=window.val,g=window.ajax,y=window.replace,b=window.scrollTop,w=window.ceFromString,E=window.Btn;window.Bookmarks={hideTagsList:x,showTagsList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&e.stopPropagation();var n=T(k.tagsListPopup),i=j();if(n.classList.remove("BookmarksPopup__hideCorner"),t){var r=t.closest(k.bookmarkItem),s=F(_(r,"id"));i=i.filter(function(e){return s.includes(e.id)}),n.classList.add("BookmarksPopup__hideCorner")}var u=(0,l.qs2obj)(nav.params),d=Object.keys(i).reduce(function(e,t){var n=i[t];return e.push((0,a.default)({tag:n,current_id:parseInt(u.tag)})),e},[]),f=o.default.html(d);v(n.$(".Popup__scrollContent"),f);var h=(0,c.$$)(k.tagsListLinks,n);h&&h.forEach(function(e){addEvent(e,"click",x)});return!1},hideDeletePopup:O,showDeletePopup:function(e){var t=T(k.tagsDeletePopup),n=_(e,"data-id"),a=_(e,"data-hash"),i=_(e,"data-name");return V(t,{id:n,hash:a}),v(t.$("[".concat(S.deleteName,"]")),(0,l.htsc)(i)),!1},submitDeleteTag:function(){var e=U(Array.from((0,c.$$)(k.tagsDeletePopup)).pop()),t=e.id,n=e.hash;g.post("/bookmarks",{_ajax:1,act:"tag_delete",id:t,hash:n},{onDone:function(e){P(e),O()}})},hideCreatePopup:B,showCreatePopup:function(e){var t=T(k.tagsCreatePopup),n=_(e,"data-hash");V(t,{hash:n});var a=(0,c.$)("[name=".concat(S.createName,"]"),t),i=(0,c.$)(k.tagsSubmitButton,t),r=v(a).trim();return E.setDisabled(i,!r),!1},submitCreateTag:function(){var e=Array.from((0,c.$$)(k.tagsCreatePopup)).pop(),t=Array.from((0,c.$$)(k.tagsSettings)).pop(),n=U(e).hash,a=v(e.$("[name=".concat(S.createName,"]"))),i=+!!(0,c.$)(k.tagsSettings);g.post("/bookmarks",{_ajax:1,act:"tag_edit",tag:a,hash:n,id:0,from_settings:i},{onDone:function(e,n){if(i){var a=[];Array.from(t.$$('[name="tag"][type="checkbox"]:checked')||[]).forEach(function(e){a.push(e.value)}),v(t,e),a.forEach(function(e){var n=t.$('[name="tag"][type="checkbox"][value="'.concat(e,'"]'));n&&(n.checked=!0)})}else P(e);!function(e){var t=N(),n=h(e,2),a=n[0],i=n[1];t&&t.tags&&(t.tags[a]={id:a,name:i,order:0})}(n),B()}})},hideEditPopup:L,showEditPopup:function(e){var t=T(k.tagsEditPopup),n=_(e,"data-id"),a=_(e,"data-hash"),i=_(e,"data-name")||"",r=t.$("[name=".concat(S.editName,"]"));v(r,i),V(t,{id:n,hash:a,name:i});var o=Array.from((0,c.$$)(k.tagsSubmitButton,t)).pop(),s=v(r).trim();return E.setDisabled(o,!s),!1},submitEditTag:function(){var e=Array.from((0,c.$$)(k.tagsEditPopup)).pop(),t=U(e),n=t.id,a=t.hash,i=v(e.$("[name=".concat(S.editName,"]")));g.post("/bookmarks",{_ajax:1,act:"tag_edit",tag:i,hash:a,id:n},{onDone:function(e){P(e),L()}})},hideSettingsPopup:R,showSettingsPopup:function(e){var t,n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=_(e,"data-item_id"),s=_(e,"data-item_oid"),l=_(e,"data-item_type"),c=_(e,"data-hash"),u=_(e,"data-raw");i.wrap||(t=T(k.tagsSettingsPopup),n=t.$(k.tagsSettings),a=F(u),v(n,o.default.html({class:"Bookmarks__tagsSettingsLoading"})),V(t,{id:r,oid:s,type:l,hash:c,itemRaw:u}));return g.post("/bookmarks",{_ajax:1,act:"tag_settings",hash:c,item_id:r,item_oid:s,item_type:l,wrap:i.wrap?1:0},{onDone:function(e){if(i.wrap){var o=w(e);V(o=T(o),{id:r,oid:s,type:l,hash:c,itemRaw:u,needRemove:!0,is_from_snackbar:i.is_from_snackbar})}else v(n,e),a.forEach(function(e){var n=t.$('[name="tag"][type="checkbox"][value="'.concat(e,'"]'));n&&(n.checked=!0)})}}),!1},submitSettingsTags:function(){var e=Array.from((0,c.$$)(k.tagsSettingsPopup)).pop(),t=U(e),n=t.id,a=t.oid,r=t.type,s=t.hash,l=t.itemRaw,u=t.is_from_snackbar,d=[];Array.from(e.$$('[name="tag"][type="checkbox"]:checked')||[]).forEach(function(e){d.push(e.value)});var f=d.join(",");g.post("/bookmarks",{_ajax:1,act:"tag_set",hash:s,item_id:n,item_oid:a,item_type:r,tag_ids:f,is_from_snackbar:u},{onDone:function(e){R();var t=(0,c.$)("#".concat(l));if(t){var n=(0,c.$)(".BookmarkListItem__tags, .BookmarksItem__tag",t);if(n)v(n,e);else if(n=(0,c.$)(".Owner__tags",t)){var a=j(),r=d.map(function(e){return parseInt(e,10)}),s=a.filter(function(e){return r.includes(e.id)}),u=o.default.html((0,i.default)({tags:s}));v(n.parentNode,u)}q(l,d,""),cur&&cur.search_bookmarks&&cur.search_bookmarks.redraw()}}})},closeAll:function(){x(),O(),B(),L(),R()},initStore:H,pushItemsToStore:function(e){var t=N();t&&(t.items=p({},t.items,e))},pushItemToStore:q,removeFromBookmarkLink:function(e){var t=_(e,"data-item_id"),n=_(e,"data-item_oid"),a=_(e,"data-item_type"),i=_(e,"data-hash"),r=_(e,"data-raw"),o=_(e,"data-link_url"),s=_(e,"data-link_title"),l=_(e,"data-link_img"),u=(0,c.$)("#".concat(r));return m.closeMenu(),addClass(u,C.removed),g.post("/bookmarks",{_ajax:1,act:"bookmark_remove",hash:i,item_id:t,item_oid:n,item_type:a,link_url:o,link_title:s,link_img:l},{onDone:function(e){W(r,[C.removed]),Share.setBookmarkState(r,!1),cur&&cur.search_bookmarks&&cur.search_bookmarks.redraw()}}),!1},addToBookmarkLink:function(e){var t=_(e,"data-item_id"),n=_(e,"data-item_oid"),a=_(e,"data-item_type"),i=_(e,"data-hash"),r=_(e,"data-raw"),o=_(e,"data-link_url"),s=_(e,"data-link_title"),l=_(e,"data-link_img"),u=(0,c.$)("#".concat(r));return m.closeMenu(),removeClass(u,C.removed),g.post("/bookmarks",{_ajax:1,act:"bookmark_add",hash:i,item_id:t,item_oid:n,item_type:a,link_url:o,link_title:s,link_img:l},{onDone:function(){var e=z(r),t=e.indexOf(C.removed);-1!==t&&e.splice(t,1),W(r,e),Share.setBookmarkState(r,!0),cur&&cur.search_bookmarks&&cur.search_bookmarks.redraw()}}),!1},showSuccessSnack:function(e){var t,n=window.lang,a=(0,l.geByClass1)("RepliesField_fixed");a&&(t=(0,l.getH)(a)+5);Snackbar.init({type:s.SNACKBAR_TYPE_BOOKMARK,text:n.mobile_bookmarks_snackbar_added,bottom:t,action:{url:"/bookmarks",text:n.mobile_bookmarks_snackbar_edit_tags,onclick:"return Bookmarks.showSettingsPopup(this, { wrap: true, is_from_snackbar: 1 });",attrs:Object.keys(e).reduce(function(t,n){return t["data-".concat(n)]=e[n],t},{})}})},keyupCreateInput:function(e,t){var n=gpeByClass("BookmarksPopup",t),a=(0,c.$)(k.tagsSubmitButton,n),i=v(t).trim();E.setDisabled(a,!i)},openSavedTab:function(e,t){var n=(0,c.$)(".mm_counter",t),a=(0,u.getCookie)(M.lastTab);a&&!n&&(e&&e.preventDefault(),nav.go("/bookmarks?type=".concat(a)))},openLikesFeed:function(e){var t=(0,c.$)(".mm_new",e);(0,l.remove)(t)},getStoreItemDataById:G,getTagsByItemId:$,renderSearchItem:function(e,t,n,a,s){var l="";if(!a||isEmpty(a))l=n;else{var c=$(e),u=z(e);a=JSON.parse(a),c&&(t=c.reduce(function(e,t){return[].concat(f(e),[t.id])},[]),a.subtitle=(0,i.default)({tags:c})),u&&(a.mix=f(u)),a.title=o.default.wrap(s.highlight(a.title)),l=o.default.html((0,r.default)(a))}return q(e,t,n),l}};var k={tagsListPopup:".BookmarksPopup__filter",tagsDeletePopup:".BookmarksPopup__delete",tagsCreatePopup:".BookmarksPopup__create",tagsEditPopup:".BookmarksPopup__edit",tagsSettingsPopup:".BookmarksPopup__settings",tagsSettings:".Bookmarks__tagsSettings",tagsListContainer:".BookmarkListItem__tags",tagsListLinks:".Bookmarks__tagsSelectItem",tagsListWrap:".BookmarksTags",tagsListItem:".BookmarksTags__item",tagsListItemMore:".BookmarksTags__item_more",tagsContainer:".basisDefault",tagsSubmitButton:".BookmarksPopup__buttonSubmit",bookmarkItem:".BookmarksItem"},S={deleteName:"data-deletetagname",createName:"createtagname",editName:"edittagname"},C={removed:"BookmarksItem_removed"},M={lastTab:"remixblt"};function P(e){var t=b(),n=(0,c.$)(k.tagsContainer),a=w(e);y(a,n),b(t)}function T(e){var t;m.closeMenu(),t="string"==typeof e?(0,c.$)(e):e,t=A.open(t,!0);var n="popup"+Date.now();return _(t,"data-popupid",n),t}function D(e){return _(e,"data-popupid")}function I(e){var t;if(t=!("string"==typeof e)?e:Array.from((0,c.$$)(e)).pop()){A.close(t);var n=U(t),a=n&&n.needRemove;!function(e){var t=D(e);delete N().popup[t]}(t),a&&(0,l.remove)(t)}return!1}function x(){var e=Array.from((0,c.$$)(k.tagsListPopup)).pop(),t=(0,c.$$)(k.tagsListLinks,e);return t&&t.forEach(function(e){removeEvent(e,"click",x)}),I(e)}function O(){return I(k.tagsDeletePopup)}function B(){var e=Array.from((0,c.$$)(k.tagsCreatePopup)).pop();if(e){var t=e.$("[name=".concat(S.createName,"]"));v(t,"")}return I(k.tagsCreatePopup)}function L(){var e=Array.from((0,c.$$)(k.tagsEditPopup)).pop();if(e){var t=e.$("[name=".concat(S.editName,"]"));v(t,"")}return I(k.tagsEditPopup)}function R(){return I(k.tagsSettingsPopup)}function N(){return window.store.bookmarks||H(),window.store.bookmarks}function j(){var e=N();return e.tags?e.tags:{}}function F(e){var t=N();return t.items[e]?t.items[e][3]:[]}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.store.bookmarks=p({},e,{popup:{}})}function V(e,t){var n=D(e);N().popup[n]=t}function U(e){var t=D(e);return N().popup[t]}function z(e){var t=N();return t&&t.items&&t.items[e]&&t.items[e][5]}function W(e,t){var n=N();n&&n.items&&n.items[e]&&(n.items[e][5]?n.items[e][5]=[].concat(f(n.items[e][5]),f(t)):n.items[e][5]=f(t))}function q(e,t,n,a){var i=N();i&&i.items&&(t=t.map(function(e){return parseInt(e,10)}),i.items[e]?(i.items[e][3]=t,i.items[e][4]=a):i.items[e]=["",n,e,t,a])}function G(e){var t=N();return t&&t.items&&t.items[e]}function $(e){var t=G(e),n=j();if(t&&n){var a=t[3]||[];return n.filter(function(e){return a.includes(e.id)})}return!1}},jZPa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("z9sQ"))&&a.__esModule?a:{default:a};var r=function(e){var t=e.img?e.img:"",n=!!e.url&&e.url,a=e.title?e.title:"",r=e.subtitle?e.subtitle:"",o=e.verified?e.verified:"",s=e.mix?e.mix:"",l=e.online?e.online:"",c=!!e.actions&&e.actions,u=!!e.attrs&&e.attrs,d=!!e.linkAttrs&&e.linkAttrs;return{attrs:u,class:[i.default.class("OwnerRow",{actions:!!c}),s],inner:[{class:"OwnerRow__content al_artist",href:n,attrs:d,inner:[{class:"OwnerRow__left",inner:{style:t?"background-image: url('".concat(t,"')"):null,class:"OwnerRow__img",inner:l?{class:i.default.class("OwnerRow__online",l)}:null}},{class:"OwnerRow__right",inner:[{class:i.default.class("OwnerRow__header",{verified:o}),inner:[{class:"OwnerRow__title",inner:a},o?{class:"OwnerRow__verified"}:null]},{class:"OwnerRow__subtitle",inner:r}]}]},c?{class:"OwnerRow__actions",inner:c}:null]}};t.default=r},k9Tg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MailHat=v,t.MailHat__Title=function(e){return a.default.html(d(),e.title)},t.MailHat__icon=b,t.MailHat_main=function(e){var t=(0,i.default)({mix:"mailHat__burger",icon:"burger",attrs:a.default.onClick("MailHat_main.onBurgerClick")}),n=function(e,t,n,a){var i=window.lang;return(0,r.default)({mix:"mailHat__folder",items:[{name:"all",text:i.mobile_mail_tab_all,active:"all"===e,url:t.all},n?{name:"unrespond",text:i.mobile_mail_tab_unrespond,active:"unrespond"===e,url:t.unrespond}:"",{name:"unread",text:i.mobile_mail_tab_unread,active:"unread"===e,url:t.unread},{name:"important",text:i.mobile_mail_tab_important,active:"important"===e,count:a,url:t.important}]})}(e.folder,e.urls,e.withUnrespond,e.importantCount),o=(m=e.unreadCount,_=a.default.class("mailHat__unread",{hasUnread:m>0}),y=(0,i.default)({mix:"mailHat__unreadIcon",icon:"msg"}),b=g(m),w=a.default.onClick("MailHat_main.onUnreadClick"),a.default.html(A(),_,w,y,b)),l=(0,i.default)({mix:"mailHat__cancelForward",icon:"back",attrs:a.default.onMouseDown("MailHat_main.onCancelForwardTap")}),c=function(){var e=window.lang;return a.default.html(h(),e.mobile_mail_choose_recipient)}(),u=(0,i.default)({mix:"mailFilter__create",icon:"pencil",url:e.urls.createChatUrl}),d=(0,s.isNewNavigation)(),f=d?"".concat(l):"".concat(t).concat(l),p=d?"".concat(u):"".concat(e.notifier).concat(o);var m,_,y,b,w;return v({type:"main",left:f,center:"".concat(n).concat(c),right:p,forwarding:e.forwarding})},t.MailHat_convo=function(e){var t=y(),n=(0,i.default)({mix:"mailHat__cancelEditing",icon:"close",attrs:a.default.onMouseDown("MailHat_convo.onCancelEditingTap")}),s=function(e){var t=a.default.class("mailHat__convo",{mobile:e.mobile}),n=(0,o.default)({mix:"mailHat__convoAvatar",photos:e.photos,size:36}),i=w(e);return a.default.html(u(),t,e.url,n,e.title,i)}(e),l=function(){var e=window.lang;return a.default.html(f(),e.mobile_mail_message_editing)}();return v({type:"convo",left:"".concat(t).concat(n),center:"".concat(s).concat(l),right:(c=e.actions,(0,r.default)({mix:"mailHat__actions",icon:"dots",position:"topRight",items:c})),hasPinnedMsg:e.hasPinnedMsg,editing:e.editing});var c},t.MailHat_page=function(e){var t=y();return v({type:"page",left:"".concat(t),center:"",right:"",hasPinnedMsg:!1,editing:!1})},t.MailHat_getOnlineText=E,t.MailHat__convoDetails=w,t.MailHat__unreadCount=g;var a=l(n("bZ/P")),i=l(n("9y81")),r=l(n("gy8s")),o=l(n("KMpi")),s=n("fdw3");function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=_(['\n    <div class="mailHat__convoDetails">\n      <div class="mailHat__convoDetailsText">',"</div>\n      ","\n    </div>\n  "]);return c=function(){return e},e}function u(){var e=_(['\n    <a class="','" href="','">\n      ','\n      <div class="mailHat__convoBody">\n        <div class="mailHat__convoTitle">',"</div>\n        ","\n      </div>\n    </a>\n  "]);return u=function(){return e},e}function d(){var e=_(['\n    <div class="mailHat__title">\n      ',"\n    </div>\n  "]);return d=function(){return e},e}function f(){var e=_(['\n    <div class="mailHat__editingTitle">\n      ',"\n    </div>\n  "]);return f=function(){return e},e}function h(){var e=_(['\n    <div class="mailHat__forwardTitle">\n      ',"\n    </div>\n  "]);return h=function(){return e},e}function p(){var e=_(['\n    <div class="mailHat__unreadCount mailHat__unreadCount_length_','">\n      ',"\n    </div>\n  "]);return p=function(){return e},e}function A(){var e=_(['\n    <div class="','" ',">\n      ","\n      ","\n    </div>\n  "]);return A=function(){return e},e}function m(){var e=_(['\n    <div class="mailHat '," "," "," ",'">\n      <div class="mailHat__left">','</div>\n      <div class="mailHat__center">','</div>\n      <div class="mailHat__right">',"</div>\n    </div>\n  "]);return m=function(){return e},e}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){var t=e.forwarding?"mailHat_forwarding":"",n=e.hasPinnedMsg?"mailHat_hasPinnedMsg":"",i="mailHat_type_".concat(e.type),r=e.editing?"mailHat_editing":"";return a.default.html(m(),i,t,n,r,e.left,e.center,e.right)}function g(e){var t;return e>999?(e="999+",t=4):t=e>99?3:e>9?2:1,a.default.html(p(),t,e)}function y(){return b({mix:"mailHat__back",icon:"back",attrs:a.default.onMouseDown("MailHat_convo.onBackTap")})}function b(e){return(0,i.default)({mix:a.default.class("mailHat__icon",e.mix),icon:e.icon,attrs:e.attrs,url:e.url})}function w(e){var t=window.lang,n=e.membersCount,r="",o="";if(n>0)o=e.isChannel?langNumeric(n,t.mobile_mail_channel_N_members):langNumeric(n,t.mobile_mail_N_members);else{var s=e.onlinePlatform;o=E(e.isOnline,e.offlineText),"mobile"===s&&(r=(0,i.default)({mix:a.default.class("mailHat__onlineIcon",{platform:"mobile"}),icon:"phoneMini"}))}return a.default.html(c(),o,r)}function E(e,t){var n=window.lang;return e?n.mobile_mail_online:t}},k9Tn:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=window,o=r.intval,s=r.domData,l=r.isEmpty,c=r.isArray,u=r.setStyle,d=r.ce,f=[],h=!1,p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(h=n.mobile||n.isWebView,t&&e.ads&&!l(e.ads)&&!(e.has_more||c(e.ads)&&0==e.ads.length)){var a=d("ins");addClass(a,"mrg-tag"),addClass(a,"article_adsblock"),n.mobile&&addClass(a,"article_adsblock_mobile"),u(a,{display:"block","text-decoration":"none"});var i="";for(var r in n.deviceInfo)n.deviceInfo.hasOwnProperty(r)&&(i+="&"+r+"="+n.deviceInfo[r]);for(var o in e.ads.data["ad-query"]=e.ads.data["ad-query"].replace("%device_info%",i),e.ads.data)e.ads.data.hasOwnProperty(o)&&s(a,o,"".concat(e.ads.data[o]));t.appendChild(a),window.MRGtag||(window.MRGtag=[]);var f=n.isWebView?{iframeMode:!0}:{},p=e.ads.eventsHash;if(A(e,n,"requested",p),f.onNoAds=function(){A(e,n,"no_ads",p)},f.onAdsLoaded=function(){A(e,n,"ads_loaded",p)},f.onAdsClosed=function(){A(e,n,"ads_closed",p)},f.onAdsSuccess=function(){A(e,n,"ads_success",p)},f.onAdsClicked=function(){A(e,n,"ads_clicked",p)},f.onScriptError=function(){A(e,n,"script_error",p)},window.MRGtagOnAdsImpression=function(){A(e,n,"ads_impression",p)},window.MRGtag.push(f),!window.mailRuSdsScriptLoaded){var m=document.createElement("script");m.setAttribute("src",e.ads.script),m.setAttribute("async","true"),document.head.appendChild(m),window.mailRuSdsScriptLoaded=!0}}}},{key:"wasShown",value:function(){return!1}}],(n=null)&&a(t.prototype,n),i&&a(t,i),e}();function A(e,t,n,a){f.push("".concat(n,"/").concat(e.owner_id,"_").concat(e.id,"/").concat(a)),clearTimeout(i),i=setTimeout(function(){var e=h?"article.php":"al_articles.php";ajax.post(e,{act:"ads_event",events:f.join(","),is_web_view:o(t.isWebView)}),f=[]},200)}t.default=p},kYGI:function(e,t,n){"use strict";var a={tt:!1,handlers:[],show:function(){a.shown||(a.tt=Array.prototype.slice.call(arguments))},hide:function(){a.tt&&(a.tt=!1)},addHandler:function(e){e&&a.handlers.push(e)},removeHandler:function(e){e?each(a.handlers,function(t){if(e===this)return a.handlers.splice(t,1),!1}):a.handlers=[]},onClose:function(){each(a.handlers,function(){this()})},clear:function(){a.tt&&(a.hide(),a.onClose(),a.removeHandler())},closeByTap:function(e){if(!a.tt||!e.target)return!1;var t=e.target;do{for(var n=0;n<a.tt.length;n++)if(t===a.tt[n])return!1}while(t=t.parentNode);return a.hide(),a.onClose(),!0}};window.tooltip=a},kr3z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("UxAg"),i=p(n("+cqQ")),r=p(n("jk6M")),o=n("OcsD"),s=n("j80l"),l=n("eGQV"),c=n("tgcV"),u=n("cGUQ"),d=n("izth"),f=p(n("Cbap")),h=p(n("wZhO"));function p(e){return e&&e.__esModule?e:{default:e}}var A={onBeforeRedirect:(0,i.default)("url"),onBeforePageParse:(0,i.default)(),onRedirect:(0,o.se)(),_tStart:!1,_tAlStart:!1,RESPONSE_CAPTCHA:2,_init:function(){try{new XMLHttpRequest&&(A._req=function(){return new XMLHttpRequest})}catch(t){var e=window.ActiveXObject;try{new e("Msxml2.XMLHTTP")&&(A._req=function(){return new e("Msxml2.XMLHTTP")})}catch(t){try{new e("Microsoft.XMLHTTP")&&(A._req=function(){return new e("Microsoft.XMLHTTP")})}catch(e){A._req=!1}}}},_getreq:function(){return A._req||A._init(),A._req()},_al_reqs:[],_last_req:null,save_req:function(e){A._al_reqs.push(e||A._last_req)},abort_reqs:function(){(0,o.each)(A._al_reqs,function(e,t){t.readyState<4&&t.abort()}),A._al_reqs=[]},_failed_relogin:!1,_failed_reqs:[],save_failed_req:function(e,t,n,a){A._failed_reqs.push([e,t,n,a])},repeat_reqs:function(){(0,o.each)(A._failed_reqs,function(){var e=this.shift();A._post.apply(null,this),(0,o.remove)(e)}),A._failed_reqs=[]},plainpost:function(e,t,n,a,i,r,o,s){var c=A._last_req=A._getreq(),d="string"!=typeof t?(0,u.toQueryString)(t,!0):t;c.onreadystatechange=function(){4==c.readyState&&(c.status>=200&&c.status<300?n&&n(c.responseText,c):a&&a(c.responseText,c))};try{c.open("POST",e,!0)}catch(e){return!1}return c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i||s||c.setRequestHeader("X-Requested-With","XMLHttpRequest"),s||((0,l.isStandalone)()&&c.setRequestHeader("X-View-Mode","pwa"),r&&r.headers&&Object.keys(r.headers).forEach(function(e){try{c.setRequestHeader(e,r.headers[e])}catch(e){}})),c.send(d),c},post:function(e,t,n){return"/"!=e.substr(0,1)&&(e="/"+e),e=e.split("#")[0],A._post(e,t,n||{})},onPrepared:(0,o.se)(),prepare_click:function(e){var t=window.al;if(r.default.ios&&!(r.default.ios>=7)&&window.al&&t.ver){var n=[],a=!1;e&&"a"==(e.tagName||"").toLowerCase()?n.push(e):(0,o.isArray)(e)?n=e:(n=(0,o.geByTag)("a",e),a=!0);for(var i=0,s=n.length;i<s;i++){var l=n[i],c=l&&l.target||"";if(l&&l.getAttribute&&(!a||!l.getAttribute("data-href")&&(0,o.checkElementNav)(l,{skip_onclick:!0})&&"_blank"!=c)){var u=l.getAttribute("href");if(null==u||!(0,o.isHttpHref)(u))continue;(0,o.attr)(l,"data-href",(0,o.getHref)(l)),(0,o.attr)(l,"href",!1)}}}},click:function(e,t,n){var a=window.nav;t=t||{};var i,r=!1,s={_ajax:1},l=(0,o.extend)(t,{link:e});if(n=n||{},t.onStart){var c=A.tAlGetParam();A.tAlStart=(new Date).getTime(),c&&(s._talstat=c)}if(n.use_cache){var u=(0,o.ge)(!0===n.use_cache?"preload_data":n.use_cache),d=u.innerHTML.replace(/(^<!--|-->$)/g,""),f=d.split("--\x3e\x3c!--");if(d)u.innerHTML="",t.onStart&&t.onStart.apply(l),n.nav&&a.go(r,null,{push_only:!0}),t.onDone&&t.onDone.apply(l,f),(e=(0,o.geByClass1)("show_more",(0,o.geByClass1)("pcont","mcont")))&&A.click(e,{onDone:function(){var e="";(0,o.each)(arguments,function(t,n){e+="\x3c!--"+(n||"")+"--\x3e"}),u.innerHTML=e,(0,o.ge)("show_more_loading")&&A.click(!1,t,n)}});else t.onStart&&t.onStart.apply(l),n.nav&&a.go(r,null,{push_only:!0});return!1}if(!e)return!0;if(e.form){if(e.disabled)return!0;var h=e.form,p={};r=(h.action||"").replace(/^https?:\/\/[^\/]+/i,""),(0,o.each)(h,function(t,n){return!(n.name&&!n.disabled)||("radio"===n.type&&!n.checked||("checkbox"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==e||("image"===n.type&&n!==e||void(p[n.name]=n.value))))))}),"image"==e.type&&(p[e.name]=e.value,p[e.name+".x"]=1,p[e.name+".y"]=1),h.method&&"get"!=h.method?(0,o.extend)(s,p):r=r.split("?",1).shift()+(0,o.obj2qs)(p)}else e.getAttribute&&(r=e.getAttribute("data-href")||e.getAttribute("href"));if(r||(r=e.pathname?e.pathname+e.search+e.hash:e),!r)return!0;(0,o.extend)(s,n.url_params||{});var m=window.pStats,_=m.getSeenData();if(_){var v=window.cur;s._pstat=_.data,v&&v.module&&(s._pstatref=v.module)}return(i=A.post(r,s,{onDone:function(){_&&m.onSend(_.seen),n.lock&&(0,o.unlockButton)(e),t.onDone&&t.onDone.apply(l,arguments),(n.nav||n.scroll)&&(0,o.scrollToHash)()},onFail:function(){n.lock&&(0,o.unlockButton)(e),t.onFail&&t.onFail.apply(l,arguments),(n.nav||n.scroll)&&(0,o.scrollToHash)()}}))&&(t.onStart&&t.onStart.apply(l),n.nav&&a.go(r,null,{push_only:!0}),n.lock&&(0,o.lockButton)(e)),!i},nav:function(e,t){var n=window.nav,i=window.page,s=window.menu,l=window.cur,u=window.Tabbar;(t=t||{}).nav=t.nav||{};var d,f=(0,o.getHref)(e),p=i.getHash(t.nav);if(!(f=n.checkUrl(f)))return!1;"/"!=f.substr(0,1)&&(f="/"+f),s.close(null,!0);var m=A.tGetParam();if(A.tStart=(new Date).getTime(),t.need_restore&&s&&s.closeSearch(),window.isNewMail&&(t.need_restore&&t.nav.push&&!t.need_check_updates&&A.abort_reqs(),n.onBeforeGo2(t.nav.path,(0,o.qs2obj)(t.nav.params),t.nav.push,t)))return A.abort_reqs(),!0;if(t.need_restore&&t.nav.push&&(d=i.restore(p))&&(A.abort_reqs(),d.lm&&(0,o.extend)(d.lm,{tn:!1,bn:!1}),window.isNewNavigation?i.set(p,d,{},t):i.set(p,d),t.zProcess&&(t.zProcess(d.st),delete t.zProcess),n.set(t),A.tModule=window.cur.module,A.tRestoreRender=(new Date).getTime(),!t.need_check_updates))return!0;var _=!1,v=!1;if(t.need_check_updates&&n.isTabHaveCache(t.tab,p));else if(t.fast)_=!0,i.set(p,!1,{before:!0,beforeAppend:t.beforeAppend,afterAppend:t.afterAppend}),v=t.onAfterFast||!1;else if(t.target&&t.target.className){var g,y=(g=/(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec(t.target.className))&&g[1]||!1,b=g&&g[2]||!1;switch(b){case"menu":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var n=(0,a.$)(".vk__page");if(n.className=n.className.replace("vk__page_notifications",""),window.isNewMail){var r=(0,o.geByClass1)("mcont",e)||(0,o.geByClass1)("layout__basis");(0,o.val)(r,'<div class="pcont bl_cont"><div id="al_loading"></div></div>')}else(0,o.val)((0,o.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>');i.setMhead(e,(0,o.attr)(t.target,"data-header"),"/")},afterAppend:function(){window.isNewMail&&"/mail"===p?(0,o.alLoadingFix)((0,o.geByClass1)("layout").offsetHeight):(0,o.alLoadingFix)(),(0,o.scrollTop)(0)}});break;case"tab":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){(0,o.val)((0,o.geByClass1)("upanel",e),'<div id="al_loading"></div>'),(0,o.val)((0,o.geByClass1)("basisDefault",e),'<div id="al_loading"></div>');var t=(0,o.geByClass1)("tabs_block",e)||(0,o.geByClass1)("tabs",e),n=(0,o.geByClass1)("active",t);n&&((0,o.hasClass)("tab_item_top",n)?((0,o.removeClass)("tab_item_cur",(0,o.geByClass1)("tab_item_cur",t)),(0,o.addClass)("tab_item_cur",(0,o.geByClass1)("tab_item",t))):((0,o.removeClass)("tab_item_cur",(0,o.geByClass1)("tab_item_cur",t)),(0,o.addClass)("tab_item_cur",n)))},afterAppend:function(){(0,o.alLoadingFix)()}},t);break;case"post":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var n=window.lang,a=(0,o.clone)((0,o.gpeByClass)("post_item",t.target)),r=a.id,s=(0,o.outer)((0,o.gpeByTag)("a",(0,o.geByClass1)("pi_img",a))).replace("pi_img","op_img"),l=(0,o.gpeByTag)("div",(0,o.geByClass1)("pi_author",a)),c=(0,o.remove)((0,o.geByClass1)("pi_date",a)),u=(0,o.outer)((0,o.remove)((0,o.geByClass1)("explain",l))),d=(0,o.remove)((0,o.geByClass1)("pi_fronly",a)),f=(0,o.outer)(l),h=(0,o.geByClass1)("pi_body",a),p=(0,o.geByClass1)("pi_text_more",h),A=(c=(0,o.geByClass1)("pi_date",a),(0,o.geByClass1)("pi_info",h)),m=(0,o.geByClass1)("pi_links",h),_=(0,o.geByClass1)("replies_link",m),v=(0,o.val)((0,o.remove)((0,o.geByClass1)("pi_actions_wrap",a))),g=(0,o.val)((0,o.remove)((0,o.geByClass1)("item_replies",A)))?(0,o.val)(_):n.mobile_wall_post_replies_title,y=_?'<a name="comments"></a><h4 class="slim_header">'+(g||"")+'</h4><div id="al_loading"></div>':"";if(p){var b=p.nextSibling?p:p.parentNode;b.nextSibling.style.display="inline",b.style.display="none"}(0,o.val)(m,(0,o.outer)((0,o.geByClass1)("like_wrap",h))),c&&(0,o.attr)(c,"data-date")&&(0,o.val)(c,(0,o.attr)(c,"data-date")),i.setMhead(e,(0,o.attr)(t.target,"data-header"),!0),(0,o.val)((0,o.geByClass1)("mcont",e),function(e,t,n,a,i,r,o,s){return'<div class="pcont bl_cont"><div class="owner_panel">'+(t||"")+'<div class="op_cont">'+(n||"")+'<div class="op_info"><span class="item_date">'+(a||"")+'</span></div></div></div><div id="'+(e||"")+'" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">'+(i||"")+'</div><div class="pi_body">'+(r||"")+"</div></div>"+(s||"")+"</div>"+(o||"")+"</div>"}(r,s,f,(0,o.val)(c)+(d?'<b class="pi_fronly"></b>':""),u,(0,o.val)(h),y,v))},afterAppend:function(e){var n=(0,o.geByTag1)("h4",e);n&&(0,o.alLoadingFix)(t.nav.hash?(0,o.getCh)()-n.offsetHeight:0),t.nav.hash?(0,o.scrollToHash)(t.nav.hash):(0,o.scrollTop)(0)}},t);break;case"wall":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var n=window.lang,a=(0,o.clone)((0,o.hasClass)("wall_item",t.target)?t.target:(0,o.gpeByClass)("wall_item",t.target)),r=a.id,s=(0,o.geByClass1)("wi_body",a),l=(0,o.geByClass1)("wi_buttons",a),c=(0,o.geByClass1)("item_like",l),u=(0,o.geByClass1)("v_like",c),d=(0,o.geByClass1)("item_share",l),f=(0,o.geByClass1)("v_share",d),h=(0,o.remove)((0,o.geByClass1)("item_replies",l)),p=!!h&&(0,o.geByClass1)("v_replies",h),A=+(0,o.stripTags)((0,o.val)(p)).replace(/\D/g,""),m=(0,o.geByClass1)("pi_text_more",s),_=(0,o.geByClass1)("wi_date",a),v=A?(0,o.langNumeric)(A,n.mobile_wall_post_comments):n.mobile_wall_post_replies_title,g=h&&A<50?'<a name="comments"></a><h4 class="slim_header">'+(v||"")+'</h4><div id="al_loading"></div>':"";if(clog("item_replies",h),(0,o.remove)((0,o.geByClass1)("wi_actions_btn",a)),(0,o.remove)((0,o.geByClass1)("post__subscribeBtn",a)),(0,o.remove)((0,o.geByClass1)("post__extraHeader",a)),u?(0,o.val)(u):(0,o.append)((0,o.ce)("span",{className:"v_like"}),c),f?(0,o.val)(f):(0,o.append)((0,o.ce)("span",{className:"v_share"}),d),m){var y=m.nextSibling?m:m.parentNode;y.nextSibling.style.display="inline",y.style.display="none"}_&&(0,o.attr)(_,"data-date")&&(0,o.val)(_,(0,o.attr)(_,"data-date")),i.setMhead(e,(0,o.attr)(t.target,"data-header"),!0),(0,o.val)((0,o.geByClass1)("mcont",e),function(e,t,n){return'<div class="pcont"><div class="wall_item single_wall_item" id="'+(e||"")+'">'+(t||"")+"</div>"+(n||"")+"</div>"}(r,(0,o.val)(a),g)),(0,o.addClass)("vk__page_singlePost",document.body)},afterAppend:function(e){var n=(0,o.geByTag1)("h4",e);n&&(0,o.alLoadingFix)(t.nav.hash?(0,o.getCh)()-n.offsetHeight:0),t.nav.hash?(0,o.scrollToHash)(t.nav.hash):(0,o.scrollTop)(0)}},t);break;case"pinfo":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var t=window.lang,n=(0,o.geByClass1)("owner_panel",e),a=(0,o.geByClass1)("pp_img",n),r=(0,o.geByClass1)("op_header",n),s=(0,o.geByClass1)("lvi",r),l=(0,o.geByClass1)("pp_last_activity",n),c=(0,o.ce)("div");(0,o.addClass)("mhi_back",(0,o.geByClass1)("mh_header",e)),(0,o.val)(n,'<img src="'+(0,o.escapeAttr)((0,o.attr)(a,"src")||"")+'" class="op_img"><div class="op_cont"><h2 class="op_header">'+(0,o.stripTags)((0,o.val)(r))+'</h2><div class="pp_online">'+(s?t.mobile_online:(0,o.val)(l))+"</div></div>"),(0,o.val)((0,o.geByClass1)("ipanel",e),"<div>"+(0,o.val)(c)+'</div><div id="al_loading"></div>'),i.setMhead(e,!1,!0)},afterAppend:function(){(0,o.alLoadingFix)(),(0,o.scrollTop)(0,10)}},t);break;case"player":_=!0;var w=(0,o.qs2obj)(t.nav.params).playlist_id;i.set(p,!1,{before:!0,beforeAppend:function(e){var t=window,n=t.lang,a=t.audio,r=(a.playlist(),a.playlist_q());i.setMhead(e,n.mobile_menu_player_head_title,!0),(0,o.val)((0,o.geByClass1)("mcont",e),'\n                <div class="pcont audioPage">\n                  <div class="PageBlock">\n                    <div class="audioPage__header">\n                      '.concat(AudioPlaylist.tplPlayerSearch(w),'\n                    </div>\n                    <div id="au_search_items" class="upanel bl_cont">\n                      <div class="audios_block audios_list _si_container" data-query="').concat((0,o.escapeAttr)(r),'">').concat("","</div>\n                    </div>\n                  </div>\n                </div>")),(0,o.val)("m",e.innerHTML)}},t),v=function(){var e=window,n=e.qsearch,a=e.audio,s=a.playlist(),l="/audio"+(0,o.obj2qs)({act:"player",list:w}),c=[],u={};(0,o.each)(s,function(e,t){c.push(t.fullId),u[t.fullId]=["".concat(t.performer," ").concat(t.title),t]});var d=[];n.init({action:l,al_action:l,container:(0,o.ge)("au_search_items"),field:(0,o.ge)("au_search_field"),btn:(0,o.ge)("au_search_btn"),top_items:c,_cache:u,tpl:function(e,t,n,i){var r="";if(t){if(i)return i;r=""==i?'<div class="audios_block audios_list _si_container" data-query="'.concat((0,o.escapeAttr)(t),'">').concat(e,"</div>"):'<div class="audios_block audios_list _si_container" data-query="'.concat((0,o.escapeAttr)(t),'"><div class="al_loading qs_loading">&nbsp;</div></div>')}else r='<div class="audios_block audios_list _si_container" data-query="'.concat((0,o.escapeAttr)(a.playlist_q()),'">').concat(e,"</div>");return Wd.html((0,h.default)({playlist_id:w,inner:Wd.wrap(r)}))},item_tpl:function(e){var t=window.audioplayer;return d.push(e),t&&t.getDOMFromAudio(e,!0,this.q)||""},null_tpl:function(e){var t=window.lang;return'<div class="service_msg_box">\n                  <div class="service_msg service_msg_null">\n                  '.concat(e?t.mobile_audio_search_not_found.replace("%s",(0,o.htsc)(e)):t.mobile_audio_no_audio,"\n                  </div>\n                </div>")},soft_filter:!0,need_invalid_keys:r.default.desktop,top_len:50,global_search:!0,onRendered:function(){var e=window,t=e.audioplayer,n=e.audio;t&&t.initAudio(),n.addToPlaylist(d)},al_need:!0,init_offset:0});var f=a.getCurrentId(),A=(0,o.ge)("audio"+f);if(A){var m=(0,o.getY)(A)+A.offsetHeight/2-(0,o.getCh)()/2;(0,o.scrollTop)(m),window.isNewNavigation&&i.save(p,{html:null,st:(0,o.scrollTop)(),page:(0,o.ge)("m"),state:i.stash(),cur:window.cur,options:t||{}},!1)}};break;case"photo":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var n=(0,o.geByTag1)("img",t.target),a=n&&n.src||"/images/mobile/blank.gif",r="",s="",l=((0,o.attr)(n,"data-src_big")||"").split("|"),c=l[0],u=+l[1]||0,d=+l[2]||0,f=!0;if(u&&d||(u=n&&n.width||0,d=n&&n.height||0,f=!1),c){if(u&&d){var h=Math.min(604,(0,o.getCw)())/u,p=Math.min(604,Math.ceil(h>=1&&f?d:d*h));r+="height:"+p+"px;"}r+="background:url("+a+") #f7f7f7 no-repeat center top;",p>100&&(0,o.each)(["-moz-","-o-","-webkit-",""],function(e,t){r+=t+"background-size:contain;"}),a=c}else s+="width:100%;";i.setMhead(e,(0,o.attr)(t.target,"data-header"),!0),(0,o.val)((0,o.geByClass1)("mcont",e),function(e,t,n){return'<div class="pcont bl_cont"><div class="media_view photo_view"><div class="pv_summary">&nbsp;<div class="summary_loading" style="float:left;"><i class="i_loading"></i></div></div><div class="pv_body"><div class="thumb_item" style="'+(t||"")+'"><img src="'+e+'" class="ph_img" alt="" style="'+(n||"")+'" /></div></div><div id="al_fill"></div></div></div>'}(a,r,s))},afterAppend:function(){(0,o.alLoadingFix)(0,"al_fill"),(0,o.scrollTop)(0)}},t);break;case"u":case"g":case"p":case"e":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){if(window.isNewNavigation)u.drawLoader(e);else{var n,a=window.lang,r=y.substr(2),s=(0,o.geByClass1)(r,e,"a")||(0,o.geByClass1)(r,e,"span"),l=(0,o.stripTags)((0,o.attr)(t.target,"data-name")||(0,o.attr)(s,"data-name")||(0,o.val)(s)||""),c=s&&s.parentNode&&(0,o.geByClass1)("lvi",s.parentNode),d=((0,o.outer)(c),(0,o.geByClass1)(r,e,"img")),f=d&&d.src||(0,o.attr)(t.target,"data-photo")||"/images/mobile/blank.gif";"u"==b?n=l.split(" ").shift():"g"==b?n=a.mobile_group_head_title:"p"==b?n=a.mobile_public_head_title:"e"==b&&(n=a.mobile_event_head_title),i.setMhead(e,n,"/"),(0,o.val)((0,o.geByClass1)("mcont",e),function(e,t,n){return"g"===b||"p"===b||"e"===b?'<div class="al_loading"></div>':'<div class="pcont fit_box"><div class="PageBlock"><div class="owner_panel profile_panel"><img src="'+(e||"")+'" class="pp_img" /><div class="pp_cont"><h2 class="op_header">'+(t||"")+'</h2></div></div><div id="al_loading"></div></div>'}(f,l))}},afterAppend:function(){(0,o.alLoadingFix)(),(0,o.scrollTop)(0)}},t);break;case"playlists":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var n=(0,o.geByClass)("audioPlaylists__item",e),a="";n&&(0,o.each)(n,function(e,t){a+=AudioPlaylist.tplSearchListItem({href:(0,o.attr)((0,o.geByClass1)("audioPlaylists__itemLink",t),"href"),thumb_style:(0,o.attr)((0,o.geByClass1)("audioPlaylists__itemCover",t),"style"),grid_covers:(0,o.val)((0,o.geByClass1)("audioPlaylists__itemCover",t)),title:(0,o.val)((0,o.geByClass1)("audioPlaylists__itemTitle",t)),author_name:(0,o.val)((0,o.geByClass1)("audioPlaylists__itemAuthor",t)),short_stats:(0,o.val)((0,o.geByClass1)("audioPlaylists__itemStats",t))},!0)});var r=AudioPlaylist.tplPlayerSearch("",!0),s=AudioPlaylist.tplPlaylistsPage(a,r);(0,o.val)((0,o.geByClass1)("mcont",e),'<div class="pcont bl_cont">'+s+"</div>"),i.setMhead(e,(0,o.attr)(t.target,"data-header"),!0),window.isNewNavigation||(0,o.scrollTop)(0)}});break;case"empty":case"artist":case"playlist":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){window.isNewNavigation?u.drawLoader(e):(0,o.val)((0,o.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>')},afterAppend:function(){(0,o.alLoadingFix)(),window.isNewNavigation&&(0,o.scrollTop)(0)}},t);break;case"news_subsection":_=!0,i.set(p,!1,{before:!0,beforeAppend:function(e){var t=(0,o.geByClass1)("news_subsections",e);t&&!(0,o.hasClass)("summary_loading",t.firstChild)&&(0,o.before)((0,o.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),t.firstChild)}});break;case"tabbar":_=!0,t.is_fast=!0;var E=!1,k={options:{is_fast:!0,tab:t.tab,prev_tab:t.prev_tab}};t.need_check_updates&&d&&(k=(0,o.extend)(k,d),E=!0),i.set(p,k,{before:!E,beforeAppend:function(e){window.isNewNavigation&&(i.setMhead(e,(0,o.attr)(t.target,"data-header"),!1),u.drawSkeletonLoader(e,t.tab)),document.body.classList.contains("vk_tabbar_bottom")&&i.hideHeader(e)},afterAppend:function(){(0,o.alLoadingFix)()}});break;default:l=window.cur;var S=!!(0,o.geByClass1)("mhi_logo","mhead");if(_=!0,l.al_fast&&l.al_fast[b])i.set(p,!1,l.al_fast[b](t),t);else if(window.isNewNavigation&&!S){var C={options:{is_fast:!0,tab:t.tab,removeAfterNextResponse:t.removeAfterNextResponse}};i.set(p,C,{before:!0,afterAppend:function(){(0,o.alLoadingFix)()}})}}}if(t.need_check_updates||A.abort_reqs(),t.local){var M=!0;i.set(p,{},{after:!0,no_scroll:!0,force:!0},!1),v&&v()}else{var P=(0,o.qs2obj)(t.nav.params);(0,o.extend)(P,t.params||{}),window.al&&window.al.menu||(P._nlm=1),m&&(P._tstat=m);var T=window.pStats,D=T.getSeenData();D&&(P._pstat=D.data,l&&l.module&&(P._pstatref=l.module)),P._ref||(P._ref=(n.path||"").substr(1));var I=f.split("#");!P._hash&&I.length>1&&(P._hash="#"+I[1]),(0,c.preloadStaticForNavigation)(f);var x=Object.assign({},t.headers,{"X-Ajax-Nav":"true"});M=A.post(f,P,{onPageDone:function(e,n,r,o,s){A.fastNav=!1;var l=window.cur;if(D&&T.onSend(D.seen),A.tProcess=(new Date).getTime(),i.set(p,{title:e,html:n,js:r,lm:o,bc:s,st:t.st||0},{after:_,no_scroll:_},!_&&t),t.back){var c=(0,a.$)(".layout");i.setMhead(c,!1,t.back)}A.tModule=l.module,A.tRender=(new Date).getTime()},redirectToLoginPage:t.redirectToLoginPage,headers:x});A.save_req()}return _&&(t.zProcess&&(t.zProcess(),delete t.zProcess),n.set(t),A.tModule=l.module,A.tFastRender=(new Date).getTime(),A.fastNav=!0),M},confirm:function(e){function t(t,n,a,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,a){return!!confirm(t)&&A.click(e,a,{url_params:{hash:n}})}),_post:function(e,t,n){var a=function(e,t){n.onFail&&n.onFail.call(window,0,e,t)},i=window.debuglogSent?window.debuglogSent(e):-1;return A.plainpost(e,t,function(r,l){if(204===l.status&&l.getResponseHeader("X-AppShell-Fallback")){var c=location.href;return history.replaceState(null,null,(0,s.makeUrl)(location.href,{__appshell_fallback:l.getResponseHeader("X-AppShell-Fallback")})),void location.replace(c)}var u=!1;try{u=(0,o.parseJSON)(r)}catch(e){u=!1}!1===u?a():(A.parseResponse(u,e,t,n),A._debugLog(i,u.debugLog))},a,null,{headers:n.headers})},_debugLog:function(e,t){window.debuglogGot&&window.debuglogGot(e,t)},parseResponse:function(e,t,n,i){var r,s=window.al,l=window.nav,u=window.menu,h=window.page,p=e.version,m=e.counters,_=e.type,v=t.indexOf("community")>=0,g=!1;if(v?g=!(!window.al||p===s.ver):window.al&&p!==s.ver?g=!0:!window.menu||e.lm_data&&e.lm_data.lm||window.al&&window.al.menu&&window.al.menu.length&&(g=!u.refreshCounters(m)),!1!==m&&!v){var y=window.isNewNavigation?3:2;(0,o.setNotify)(m[y])}switch(e.lm_data&&e.lm_data.lm&&m&&(e.lm_data.counters=m),_){case 0:if(g)return l.hard_go(l.cur,null,{replace:!0});var b=e.data;if(r=b&&isObject(b[0])&&b[0]._snackbar){if(Snackbar.init(r),2===r.type)return photoview.opened()?void photoview.close():Stories.opened?void Stories.close():zlayer.opened()?void zlayer.close():void(A.fastNav&&history.back());delete b[0]._snackbar}i&&i.onDone&&i.onDone.apply(window,b);break;case 1:var w=e.location;A.onRedirect(!0,w);var E=e.hard,k=e.frame,S=e.clear,C=e.restore;if(!k&&window.isNewMail&&A.onBeforeRedirect(w))break;if(S&&l.clear(),(r=e._snackbar)&&(Snackbar.init(r),delete e.snackbar),g||E)l.hard_go(w);else if(k){(0,d.setDocumentDomain)();var M=w+(-1==w.indexOf("?")?"?":"&")+"__extra=1",P=(0,o.createIframe)({src:M})}else l.go(w,null,{ignore_cur_process:!0,need_restore:C});break;case A.RESPONSE_CAPTCHA:var T=e.location,D=e.img,I=e.post,x=e.key;i&&i.onFail?i.onFail(_,T,{location:T,img:D,post:I,key:x}):l.hard_go(T);break;case 3:var O=e.lm_data;if(window.isNewNavigation&&O&&!!O.is_new_nav!==window.isNewNavigation&&(g=!0),h.need_hard_go=g,O&&O.rdr&&window.al&&s.menu&&(0,o.getW)("vk_wrap")>=614){l.go(O.rdr,null,{replace:!0});break}f.default.getRouter().deactivateAllRoutes(),cur.share&&cur.share.destroy(),(i=i||{}).onPageDone||(i.onPageDone=function(e,n,a,i,r){l.go(t,null,{push_only:!0}),h.set(h.getHash(l),{title:e,html:n,js:a,lm:i,bc:r})});var B=e.title,L=e.html,R=e.js,N=e.body_class,j=e.top_bar,F=(0,o.ge)("vk_topbar");j&&!F?(F=(0,o.ce)("div",{id:"vk_topbar",innerHTML:j}),(0,o.before)(F,(0,a.$)(".layout"))):(0,o.val)(F,j),(0,c.addStatic)(e.static_files).then(function(){i.onPageDone(B,L,R,O,N)});break;case 4:if(i.redirectToLoginPage)return window.location=e.location,!1;if(!A._failed_relogin){var H=e.location;(0,d.setDocumentDomain)();P=(0,o.createIframe)({src:H})}A._failed_relogin=!0,A.save_failed_req(P,t,n,i)}},onReLoginDone:function(){A.repeat_reqs(),A._failed_relogin=!1},tGetParam:function(){if(A.tStart&&A.tModule){var e=A.tFastRender-A.tStart,t=A.tRestoreRender-A.tStart,n=A.tProcess-A.tStart,a=A.tRender-A.tProcess,i=["/"==A.tModule.substr(0,1)?A.tModule.substr(1):A.tModule,e,t,n,a];for(var r in i)(!i[r]||i[r]<0)&&(i[r]=0);return A.tStart=!1,i.join(",")}},tAlGetParam:function(){if(A.tAlStart&&A.tAlModule){var e=A.tAlProcess-A.tAlStart,t=A.tAlRender-A.tAlProcess,n=["al_"+("/"==A.tAlModule.substr(0,1)?A.tAlModule.substr(1):A.tAlModule),e,t];for(var a in n)(!n[a]||n[a]<0)&&(n[a]=0);return A.tAlStart=!1,n.join(",")}},refreshLinks:function(e,t){if(e){var n=(0,o.geByClass1)("mmi_fv","lm_cont"),a=n&&(0,o.geByClass1)("lfm_item",n),i=(0,o.geByClass1)("mmi_fv","mfoot"),r=i&&(0,o.geByClass1)("lfm_item",i),s=(0,o.ge)("fv_link"),l=(0,o.ge)("menu_fv_link"),c=(0,o.geBySel1)('link[rel="canonical"]');(0,o.attr)(a,"href",e),(0,o.attr)(r,"href",e),(0,o.attr)(s,"href",e),(0,o.attr)(c,"href",(0,o.attr)((0,o.ge)("mcont"),"data-canonical")),window.nav.prev_fv_link&&(0,o.attr)(l,"href",window.nav.prev_fv_link),window.nav.fv_link=e}if(t){var u=(0,o.geByClass1)("mmi_app","lm_cont"),d=u&&(0,o.geByClass1)("lfm_item",u),f=(0,o.geByClass1)("mmi_app","mfoot"),h=f&&(0,o.geByClass1)("lfm_item",f),p=(0,o.ge)("app_link"),A=!!t&&"return nav.app_go(this, event, '"+(0,o.escapeStr)(t)+"');";(0,o.attr)(d,"onclick",A),(0,o.attr)(h,"onclick",A),(0,o.attr)(p,"onclick",A)}}};window.ajax=A;var m=A;t.default=m},l51W:function(e,t,n){"use strict";var a=function(){function e(e){var t=e.closest(".si_body");return{buttons:$(".si_links",t),message:$(".si_msg",t)}}return{sendRequest:function(t,n){t&&t.preventDefault();var a=n.getAttribute("href");ActionMenu.closeMenu();var i=e(n);ajax.post(a,{_ajax:1},{onDone:function(e){!function(e){hide(e.buttons),show(e.message)}(i),val(i.message,e)}})},cancelRequest:function(t,n){t&&t.preventDefault();var a=n.getAttribute("href"),i=e(n);ajax.post(a,{_ajax:1},{onDone:function(e){}}),function(e){hide(e.message),show(e.buttons)}(i)}}}();window.GroupsInvite=a},l57W:function(e,t,n){"use strict";var a=n("UxAg"),i=s(n("r/ag")),r=s(n("29dZ")),o=s(n("Q8gl"));function s(e){return e&&e.__esModule?e:{default:e}}window.SwitcherConfirm={},SwitcherConfirm._onSwitcherChange=u,SwitcherConfirm._onConfirmClick=d,SwitcherConfirm._onCancelClick=function(e){return f(e.$btn)},SwitcherConfirm._onPopupOverlayClick=function(e){return f(e.$popup)};var l={checked:function(e){return"SwitcherConfirm_checked_".concat(e?"yes":"no")}},c={switcher:".SwitcherConfirm",popup:".SwitcherConfirm__popup",confirm:".SwitcherConfirm__confirm",cancel:".SwitcherConfirm__cancel"};function u(e){var t=e.$control,n=t.closest(c.switcher),r=(0,a.$)(c.popup,n);i.default.open(r),n.$popup=r,n.$control=t,n.checked=e.checked}function d(e,t){var n=t.$btn.closest(c.switcher),o=(0,a.$)(c.confirm,n),s=(0,a.$)(c.cancel,n),u=n.checked;n.isSaving=!0,r.default.setLoading(o,!0),r.default.setDisabled(s,!0),Wd.handle(e,{checked:u,onSuccess:function(){n.isSaving=!1,i.default.close(n.$popup),r.default.setLoading(o,!1),r.default.setDisabled(s,!1),n.classList.toggle(l.checked(!0),u),n.classList.toggle(l.checked(!1),!u)}})}function f(e){var t=e.closest(c.switcher);t.isSaving||(o.default.setChecked(t.$control,!t.checked),i.default.close(t.$popup))}},l90V:function(e,t,n){"use strict";var a,i=(a=n("SRbS"))&&a.__esModule?a:{default:a};Object.assign(i.default,{list:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Array.isArray(e)||(e=[e]);return t?e.map(t).join(""):e.join("")}})},lQx8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messenger=M,t.Messenger_renderConvoLayer=P,t.Messenger_renderLoadingPage=function(e){var t=(0,h.MailHat_page)(),n=(0,o.default)({mix:"messenger__body",inner:[T()]});return a.default.html(b(),t,n)},t.uMessenger_class=O,t.uMessenger_getBanner=I,t.uMessenger_getPinnedMsg=D,t.uMessenger_renderMRsHint=L,t.uMessenger_hasSelectedMsgs=B,t.default=void 0;var a=A(n("bZ/P")),i=A(n("Mc5h")),r=(A(n("9y81")),A(n("O5lf"))),o=A(n("AgBx")),s=A(n("QBkA")),l=A(n("rKp0")),c=A(n("u33z")),u=A(n("HPEO")),d=A(n("CkGd")),f=A(n("yNeG")),h=n("DkIl"),p=A(n("2eJH"));function A(e){return e&&e.__esModule?e:{default:e}}function m(){var e=S(['\n    <a href="/mail?act=mrs" class="messenger__mrsHintBox _touched">\n      ',"\n    </a>\n  "]);return m=function(){return e},e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(){var e=S(["\n    ",'\n    <div class="messenger__banner_content">\n      <div class="messenger__banner_text" ',">\n        ",'\n      </div>\n      <div class="messenger__banner_buttons">\n        ',"\n      </div>\n    </div>\n    ","\n  "]);return v=function(){return e},e}function g(){var e=S(['\n      <div class="messenger__banner_icon">\n        <img class="messenger__banner_icon_img" src="','">\n      </div>\n    ']);return g=function(){return e},e}function y(){var e=S(['\n    <div class="messenger__spinner">\n      ',"\n    </div>\n  "]);return y=function(){return e},e}function b(){var e=S(['\n    <div class="messenger__header">\n      ',"\n    </div>\n    ","\n  "]);return b=function(){return e},e}function w(){var e=S(['\n    <div class="messenger__convoListNotice">\n      ',"\n    </div>\n  "]);return w=function(){return e},e}function E(){var e=S(['\n    <div class="messenger__header">\n      ','\n      <div class="','">','</div>\n      <div class="messenger__pinned">',"</div>\n    </div>\n    ",'\n    <div class="','">\n      <div class="messenger__mrbox">','</div>\n      <div class="messenger__write">','</div>\n      <div class="messenger__acts">',"</div>\n    </div>\n  "]);return E=function(){return e},e}function k(){var e=S(['\n    <div class="','">\n      <div class="messenger__layer messenger__layer_main">\n        <div class="messenger__header">',"</div>\n        ",'\n      </div>\n      <div class="messenger__layer messenger__layer_convo">\n        ','\n      </div>\n      <div class="messenger__layer messenger__layer_page">','</div>\n      <div class="messenger__dialog"></div>\n    </div>\n  ']);return k=function(){return e},e}function S(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=store.mail.cur,n=t.query,a=(0,l.default)({scrap:"folder"}),i=(0,l.default)({scrap:"search"}),r=e.page,o="all"!==t.folder||t.query||t.forwardFromId?0:t.countMR;return M({mix:O(),mailHat:(0,f.default)(),convo:P(),page:r,mrs:o,query:n,createChatUrl:"/mail?act=new_chat",scrapFolder:a,scrapSearch:i})};function M(e){var t=window.lang.mobile_mail_search_only_messages,n=(0,s.default)({query:e.query,createUrl:e.createChatUrl}),r=e.mrs?L(e.mrs):"",l=a.default.onClick("Messenger._onSearchMsgsClick"),c=(0,o.default)({mix:"messenger__body",attrs:a.default.onScroll("Messenger._onMainScroll","this"),inner:[(0,i.default)({mix:"messenger__filter",inner:n}),(0,i.default)({mix:a.default.class("messenger__mrsHint",{hidden:!e.mrs}),inner:r}),(0,i.default)({mix:"messenger__searchMsgs",attrs:l,inner:t}),(0,i.default)({mix:"messenger__loadable",inner:[(0,i.default)({mix:"messenger__folderList",inner:e.scrapFolder}),(0,i.default)({mix:"messenger__searchList",inner:e.scrapSearch}),T()]})]});return a.default.html(k(),e.mix,e.mailHat,c,e.convo,e.page)}function P(){var e=store.mail,t=e.cur,n=e.peers[t.peerId],r=(0,f.default)(),s=D(),c=I(),h=(0,u.default)(),A=n&&n.canPin,m=(0,d.default)({canPin:A,isChannel:n.isChannel}),_=(0,l.default)({scrap:"peer"}),v=n.isIncomingMR?(0,p.default)(t.peerId):"",g=n.isRejectedMR?function(){var e=window.lang;return a.default.html(w(),e.mobile_mail_mrs_rejected_info)}():"",y=(0,o.default)({mix:"messenger__body",attrs:a.default.onScroll("Messenger._onConvoScroll","this"),inner:[(0,i.default)({mix:"messenger__spacer"}),(0,i.default)({mix:"messenger__convoList",inner:[_,g]}),T()]}),b="messenger__banner";c&&(b="".concat(b," messenger__bannerVisible"));var k=a.default.class("messenger__footer",{actionsOpen:B(),isIncomingMR:n.isIncomingMR});return a.default.html(E(),r,b,c,s,y,k,v,h,m)}function T(){var e=(0,r.default)({mix:""});return a.default.html(y(),e)}function D(){var e=store.mail,t=e.cur.peerId;return t&&e.peers[t].pinnedMsg}function I(){var e=store.mail,t=e.cur.peerId,n=t&&e.peers[t],i=n&&n.banner;if(!i)return"";var r="";i.icon&&(r=a.default.html(g(),i.icon));for(var o=i.buttons,s=o.length,l=[],u=0;u<s;u++)l.push(x(o[u]));l=a.default.list(l);var d=(0,c.default)({class:"messenger__banner_close",onClick:a.default.onClick("uMessenger.onBannerButtonClick","event")}),f=a.default.onClick("uMessenger.onBannerTextClick","event");return a.default.html(v(),r,f,i.text,l,d)}function x(e){var t,n,i=a.default.class("messenger__banner_button",{primary:"secondary"!==e.layout,secondary:"secondary"===e.layout});return"link"===e.type?t={href:e.link}:"callback"===e.type&&(n=a.default.onClick("uMessenger.onBannerButtonClick","event",e.callback_data)),(0,c.default)({class:i,text:e.text,type:"link"===e.type?"link":"button",link:t,onClick:n})}function O(){var e,t,n=store.mail.cur;t=n.page?"view_page":n.peerId?"view_dialog":n.query&&"msgs"===n.tab?"view_searchMsgs":n.query?"view_searchPeers":"folder_".concat(n.folder);var i=n.peerId?store.mail.peers[n.peerId]:null;return a.default.class("e","messenger",{isIncomingMR:!!i&&i.isIncomingMR,isRejectedMR:!!i&&i.isRejectedMR},"uMessenger",(_(e={},t,!0),_(e,"community",!!n.groupId),e))}function B(){var e=store.mail.cur.msgSelected;return Object.keys(e).length>0}function L(e){var t=window.lang,n=langNumeric(e,t.mobile_mail_mrs_request_count);return a.default.html(m(),n)}t.default=C},lcib:function(e,t,n){"use strict";var a,i=n("UxAg"),r=(a=n("TYsd"))&&a.__esModule?a:{default:a};window.SearchPanel={setQuery:function(e,t){var n=(0,i.$)(s.inputById(e));t=t||"",n.value!==t&&(n.value=t,d(n,t))}},SearchPanel._onInput=c,SearchPanel._onClearClick=u,SearchPanel._onFocus=l;var o={hasQuery:"SearchPanel_hasQuery"},s={searchPanel:".SearchPanel",input:".SearchPanel__input",inputById:function(e){return'.SearchPanel[data-id="'.concat(e,'"] .SearchPanel__input')}};function l(){}function c(e,t){var n=e.value;d(e,n),r.default.handle(t,{query:n})}function u(e){var t=e.closest(s.searchPanel).$(s.input);t.value="",t.oninput()}function d(e,t){e.closest(s.searchPanel).classList.toggle(o.hasQuery,!!t)}},ldCb:function(e,t,n){"use strict";window.Informer={close:function(e){hide(e)}}},lkNA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadScript=function(e,t){var n,a=t.timeout,i=t.onLoad,r=t.onError,o=document.createElement("script");o.addEventListener("load",s),o.addEventListener("readystatechange",s),o.addEventListener("error",l),o.src=e,document.head.appendChild(o),a&&(n=setTimeout(l,a));function s(e){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(c(),i&&i())}function l(e){c(),r&&r()}function c(){clearTimeout(n),o.removeEventListener("load",s),o.removeEventListener("readystatechange",s),o.removeEventListener("error",l)}return{destroy:function(){c()}}}},ll1Q:function(e,t,n){"use strict";var a,i=(a=n("sXaZ"))&&a.__esModule?a:{default:a};Object.assign(i.default,{setPrefix:function(e,t){e.$(r.prefix).innerText=t},getValue:function(e){return e.$(r.native).value}});var r={native:".TextInput__native",prefix:".TextInput__prefix"}},m0RZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlBase64ToUint8Array=function(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),a=window.atob(n),i=new Uint8Array(a.length),r=0;r<a.length;++r)i[r]=a.charCodeAt(r);return i}},m9bs:function(e,t,n){"use strict";var a,i=(a=n("TYsd"))&&a.__esModule?a:{default:a};window.SettingsRow_select={},SettingsRow_select._onChange=o;var r={row:".settingsRow",description:".settingsRow__description"};function o(e,t){!function(e){var t=e.$select,n=e.label;t.closest(r.row).$(r.description).textContent=n}(t),i.default.handle(e,t)}},mOHq:function(e,t,n){"use strict";var a,i=(a=n("jk6M"))&&a.__esModule?a:{default:a};window.Scroller=function(e,t){var n,a,r,o,s,l=t&&t.ignoreMouseWheel,c=t&&t.noAutoScroll,u=!isUndefined(document.ontouchmove),d=!0,f=!1,h=!1,p=!1,A=!1,m=0,_=0,v=!1,g=0,y=!1,b=!1,w=!1,E=!1;function k(e){var t=e.touches,n=getX(a),i=getY(a);return{x:((t&&t[0]?t[0].pageX:e.pageX)||0)-n,y:((t&&t[0]?t[0].pageY:e.pageY)||0)-i}}function S(e){v||(v=[]),v.push([vkNow(),e]),v=v.slice(-20)}function C(){v=!1}function M(){if(!v||v.length<2)return[0,0,0];for(var e=vkNow(),t=!1,n=v.pop(),a=v.length-1;a>=0;a--){if((i=e-v[a][0])>150)break;t=v[a]}if(!t||!n)return[0,0,0];var i,r=n[1].x-t[1].x,o=n[1].y-t[1].y,s=Math.sqrt(r*r+o*o);return(i=n[0]-t[0])?[s/i,r/i,o/i]:[0,0,0]}function P(e){"touchstart"==e.type?d=!e.touches||1==e.touches.length:"touchmove"==e.type?d=!1:"click"==e.type&&(d||(cancelEvent(e),d=!0))}function T(e){if(!(window.isNewMail&&e.target.closest(".stickers_panel")&&e.target.closest(".messenger")||E&&e.touches&&e.touches.length>1)){if(C(),h){if(_<=1)return}else if(getW(a)-getW(r)>=0)return;p=k(e),S(A=p),w=!0,setStyle.animate(r)}}function D(e){if(p&&(E||w)){thover&&thover.cancel(e);var t=k(e);if(S(A=t),w){var n=p.x-t.x,i=p.y-t.y;if(Math.abs(n)>=Math.abs(i)&&(cancelEvent(e),E=!0),w=!1,E){var o=getY(a),s=getH(a),l=scrollTop(),u=getCh();!c&&(o-7<l?scrollTop(o-7):o+s+7>l+u&&scrollTop(o+s+7-u))}}if(E)if(cancelEvent(e),h){var d=getW(a);n=p.x-t.x;(m<=0&&n<0||m>=_-1&&n>0)&&(n/=3);var v=-m-n/d,y=f?100*v+"%":v*d;setStyle.transform(r,{translate:[y,0]})}else{var b=getW(a)-getW(r);n=p.x-t.x;if(b>0&&(b=0),(v=g-n)<b)y=b-(b-v)/3;else if(v>0)y=0+(v-0)/3;else y=g-n;B(y),setStyle.transform(r,{translate:[y,0]})}}}function I(e){if(p&&E){if(cancelEvent(e),h){var t=4.7*M()[1],n=p.x-A.x,i=getW(a),o=Math.abs(n)>=i/2;(m>0&&(o&&n<0||t>1)||m<_-1&&(o&&n>0||t<-1))&&(m+=n>0?1:-1);var s=-m,l=f?100*s+"%":s*i;p=!1,C(),L(),setStyle.animate(r,"transform",{duration:200,func:"ease"}),setStyle.transform(r,{translate:[l,0]})}else{var c=function(){if(!v)return!1;var e=M(),t=e[0],n=e[1];if(C(),!t)return!1;var a=t/4.7,i=n*a-4.7*a*a/2;return a*=530,i*=140,clog("dx",i,"t",a),!(t<.1||!i)&&{dx:i,t:a}}(),u=getW(a)-getW(r);n=p.x-A.x,s=g-n;c&&(s+=c.dx),u>0&&(u=0),g=s<u?u:s>0?0:s;var d={duration:200,func:"ease"};c&&(d={duration:c.t,func:"cubic-bezier(0, 1, 1, 1)"}),B(g),setStyle.animate(r,"transform",d),setStyle.transform(r,{translate:[g,0]})}E=!1}}function x(e){if(!(l||window.isNewMail&&e.target.closest(".stickers_panel")&&e.target.closest(".messenger"))){if(preventEvent(e),h){if(_<=1)return}else if((n=getW(a)-getW(r))>=0)return;var t=(e.detail?e.detail:e.wheelDelta)>0?3:-3;if(!1===y&&(y=0),y+=t,!h){var n=getW(a)-getW(r),i=g-y;if(n>0&&(n=0),i<n)var o=n-(n-i)/3;else if(i>0)o=0+(i-0)/3;else o=g-y;B(o),setStyle.transform(r,{translate:[o,0]})}clearTimeout(b),b=setTimeout(function(){if(h){(m>0&&y<0||m<_-1&&y>0)&&(m+=y>0?1:-1);var e=-m,t=getW(a),n=f?100*e+"%":e*t;L(),setStyle.animate(r,"transform",{duration:200,func:"ease"}),setStyle.transform(r,{translate:[n,0]})}else{var i=getW(a)-getW(r);i>0&&(i=0),(e=g-y)<i?g=i:e>0?g=0:g-=y,B(n),setStyle.animate(r,"transform",{duration:200,func:"ease"}),setStyle.transform(r,{translate:[g,0]})}y=!1},200)}}function O(e){if(h){var t=m;if(e&&e.target){var n=hasClass("sp_ppt",e.target)?e.target:gpeByClass("sp_ppt",e.target),i=+attr(n,"data-i");m=i<0?0:i>_-1?_-1:i}p=!1,C(),E=!1;var o=getW(a),s=-m,l=f?100*s+"%":s*o;L(),t!=m&&setStyle.animate(r,"transform",{duration:200,func:"ease"}),setStyle.transform(r,{translate:[l,0]})}}function B(e){if(!h){e=e||g;var t=getW(a)-getW(r);toggleClass("sw_left",a,e<0),toggleClass("sw_right",a,e>t)}}function L(){if(h){var e=geByClass1("sp_ppt_sel",n);e&&e===s[m]||(removeClass("sp_ppt_sel",e),addClass("sp_ppt_sel",s[m]))}}extend(this,{init:function(){a=geByClass1("scroller_wrap",n),r=geByClass1("scroller_cont",a),h?(o=geByClass1("sp_pages_pts",n),s=geByClass("sp_ppt",o),_=(geByClass("scroller_page",r)||[]).length,m=0,L()):B(g=0),v=!1,setStyle.transform(r,{translate:[0,0]}),u?(addEvent(a,"touchstart touchmove click",P),addEvent(a,"touchstart",T),addEvent(a,"touchmove",D),addEvent(a,"touchend touchcancel",I)):(addEvent(a,"mousewheel",x),addEvent(o,"click",O)),f||onBodyResize(O)},destroy:function(){u?(removeEvent(a,"touchstart touchmove click",P),removeEvent(a,"touchstart",T),removeEvent(a,"touchmove",D),removeEvent(a,"touchend touchcancel",I)):(removeEvent(a,"mousewheel",x),removeEvent(o,"click",O)),f||onBodyResize("__clear",O)},onShow:function(){h?L():B(g)},canClick:function(){return d}}),n=e,(t=t||{}).byPage?(h=!0,f=!i.default.android):(h=!1,f=!1,this.showElem=function(e){if(!h){var t=getX(e)-getX(a),n=t+g,i=n+getW(e),o=getW(a),s=!1;n<0?s=0-t+20:i>o&&(s=o-getW(e)-t-20);var l=getW(a)-getW(r);if(l>0&&(l=0),s<l)s=l;else if(s>0)s=0;clog(t,g,n,i,0,o,s),!1!==s&&(B(g=s),setStyle.animate(r,"transform",{duration:200,func:"ease"}),setStyle.transform(r,{translate:[g,0]}))}})}},mXGF:function(e,t,n){"use strict";var a,i,r,o,s,l,c,u=(a="_audioSnippet",i="audio_item",r="audioPlaylist__add_added",o="data-follow_text",s="data-unfollow_text",l="_audioPlaylistsPage__item",c="audioPlaylistsPage__item_removed",{playPause:function(e,t){preventEvent(e);var n=gpeByClass(a,t),r=geByClass1(i,n);audioplayer.playPause(e,attr(r,"data-id")),toggleClass("audioSnippet__playpause_paused",t)},followPlaylist:function(e,t){preventEvent(e);var n=geByClass1(l+attr(t,"data-playlist_owner_id")+"_"+attr(t,"data-playlist_id"));hasClass(r,t)?(t.innerText=attr(t,o),addClass(c,n)):(t.innerText=attr(t,s),removeClass(c,n)),function(e){ajax.post("/audio",{_ajax:1,act:"follow_playlist",playlist_owner_id:attr(e,"data-playlist_owner_id"),playlist_id:attr(e,"data-playlist_id"),hash:attr(e,"data-hash")},{redirectToLoginPage:!0})}(t),toggleClass(r,t)},tplSearchBlockItem:function(e){return'<div class="audioPlaylists__item">\n              <a href="'.concat(e.href,'" class="audioPlaylists__itemLink al_playlist">').concat(e.title,'</a>\n              <span class="audioPlaylists__itemCover" style="').concat(e.thumb_style,'">').concat(e.grid_covers,'</span>\n              <span class="audioPlaylists__itemTitle">').concat(e.title,'</span>\n              <span class="audioPlaylists__itemAuthor">').concat(e.author_name,'</span>\n              <span class="audioPlaylists__itemStats">').concat(e.short_stats,"</span>\n            </div>")},tplSearchBlock:function(e,t,n,a){return e?'<div class="audioPlaylists">\n                <div class="audioPlaylists__header">\n                  <div class="audioPlaylists__cell">\n                    <div class="audioPlaylists__title">'.concat(n,'</div>\n                  </div>\n                  <div class="audioPlaylists__cell">').concat(a,'</div>\n                </div>\n                <div class="audioPlaylists__body _preventMenuOpen">\n                  <div class="audioPlaylists__items">\n                    ').concat(e,"\n                  </div>\n                </div>\n              </div>"):""},tplSearchListItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n='<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                  <a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a>\n                  <i class="i_pointer"></i>\n                  <div class="ai_menu wi_actions">\n                    '.concat(e.follow_link,"\n                    ").concat(e.publish_link,"\n                  </div>\n                </div>\n             </div>\n             ").concat(e.actions);return t&&(n='<div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_actions">\n                   <div class="audioPlaylistsPage__menu ai_menu_wrap">\n                     <a href="#" class="ai_menu_toggle_button"></a>\n                   </div>\n                 </div>'),'<div class="audioPlaylistsPage__item _audioPlaylistsPage__item'.concat(e.owner_id,"_").concat(e.id,'">\n              <div class="audioPlaylistsPage__cell audioPlaylistsPage__cell_link">\n                <a href="').concat(e.href,'" class="audioPlaylistsPage__itemLink">').concat(e.title,'</a>\n                <span class="audioPlaylistsPage__container">\n                  <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_cover">\n                    <span class="audioPlaylistsPage__cover" style="').concat(e.thumb_style,'">').concat(e.grid_covers,'</span>\n                  </span>\n                  <span class="audioPlaylistsPage__cell audioPlaylistsPage__cell_desc">\n                    <span class="audioPlaylistsPage__title">').concat(e.title,'</span>\n                    <span class="audioPlaylistsPage__author">').concat(e.author_name,'</span>\n                    <span class="audioPlaylistsPage__stats">').concat(e.short_stats,"</span>\n                  </span>\n                </span>\n              </div>\n              ").concat(n,"\n            </div>")},tplSearchListNull:function(e){return'<div class="audioPlaylistsPage__notFound">\n              '.concat(e,"\n            </div>")},tplPlaylistsPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="PageBlock">\n              <div class="audioPlaylistsPage">\n                <div class="audioPage__search">\n                  '.concat(t,'\n                </div>\n                <div class="audioPlaylistsPage__list _si_container" id="au_search_playlist_items">\n                  ').concat(e,"\n                </div>\n              </div>\n            </div>")},tplPlayerSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.lang,a=('<input type="hidden" name="act" value="player"><input type="hidden" name="list" value="'.concat(escapeAttr(e),'">'),'<input id="au_search_btn" class="button qs_button al_tab" type="submit" value="'.concat(n.mobile_audio_search_btn,'" />'),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<div class="audioPage__search">\n              <div class="hp_block">\n                '.concat(e,'\n                <div class="qsearch">\n                  <table class="row_table">\n                    <tr>\n                      <td class="row_table_main_column">\n                        <div class="qs_field_wrap">\n                          <div class="iwrap">\n                            <input id="au_search_field" type="text" class="textfield qs_textfield" name="q" placeholder="').concat(n.mobile_audio_search_placeholder_simple,'">\n                          </div>\n                        </div>\n                      </td>\n                      <td class="row_table_last_column">\n                        ').concat(t,"\n                      </td>\n                    </tr>\n                  </table>\n                </div>\n              </div>\n            </div>")});return t?a():function(e,t,n){return'<form action="/audio" class="qsearch" onsubmit="return cur.au_search.go(event);">'.concat(e(t,n),"</form>")}(a)},copyValue:function(e,t){var n=val(e),a=ge(t+"_field");val(a,n),cur&&cur[t]&&cur[t].go();var i=geBySel1(".audioPage__tabs .tab_item_cur");i&&toggleClass("tab_item_cur_noactive",i,n)}});window.AudioPlaylist=u},mmza:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e.inner)return e;var t={inner:Wd.wrap(e.head.inner),class:"CellLeft__head ".concat(e.head.class||"")};e.head_href&&(t.href=e.head_href);var n={inner:Wd.wrap(e.description.inner),class:"CellLeft__description ".concat(e.description.class||"")};e.description.href&&(n.href=e.description.href);var a={class:"CellLeft ".concat(e.class||""),inner:[{class:"CellLeft__left",inner:[t,n]},{class:"CallLeft__photo",inner:"string"!=typeof e.photo?e.photo:Wd.wrap(e.photo)}]};e.href&&(a.href=e.href);return a};t.default=a},myok:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("TYsd")),i=r(n("BoyB"));function r(e){return e&&e.__esModule?e:{default:e}}var o={className:"Btn",setLoading:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return;var a=e.classList.contains(l.loading);if(t){if(a)return;var r=e.classList.contains(l.secondary);!n&&r&&(n="white");var o=(0,i.default)({mix:l.loader,white:"white"===n,large:!0});e.classList.add(l.loading),e.insertAdjacentHTML("afterbegin",o)}else{if(!a)return;var s=e.$(c.loader);e.classList.remove(l.loading),s.remove()}},setDisabled:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.disabled=t}},s=o;t.default=s,o._onClick=u;var l={loading:"Btn_loading",secondary:"Btn_theme_secondary",loader:"Btn__loader"},c={loader:".".concat(l.loader)};function u(e,t,n){e.preventDefault(),a.default.handle(n,{$btn:t})}},mz6W:function(e,t,n){"use strict";var a={init:function(e){store.market=extend(store.market||{},e)}};window.OrderDetails=a},n9zS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=o,t.default=void 0;var a,i=n("/xuI"),r=(a=n("z9sQ"))&&a.__esModule?a:{default:a};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getRandomId)("skeleton-circle"),n=(0,i.stylesObjectToString)({width:"".concat(e.size,"px"),height:"".concat(e.size,"px")})+(e.style||""),a=[r.default.class("SkeletonCircle",{header:e.header}),e.class].filter(function(e){return e}).join(" ");return(0,i.applyAnimation)(t),{id:t,class:a,style:n,tag:"div"}}var s=o;t.default=s},nJnv:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;root=window||{},factory=function(window){var svgNS="http://www.w3.org/2000/svg",locationHref="",subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};function ProjectInterface(){return{}}!function(){var e,t=Object.getOwnPropertyNames(Math),n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"==typeof e&&e.length){var t,n=Array.apply(null,{length:e.length}),a=e.length;for(t=0;t<a;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){bm_rnd=e?Math.round:function(e){return e}}function roundTo2Decimals(e){return Math.round(1e4*e)/1e4}function roundTo3Decimals(e){return Math.round(100*e)/100}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin=e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility=e.style.webkitBackfaceVisibility="visible",e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="preserve-3d"}function styleUnselectableDiv(e){e.style.userSelect="none",e.style.MozUserSelect="none",e.style.webkitUserSelect="none",e.style.oUserSelect="none"}function BMEnterFrameEvent(e,t,n,a){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=a<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,a){this.type=e,this.currentLoop=t,this.totalLoops=n,this.direction=a<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function _addEventListener(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)}function _removeEventListener(e,t){if(t){if(this._cbs[e]){for(var n=0,a=this._cbs[e].length;n<a;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,a-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}function _triggerEvent(e,t){if(this._cbs[e])for(var n=this._cbs[e].length,a=0;a<n;a++)this._cbs[e][a](t)}function randomString(e,t){var n;void 0===t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var a="";for(n=e;n>0;--n)a+=t[Math.round(Math.random()*(t.length-1))];return a}function HSVtoRGB(e,t,n){var a,i,r,o,s,l,c,u;switch(1===arguments.length&&(t=e.s,n=e.v,e=e.h),l=n*(1-t),c=n*(1-(s=6*e-(o=Math.floor(6*e)))*t),u=n*(1-(1-s)*t),o%6){case 0:a=n,i=u,r=l;break;case 1:a=c,i=n,r=l;break;case 2:a=l,i=n,r=u;break;case 3:a=l,i=c,r=n;break;case 4:a=u,i=l,r=n;break;case 5:a=n,i=l,r=c}return[a,i,r]}function RGBtoHSV(e,t,n){1===arguments.length&&(t=e.g,n=e.b,e=e.r);var a,i=Math.max(e,t,n),r=Math.min(e,t,n),o=i-r,s=0===i?0:o/i,l=i/255;switch(i){case r:a=0;break;case e:a=t-n+o*(t<n?6:0),a/=6*o;break;case t:a=n-e+2*o,a/=6*o;break;case n:a=e-t+4*o,a/=6*o}return[a,s,l]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}function componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}roundValues(!1);var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1==t.length?"0"+t:t;return function(e,t,a){return e<0&&(e=0),t<0&&(t=0),a<0&&(a=0),"#"+n[e]+n[t]+n[a]}}();function fillToRgba(e,t){if(!cachedColors[e]){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);cachedColors[e]=parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)}return"rgba("+cachedColors[e]+","+t+")"}var fillColorToString=(colorMap=[],function(e,t){return void 0!==t&&(e[3]=t),colorMap[e[0]]||(colorMap[e[0]]={}),colorMap[e[0]][e[1]]||(colorMap[e[0]][e[1]]={}),colorMap[e[0]][e[1]][e[2]]||(colorMap[e[0]][e[1]][e[2]]={}),colorMap[e[0]][e[1]][e[2]][e[3]]||(colorMap[e[0]][e[1]][e[2]][e[3]]="rgba("+e.join(",")+")"),colorMap[e[0]][e[1]][e[2]][e[3]]}),colorMap;function RenderedFrame(e,t){this.tr=e,this.o=t}function iterateDynamicProperties(e){var t,n=this.dynamicProperties;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(e)}function reversePath(e){var t,n,a=[],i=[],r=[],o={},s=0;e.c&&(a[0]=e.o[0],i[0]=e.i[0],r[0]=e.v[0],s=1);var l=(n=e.i.length)-1;for(t=s;t<n;t+=1)a.push(e.o[l]),i.push(e.i[l]),r.push(e.v[l]),l-=1;return o.i=a,o.o=i,o.v=r,o}var Matrix=function(){function e(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function t(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e);return this._t(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1)}function n(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e);return this._t(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1)}function a(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e);return this._t(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1)}function i(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e);return this._t(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1)}function r(e,t){return this._t(1,t,e,1,0,0)}function o(e,t){return this.shear(Math.tan(e),Math.tan(t))}function s(e,t){var n=Math.cos(t),a=Math.sin(t);return this._t(n,a,0,0,-a,n,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(e),1,0,0,0,0,1,0,0,0,0,1)._t(n,-a,0,0,a,n,0,0,0,0,1,0,0,0,0,1)}function l(e,t,n){return n=isNaN(n)?1:n,1==e&&1==t&&1==n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function c(e,t,n,a,i,r,o,s,l,c,u,d,f,h,p,A){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=a,this.props[4]=i,this.props[5]=r,this.props[6]=o,this.props[7]=s,this.props[8]=l,this.props[9]=c,this.props[10]=u,this.props[11]=d,this.props[12]=f,this.props[13]=h,this.props[14]=p,this.props[15]=A,this}function u(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function d(e,t,n,a,i,r,o,s,l,c,u,d,f,h,p,A){if(1===e&&0===t&&0===n&&0===a&&0===i&&1===r&&0===o&&0===s&&0===l&&0===c&&1===u&&0===d)return 0===f&&0===h&&0===p||(this.props[12]=this.props[12]*e+this.props[13]*i+this.props[14]*l+this.props[15]*f,this.props[13]=this.props[12]*t+this.props[13]*r+this.props[14]*c+this.props[15]*h,this.props[14]=this.props[12]*n+this.props[13]*o+this.props[14]*u+this.props[15]*p,this.props[15]=this.props[12]*a+this.props[13]*s+this.props[14]*d+this.props[15]*A),this._identityCalculated=!1,this;var m=this.props[0],_=this.props[1],v=this.props[2],g=this.props[3],y=this.props[4],b=this.props[5],w=this.props[6],E=this.props[7],k=this.props[8],S=this.props[9],C=this.props[10],M=this.props[11],P=this.props[12],T=this.props[13],D=this.props[14],I=this.props[15];return this.props[0]=m*e+_*i+v*l+g*f,this.props[1]=m*t+_*r+v*c+g*h,this.props[2]=m*n+_*o+v*u+g*p,this.props[3]=m*a+_*s+v*d+g*A,this.props[4]=y*e+b*i+w*l+E*f,this.props[5]=y*t+b*r+w*c+E*h,this.props[6]=y*n+b*o+w*u+E*p,this.props[7]=y*a+b*s+w*d+E*A,this.props[8]=k*e+S*i+C*l+M*f,this.props[9]=k*t+S*r+C*c+M*h,this.props[10]=k*n+S*o+C*u+M*p,this.props[11]=k*a+S*s+C*d+M*A,this.props[12]=P*e+T*i+D*l+I*f,this.props[13]=P*t+T*r+D*c+I*h,this.props[14]=P*n+T*o+D*u+I*p,this.props[15]=P*a+T*s+D*d+I*A,this._identityCalculated=!1,this}function f(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function h(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t]}function p(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function A(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function m(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function _(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function v(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function g(e){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],n=this.props[5]/t,a=-this.props[1]/t,i=-this.props[4]/t,r=this.props[0]/t,o=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,s=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t;return[e[0]*n+e[1]*i+o,e[0]*a+e[1]*r+s,0]}function y(e){var t,n=e.length,a=[];for(t=0;t<n;t+=1)a[t]=g(e[t]);return a}function b(e,t,n,a){if(a&&2===a){var i=point_pool.newPoint();return i[0]=e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],i[1]=e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],i}return[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function w(e,t){return this.isIdentity()?e+","+t:bm_rnd(e*this.props[0]+t*this.props[4]+this.props[12])+","+bm_rnd(e*this.props[1]+t*this.props[5]+this.props[13])}function E(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function k(){return isSafari?"matrix3d("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[2])+","+roundTo2Decimals(this.props[3])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[6])+","+roundTo2Decimals(this.props[7])+","+roundTo2Decimals(this.props[8])+","+roundTo2Decimals(this.props[9])+","+roundTo2Decimals(this.props[10])+","+roundTo2Decimals(this.props[11])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+","+roundTo2Decimals(this.props[14])+","+roundTo2Decimals(this.props[15])+")":(this.cssParts[1]=this.props.join(","),this.cssParts.join(""))}function S(){return"matrix("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+")"}function C(){return""+this.toArray()}return function(){this.reset=e,this.rotate=t,this.rotateX=n,this.rotateY=a,this.rotateZ=i,this.skew=o,this.skewFromAxis=s,this.shear=r,this.scale=l,this.setTransform=c,this.translate=u,this.transform=d,this.applyToPoint=A,this.applyToX=m,this.applyToY=_,this.applyToZ=v,this.applyToPointArray=b,this.applyToPointStringified=w,this.toArray=E,this.toCSS=k,this.to2dCSS=S,this.toString=C,this.clone=h,this.cloneFromProps=p,this.inversePoints=y,this.inversePoint=g,this._t=this.transform,this.isIdentity=f,this._identity=!0,this._identityCalculated=!1,this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.cssParts=["matrix3d(","",")"]}}();function Matrix(){}!function(e,t){var n,a=this,i=256,r=6,o="random",s=t.pow(i,r),l=t.pow(2,52),c=2*l,u=i-1;function d(e){var t,n=e.length,a=this,r=0,o=a.i=a.j=0,s=a.S=[];for(n||(e=[n++]);r<i;)s[r]=r++;for(r=0;r<i;r++)s[r]=s[o=u&o+e[r%n]+(t=s[r])],s[o]=t;(a.g=function(e){for(var t,n=0,r=a.i,o=a.j,s=a.S;e--;)t=s[r=u&r+1],n=n*i+s[u&(s[r]=s[o=u&o+t])+(s[o]=t)];return a.i=r,a.j=o,n})(i)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){for(var n,a=e+"",i=0;i<a.length;)t[u&i]=u&(n^=19*t[u&i])+a.charCodeAt(i++);return p(t)}function p(e){return String.fromCharCode.apply(0,e)}t["seed"+o]=function(u,A,m){var _=[],v=h(function e(t,n){var a,i=[],r=typeof t;if(n&&"object"==r)for(a in t)try{i.push(e(t[a],n-1))}catch(e){}return i.length?i:"string"==r?t:t+"\0"}((A=1==A?{entropy:!0}:A||{}).entropy?[u,p(e)]:null==u?function(){try{if(n)return p(n.randomBytes(i));var t=new Uint8Array(i);return(a.crypto||a.msCrypto).getRandomValues(t),p(t)}catch(t){var r=a.navigator,o=r&&r.plugins;return[+new Date,a,o,a.screen,p(e)]}}():u,3),_),g=new d(_),y=function(){for(var e=g.g(r),t=s,n=0;e<l;)e=(e+n)*i,t*=i,n=g.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,h(p(g.S),e),(A.pass||m||function(e,n,a,i){return i&&(i.S&&f(i,g),e.state=function(){return f(g,{})}),a?(t[o]=e,n):e})(y,v,"global"in A?A.global:this==t,A.state)},h(t.random(),e)}([],BMMath);var BezierFactory=function(){var e={getBezierEasing:function(e,n,a,i,r){var o=r||("bez_"+e+"_"+n+"_"+a+"_"+i).replace(/\./g,"p");if(t[o])return t[o];var s=new h([e,n,a,i]);return t[o]=s,s}},t={},n=4,a=1e-7,i=10,r=11,o=1/(r-1),s="function"==typeof Float32Array;function l(e,t){return 1-3*t+3*e}function c(e,t){return 3*t-6*e}function u(e){return 3*e}function d(e,t,n){return((l(t,n)*e+c(t,n))*e+u(t))*e}function f(e,t,n){return 3*l(t,n)*e*e+2*c(t,n)*e+u(t)}function h(e){this._p=e,this._mSampleValues=s?new Float32Array(r):new Array(r),this._precomputed=!1,this.get=this.get.bind(this)}return h.prototype={get:function(e){var t=this._p[0],n=this._p[1],a=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===n&&a===i?e:0===e?0:1===e?1:d(this._getTForX(e),n,i)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],a=this._p[3];this._precomputed=!0,e===t&&n===a||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],n=0;n<r;++n)this._mSampleValues[n]=d(n*o,e,t)},_getTForX:function(e){for(var t=this._p[0],s=this._p[2],l=this._mSampleValues,c=0,u=1,h=r-1;u!==h&&l[u]<=e;++u)c+=o;var p=c+(e-l[--u])/(l[u+1]-l[u])*o,A=f(p,t,s);return A>=.001?function(e,t,a,i){for(var r=0;r<n;++r){var o=f(t,a,i);if(0===o)return t;t-=(d(t,a,i)-e)/o}return t}(e,p,t,s):0===A?p:function(e,t,n,r,o){var s,l,c=0;do{(s=d(l=t+(n-t)/2,r,o)-e)>0?n=l:t=l}while(Math.abs(s)>a&&++c<i);return l}(e,c,c+o,t,s)}},e}();function createElement(e,t,n){if(!t){var a=Object.create(e.prototype,n);return a&&"[object Function]"==={}.toString.call(a.init)&&a.init(),a}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._parent=e.prototype}function extendPrototype(e,t){for(var n in e.prototype)e.prototype.hasOwnProperty(n)&&(t.prototype[n]=e.prototype[n])}function bezFunction(){function e(e,t,n,a,i,r){var o=e*a+t*i+n*r-i*a-r*e-n*t;return o>-1e-4&&o<1e-4}Math;var t=function(){function e(e,t){this.l=e,this.p=t}return function(t,n,a,i){var r,o,s,l,c,u,d=defaultCurveSegments,f=0,h=[],p=[],A={addedLength:0,segments:[]};for(s=a.length,r=0;r<d;r+=1){for(c=r/(d-1),u=0,o=0;o<s;o+=1)l=bm_pow(1-c,3)*t[o]+3*bm_pow(1-c,2)*c*a[o]+3*(1-c)*bm_pow(c,2)*i[o]+bm_pow(c,3)*n[o],h[o]=l,null!==p[o]&&(u+=bm_pow(h[o]-p[o],2)),p[o]=h[o];u&&(f+=u=bm_sqrt(u)),A.segments.push(new e(f,c))}return A.addedLength=f,A}}();function n(e){this.segmentLength=0,this.points=new Array(e)}function a(e,t){this.partialLength=e,this.point=t}var i,r=(i={},function(t){var r=t.s,o=t.e,s=t.to,l=t.ti,c=(r.join("_")+"_"+o.join("_")+"_"+s.join("_")+"_"+l.join("_")).replace(/\./g,"p");if(i[c])t.bezierData=i[c];else{var u,d,f,h,p,A,m,_=defaultCurveSegments,v=0,g=null;2===r.length&&(r[0]!=o[0]||r[1]!=o[1])&&e(r[0],r[1],o[0],o[1],r[0]+s[0],r[1]+s[1])&&e(r[0],r[1],o[0],o[1],o[0]+l[0],o[1]+l[1])&&(_=2);var y=new n(_);for(f=s.length,u=0;u<_;u+=1){for(m=new Array(f),p=u/(_-1),A=0,d=0;d<f;d+=1)h=bm_pow(1-p,3)*r[d]+3*bm_pow(1-p,2)*p*(r[d]+s[d])+3*(1-p)*bm_pow(p,2)*(o[d]+l[d])+bm_pow(p,3)*o[d],m[d]=h,null!==g&&(A+=bm_pow(m[d]-g[d],2));v+=A=bm_sqrt(A),y.points[u]=new a(A,m),g=m}y.segmentLength=v,t.bezierData=y,i[c]=y}});function o(e,t){var n=t.segments,a=n.length,i=bm_floor((a-1)*e),r=e*t.addedLength,o=0;if(r==n[i].l)return n[i].p;for(var s=n[i].l>r?-1:1,l=!0;l;)n[i].l<=r&&n[i+1].l>r?(o=(r-n[i].l)/(n[i+1].l-n[i].l),l=!1):i+=s,(i<0||i>=a-1)&&(l=!1);return n[i].p+(n[i+1].p-n[i].p)*o}function s(){this.pt1=new Array(2),this.pt2=new Array(2),this.pt3=new Array(2),this.pt4=new Array(2)}return{getBezierLength:t,getSegmentsLength:function(e){var n,a=e.c,i=e.v,r=e.o,o=e.i,s=e._length,l=[],c=0;for(n=0;n<s-1;n+=1)l[n]=t(i[n],i[n+1],r[n],o[n+1]),c+=l[n].addedLength;return a&&(l[n]=t(i[n],i[0],r[n],o[0]),c+=l[n].addedLength),{lengths:l,totalLength:c}},getNewSegment:function(e,t,n,a,i,r,l){var c,u=new s,d=o(i=i<0?0:i>1?1:i,l),f=o(r=r>1?1:r,l),h=e.length,p=1-d,A=1-f;for(c=0;c<h;c+=1)u.pt1[c]=Math.round(1e3*(p*p*p*e[c]+(d*p*p+p*d*p+p*p*d)*n[c]+(d*d*p+p*d*d+d*p*d)*a[c]+d*d*d*t[c]))/1e3,u.pt3[c]=Math.round(1e3*(p*p*A*e[c]+(d*p*A+p*d*A+p*p*f)*n[c]+(d*d*A+p*d*f+d*p*f)*a[c]+d*d*f*t[c]))/1e3,u.pt4[c]=Math.round(1e3*(p*A*A*e[c]+(d*A*A+p*f*A+p*A*f)*n[c]+(d*f*A+p*f*f+d*A*f)*a[c]+d*f*f*t[c]))/1e3,u.pt2[c]=Math.round(1e3*(A*A*A*e[c]+(f*A*A+A*f*A+A*A*f)*n[c]+(f*f*A+A*f*f+f*A*f)*a[c]+f*f*f*t[c]))/1e3;return u},getPointInSegment:function(e,t,n,a,i,r){var s=o(i,r),l=1-s;return[Math.round(1e3*(l*l*l*e[0]+(s*l*l+l*s*l+l*l*s)*n[0]+(s*s*l+l*s*s+s*l*s)*a[0]+s*s*s*t[0]))/1e3,Math.round(1e3*(l*l*l*e[1]+(s*l*l+l*s*l+l*l*s)*n[1]+(s*s*l+l*s*s+s*l*s)*a[1]+s*s*s*t[1]))/1e3]},buildBezierData:r,pointOnLine2D:e,pointOnLine3D:function(t,n,a,i,r,o,s,l,c){if(0===a&&0===o&&0===c)return e(t,n,i,r,s,l);var u,d=Math.sqrt(Math.pow(i-t,2)+Math.pow(r-n,2)+Math.pow(o-a,2)),f=Math.sqrt(Math.pow(s-t,2)+Math.pow(l-n,2)+Math.pow(c-a,2)),h=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-r,2)+Math.pow(c-o,2));return(u=d>f?d>h?d-f-h:h-f-d:h>f?h-f-d:f-d-h)>-1e-4&&u<1e-4}}}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),r=setTimeout(function(){t(a+i)},i);return e=a+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction();function dataFunctionManager(){function e(e,t){for(var n=0,a=t.length;n<a;){if(t[n].id===e)return t[n].layers.__used?JSON.parse(JSON.stringify(t[n].layers)):(t[n].layers.__used=!0,t[n].layers);n+=1}}function t(e){var a,i,r;for(a=e.length-1;a>=0;a-=1)if("sh"==e[a].ty)if(e[a].ks.k.i)n(e[a].ks.k);else for(r=e[a].ks.k.length,i=0;i<r;i+=1)e[a].ks.k[i].s&&n(e[a].ks.k[i].s[0]),e[a].ks.k[i].e&&n(e[a].ks.k[i].e[0]);else"gr"==e[a].ty&&t(e[a].it)}function n(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function a(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&void 0))}var i,r=function(){var e=[4,4,14];function t(e){var t,n,a,i=e.length;for(t=0;t<i;t+=1)5===e[t].ty&&(n=e[t],a=void 0,a=n.t.d,n.t.d={k:[{s:a,t:0}]})}return function(n){if(a(e,n.v)&&(t(n.layers),n.assets)){var i,r=n.assets.length;for(i=0;i<r;i+=1)n.assets[i].layers&&t(n.assets[i].layers)}}}(),o=(i=[4,7,99],function(e){if(e.chars&&!a(i,e.v)){var t,r,o,s,l,c=e.chars.length;for(t=0;t<c;t+=1)if(e.chars[t].data&&e.chars[t].data.shapes)for(o=(l=e.chars[t].data.shapes[0].it).length,r=0;r<o;r+=1)(s=l[r].ks.k).__converted||(n(l[r].ks.k),s.__converted=!0)}}),s=function(){var e=[4,1,9];function t(e){var n,a,i,r=e.length;for(n=0;n<r;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(i=e[n].c.k.length,a=0;a<i;a+=1)e[n].c.k[a].s&&(e[n].c.k[a].s[0]/=255,e[n].c.k[a].s[1]/=255,e[n].c.k[a].s[2]/=255,e[n].c.k[a].s[3]/=255),e[n].c.k[a].e&&(e[n].c.k[a].e[0]/=255,e[n].c.k[a].e[1]/=255,e[n].c.k[a].e[2]/=255,e[n].c.k[a].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,a=e.length;for(n=0;n<a;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(a(e,t.v)&&(n(t.layers),t.assets)){var i,r=t.assets.length;for(i=0;i<r;i+=1)t.assets[i].layers&&n(t.assets[i].layers)}}}(),l=function(){var e=[4,4,18];function t(e){var n,a,i;for(n=e.length-1;n>=0;n-=1)if("sh"==e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(i=e[n].ks.k.length,a=0;a<i;a+=1)e[n].ks.k[a].s&&(e[n].ks.k[a].s[0].c=e[n].closed),e[n].ks.k[a].e&&(e[n].ks.k[a].e[0].c=e[n].closed);else"gr"==e[n].ty&&t(e[n].it)}function n(e){var n,a,i,r,o,s,l=e.length;for(a=0;a<l;a+=1){if((n=e[a]).hasMask){var c=n.masksProperties;for(r=c.length,i=0;i<r;i+=1)if(c[i].pt.k.i)c[i].pt.k.c=c[i].cl;else for(s=c[i].pt.k.length,o=0;o<s;o+=1)c[i].pt.k[o].s&&(c[i].pt.k[o].s[0].c=c[i].cl),c[i].pt.k[o].e&&(c[i].pt.k[o].e[0].c=c[i].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(a(e,t.v)&&(n(t.layers),t.assets)){var i,r=t.assets.length;for(i=0;i<r;i+=1)t.assets[i].layers&&n(t.assets[i].layers)}}}();function c(e,t){0!==e.t.a.length||"m"in e.t.p||(e.singleShape=!0)}var u={};return u.completeData=function(a,i){a.__complete||(s(a),r(a),o(a),l(a),function a(i,r,o){var s,l,u,d,f,h,p=i.length;for(l=0;l<p;l+=1)if("ks"in(s=i[l])&&!s.completed){if(s.completed=!0,s.tt&&(i[l-1].td=s.tt),s.hasMask){var A=s.masksProperties;for(d=A.length,u=0;u<d;u+=1)if(A[u].pt.k.i)n(A[u].pt.k);else for(h=A[u].pt.k.length,f=0;f<h;f+=1)A[u].pt.k[f].s&&n(A[u].pt.k[f].s[0]),A[u].pt.k[f].e&&n(A[u].pt.k[f].e[0])}0===s.ty?(s.layers=e(s.refId,r),a(s.layers,r,o)):4===s.ty?t(s.shapes):5==s.ty&&c(s)}}(a.layers,a.assets,i),a.__complete=!0)},u}var dataManager=dataFunctionManager(),FontManager=function(){var e=5e3;function t(e,t){var n=document.createElement("span");n.style.fontFamily=t;var a=document.createElement("span");a.innerHTML="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(a),document.body.appendChild(n);var i=a.offsetWidth;return a.style.fontFamily=e+", "+t,{node:a,w:i,parent:n}}function n(e,t){var n=document.createElementNS(svgNS,"text");n.style.fontSize="100px",n.style.fontFamily=t.fFamily,n.textContent="1",t.fClass?(n.style.fontFamily="inherit",n.className=t.fClass):n.style.fontFamily=t.fFamily,e.appendChild(n);var a=document.createElement("canvas").getContext("2d");return a.font="100px "+t.fFamily,a}var a=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.loaded=!1,this.initTime=Date.now()};return a.prototype.addChars=function(e){if(e){this.chars||(this.chars=[]);var t,n,a,i=e.length,r=this.chars.length;for(t=0;t<i;t+=1){for(n=0,a=!1;n<r;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(a=!0),n+=1;a||(this.chars.push(e[t]),r+=1)}}},a.prototype.addFonts=function(a,i){if(a){if(this.chars)return this.loaded=!0,void(this.fonts=a.list);var r,o=a.list,s=o.length;for(r=0;r<s;r+=1){if(o[r].loaded=!1,o[r].monoCase=t(o[r].fFamily,"monospace"),o[r].sansCase=t(o[r].fFamily,"sans-serif"),o[r].fPath){if("p"===o[r].fOrigin||3===o[r].origin){var l=document.createElement("style");l.type="text/css",l.innerHTML="@font-face {font-family: "+o[r].fFamily+"; font-style: normal; src: url('"+o[r].fPath+"');}",i.appendChild(l)}else if("g"===o[r].fOrigin||1===o[r].origin){var c=document.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=o[r].fPath,i.appendChild(c)}else if("t"===o[r].fOrigin||2===o[r].origin){var u=document.createElement("script");u.setAttribute("src",o[r].fPath),i.appendChild(u)}}else o[r].loaded=!0;o[r].helper=n(i,o[r]),this.fonts.push(o[r])}(function t(){var n,a,i,r=this.fonts.length,o=r;for(n=0;n<r;n+=1)if(this.fonts[n].loaded)o-=1;else if("t"===this.fonts[n].fOrigin||2===this.fonts[n].origin){if(window.Typekit&&window.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{window.Typekit.load({async:!0,active:function(){this.typekitLoaded=2}.bind(this)})}catch(e){}}2===this.typekitLoaded&&(this.fonts[n].loaded=!0)}else"n"===this.fonts[n].fOrigin||0===this.fonts[n].origin?this.fonts[n].loaded=!0:(a=this.fonts[n].monoCase.node,i=this.fonts[n].monoCase.w,a.offsetWidth!==i?(o-=1,this.fonts[n].loaded=!0):(a=this.fonts[n].sansCase.node,i=this.fonts[n].sansCase.w,a.offsetWidth!==i&&(o-=1,this.fonts[n].loaded=!0)),this.fonts[n].loaded&&(this.fonts[n].sansCase.parent.parentNode.removeChild(this.fonts[n].sansCase.parent),this.fonts[n].monoCase.parent.parentNode.removeChild(this.fonts[n].monoCase.parent)));0!==o&&Date.now()-this.initTime<e?setTimeout(t.bind(this),20):setTimeout(function(){this.loaded=!0}.bind(this),0)}).bind(this)()}else this.loaded=!0},a.prototype.getCharData=function(e,t,n){for(var a=0,i=this.chars.length;a<i;){if(this.chars[a].ch===e&&this.chars[a].style===t&&this.chars[a].fFamily===n)return this.chars[a];a+=1}},a.prototype.getFontByName=function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return"sans-serif"},a.prototype.measureText=function(e,t,n){return this.getFontByName(t).helper.measureText(e).width*n/100},a}(),PropertyFactory=function(){var e=-999999;function t(e,t,n,a){var i,r=this.offsetTime;n.constructor===Array&&(i=Array.apply(null,{length:n.length}));for(var o,s,l,c,u,d,f,h,p=t,A=this.keyframes.length-1,m=!0;m;){if(o=this.keyframes[p],s=this.keyframes[p+1],p==A-1&&e>=s.t-r){o.h&&(o=s),t=0;break}if(s.t-r>e){t=p;break}p<A-1?p+=1:(t=0,m=!1)}if(o.to){o.bezierData||bez.buildBezierData(o);var _=o.bezierData;if(e>=s.t-r||e<o.t-r){var v=e>=s.t-r?_.points.length-1:0;for(c=_.points[v].point.length,l=0;l<c;l+=1)i[l]=_.points[v].point[l];a._lastBezierData=null}else{o.__fnct?h=o.__fnct:(h=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,o.__fnct=h),u=h((e-(o.t-r))/(s.t-r-(o.t-r)));var g,y=_.segmentLength*u,b=a.lastFrame<e&&a._lastBezierData===_?a._lastAddedLength:0;for(f=a.lastFrame<e&&a._lastBezierData===_?a._lastPoint:0,m=!0,d=_.points.length;m;){if(b+=_.points[f].partialLength,0===y||0===u||f==_.points.length-1){for(c=_.points[f].point.length,l=0;l<c;l+=1)i[l]=_.points[f].point[l];break}if(y>=b&&y<b+_.points[f+1].partialLength){for(g=(y-b)/_.points[f+1].partialLength,c=_.points[f].point.length,l=0;l<c;l+=1)i[l]=_.points[f].point[l]+(_.points[f+1].point[l]-_.points[f].point[l])*g;break}f<d-1?f+=1:m=!1}a._lastPoint=f,a._lastAddedLength=b-_.points[f].partialLength,a._lastBezierData=_}}else{var w,E,k,S,C;for(A=o.s.length,p=0;p<A;p+=1){if(1!==o.h&&(e>=s.t-r?u=1:e<o.t-r?u=0:(o.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[p]?h=o.__fnct[p]:(w=o.o.x[p]||o.o.x[0],E=o.o.y[p]||o.o.y[0],k=o.i.x[p]||o.i.x[0],S=o.i.y[p]||o.i.y[0],h=BezierFactory.getBezierEasing(w,E,k,S).get,o.__fnct[p]=h)):o.__fnct?h=o.__fnct:(w=o.o.x,E=o.o.y,k=o.i.x,S=o.i.y,h=BezierFactory.getBezierEasing(w,E,k,S).get,o.__fnct=h),u=h((e-(o.t-r))/(s.t-r-(o.t-r))))),this.sh&&1!==o.h){var M=o.s[p],P=o.e[p];M-P<-180?M+=360:M-P>180&&(M-=360),C=M+(P-M)*u}else C=1===o.h?o.s[p]:o.s[p]+(o.e[p]-o.s[p])*u;1===A?i=C:i[p]=C}}return{value:i,iterationIndex:t}}function n(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,a=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==e&&(this._caching.lastFrame>=a&&t>=a||this._caching.lastFrame<n&&t<n))){var i=this._caching.lastFrame<t?this._caching.lastIndex:0,r=this.interpolateValue(t,i,this.pv,this._caching);if(this._caching.lastIndex=r.iterationIndex,this.pv.constructor===Array)for(i=0;i<this.v.length;)this.pv[i]=r.value[i],this.v[i]=this.mult?this.pv[i]*this.mult:this.pv[i],this.lastPValue[i]!==this.pv[i]&&(this.mdf=!0,this.lastPValue[i]=this.pv[i]),i+=1;else this.pv=r.value,this.v=this.mult?this.pv*this.mult:this.pv,this.lastPValue!=this.pv&&(this.mdf=!0,this.lastPValue=this.pv)}this._caching.lastFrame=t,this.frameId=this.elem.globalData.frameId}}function a(){}function i(e,t,n){this.mult=n,this.v=n?t.k*n:t.k,this.pv=t.k,this.mdf=!1,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.getValue=a}function r(e,t,n){this.mult=n,this.data=t,this.mdf=!1,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1,this.v=Array.apply(null,{length:t.k.length}),this.pv=Array.apply(null,{length:t.k.length}),this.lastValue=Array.apply(null,{length:t.k.length});var i=Array.apply(null,{length:t.k.length});this.vel=i.map(function(){return 0});var r,o=t.k.length;for(r=0;r<o;r+=1)this.v[r]=n?t.k[r]*n:t.k[r],this.pv[r]=t.k[r];this.getValue=a}function o(a,i,r){this.keyframes=i.k,this.offsetTime=a.data.st,this.lastValue=-99999,this.lastPValue=-99999,this.frameId=-1,this._caching={lastFrame:e,lastIndex:0},this.k=!0,this.kf=!0,this.data=i,this.mult=r,this.elem=a,this.comp=a.comp,this.v=r?i.k[0].s[0]*r:i.k[0].s[0],this.pv=i.k[0].s[0],this.getValue=n,this.interpolateValue=t}function s(a,i,r){var o,s,l,c,u,d=i.k.length;for(o=0;o<d-1;o+=1)i.k[o].to&&i.k[o].s&&i.k[o].e&&(s=i.k[o].s,l=i.k[o].e,c=i.k[o].to,u=i.k[o].ti,(2===s.length&&(s[0]!==l[0]||s[1]!==l[1])&&bez.pointOnLine2D(s[0],s[1],l[0],l[1],s[0]+c[0],s[1]+c[1])&&bez.pointOnLine2D(s[0],s[1],l[0],l[1],l[0]+u[0],l[1]+u[1])||3===s.length&&(s[0]!==l[0]||s[1]!==l[1]||s[2]!==l[2])&&bez.pointOnLine3D(s[0],s[1],s[2],l[0],l[1],l[2],s[0]+c[0],s[1]+c[1],s[2]+c[2])&&bez.pointOnLine3D(s[0],s[1],s[2],l[0],l[1],l[2],l[0]+u[0],l[1]+u[1],l[2]+u[2]))&&(i.k[o].to=null,i.k[o].ti=null));this.keyframes=i.k,this.offsetTime=a.data.st,this.k=!0,this.kf=!0,this.mult=r,this.elem=a,this.comp=a.comp,this._caching={lastFrame:e,lastIndex:0},this.getValue=n,this.interpolateValue=t,this.frameId=-1,this.v=Array.apply(null,{length:i.k[0].s.length}),this.pv=Array.apply(null,{length:i.k[0].s.length}),this.lastValue=Array.apply(null,{length:i.k[0].s.length}),this.lastPValue=Array.apply(null,{length:i.k[0].s.length})}var l=function(){function e(){return this.p?ExpressionValue(this.p):[this.px.v,this.py.v,this.pz?this.pz.v:0]}function t(){return ExpressionValue(this.px)}function n(){return ExpressionValue(this.py)}function a(){return ExpressionValue(this.a)}function i(){return ExpressionValue(this.or)}function r(){return this.r?ExpressionValue(this.r,1/degToRads):ExpressionValue(this.rz,1/degToRads)}function o(){return ExpressionValue(this.s,100)}function s(){return ExpressionValue(this.o,100)}function l(){return ExpressionValue(this.sk)}function c(){return ExpressionValue(this.sa)}function u(e){var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function d(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var e,t,n,a=this.dynamicProperties.length;for(e=0;e<a;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);if(this.mdf)this.v.reset(),this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&this.p.keyframes&&this.p.getValueAtTime&&(this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(t=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/this.elem.globalData.frameRate,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/this.elem.globalData.frameRate,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(t=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/this.elem.globalData.frameRate,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.01)/this.elem.globalData.frameRate,0)):(t=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/this.elem.globalData.frameRate,this.p.offsetTime)),this.v.rotate(-Math.atan2(t[1]-n[1],t[0]-n[0]))),this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);this.frameId=this.elem.globalData.frameId}}function f(){this.inverted=!0,this.iv=new Matrix,this.k||(this.data.p.s?this.iv.translate(this.px.v,this.py.v,-this.pz.v):this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]),this.r?this.iv.rotate(-this.r.v):this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.s&&this.iv.scale(this.s.v[0],this.s.v[1],1),this.a&&this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]))}function h(){}return function(p,A,m){this.elem=p,this.frameId=-1,this.type="transform",this.dynamicProperties=[],this.mdf=!1,this.data=A,this.getValue=d,this.applyToMatrix=u,this.setInverted=f,this.autoOrient=h,this.v=new Matrix,A.p.s?(this.px=PropertyFactory.getProp(p,A.p.x,0,0,this.dynamicProperties),this.py=PropertyFactory.getProp(p,A.p.y,0,0,this.dynamicProperties),A.p.z&&(this.pz=PropertyFactory.getProp(p,A.p.z,0,0,this.dynamicProperties))):this.p=PropertyFactory.getProp(p,A.p,1,0,this.dynamicProperties),A.r?this.r=PropertyFactory.getProp(p,A.r,0,degToRads,this.dynamicProperties):A.rx&&(this.rx=PropertyFactory.getProp(p,A.rx,0,degToRads,this.dynamicProperties),this.ry=PropertyFactory.getProp(p,A.ry,0,degToRads,this.dynamicProperties),this.rz=PropertyFactory.getProp(p,A.rz,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(p,A.or,1,degToRads,this.dynamicProperties),this.or.sh=!0),A.sk&&(this.sk=PropertyFactory.getProp(p,A.sk,0,degToRads,this.dynamicProperties),this.sa=PropertyFactory.getProp(p,A.sa,0,degToRads,this.dynamicProperties)),A.a&&(this.a=PropertyFactory.getProp(p,A.a,1,0,this.dynamicProperties)),A.s&&(this.s=PropertyFactory.getProp(p,A.s,1,.01,this.dynamicProperties)),A.o?this.o=PropertyFactory.getProp(p,A.o,0,.01,this.dynamicProperties):this.o={mdf:!1,v:1},this.dynamicProperties.length?m.push(this):(this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?A.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),Object.defineProperty(this,"position",{get:e}),Object.defineProperty(this,"xPosition",{get:t}),Object.defineProperty(this,"yPosition",{get:n}),Object.defineProperty(this,"orientation",{get:i}),Object.defineProperty(this,"anchorPoint",{get:a}),Object.defineProperty(this,"rotation",{get:r}),Object.defineProperty(this,"scale",{get:o}),Object.defineProperty(this,"opacity",{get:s}),Object.defineProperty(this,"skew",{get:l}),Object.defineProperty(this,"skewAxis",{get:c})}}();function c(e,t,n,a,c){var u;if(2===n)u=new l(e,t,c);else if(0===t.a)u=0===n?new i(e,t,a):new r(e,t,a);else if(1===t.a)u=0===n?new o(e,t,a):new s(e,t,a);else if(t.k.length)if("number"==typeof t.k[0])u=new r(e,t,a);else switch(n){case 0:u=new o(e,t,a);break;case 1:u=new s(e,t,a)}else u=new i(e,t,a);return u.k&&c.push(u),u}var u=function(){function e(e){if(this.prop.getValue(),this.cmdf=!1,this.omdf=!1,this.prop.mdf||e){var t,n,a,i=4*this.data.p;for(t=0;t<i;t+=1)n=t%4==0?100:255,a=Math.round(this.prop.v[t]*n),this.c[t]!==a&&(this.c[t]=a,this.cmdf=!0);if(this.o.length)for(i=this.prop.v.length,t=4*this.data.p;t<i;t+=1)n=t%2==0?100:1,a=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==a&&(this.o[t-4*this.data.p]=a,this.omdf=!0)}}function t(t,n,a){this.prop=c(t,n.k,1,null,[]),this.data=n,this.k=this.prop.k,this.c=Array.apply(null,{length:4*n.p});var i=n.k.k[0].s?n.k.k[0].s.length-4*n.p:n.k.k.length-4*n.p;this.o=Array.apply(null,{length:i}),this.cmdf=!1,this.omdf=!1,this.getValue=e,this.prop.k&&a.push(this),this.getValue(!0)}return function(e,n,a){return new t(e,n,a)}}(),d=function(){function e(e){var t=0,n=this.dataProps.length;if(this.elem.globalData.frameId!==this.frameId||e){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId;t<n;){if(this.dataProps[t].p.mdf){this.mdf=!0;break}t+=1}if(this.mdf||e)for("svg"===this.renderer&&(this.dasharray=""),t=0;t<n;t+=1)"o"!=this.dataProps[t].n?"svg"===this.renderer?this.dasharray+=" "+this.dataProps[t].p.v:this.dasharray[t]=this.dataProps[t].p.v:this.dashoffset=this.dataProps[t].p.v}}return function(t,n,a,i){this.elem=t,this.frameId=-1,this.dataProps=new Array(n.length),this.renderer=a,this.mdf=!1,this.k=!1,"svg"===this.renderer?this.dasharray="":this.dasharray=new Array(n.length-1),this.dashoffset=0;var r,o,s=n.length;for(r=0;r<s;r+=1)o=PropertyFactory.getProp(t,n[r].v,0,0,i),this.k=!!o.k||this.k,this.dataProps[r]={n:n[r].n,p:o};this.getValue=e,this.k?i.push(this):this.getValue(!0)}}(),f=function(){var e=Math.max,t=Math.min,n=Math.floor;function a(e){if(this.mdf=e||!1,this.dynamicProperties.length){var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0)}var a=this.elem.textProperty.currentData?this.elem.textProperty.currentData.l.length:0;e&&2===this.data.r&&(this.e.v=a);var i=2===this.data.r?1:100/a,r=this.o.v/i,o=this.s.v/i+r,s=this.e.v/i+r;if(o>s){var l=o;o=s,s=l}this.finalS=o,this.finalE=s}function i(a){var i=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,r=0,o=this.finalS,s=this.finalE,l=this.data.sh;if(2==l)r=i(r=s===o?a>=s?1:0:e(0,t(.5/(s-o)+(a-o)/(s-o),1)));else if(3==l)r=i(r=s===o?a>=s?0:1:1-e(0,t(.5/(s-o)+(a-o)/(s-o),1)));else if(4==l)s===o?r=0:(r=e(0,t(.5/(s-o)+(a-o)/(s-o),1)))<.5?r*=2:r=1-2*(r-.5),r=i(r);else if(5==l){if(s===o)r=0;else{var c=s-o,u=-c/2+(a=t(e(0,a+.5-o),s-o)),d=c/2;r=Math.sqrt(1-u*u/(d*d))}r=i(r)}else 6==l?(s===o?r=0:(a=t(e(0,a+.5-o),s-o),r=(1+Math.cos(Math.PI+2*Math.PI*a/(s-o)))/2),r=i(r)):(a>=n(o)&&(r=a-o<0?1-(o-a):e(0,t(s-a,1))),r=i(r));return r*this.a.v}return function(e,t,n){this.mdf=!1,this.k=!1,this.data=t,this.dynamicProperties=[],this.getValue=a,this.getMult=i,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this.dynamicProperties),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this.dynamicProperties):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this.dynamicProperties),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this.dynamicProperties),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this.dynamicProperties),this.a=PropertyFactory.getProp(e,t.a,0,.01,this.dynamicProperties),this.dynamicProperties.length?n.push(this):this.getValue()}}();return{getProp:c,getDashProp:function(e,t,n,a){return new d(e,t,n,a)},getTextSelectorProp:function(e,t,n){return new f(e,t,n)},getGradientProp:u}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=Array.apply(null,{length:this._maxLength}),this.o=Array.apply(null,{length:this._maxLength}),this.i=Array.apply(null,{length:this._maxLength})}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=point_pool.newPoint(),this.o[n]=point_pool.newPoint(),this.i[n]=point_pool.newPoint(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(Array.apply(null,{length:this._maxLength})),this.i=this.i.concat(Array.apply(null,{length:this._maxLength})),this.o=this.o.concat(Array.apply(null,{length:this._maxLength})),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,a,i){var r;switch(this._length=Math.max(this._length,a+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":r=this.v;break;case"i":r=this.i;break;case"o":r=this.o}(!r[a]||r[a]&&!i)&&(r[a]=point_pool.newPoint()),r[a][0]=e,r[a][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,a,i,r,o,s){this.setXYAt(e,t,"v",o,s),this.setXYAt(n,a,"o",o,s),this.setXYAt(i,r,"i",o,s)};var ShapePropertyFactory=function(){var e=-999999;function t(e,t,n,a){var i,r,o;if(e<this.keyframes[0].t-this.offsetTime)i=this.keyframes[0].s[0],o=!0,t=0;else if(e>=this.keyframes[this.keyframes.length-1].t-this.offsetTime)i=1===this.keyframes[this.keyframes.length-2].h?this.keyframes[this.keyframes.length-1].s[0]:this.keyframes[this.keyframes.length-2].e[0],o=!0;else{for(var s,l,c,u,d,f,h,p=t,A=this.keyframes.length-1,m=!0;m&&(s=this.keyframes[p],!((l=this.keyframes[p+1]).t-this.offsetTime>e));)p<A-1?p+=1:m=!1;if(t=p,!(o=1===s.h)){if(e>=l.t-this.offsetTime)h=1;else if(e<s.t-this.offsetTime)h=0;else{var _;s.__fnct?_=s.__fnct:(_=BezierFactory.getBezierEasing(s.o.x,s.o.y,s.i.x,s.i.y).get,s.__fnct=_),h=_((e-(s.t-this.offsetTime))/(l.t-this.offsetTime-(s.t-this.offsetTime)))}r=s.e[0]}i=s.s[0]}u=n._length,f=i.i[0].length;var v,g=!1;for(c=0;c<u;c+=1)for(d=0;d<f;d+=1)o?(v=i.i[c][d],n.i[c][d]!==v&&(n.i[c][d]=v,a&&(this.pv.i[c][d]=v),g=!0),v=i.o[c][d],n.o[c][d]!==v&&(n.o[c][d]=v,a&&(this.pv.o[c][d]=v),g=!0),v=i.v[c][d],n.v[c][d]!==v&&(n.v[c][d]=v,a&&(this.pv.v[c][d]=v),g=!0)):(v=i.i[c][d]+(r.i[c][d]-i.i[c][d])*h,n.i[c][d]!==v&&(n.i[c][d]=v,a&&(this.pv.i[c][d]=v),g=!0),v=i.o[c][d]+(r.o[c][d]-i.o[c][d])*h,n.o[c][d]!==v&&(n.o[c][d]=v,a&&(this.pv.o[c][d]=v),g=!0),v=i.v[c][d]+(r.v[c][d]-i.v[c][d])*h,n.v[c][d]!==v&&(n.v[c][d]=v,a&&(this.pv.v[c][d]=v),g=!0));return g&&(n.c=i.c),{iterationIndex:t,hasModified:g}}function n(){this.paths=this.localShapeCollection,this.k||(this.mdf=!1)}function a(e,t,a){this.__shapeObject=1,this.comp=e.comp,this.k=!1,this.mdf=!1;var i=3===a?t.pt.k:t.ks.k;this.v=shape_pool.clone(i),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n}function i(t,a,i){this.__shapeObject=1,this.comp=t.comp,this.elem=t,this.offsetTime=t.data.st,this._lastIndex=0,this.keyframes=3===i?a.pt.k:a.ks.k,this.k=!0,this.kf=!0;var r=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length,this.v=shape_pool.newShape(),this.v.setPathData(this.keyframes[0].s[0].c,r),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=n}a.prototype.interpolateShape=t,a.prototype.getValue=function(){return this.v},i.prototype.getValue=function(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,a=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(this.lastFrame===e||!(this.lastFrame<n&&t<n||this.lastFrame>a&&t>a)){var i=this.lastFrame<t?this._lastIndex:0,r=this.interpolateShape(t,i,this.v,!0);this._lastIndex=r.iterationIndex,this.mdf=r.hasModified,r.hasModified&&(this.paths=this.localShapeCollection)}this.lastFrame=t,this.frameId=this.elem.globalData.frameId}},i.prototype.interpolateShape=t;var r=function(){var e=roundCorner;function t(){var t=this.p.v[0],n=this.p.v[1],a=this.s.v[0]/2,i=this.s.v[1]/2;3!==this.d?(this.v.v[0][0]=t,this.v.v[0][1]=n-i,this.v.v[1][0]=t+a,this.v.v[1][1]=n,this.v.v[2][0]=t,this.v.v[2][1]=n+i,this.v.v[3][0]=t-a,this.v.v[3][1]=n,this.v.i[0][0]=t-a*e,this.v.i[0][1]=n-i,this.v.i[1][0]=t+a,this.v.i[1][1]=n-i*e,this.v.i[2][0]=t+a*e,this.v.i[2][1]=n+i,this.v.i[3][0]=t-a,this.v.i[3][1]=n+i*e,this.v.o[0][0]=t+a*e,this.v.o[0][1]=n-i,this.v.o[1][0]=t+a,this.v.o[1][1]=n+i*e,this.v.o[2][0]=t-a*e,this.v.o[2][1]=n+i,this.v.o[3][0]=t-a,this.v.o[3][1]=n-i*e):(this.v.v[0][0]=t,this.v.v[0][1]=n-i,this.v.v[1][0]=t-a,this.v.v[1][1]=n,this.v.v[2][0]=t,this.v.v[2][1]=n+i,this.v.v[3][0]=t+a,this.v.v[3][1]=n,this.v.i[0][0]=t+a*e,this.v.i[0][1]=n-i,this.v.i[1][0]=t-a,this.v.i[1][1]=n-i*e,this.v.i[2][0]=t-a*e,this.v.i[2][1]=n+i,this.v.i[3][0]=t+a,this.v.i[3][1]=n+i*e,this.v.o[0][0]=t-a*e,this.v.o[0][1]=n-i,this.v.o[1][0]=t-a,this.v.o[1][1]=n+i*e,this.v.o[2][0]=t+a*e,this.v.o[2][1]=n+i,this.v.o[3][0]=t+a,this.v.o[3][1]=n-i*e)}function a(e){var t,n=this.dynamicProperties.length;if(this.elem.globalData.frameId!==this.frameId){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId,t=0;t<n;t+=1)this.dynamicProperties[t].getValue(e),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&this.convertEllToPath()}}return function(e,i){this.v=shape_pool.newShape(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=i.d,this.dynamicProperties=[],this.elem=e,this.comp=e.comp,this.frameId=-1,this.mdf=!1,this.getValue=a,this.convertEllToPath=t,this.reset=n,this.p=PropertyFactory.getProp(e,i.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(e,i.s,1,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertEllToPath()}}(),o=function(){function e(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,a=this.or.v,i=this.os.v,r=2*Math.PI*a/(4*t),o=-Math.PI/2,s=3===this.data.d?-1:1;for(o+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=a*Math.cos(o),c=a*Math.sin(o),u=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),d=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-u*r*i*s,c-d*r*i*s,l+u*r*i*s,c+d*r*i*s,e,!0),o+=n*s}this.paths.length=0,this.paths[0]=this.v}function t(){var e,t,n,a,i=2*Math.floor(this.pt.v),r=2*Math.PI/i,o=!0,s=this.or.v,l=this.ir.v,c=this.os.v,u=this.is.v,d=2*Math.PI*s/(2*i),f=2*Math.PI*l/(2*i),h=-Math.PI/2;h+=this.r.v;var p=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<i;e+=1){n=o?c:u,a=o?d:f;var A=(t=o?s:l)*Math.cos(h),m=t*Math.sin(h),_=0===A&&0===m?0:m/Math.sqrt(A*A+m*m),v=0===A&&0===m?0:-A/Math.sqrt(A*A+m*m);A+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(A,m,A-_*a*n*p,m-v*a*n*p,A+_*a*n*p,m+v*a*n*p,e,!0),o=!o,h+=r*p}}function a(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertToPath()}}return function(i,r){this.v=shape_pool.newShape(),this.v.setPathData(!0,0),this.elem=i,this.comp=i.comp,this.data=r,this.frameId=-1,this.d=r.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=a,this.reset=n,1===r.sy?(this.ir=PropertyFactory.getProp(i,r.ir,0,0,this.dynamicProperties),this.is=PropertyFactory.getProp(i,r.is,0,.01,this.dynamicProperties),this.convertToPath=t):this.convertToPath=e,this.pt=PropertyFactory.getProp(i,r.pt,0,0,this.dynamicProperties),this.p=PropertyFactory.getProp(i,r.p,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(i,r.r,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(i,r.or,0,0,this.dynamicProperties),this.os=PropertyFactory.getProp(i,r.os,0,.01,this.dynamicProperties),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:this.convertToPath()}}(),s=function(){function e(e){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(e),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&this.convertRectToPath()}}function t(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,a=this.s.v[1]/2,i=bm_min(n,a,this.r.v),r=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-a+i,e+n,t-a+i,e+n,t-a+r,0,!0),this.v.setTripleAt(e+n,t+a-i,e+n,t+a-r,e+n,t+a-i,1,!0),0!==i?(this.v.setTripleAt(e+n-i,t+a,e+n-i,t+a,e+n-r,t+a,2,!0),this.v.setTripleAt(e-n+i,t+a,e-n+r,t+a,e-n+i,t+a,3,!0),this.v.setTripleAt(e-n,t+a-i,e-n,t+a-i,e-n,t+a-r,4,!0),this.v.setTripleAt(e-n,t-a+i,e-n,t-a+r,e-n,t-a+i,5,!0),this.v.setTripleAt(e-n+i,t-a,e-n+i,t-a,e-n+r,t-a,6,!0),this.v.setTripleAt(e+n-i,t-a,e+n-r,t-a,e+n-i,t-a,7,!0)):(this.v.setTripleAt(e-n,t+a,e-n+r,t+a,e-n,t+a,2),this.v.setTripleAt(e-n,t-a,e-n,t-a+r,e-n,t-a,3))):(this.v.setTripleAt(e+n,t-a+i,e+n,t-a+r,e+n,t-a+i,0,!0),0!==i?(this.v.setTripleAt(e+n-i,t-a,e+n-i,t-a,e+n-r,t-a,1,!0),this.v.setTripleAt(e-n+i,t-a,e-n+r,t-a,e-n+i,t-a,2,!0),this.v.setTripleAt(e-n,t-a+i,e-n,t-a+i,e-n,t-a+r,3,!0),this.v.setTripleAt(e-n,t+a-i,e-n,t+a-r,e-n,t+a-i,4,!0),this.v.setTripleAt(e-n+i,t+a,e-n+i,t+a,e-n+r,t+a,5,!0),this.v.setTripleAt(e+n-i,t+a,e+n-r,t+a,e+n-i,t+a,6,!0),this.v.setTripleAt(e+n,t+a-i,e+n,t+a-i,e+n,t+a-r,7,!0)):(this.v.setTripleAt(e-n,t-a,e-n+r,t-a,e-n,t-a,1,!0),this.v.setTripleAt(e-n,t+a,e-n,t+a-r,e-n,t+a,2,!0),this.v.setTripleAt(e+n,t+a,e+n-r,t+a,e+n,t+a,3,!0)))}return function(a,i){this.v=shape_pool.newShape(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=a,this.comp=a.comp,this.frameId=-1,this.d=i.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=e,this.convertRectToPath=t,this.reset=n,this.p=PropertyFactory.getProp(a,i.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(a,i.s,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(a,i.r,0,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertRectToPath()}}(),l={getShapeProp:function(e,t,n,l){var c;if(3===n||4===n){var u=3===n?t.pt:t.ks,d=u.k;c=1===u.a||d.length?new i(e,t,n):new a(e,t,n)}else 5===n?c=new s(e,t):6===n?c=new r(e,t):7===n&&(c=new o(e,t));return c.k&&l.push(c),c},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return i}};return l}(),ShapeModifiers=(ob={},modifiers={},ob.registerModifier=function(e,t){modifiers[e]||(modifiers[e]=t)},ob.getModifier=function(e,t,n,a){return new modifiers[e](t,n,a)},ob),ob,modifiers;function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=Array.apply(null,{length:this._maxLength})}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){this.closed||(this.shapes.push({shape:e.sh,data:e,localShapeCollection:shapeCollection_pool.newShapeCollection()}),this.addShapeToModifier(e.sh))},ShapeModifier.prototype.init=function(e,t,n){this.elem=e,this.frameId=-1,this.shapes=[],this.dynamicProperties=[],this.mdf=!1,this.closed=!1,this.k=!1,this.comp=e.comp,this.initModifierProperties(e,t),this.dynamicProperties.length?(this.k=!0,n.push(this)):this.getValue(!0)},extendPrototype(ShapeModifier,TrimModifier),TrimModifier.prototype.processKeys=function(e){if(this.elem.globalData.frameId!==this.frameId||e){this.mdf=!!e,this.frameId=this.elem.globalData.frameId;var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);if(this.mdf||e){var a=this.o.v%360/360;a<0&&(a+=1);var i=this.s.v+a,r=this.e.v+a;if(i>r){var o=i;i=r,r=o}this.sValue=i,this.eValue=r,this.oValue=a}}},TrimModifier.prototype.initModifierProperties=function(e,t){this.sValue=0,this.eValue=0,this.oValue=0,this.getValue=this.processKeys,this.s=PropertyFactory.getProp(e,t.s,0,.01,this.dynamicProperties),this.e=PropertyFactory.getProp(e,t.e,0,.01,this.dynamicProperties),this.o=PropertyFactory.getProp(e,t.o,0,0,this.dynamicProperties),this.m=t.m,this.dynamicProperties.length||this.getValue(!0)},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,a,i){var r=[];t<=1?r.push({s:e,e:t}):e>=1?r.push({s:e-1,e:t-1}):(r.push({s:e,e:1}),r.push({s:0,e:t-1}));var o,s,l=[],c=r.length;for(o=0;o<c;o+=1){var u,d;(s=r[o]).e*i<a||s.s*i>a+n||(u=s.s*i<=a?0:(s.s*i-a)/n,d=s.e*i>=a+n?1:(s.e*i-a)/n,l.push([u,d]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.processShapes=function(e){var t,n,a,i,r,o=this.shapes.length,s=this.sValue,l=this.eValue,c=0;if(l===s)for(n=0;n<o;n+=1)this.shapes[n].localShapeCollection.releaseShapes(),this.shapes[n].shape.mdf=!0,this.shapes[n].shape.paths=this.shapes[n].localShapeCollection;else if(1===l&&0===s||0===l&&1===s){if(this.mdf)for(n=0;n<o;n+=1)this.shapes[n].shape.mdf=!0}else{var u,d,f=[];for(n=0;n<o;n+=1)if((u=this.shapes[n]).shape.mdf||this.mdf||e||2===this.m){if(p=(t=u.shape.paths)._length,r=0,!u.shape.mdf&&u.pathsData)r=u.totalShapeLength;else{for(a=[],h=0;h<p;h+=1)i=bez.getSegmentsLength(t.shapes[h]),a.push(i),r+=i.totalLength;u.totalShapeLength=r,u.pathsData=a}c+=r,u.shape.mdf=!0}else u.shape.paths=u.localShapeCollection;var h,p,A=s,m=l,_=0;for(n=o-1;n>=0;n-=1)if((u=this.shapes[n]).shape.mdf){if((d=u.localShapeCollection).releaseShapes(),2===this.m&&o>1){var v=this.calculateShapeEdges(s,l,u.totalShapeLength,_,c);_+=u.totalShapeLength}else v=[[A,m]];for(p=v.length,h=0;h<p;h+=1){A=v[h][0],m=v[h][1],f.length=0,m<=1?f.push({s:u.totalShapeLength*A,e:u.totalShapeLength*m}):A>=1?f.push({s:u.totalShapeLength*(A-1),e:u.totalShapeLength*(m-1)}):(f.push({s:u.totalShapeLength*A,e:u.totalShapeLength}),f.push({s:0,e:u.totalShapeLength*(m-1)}));var g=this.addShapes(u,f[0]);if(f[0].s!==f[0].e){if(f.length>1)if(u.shape.v.c){var y=g.pop();this.addPaths(g,d),g=this.addShapes(u,f[1],y)}else this.addPaths(g,d),g=this.addShapes(u,f[1]);this.addPaths(g,d)}}u.shape.paths=d}}this.dynamicProperties.length||(this.mdf=!1)},TrimModifier.prototype.addPaths=function(e,t){var n,a=e.length;for(n=0;n<a;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,a,i,r,o){i.setXYAt(t[0],t[1],"o",r),i.setXYAt(n[0],n[1],"i",r+1),o&&i.setXYAt(e[0],e[1],"v",r),i.setXYAt(a[0],a[1],"v",r+1)},TrimModifier.prototype.addShapes=function(e,t,n){var a,i,r,o,s,l,c,u,d=e.pathsData,f=e.shape.paths.shapes,h=e.shape.paths._length,p=0,A=[],m=!0;for(n?(s=n._length,u=n._length):(n=shape_pool.newShape(),s=0,u=0),A.push(n),a=0;a<h;a+=1){for(l=d[a].lengths,n.c=f[a].c,r=f[a].c?l.length:l.length+1,i=1;i<r;i+=1)if(p+(o=l[i-1]).addedLength<t.s)p+=o.addedLength,n.c=!1;else{if(p>t.e){n.c=!1;break}t.s<=p&&t.e>=p+o.addedLength?(this.addSegment(f[a].v[i-1],f[a].o[i-1],f[a].i[i],f[a].v[i],n,s,m),m=!1):(c=bez.getNewSegment(f[a].v[i-1],f[a].v[i],f[a].o[i-1],f[a].i[i],(t.s-p)/o.addedLength,(t.e-p)/o.addedLength,l[i-1]),this.addSegment(c.pt1,c.pt3,c.pt4,c.pt2,n,s,m),m=!1,n.c=!1),p+=o.addedLength,s+=1}if(f[a].c){if(o=l[i-1],p<=t.e){var _=l[i-1].addedLength;t.s<=p&&t.e>=p+_?(this.addSegment(f[a].v[i-1],f[a].o[i-1],f[a].i[0],f[a].v[0],n,s,m),m=!1):(c=bez.getNewSegment(f[a].v[i-1],f[a].v[0],f[a].o[i-1],f[a].i[0],(t.s-p)/_,(t.e-p)/_,l[i-1]),this.addSegment(c.pt1,c.pt3,c.pt4,c.pt2,n,s,m),m=!1,n.c=!1)}else n.c=!1;p+=o.addedLength,s+=1}if(n._length&&(n.setXYAt(n.v[u][0],n.v[u][1],"i",u),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),p>t.e)break;a<h-1&&(n=shape_pool.newShape(),m=!0,A.push(n),s=0)}return A},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype(ShapeModifier,RoundCornersModifier),RoundCornersModifier.prototype.processKeys=function(e){if(this.elem.globalData.frameId!==this.frameId||e){this.mdf=!!e,this.frameId=this.elem.globalData.frameId;var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0)}},RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},RoundCornersModifier.prototype.processPath=function(e,t){var n=shape_pool.newShape();n.c=e.c;var a,i,r,o,s,l,c,u,d,f,h,p,A,m=e._length,_=0;for(a=0;a<m;a+=1)i=e.v[a],o=e.o[a],r=e.i[a],i[0]===o[0]&&i[1]===o[1]&&i[0]===r[0]&&i[1]===r[1]?0!==a&&a!==m-1||e.c?(s=0===a?e.v[m-1]:e.v[a-1],c=(l=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(l/2,t)/l:0,u=p=i[0]+(s[0]-i[0])*c,d=A=i[1]-(i[1]-s[1])*c,f=u-(u-i[0])*roundCorner,h=d-(d-i[1])*roundCorner,n.setTripleAt(u,d,f,h,p,A,_),_+=1,s=a===m-1?e.v[0]:e.v[a+1],c=(l=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(l/2,t)/l:0,u=f=i[0]+(s[0]-i[0])*c,d=h=i[1]+(s[1]-i[1])*c,p=u-(u-i[0])*roundCorner,A=d-(d-i[1])*roundCorner,n.setTripleAt(u,d,f,h,p,A,_),_+=1):(n.setTripleAt(i[0],i[1],o[0],o[1],r[0],r[1],_),_+=1):(n.setTripleAt(e.v[a][0],e.v[a][1],e.o[a][0],e.o[a][1],e.i[a][0],e.i[a][1],_),_+=1);return n},RoundCornersModifier.prototype.processShapes=function(e){var t,n,a,i,r,o,s=this.shapes.length,l=this.rd.v;if(0!==l)for(n=0;n<s;n+=1){if((r=this.shapes[n]).shape.paths,o=r.localShapeCollection,r.shape.mdf||this.mdf||e)for(o.releaseShapes(),r.shape.mdf=!0,t=r.shape.paths.shapes,i=r.shape.paths._length,a=0;a<i;a+=1)o.addShape(this.processPath(t[a],l));r.shape.paths=r.localShapeCollection}this.dynamicProperties.length||(this.mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),RepeaterModifier.prototype.processKeys=function(e){if(this.elem.globalData.frameId!==this.frameId||e){this.mdf=!!e;var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0)}},RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this.dynamicProperties),this.o=PropertyFactory.getProp(e,t.o,0,null,this.dynamicProperties),this.tr=PropertyFactory.getProp(e,t.tr,2,null,this.dynamicProperties),this.data=t,this.dynamicProperties.length||this.getValue(!0),this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,a,i,r){var o=r?-1:1,s=a.s.v[0]+(1-a.s.v[0])*(1-i),l=a.s.v[1]+(1-a.s.v[1])*(1-i);e.translate(a.p.v[0]*o*i,a.p.v[1]*o*i,a.p.v[2]),t.translate(-a.a.v[0],-a.a.v[1],a.a.v[2]),t.rotate(-a.r.v*o*i),t.translate(a.a.v[0],a.a.v[1],a.a.v[2]),n.translate(-a.a.v[0],-a.a.v[1],a.a.v[2]),n.scale(r?1/s:s,r?1/l:l),n.translate(a.a.v[0],a.a.v[1],a.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,a,i){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=a,this._currentCopies=0,this._elements=[],this._groups=[],this.dynamicProperties=[],this.frameId=-1,this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?(this.k=!0,i.push(this)):this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){e.length;var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,a=e.length;for(n=0;n<a;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){if(this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.dynamicProperties.length||e||(this.mdf=!1),this.mdf)){var t=Math.ceil(this.c.v);if(this._groups.length<t){for(;this._groups.length<t;){var n={it:this.cloneElements(this._elements),ty:"gr"};n.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:0,ix:6,k:0},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,n),this._groups.splice(0,0,n),this._currentCopies+=1}this.elem.reloadShapes()}var a,i,r=0;for(a=0;a<=this._groups.length-1;a+=1)i=r<t,this._groups[a]._render=i,this.changeGroupRender(this._groups[a].it,i),r+=1;this._currentCopies=t,this.elem.firstFrame=!0;var o=this.o.v,s=o%1,l=o>0?Math.floor(o):Math.ceil(o),c=(this.tr.v.props,this.pMatrix.props),u=this.rMatrix.props,d=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var f=0;if(o>0){for(;f<l;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),f+=1;s&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,s,!1),f+=s)}else if(o<0){for(;f>l;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),f-=1;s&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-s,!0),f-=s)}a=1===this.data.m?0:this._currentCopies-1;var h=1===this.data.m?1:-1;for(r=this._currentCopies;r;){if(0!==f){(0!==a&&1===h||a!==this._currentCopies-1&&-1===h)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15]),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),this.matrix.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]);var p=(m=(A=this.elemsData[a].it)[A.length-1].transform.mProps.v.props).length;for(_=0;_<p;_+=1)m[_]=this.matrix.props[_];this.matrix.reset()}else{var A,m,_;for(this.matrix.reset(),p=(m=(A=this.elemsData[a].it)[A.length-1].transform.mProps.v.props).length,_=0;_<p;_+=1)m[_]=this.matrix.props[_]}f+=1,r-=1,a+=h}}},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(Array.apply(null,{length:this._maxLength})),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shape_pool.release(this.shapes[e]);this._length=0};var ImagePreloader=function(){var e;function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&e&&e(null)}function n(e){var t="";if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t}function a(e){var n=document.createElement("img");n.addEventListener("load",t.bind(this),!1),n.addEventListener("error",t.bind(this),!1),n.src=e}function i(t,i){var r;for(e=i,this.totalAssets=t.length,r=0;r<this.totalAssets;r+=1)t[r].layers||(a.bind(this)(n.bind(this)(t[r])),this.totalImages+=1)}function r(e){this.path=e||""}function o(e){this.assetsPath=e||""}return function(){this.loadAssets=i,this.setAssetsPath=o,this.setPath=r,this.assetsPath="",this.path="",this.totalAssets=0,this.totalImages=0,this.loadedAssets=0}}(),featureSupport=function(){var e={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),e}(),filtersFactory=function(){var e={createFilter:function(e){var t=document.createElementNS(svgNS,"filter");return t.setAttribute("id",e),t.setAttribute("filterUnits","objectBoundingBox"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t},createAlphaToLuminanceFilter:function(){var e=document.createElementNS(svgNS,"feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return e}();function TextAnimatorProperty(e,t,n){this.mdf=!1,this._firstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._dynamicProperties=[],this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=Array.apply(null,{length:this._textData.a.length}),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1}function LetterProps(e,t,n,a,i,r){this.o=e,this.sw=t,this.sc=n,this.fc=a,this.m=i,this.p=r,this.mdf={o:!0,sw:!!t,sc:!!n,fc:!!a,m:!0,p:!0}}function TextProperty(e,t,n){this._frameId=-99999,this.pv="",this.v="",this.kf=!1,this.firstFrame=!0,this.mdf=!0,this.data=t,this.elem=e,this.keysIndex=-1,this.currentData={ascent:0,boxWidth:[0,0],f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,__complete:!1},this.searchProperty()?n.push(this):this.getValue(!0)}TextAnimatorProperty.prototype.searchProperties=function(e){var t,n,a,i=this._textData.a.length,r=PropertyFactory.getProp;for(t=0;t<i;t+=1)n={a:{},s:{}},"r"in(a=this._textData.a[t]).a&&(n.a.r=r(this._elem,a.a.r,0,degToRads,this._dynamicProperties)),"rx"in a.a&&(n.a.rx=r(this._elem,a.a.rx,0,degToRads,this._dynamicProperties)),"ry"in a.a&&(n.a.ry=r(this._elem,a.a.ry,0,degToRads,this._dynamicProperties)),"sk"in a.a&&(n.a.sk=r(this._elem,a.a.sk,0,degToRads,this._dynamicProperties)),"sa"in a.a&&(n.a.sa=r(this._elem,a.a.sa,0,degToRads,this._dynamicProperties)),"s"in a.a&&(n.a.s=r(this._elem,a.a.s,1,.01,this._dynamicProperties)),"a"in a.a&&(n.a.a=r(this._elem,a.a.a,1,0,this._dynamicProperties)),"o"in a.a&&(n.a.o=r(this._elem,a.a.o,0,.01,this._dynamicProperties)),"p"in a.a&&(n.a.p=r(this._elem,a.a.p,1,0,this._dynamicProperties)),"sw"in a.a&&(n.a.sw=r(this._elem,a.a.sw,0,0,this._dynamicProperties)),"sc"in a.a&&(n.a.sc=r(this._elem,a.a.sc,1,0,this._dynamicProperties)),"fc"in a.a&&(n.a.fc=r(this._elem,a.a.fc,1,0,this._dynamicProperties)),"fh"in a.a&&(n.a.fh=r(this._elem,a.a.fh,0,0,this._dynamicProperties)),"fs"in a.a&&(n.a.fs=r(this._elem,a.a.fs,0,.01,this._dynamicProperties)),"fb"in a.a&&(n.a.fb=r(this._elem,a.a.fb,0,.01,this._dynamicProperties)),"t"in a.a&&(n.a.t=r(this._elem,a.a.t,0,0,this._dynamicProperties)),n.s=PropertyFactory.getTextSelectorProp(this._elem,a.s,this._dynamicProperties),n.s.t=a.s.t,this._animatorsData[t]=n;this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this._dynamicProperties),l:r(this._elem,this._textData.p.l,0,0,this._dynamicProperties),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this._dynamicProperties),this._dynamicProperties.length&&e.push(this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this.mdf||this._firstFrame||t||this._hasMaskedPath&&this._pathData.m.mdf){this._firstFrame=!1;var n,a,i,r,o=this._moreOptions.alignment.v,s=this._animatorsData,l=this._textData,c=this.mHelper,u=this._renderType,d=this.renderedLetters.length,f=(this.data,e.l);if(this._hasMaskedPath){var h=this._pathData.m;if(!this._pathData.n||this._pathData.mdf){var p=h.v;this._pathData.r&&(p=reversePath(p));var A,m={tLength:0,segments:[]};r=p._length-1;var _=0;for(i=0;i<r;i+=1)A={s:p.v[i],e:p.v[i+1],to:[p.o[i][0]-p.v[i][0],p.o[i][1]-p.v[i][1]],ti:[p.i[i+1][0]-p.v[i+1][0],p.i[i+1][1]-p.v[i+1][1]]},bez.buildBezierData(A),m.tLength+=A.bezierData.segmentLength,m.segments.push(A),_+=A.bezierData.segmentLength;i=r,h.v.c&&(A={s:p.v[i],e:p.v[0],to:[p.o[i][0]-p.v[i][0],p.o[i][1]-p.v[i][1]],ti:[p.i[0][0]-p.v[0][0],p.i[0][1]-p.v[0][1]]},bez.buildBezierData(A),m.tLength+=A.bezierData.segmentLength,m.segments.push(A),_+=A.bezierData.segmentLength),this._pathData.pi=m}m=this._pathData.pi;var v,g,y,b=this._pathData.f.v,w=0,E=1,k=0,S=!0,C=m.segments;if(b<0&&h.v.c)for(m.tLength<Math.abs(b)&&(b=-Math.abs(b)%m.tLength),E=(y=C[w=C.length-1].bezierData.points).length-1;b<0;)b+=y[E].partialLength,(E-=1)<0&&(E=(y=C[w-=1].bezierData.points).length-1);g=(y=C[w].bezierData.points)[E-1];var M,P,T=(v=y[E]).partialLength}r=f.length,n=0,a=0;var D,I,x,O,B=1.2*e.s*.714,L=!0;if(x=s.length,t)for(I=0;I<x;I+=1)s[I].s.getValue(!0);var R,N,j,F,H,V,U,z,W,q,G,$,Y,Q=-1,X=b,K=w,J=E,Z=-1,ee="",te=this.defaultPropsArray;for(i=0;i<r;i+=1){if(c.reset(),H=1,f[i].n)n=0,a+=e.yOffset,a+=L?1:0,b=X,L=!1,this._hasMaskedPath&&(E=J,g=(y=C[w=K].bezierData.points)[E-1],T=(v=y[E]).partialLength,k=0),Y=q=$=ee="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==f[i].line){switch(e.j){case 1:b+=_-e.lineWidths[f[i].line];break;case 2:b+=(_-e.lineWidths[f[i].line])/2}Z=f[i].line}Q!==f[i].ind&&(f[Q]&&(b+=f[Q].extra),b+=f[i].an/2,Q=f[i].ind),b+=o[0]*f[i].an/200;var ne=0;for(I=0;I<x;I+=1)"p"in(D=s[I].a)&&((R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars)).length?ne+=D.p.v[0]*R[0]:ne+=D.p.v[0]*R),"a"in D&&((R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars)).length?ne+=D.a.v[0]*R[0]:ne+=D.a.v[0]*R);for(S=!0;S;)k+T>=b+ne||!y?(M=(b+ne-k)/v.partialLength,j=g.point[0]+(v.point[0]-g.point[0])*M,F=g.point[1]+(v.point[1]-g.point[1])*M,c.translate(-o[0]*f[i].an/200,-o[1]*B/100),S=!1):y&&(k+=v.partialLength,(E+=1)>=y.length&&(E=0,C[w+=1]?y=C[w].bezierData.points:h.v.c?(E=0,y=C[w=0].bezierData.points):(k-=v.partialLength,y=null)),y&&(g=v,T=(v=y[E]).partialLength));N=f[i].an/2-f[i].add,c.translate(-N,0,0)}else N=f[i].an/2-f[i].add,c.translate(-N,0,0),c.translate(-o[0]*f[i].an/200,-o[1]*B/100,0);for(f[i].l,I=0;I<x;I+=1)"t"in(D=s[I].a)&&(R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars),this._hasMaskedPath?R.length?b+=D.t*R[0]:b+=D.t*R:R.length?n+=D.t.v*R[0]:n+=D.t.v*R);for(f[i].l,e.strokeWidthAnim&&(U=e.sw||0),e.strokeColorAnim&&(V=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(z=[e.fc[0],e.fc[1],e.fc[2]]),I=0;I<x;I+=1)"a"in(D=s[I].a)&&((R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars)).length?c.translate(-D.a.v[0]*R[0],-D.a.v[1]*R[1],D.a.v[2]*R[2]):c.translate(-D.a.v[0]*R,-D.a.v[1]*R,D.a.v[2]*R));for(I=0;I<x;I+=1)"s"in(D=s[I].a)&&((R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars)).length?c.scale(1+(D.s.v[0]-1)*R[0],1+(D.s.v[1]-1)*R[1],1):c.scale(1+(D.s.v[0]-1)*R,1+(D.s.v[1]-1)*R,1));for(I=0;I<x;I+=1){if(D=s[I].a,R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars),"sk"in D&&(R.length?c.skewFromAxis(-D.sk.v*R[0],D.sa.v*R[1]):c.skewFromAxis(-D.sk.v*R,D.sa.v*R)),"r"in D&&(R.length?c.rotateZ(-D.r.v*R[2]):c.rotateZ(-D.r.v*R)),"ry"in D&&(R.length?c.rotateY(D.ry.v*R[1]):c.rotateY(D.ry.v*R)),"rx"in D&&(R.length?c.rotateX(D.rx.v*R[0]):c.rotateX(D.rx.v*R)),"o"in D&&(R.length?H+=(D.o.v*R[0]-H)*R[0]:H+=(D.o.v*R-H)*R),e.strokeWidthAnim&&"sw"in D&&(R.length?U+=D.sw.v*R[0]:U+=D.sw.v*R),e.strokeColorAnim&&"sc"in D)for(W=0;W<3;W+=1)R.length?V[W]=V[W]+(D.sc.v[W]-V[W])*R[0]:V[W]=V[W]+(D.sc.v[W]-V[W])*R;if(e.fillColorAnim&&e.fc){if("fc"in D)for(W=0;W<3;W+=1)R.length?z[W]=z[W]+(D.fc.v[W]-z[W])*R[0]:z[W]=z[W]+(D.fc.v[W]-z[W])*R;"fh"in D&&(z=R.length?addHueToRGB(z,D.fh.v*R[0]):addHueToRGB(z,D.fh.v*R)),"fs"in D&&(z=R.length?addSaturationToRGB(z,D.fs.v*R[0]):addSaturationToRGB(z,D.fs.v*R)),"fb"in D&&(z=R.length?addBrightnessToRGB(z,D.fb.v*R[0]):addBrightnessToRGB(z,D.fb.v*R))}}for(I=0;I<x;I+=1)"p"in(D=s[I].a)&&(R=s[I].s.getMult(f[i].anIndexes[I],l.a[I].s.totalChars),this._hasMaskedPath?R.length?c.translate(0,D.p.v[1]*R[0],-D.p.v[2]*R[1]):c.translate(0,D.p.v[1]*R,-D.p.v[2]*R):R.length?c.translate(D.p.v[0]*R[0],D.p.v[1]*R[1],-D.p.v[2]*R[2]):c.translate(D.p.v[0]*R,D.p.v[1]*R,-D.p.v[2]*R));if(e.strokeWidthAnim&&(q=U<0?0:U),e.strokeColorAnim&&(G="rgb("+Math.round(255*V[0])+","+Math.round(255*V[1])+","+Math.round(255*V[2])+")"),e.fillColorAnim&&e.fc&&($="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),this._hasMaskedPath){if(c.translate(0,-e.ls),c.translate(0,o[1]*B/100+a,0),l.p.p){P=(v.point[1]-g.point[1])/(v.point[0]-g.point[0]);var ae=180*Math.atan(P)/Math.PI;v.point[0]<g.point[0]&&(ae+=180),c.rotate(-ae*Math.PI/180)}c.translate(j,F,0),b-=o[0]*f[i].an/200,f[i+1]&&Q!==f[i+1].ind&&(b+=f[i].an/2,b+=e.tr/1e3*e.s)}else{switch(c.translate(n,a,0),e.ps&&c.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:c.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[f[i].line]),0,0);break;case 2:c.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[f[i].line])/2,0,0)}c.translate(0,-e.ls),c.translate(N,0,0),c.translate(o[0]*f[i].an/200,o[1]*B/100,0),n+=f[i].l+e.tr/1e3*e.s}"html"===u?ee=c.toCSS():"svg"===u?ee=c.to2dCSS():te=[c.props[0],c.props[1],c.props[2],c.props[3],c.props[4],c.props[5],c.props[6],c.props[7],c.props[8],c.props[9],c.props[10],c.props[11],c.props[12],c.props[13],c.props[14],c.props[15]],Y=H}d<=i?(O=new LetterProps(Y,q,G,$,ee,te),this.renderedLetters.push(O),d+=1,this.lettersChangedFlag=!0):(O=this.renderedLetters[i],this.lettersChangedFlag=O.update(Y,q,G,$,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){if(this._elem.globalData.frameId!==this._frameId){this._frameId=this._elem.globalData.frameId;var e,t=this._dynamicProperties.length;for(this.mdf=!1,e=0;e<t;e+=1)this._dynamicProperties[e].getValue(),this.mdf=this._dynamicProperties[e].mdf||this.mdf}},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],LetterProps.prototype.update=function(e,t,n,a,i,r){this.mdf.o=!1,this.mdf.sw=!1,this.mdf.sc=!1,this.mdf.fc=!1,this.mdf.m=!1,this.mdf.p=!1;var o=!1;return this.o!==e&&(this.o=e,this.mdf.o=!0,o=!0),this.sw!==t&&(this.sw=t,this.mdf.sw=!0,o=!0),this.sc!==n&&(this.sc=n,this.mdf.sc=!0,o=!0),this.fc!==a&&(this.fc=a,this.mdf.fc=!0,o=!0),this.m!==i&&(this.m=i,this.mdf.m=!0,o=!0),!r.length||this.p[0]===r[0]&&this.p[1]===r[1]&&this.p[4]===r[4]&&this.p[5]===r[5]&&this.p[12]===r[12]&&this.p[13]===r[13]||(this.p=r,this.mdf.p=!0,o=!0),o},TextProperty.prototype.setCurrentData=function(e){var t=this.currentData;t.ascent=e.ascent,t.boxWidth=e.boxWidth?e.boxWidth:t.boxWidth,t.f=e.f,t.fStyle=e.fStyle,t.fWeight=e.fWeight,t.fc=e.fc,t.j=e.j,t.justifyOffset=e.justifyOffset,t.l=e.l,t.lh=e.lh,t.lineWidths=e.lineWidths,t.ls=e.ls,t.of=e.of,t.s=e.s,t.sc=e.sc,t.sw=e.sw,t.t=e.t,t.tr=e.tr,t.fillColorAnim=e.fillColorAnim||t.fillColorAnim,t.strokeColorAnim=e.strokeColorAnim||t.strokeColorAnim,t.strokeWidthAnim=e.strokeWidthAnim||t.strokeWidthAnim,t.yOffset=e.yOffset,t.__complete=!1},TextProperty.prototype.searchProperty=function(){return this.kf=this.data.d.k.length>1,this.kf},TextProperty.prototype.getValue=function(){this.mdf=!1;var e=this.elem.globalData.frameId;if(e!==this._frameId&&this.kf||this.firstFrame){for(var t,n=this.data.d.k,a=0,i=n.length;a<=i-1&&(t=n[a].s,!(a===i-1||n[a+1].t>e));)a+=1;this.keysIndex!==a&&(t.__complete||this.completeTextData(t),this.setCurrentData(t),this.mdf=!this.firstFrame,this.pv=this.v=this.currentData.t,this.keysIndex=a),this._frameId=e}},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,a,i,r,o,s,l=this.elem.globalData.fontManager,c=this.data,u=[],d=0,f=c.m.g,h=0,p=0,A=0,m=[],_=0,v=0,g=l.getFontByName(e.f),y=0,b=g.fStyle.split(" "),w="normal",E="normal";for(n=b.length,t=0;t<n;t+=1)switch(b[t].toLowerCase()){case"italic":E="italic";break;case"bold":w="700";break;case"black":w="900";break;case"medium":w="500";break;case"regular":case"normal":w="400";case"light":case"thin":w="200"}e.fWeight=w,e.fStyle=E,n=e.t.length;var k=e.tr/1e3*e.s;if(e.sz){var S=e.sz[0],C=-1;for(t=0;t<n;t+=1)a=!1," "===e.t.charAt(t)?C=t:13===e.t.charCodeAt(t)&&(_=0,a=!0),l.chars?(s=l.getCharData(e.t.charAt(t),g.fStyle,g.fFamily),y=a?0:s.w*e.s/100):y=l.measureText(e.t.charAt(t),e.f,e.s),_+y>S&&" "!==e.t.charAt(t)?(-1===C?n+=1:t=C,e.t=e.t.substr(0,t)+"\r"+e.t.substr(t===C?t+1:t),C=-1,_=0):(_+=y,_+=k);n=e.t.length}_=-k,y=0;var M,P=0;for(t=0;t<n;t+=1)if(a=!1," "===(M=e.t.charAt(t))?i=" ":13===M.charCodeAt(0)?(P=0,m.push(_),v=_>v?_:v,_=-2*k,i="",a=!0,A+=1):i=e.t.charAt(t),l.chars?(s=l.getCharData(M,g.fStyle,l.getFontByName(e.f).fFamily),y=a?0:s.w*e.s/100):y=l.measureText(i,e.f,e.s)," "===M?P+=y+k:(_+=y+k+P,P=0),u.push({l:y,an:y,add:h,n:a,anIndexes:[],val:i,line:A}),2==f){if(h+=y,""==i||" "==i||t==n-1){for(""!=i&&" "!=i||(h-=y);p<=t;)u[p].an=h,u[p].ind=d,u[p].extra=y,p+=1;d+=1,h=0}}else if(3==f){if(h+=y,""==i||t==n-1){for(""==i&&(h-=y);p<=t;)u[p].an=h,u[p].ind=d,u[p].extra=y,p+=1;h=0,d+=1}}else u[d].ind=d,u[d].extra=0,d+=1;if(e.l=u,v=_>v?_:v,m.push(_),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=v,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=m;var T,D,I=c.a;o=I.length;var x,O,B=[];for(r=0;r<o;r+=1){for((T=I[r]).a.sc&&(e.strokeColorAnim=!0),T.a.sw&&(e.strokeWidthAnim=!0),(T.a.fc||T.a.fh||T.a.fs||T.a.fb)&&(e.fillColorAnim=!0),O=0,x=T.s.b,t=0;t<n;t+=1)(D=u[t]).anIndexes[r]=O,(1==x&&""!=D.val||2==x&&""!=D.val&&" "!=D.val||3==x&&(D.n||" "==D.val||t==n-1)||4==x&&(D.n||t==n-1))&&(1===T.s.rn&&B.push(O),O+=1);c.a[r].s.totalChars=O;var L,R=-1;if(1===T.s.rn)for(t=0;t<n;t+=1)R!=(D=u[t]).anIndexes[r]&&(R=D.anIndexes[r],L=B.splice(Math.floor(Math.random()*B.length),1)[0]),D.anIndexes[r]=L}e.yOffset=e.lh||1.2*e.s,e.ls=e.ls||0,e.ascent=g.ascent*e.s/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var n=this.data.d.k[t].s;n.__complete=!1,n.t=e.t,this.keysIndex=-1,this.firstFrame=!0,this.getValue()};var pooling={double:function(e){return e.concat(Array.apply(null,{length:e.length}))}},point_pool=function(){var e={newPoint:function(){return t?a[t-=1]:[.1,.1]},release:function(e){t===n&&(a=pooling.double(a),n*=2),a[t]=e,t+=1}},t=0,n=8,a=Array.apply(null,{length:n});return e}(),shape_pool=function(){var e={clone:function(e,t){var n,a,r=void 0===e._length?e.v.length:e._length,o=i();for(o.setLength(r),o.c=e.c,n=0;n<r;n+=1)t?(a=t.applyToPointArray(e.v[n][0],e.v[n][1],0,2),o.setXYAt(a[0],a[1],"v",n),point_pool.release(a),a=t.applyToPointArray(e.o[n][0],e.o[n][1],0,2),o.setXYAt(a[0],a[1],"o",n),point_pool.release(a),a=t.applyToPointArray(e.i[n][0],e.i[n][1],0,2),o.setXYAt(a[0],a[1],"i",n),point_pool.release(a)):o.setTripleAt(e.v[n][0],e.v[n][1],e.o[n][0],e.o[n][1],e.i[n][0],e.i[n][1],n);return o},newShape:i,release:r,releaseArray:function(e,t){for(;t--;)r(e[t])}},t=0,n=4,a=Array.apply(null,{length:n});function i(){return t?a[t-=1]:new ShapePath}function r(e){t===n&&(a=pooling.double(a),n*=2);var i,r=e._length;for(i=0;i<r;i+=1)point_pool.release(e.v[i]),point_pool.release(e.i[i]),point_pool.release(e.o[i]),e.v[i]=null,e.i[i]=null,e.o[i]=null;e._length=0,e.c=!1,a[t]=e,t+=1}return e}(),shapeCollection_pool=function(){var e={newShapeCollection:function(){return t?a[t-=1]:new ShapeCollection},release:i,clone:function(e,r){i(e),t===n&&(a=pooling.double(a),n*=2),a[t]=e,t+=1}},t=0,n=4,a=Array.apply(null,{length:n});function i(e){var i,r=e._length;for(i=0;i<r;i+=1)shape_pool.release(e.shapes[i]);e._length=0,t===n&&(a=pooling.double(a),n*=2),a[t]=e,t+=1}return e}();function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!t||!1!==t.hideOnTransparent,viewBoxOnly:t&&t.viewBoxOnly||!1,className:t&&t.className||""},this.globalData.renderConfig=this.renderConfig,this.elements=[],this.pendingElements=[],this.destroyed=!1}function MaskElement(e,t,n){this.dynamicProperties=[],this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties,this.viewData=Array.apply(null,{length:this.masksProperties.length}),this.maskElement=null,this.firstFrame=!0;var a,i,r,o,s,l,c,u,d=this.globalData.defs,f=this.masksProperties.length,h=this.masksProperties,p=0,A=[],m=randomString(10),_="clipPath",v="clip-path";for(a=0;a<f;a++)if(("a"!==h[a].mode&&"n"!==h[a].mode||h[a].inv||100!==h[a].o.k)&&(_="mask",v="mask"),"s"!=h[a].mode&&"i"!=h[a].mode||0!=p?s=null:((s=document.createElementNS(svgNS,"rect")).setAttribute("fill","#ffffff"),s.setAttribute("width",this.element.comp.data.w),s.setAttribute("height",this.element.comp.data.h),A.push(s)),i=document.createElementNS(svgNS,"path"),"n"!=h[a].mode){if(p+=1,"s"==h[a].mode?i.setAttribute("fill","#000000"):i.setAttribute("fill","#ffffff"),i.setAttribute("clip-rule","nonzero"),0!==h[a].x.k){_="mask",v="mask",u=PropertyFactory.getProp(this.element,h[a].x,0,null,this.dynamicProperties);var g="fi_"+randomString(10);(l=document.createElementNS(svgNS,"filter")).setAttribute("id",g),(c=document.createElementNS(svgNS,"feMorphology")).setAttribute("operator","dilate"),c.setAttribute("in","SourceGraphic"),c.setAttribute("radius","0"),l.appendChild(c),d.appendChild(l),"s"==h[a].mode?i.setAttribute("stroke","#000000"):i.setAttribute("stroke","#ffffff")}else c=null,u=null;if(this.storedData[a]={elem:i,x:u,expan:c,lastPath:"",lastOperator:"",filterId:g,lastRadius:0},"i"==h[a].mode){o=A.length;var y=document.createElementNS(svgNS,"g");for(r=0;r<o;r+=1)y.appendChild(A[r]);var b=document.createElementNS(svgNS,"mask");b.setAttribute("mask-type","alpha"),b.setAttribute("id",m+"_"+p),b.appendChild(i),d.appendChild(b),y.setAttribute("mask","url("+locationHref+"#"+m+"_"+p+")"),A.length=0,A.push(y)}else A.push(i);h[a].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[a]={elem:i,lastPath:"",op:PropertyFactory.getProp(this.element,h[a].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,h[a],3,this.dynamicProperties,null)},s&&(this.viewData[a].invRect=s),this.viewData[a].prop.k||this.drawPath(h[a],this.viewData[a].prop.v,this.viewData[a])}else this.viewData[a]={op:PropertyFactory.getProp(this.element,h[a].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,h[a],3,this.dynamicProperties,null),elem:i},d.appendChild(i);for(this.maskElement=document.createElementNS(svgNS,_),f=A.length,a=0;a<f;a+=1)this.maskElement.appendChild(A[a]);this.maskElement.setAttribute("id",m),p>0&&this.element.maskedElement.setAttribute(v,"url("+locationHref+"#"+m+")"),d.appendChild(this.maskElement)}function BaseElement(){}function SVGBaseElement(e,t,n,a,i){this.globalData=n,this.comp=a,this.data=e,this.matteElement=null,this.transformedElement=null,this.isTransparent=!1,this.parentContainer=t,this.layerId=i?i.layerId:"ly_"+randomString(10),this.placeholder=i,this._sizeChanged=!1,this.init()}function IShapeElement(e,t,n,a,i){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,e,t,n,a,i)}BaseRenderer.prototype.checkLayers=function(e){var t,n,a=this.layers.length;for(this.completeLayers=!0,t=a-1;t>=0;t--)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 13:return this.createCamera(e);case 99:return null}return this.createBase(e)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var t,n,a=e.length,i=this.layers.length;for(t=0;t<a;t+=1)for(n=0;n<i;){if(this.layers[n].id==e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){n=n||[];for(var a=this.elements,i=this.layers,r=0,o=i.length;r<o;)i[r].ind==t&&(a[r]&&!0!==a[r]?void 0!==i[r].parent?(n.push(a[r]),a[r]._isParent=!0,this.buildElementParenting(e,i[r].parent,n)):(n.push(a[r]),a[r]._isParent=!0,e.setHierarchy(n)):(this.buildItem(r),this.addPendingElement(e))),r+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},extendPrototype(BaseRenderer,SVGRenderer),SVGRenderer.prototype.createBase=function(e){return new SVGBaseElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new IShapeElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new ICompElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.layerElement=document.createElementNS(svgNS,"svg"),this.layerElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.layerElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.layerElement.setAttribute("width",e.w),this.layerElement.setAttribute("height",e.h),this.layerElement.style.width="100%",this.layerElement.style.height="100%"),this.renderConfig.className&&this.layerElement.setAttribute("class",this.renderConfig.className),this.layerElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.layerElement);var t=document.createElementNS(svgNS,"defs");this.globalData.defs=t,this.layerElement.appendChild(t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.frameId=0,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h},this.data=e,this.globalData.frameRate=e.fr;var n=document.createElementNS(svgNS,"clipPath"),a=document.createElementNS(svgNS,"rect");a.setAttribute("width",e.w),a.setAttribute("height",e.h),a.setAttribute("x",0),a.setAttribute("y",0);var i="animationMask_"+randomString(10);n.setAttribute("id",i),n.appendChild(a);var r=document.createElementNS(svgNS,"g");r.setAttribute("clip-path","url("+locationHref+"#"+i+")"),this.layerElement.appendChild(r),t.appendChild(n),this.layerElement=r,this.layers=e.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.elements=Array.apply(null,{length:e.layers.length})},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e++)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!=this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);t[e]=n,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?n.setMatte(t[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(n)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!=e&&!this.destroyed){null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e;var t,n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t--)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);for(t=n-1;t>=0;t--)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var a,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(a=this.elements[i].getBaseElement()),i+=1;a?this.layerElement.insertBefore(n,a):this.layerElement.appendChild(n)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},SVGRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length,a=document.createElementNS(svgNS,"g");for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t],a,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.prepareFrame=function(){var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue()},MaskElement.prototype.renderFrame=function(e){var t,n=this.masksProperties.length;for(t=0;t<n;t++)if((this.viewData[t].prop.mdf||this.firstFrame)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op.mdf||this.firstFrame)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp.mdf||this.firstFrame)&&(this.viewData[t].invRect.setAttribute("x",-e.props[12]),this.viewData[t].invRect.setAttribute("y",-e.props[13])),this.storedData[t].x&&(this.storedData[t].x.mdf||this.firstFrame))){var a=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[t].filterId+")")),a.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}this.firstFrame=!1},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var a,i,r=" M"+t.v[0][0]+","+t.v[0][1];for(i=t._length,a=1;a<i;a+=1)r+=" C"+bm_rnd(t.o[a-1][0])+","+bm_rnd(t.o[a-1][1])+" "+bm_rnd(t.i[a][0])+","+bm_rnd(t.i[a][1])+" "+bm_rnd(t.v[a][0])+","+bm_rnd(t.v[a][1]);t.c&&i>1&&(r+=" C"+bm_rnd(t.o[a-1][0])+","+bm_rnd(t.o[a-1][1])+" "+bm_rnd(t.i[0][0])+","+bm_rnd(t.i[0][1])+" "+bm_rnd(t.v[0][0])+","+bm_rnd(t.v[0][1])),n.lastPath!==r&&(n.elem&&(t.c?e.inv?n.elem.setAttribute("d",this.solidPath+r):n.elem.setAttribute("d",r):n.elem.setAttribute("d","")),n.lastPath=r)},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},BaseElement.prototype.checkMasks=function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},BaseElement.prototype.checkParenting=function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent)},BaseElement.prototype.prepareFrame=function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isVisible&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!0,this.firstFrame=!0,this.data.hasMask&&(this.maskManager.firstFrame=!0)):!1!==this.isVisible&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!1);var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)(this.isVisible||this._isParent&&"transform"===this.dynamicProperties[t].type)&&(this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.elemMdf=!0,this.globalData.mdf=!0));return this.data.hasMask&&this.isVisible&&this.maskManager.prepareFrame(e*this.data.sr),this.currentFrameNum=e*this.data.sr,this.isVisible},BaseElement.prototype.globalToLocal=function(e){var t=[];t.push(this.finalTransform);for(var n=!0,a=this.comp;n;)a.finalTransform?(a.data.hasMask&&t.splice(0,0,a.finalTransform),a=a.comp):n=!1;var i,r,o=t.length;for(i=0;i<o;i+=1)r=t[i].mat.applyToPointArray(0,0,0),e=[e[0]-r[0],e[1]-r[1],0];return e},BaseElement.prototype.initExpressions=function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?this.layerInterface.shapeInterface=ShapeExpressionInterface.createShapeInterface(this.shapesData,this.itemsData,this.layerInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this))},BaseElement.prototype.setBlendMode=function(){var e="";switch(this.data.bm){case 1:e="multiply";break;case 2:e="screen";break;case 3:e="overlay";break;case 4:e="darken";break;case 5:e="lighten";break;case 6:e="color-dodge";break;case 7:e="color-burn";break;case 8:e="hard-light";break;case 9:e="soft-light";break;case 10:e="difference";break;case 11:e="exclusion";break;case 12:e="hue";break;case 13:e="saturation";break;case 14:e="color";break;case 15:e="luminosity"}(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},BaseElement.prototype.init=function(){this.data.sr||(this.data.sr=1),this.dynamicProperties=this.dynamicProperties||[],this.data.ef&&(this.effects=new EffectsManager(this.data,this,this.dynamicProperties)),this.hidden=!1,this.firstFrame=!0,this.isVisible=!1,this._isParent=!1,this.currentFrameNum=-99999,this.lastNum=-99999,this.data.ks&&(this.finalTransform={mProp:PropertyFactory.getProp(this,this.data.ks,2,null,this.dynamicProperties),matMdf:!1,opMdf:!1,mat:new Matrix,opacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.finalTransform.op=this.finalTransform.mProp.o,this.transform=this.finalTransform.mProp,11!==this.data.ty&&this.createElements(),this.data.hasMask&&this.addMasks(this.data)),this.elemMdf=!1},BaseElement.prototype.getType=function(){return this.type},BaseElement.prototype.resetHierarchy=function(){this.hierarchy?this.hierarchy.length=0:this.hierarchy=[]},BaseElement.prototype.getHierarchy=function(){return this.hierarchy||(this.hierarchy=[]),this.hierarchy},BaseElement.prototype.setHierarchy=function(e){this.hierarchy=e},BaseElement.prototype.getLayerSize=function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}},BaseElement.prototype.hide=function(){},BaseElement.prototype.sourceRectAtTime=function(){return{top:0,left:0,width:100,height:100}},BaseElement.prototype.mHelper=new Matrix,createElement(BaseElement,SVGBaseElement),SVGBaseElement.prototype.createElements=function(){this.layerElement=document.createElementNS(svgNS,"g"),this.transformedElement=this.layerElement,this.data.hasMask&&(this.maskedElement=this.layerElement);var e=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var t=document.createElementNS(svgNS,"mask");if(t.setAttribute("id",this.layerId),t.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t),!featureSupport.maskType&&1==this.data.td){t.setAttribute("mask-type","luminance");var n=randomString(10),a=filtersFactory.createFilter(n);this.globalData.defs.appendChild(a),a.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(l=document.createElementNS(svgNS,"g")).appendChild(this.layerElement),e=l,t.appendChild(l),l.setAttribute("filter","url("+locationHref+"#"+n+")")}}else if(2==this.data.td){var i=document.createElementNS(svgNS,"mask");i.setAttribute("id",this.layerId),i.setAttribute("mask-type","alpha");var r=document.createElementNS(svgNS,"g");i.appendChild(r),n=randomString(10),a=filtersFactory.createFilter(n);var o=document.createElementNS(svgNS,"feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1"),a.appendChild(o),this.globalData.defs.appendChild(a);var s=document.createElementNS(svgNS,"rect");if(s.setAttribute("width",this.comp.data.w),s.setAttribute("height",this.comp.data.h),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("fill","#ffffff"),s.setAttribute("opacity","0"),r.setAttribute("filter","url("+locationHref+"#"+n+")"),r.appendChild(s),r.appendChild(this.layerElement),e=r,!featureSupport.maskType){i.setAttribute("mask-type","luminance"),a.appendChild(filtersFactory.createAlphaToLuminanceFilter());var l=document.createElementNS(svgNS,"g");r.appendChild(s),l.appendChild(this.layerElement),e=l,r.appendChild(l)}this.globalData.defs.appendChild(i)}}else(this.data.hasMask||this.data.tt)&&this.data.tt?(this.matteElement=document.createElementNS(svgNS,"g"),this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(!this.data.ln&&!this.data.cl||4!==this.data.ty&&0!==this.data.ty||(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)),0===this.data.ty){var c=document.createElementNS(svgNS,"clipPath"),u=document.createElementNS(svgNS,"path");u.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var d="cp_"+randomString(8);if(c.setAttribute("id",d),c.appendChild(u),this.globalData.defs.appendChild(c),this.checkMasks()){var f=document.createElementNS(svgNS,"g");f.setAttribute("clip-path","url("+locationHref+"#"+d+")"),f.appendChild(this.layerElement),this.transformedElement=f,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+d+")")}0!==this.data.bm&&this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.data.ef&&(this.effectsManager=new SVGEffects(this)),this.checkParenting()},SVGBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,SVGBaseElement.prototype.renderFrame=function(e){if(3===this.data.ty||this.data.hd||!this.isVisible)return!1;var t;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.firstFrame||this.finalTransform.op.mdf,this.finalTransform.matMdf=this.firstFrame||this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var n=this.finalTransform.mat;if(this.hierarchy){var a=0,i=this.hierarchy.length;if(!this.finalTransform.matMdf)for(;a<i;){if(this.hierarchy[a].finalTransform.mProp.mdf){this.finalTransform.matMdf=!0;break}a+=1}if(this.finalTransform.matMdf)for(t=this.finalTransform.mProp.v.props,n.cloneFromProps(t),a=0;a<i;a+=1)t=this.hierarchy[a].finalTransform.mProp.v.props,n.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}else this.isVisible&&(n=this.finalTransform.mProp.v);return this.finalTransform.matMdf&&this.layerElement&&this.transformedElement.setAttribute("transform",n.to2dCSS()),this.finalTransform.opMdf&&this.layerElement&&(this.finalTransform.op.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.hidden&&this.isTransparent&&(this.isTransparent=!1,this.show()),this.transformedElement.setAttribute("opacity",this.finalTransform.op.v)),this.data.hasMask&&this.maskManager.renderFrame(n),this.effectsManager&&this.effectsManager.renderFrame(this.firstFrame),this.isVisible},SVGBaseElement.prototype.destroy=function(){this.layerElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&this.maskManager.destroy()},SVGBaseElement.prototype.getBaseElement=function(){return this.baseElement},SVGBaseElement.prototype.addMasks=function(e){this.maskManager=new MaskElement(e,this,this.globalData)},SVGBaseElement.prototype.setMatte=function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")},SVGBaseElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},SVGBaseElement.prototype.show=function(){this.isVisible&&!this.isTransparent&&(this.hidden=!1,this.layerElement.style.display="block")},createElement(SVGBaseElement,IShapeElement),IShapeElement.prototype.identityMatrix=new Matrix,IShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"square"},IShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},IShapeElement.prototype.searchProcessedElement=function(e){for(var t=this.processedElements.length;t;)if(t-=1,this.processedElements[t].elem===e)return this.processedElements[t].pos;return 0},IShapeElement.prototype.addProcessedElement=function(e,t){for(var n=this.processedElements.length;n;)if(n-=1,this.processedElements[n].elem===e){this.processedElements[n].pos=t;break}0===n&&this.processedElements.push({elem:e,pos:t})},IShapeElement.prototype.buildExpressionInterface=function(){},IShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0),this.data.hd&&!this.data.td||styleUnselectableDiv(this.layerElement)},IShapeElement.prototype.setGradientData=function(e,t,n){var a,i="gr_"+randomString(10);(a=1===t.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient")).setAttribute("id",i),a.setAttribute("spreadMethod","pad"),a.setAttribute("gradientUnits","userSpaceOnUse");var r,o,s,l=[];for(s=4*t.g.p,o=0;o<s;o+=4)r=document.createElementNS(svgNS,"stop"),a.appendChild(r),l.push(r);e.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+i+")"),this.globalData.defs.appendChild(a),n.gf=a,n.cst=l},IShapeElement.prototype.setGradientOpacity=function(e,t,n){if(e.g.k.k[0].s&&e.g.k.k[0].s.length>4*e.g.p||e.g.k.k.length>4*e.g.p){var a,i,r,o,s=document.createElementNS(svgNS,"mask"),l=document.createElementNS(svgNS,"path");s.appendChild(l);var c="op_"+randomString(10),u="mk_"+randomString(10);s.setAttribute("id",u),(a=1===e.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient")).setAttribute("id",c),a.setAttribute("spreadMethod","pad"),a.setAttribute("gradientUnits","userSpaceOnUse"),o=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var d=[];for(r=4*e.g.p;r<o;r+=2)(i=document.createElementNS(svgNS,"stop")).setAttribute("stop-color","rgb(255,255,255)"),a.appendChild(i),d.push(i);return l.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+c+")"),this.globalData.defs.appendChild(a),this.globalData.defs.appendChild(s),t.of=a,t.ost=d,n.msElem=l,u}},IShapeElement.prototype.createStyleElement=function(e,t,n){var a={},i={data:e,type:e.ty,d:"",ld:"",lvl:t,mdf:!1,closed:!1},r=document.createElementNS(svgNS,"path");if(a.o=PropertyFactory.getProp(this,e.o,0,.01,n),("st"==e.ty||"gs"==e.ty)&&(r.setAttribute("stroke-linecap",this.lcEnum[e.lc]||"round"),r.setAttribute("stroke-linejoin",this.ljEnum[e.lj]||"round"),r.setAttribute("fill-opacity","0"),1==e.lj&&r.setAttribute("stroke-miterlimit",e.ml),a.w=PropertyFactory.getProp(this,e.w,0,null,n),e.d)){var o=PropertyFactory.getDashProp(this,e.d,"svg",n);o.k||(r.setAttribute("stroke-dasharray",o.dasharray),r.setAttribute("stroke-dashoffset",o.dashoffset)),a.d=o}if("fl"==e.ty||"st"==e.ty)a.c=PropertyFactory.getProp(this,e.c,1,255,n);else{a.g=PropertyFactory.getGradientProp(this,e.g,n),2==e.t&&(a.h=PropertyFactory.getProp(this,e.h,0,.01,n),a.a=PropertyFactory.getProp(this,e.a,0,degToRads,n)),a.s=PropertyFactory.getProp(this,e.s,1,null,n),a.e=PropertyFactory.getProp(this,e.e,1,null,n),this.setGradientData(r,e,a,i);var s=this.setGradientOpacity(e,a,i);s&&r.setAttribute("mask","url(#"+s+")")}return a.elem=r,2===e.r&&r.setAttribute("fill-rule","evenodd"),e.ln&&r.setAttribute("id",e.ln),e.cl&&r.setAttribute("class",e.cl),i.pElem=r,this.stylesList.push(i),a.style=i,a},IShapeElement.prototype.createGroupElement=function(e){var t={it:[],prevViewData:[]},n=document.createElementNS(svgNS,"g");return t.gr=n,e.ln&&t.gr.setAttribute("id",e.ln),t},IShapeElement.prototype.createTransformElement=function(e,t){return{transform:{op:PropertyFactory.getProp(this,e.o,0,.01,t),mProps:PropertyFactory.getProp(this,e,2,null,t)},elements:[]}},IShapeElement.prototype.createShapeElement=function(e,t,n,a){var i={elements:[],caches:[],styles:[],transformers:t,lStr:""},r=4;return"rc"==e.ty?r=5:"el"==e.ty?r=6:"sr"==e.ty&&(r=7),i.sh=ShapePropertyFactory.getShapeProp(this,e,r,a),i.lvl=n,this.shapes.push(i.sh),this.addShapeToModifiers(i),i};var cont=0;function ITextElement(e,t,n,a){}function SVGTextElement(e,t,n,a,i){this.textSpans=[],this.renderType="svg",this._parent.constructor.call(this,e,t,n,a,i)}function SVGTintFilter(e,t){this.filterManager=t;var n=document.createElementNS(svgNS,"feColorMatrix");if(n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n),(n=document.createElementNS(svgNS,"feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result","f2"),e.appendChild(n),this.matrixFilter=n,100!==t.effectElements[2].p.v||t.effectElements[2].p.k){var a,i=document.createElementNS(svgNS,"feMerge");e.appendChild(i),(a=document.createElementNS(svgNS,"feMergeNode")).setAttribute("in","SourceGraphic"),i.appendChild(a),(a=document.createElementNS(svgNS,"feMergeNode")).setAttribute("in","f2"),i.appendChild(a)}}function SVGFillFilter(e,t){this.filterManager=t;var n=document.createElementNS(svgNS,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(n),this.matrixFilter=n}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(e,t){this.filterManager=t;var n=document.createElementNS(svgNS,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n);var a=document.createElementNS(svgNS,"feComponentTransfer");a.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(a),this.matrixFilter=a;var i=document.createElementNS(svgNS,"feFuncR");i.setAttribute("type","table"),a.appendChild(i),this.feFuncR=i;var r=document.createElementNS(svgNS,"feFuncG");r.setAttribute("type","table"),a.appendChild(r),this.feFuncG=r;var o=document.createElementNS(svgNS,"feFuncB");o.setAttribute("type","table"),a.appendChild(o),this.feFuncB=o}function SVGProLevelsFilter(e,t){this.filterManager=t;var n=this.filterManager.effectElements,a=document.createElementNS(svgNS,"feComponentTransfer");(n[9].p.k||0!==n[9].p.v||n[10].p.k||1!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||0!==n[12].p.v||n[13].p.k||1!==n[13].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",a)),(n[16].p.k||0!==n[16].p.v||n[17].p.k||1!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||0!==n[19].p.v||n[20].p.k||1!==n[20].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",a)),(n[23].p.k||0!==n[23].p.v||n[24].p.k||1!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||0!==n[26].p.v||n[27].p.k||1!==n[27].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",a)),(n[30].p.k||0!==n[30].p.v||n[31].p.k||1!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||0!==n[33].p.v||n[34].p.k||1!==n[34].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",a)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(a.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(a),a=document.createElementNS(svgNS,"feComponentTransfer")),(n[2].p.k||0!==n[2].p.v||n[3].p.k||1!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||0!==n[5].p.v||n[6].p.k||1!==n[6].p.v)&&(a.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(a),this.feFuncRComposed=this.createFeFunc("feFuncR",a),this.feFuncGComposed=this.createFeFunc("feFuncG",a),this.feFuncBComposed=this.createFeFunc("feFuncB",a))}function SVGDropShadowEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","400%"),e.setAttribute("height","400%"),this.filterManager=t;var n=document.createElementNS(svgNS,"feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,e.appendChild(n);var a=document.createElementNS(svgNS,"feOffset");a.setAttribute("dx","25"),a.setAttribute("dy","0"),a.setAttribute("in","drop_shadow_1"),a.setAttribute("result","drop_shadow_2"),this.feOffset=a,e.appendChild(a);var i=document.createElementNS(svgNS,"feFlood");i.setAttribute("flood-color","#00ff00"),i.setAttribute("flood-opacity","1"),i.setAttribute("result","drop_shadow_3"),this.feFlood=i,e.appendChild(i);var r=document.createElementNS(svgNS,"feComposite");r.setAttribute("in","drop_shadow_3"),r.setAttribute("in2","drop_shadow_2"),r.setAttribute("operator","in"),r.setAttribute("result","drop_shadow_4"),e.appendChild(r);var o,s=document.createElementNS(svgNS,"feMerge");e.appendChild(s),o=document.createElementNS(svgNS,"feMergeNode"),s.appendChild(o),(o=document.createElementNS(svgNS,"feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=o,this.feMerge=s,this.originalNodeAdded=!1,s.appendChild(o)}function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=document.createElementNS(svgNS,"g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGEffects(e){var t,n,a=e.data.ef.length,i=randomString(10),r=filtersFactory.createFilter(i),o=0;for(this.filters=[],t=0;t<a;t+=1)20===e.data.ef[t].ty?(o+=1,n=new SVGTintFilter(r,e.effects.effectElements[t]),this.filters.push(n)):21===e.data.ef[t].ty?(o+=1,n=new SVGFillFilter(r,e.effects.effectElements[t]),this.filters.push(n)):22===e.data.ef[t].ty?(n=new SVGStrokeEffect(e,e.effects.effectElements[t]),this.filters.push(n)):23===e.data.ef[t].ty?(o+=1,n=new SVGTritoneFilter(r,e.effects.effectElements[t]),this.filters.push(n)):24===e.data.ef[t].ty?(o+=1,n=new SVGProLevelsFilter(r,e.effects.effectElements[t]),this.filters.push(n)):25===e.data.ef[t].ty?(o+=1,n=new SVGDropShadowEffect(r,e.effects.effectElements[t]),this.filters.push(n)):28===e.data.ef[t].ty&&(n=new SVGMatte3Effect(r,e.effects.effectElements[t],e),this.filters.push(n));o&&(e.globalData.defs.appendChild(r),e.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")"))}function ICompElement(e,t,n,a,i){this._parent.constructor.call(this,e,t,n,a,i),this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?Array.apply(null,{length:this.layers.length}):[],this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,n.frameRate,this.dynamicProperties)),this.data.xt?(this.layerElement=document.createElementNS(svgNS,"g"),this.buildAllItems()):n.progressiveLoad||this.buildAllItems()}function IImageElement(e,t,n,a,i){this.assetData=n.getAssetData(e.refId),this._parent.constructor.call(this,e,t,n,a,i)}function ISolidElement(e,t,n,a,i){this._parent.constructor.call(this,e,t,n,a,i)}IShapeElement.prototype.setElementStyles=function(){var e,t=this.stylesList.length,n=[];for(e=0;e<t;e+=1)this.stylesList[e].closed||n.push(this.stylesList[e]);return n},IShapeElement.prototype.reloadShapes=function(){this.firstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},IShapeElement.prototype.searchShapes=function(e,t,n,a,i,r,o,s){var l,c,u,d,f,h,p=[].concat(o),A=e.length-1,m=[],_=[];for(l=A;l>=0;l-=1){if((h=this.searchProcessedElement(e[l]))?t[l]=n[h-1]:e[l]._render=s,"fl"==e[l].ty||"st"==e[l].ty||"gf"==e[l].ty||"gs"==e[l].ty)h?t[l].style.closed=!1:t[l]=this.createStyleElement(e[l],r,i),e[l]._render&&a.appendChild(t[l].elem),m.push(t[l].style);else if("gr"==e[l].ty){if(h)for(u=t[l].it.length,c=0;c<u;c+=1)t[l].prevViewData[c]=t[l].it[c];else t[l]=this.createGroupElement(e[l]);this.searchShapes(e[l].it,t[l].it,t[l].prevViewData,t[l].gr,i,r+1,p,s),e[l]._render&&a.appendChild(t[l].gr)}else"tr"==e[l].ty?(h||(t[l]=this.createTransformElement(e[l],i)),d=t[l].transform,p.push(d)):"sh"==e[l].ty||"rc"==e[l].ty||"el"==e[l].ty||"sr"==e[l].ty?(h||(t[l]=this.createShapeElement(e[l],p,r,i)),t[l].elements=this.setElementStyles()):"tm"==e[l].ty||"rd"==e[l].ty||"ms"==e[l].ty?(h?(f=t[l]).closed=!1:((f=ShapeModifiers.getModifier(e[l].ty)).init(this,e[l],i),t[l]=f,this.shapeModifiers.push(f)),_.push(f)):"rp"==e[l].ty&&(h?(f=t[l]).closed=!0:(f=ShapeModifiers.getModifier(e[l].ty),t[l]=f,f.init(this,e,l,t,i),this.shapeModifiers.push(f),s=!1),_.push(f));this.addProcessedElement(e[l],l+1)}for(A=m.length,l=0;l<A;l+=1)m[l].closed=!0;for(A=_.length,l=0;l<A;l+=1)_[l].closed=!0},IShapeElement.prototype.addShapeToModifiers=function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},IShapeElement.prototype.renderModifiers=function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].reset();for(e=(t=this.shapeModifiers.length)-1;e>=0;e-=1)this.shapeModifiers[e].processShapes(this.firstFrame)}},IShapeElement.prototype.renderFrame=function(e){if(!1!==this._parent.renderFrame.call(this,e)){this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers();var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].d="",this.stylesList[t].mdf=!1;for(this.renderShape(this.shapesData,this.itemsData,null),t=0;t<n;t+=1)"0"===this.stylesList[t].ld&&(this.stylesList[t].ld="1",this.stylesList[t].pElem.style.display="block"),(this.stylesList[t].mdf||this.firstFrame)&&(this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].msElem&&this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d));this.firstFrame&&(this.firstFrame=!1)}else this.hide()},IShapeElement.prototype.hide=function(){if(!this.hidden){var e;for(this.layerElement.style.display="none",e=this.stylesList.length-1;e>=0;e-=1)"0"!==this.stylesList[e].ld&&(this.stylesList[e].ld="0",this.stylesList[e].pElem.style.display="none",this.stylesList[e].pElem.parentNode&&(this.stylesList[e].parent=this.stylesList[e].pElem.parentNode));this.hidden=!0}},IShapeElement.prototype.renderShape=function(e,t,n){var a,i;for(a=e.length-1;a>=0;a-=1)"tr"==(i=e[a].ty)?((this.firstFrame||t[a].transform.op.mdf&&n)&&n.setAttribute("opacity",t[a].transform.op.v),(this.firstFrame||t[a].transform.mProps.mdf&&n)&&n.setAttribute("transform",t[a].transform.mProps.v.to2dCSS())):"sh"==i||"el"==i||"rc"==i||"sr"==i?this.renderPath(e[a],t[a]):"fl"==i?this.renderFill(e[a],t[a]):"gf"==i?this.renderGradient(e[a],t[a]):"gs"==i?(this.renderGradient(e[a],t[a]),this.renderStroke(e[a],t[a])):"st"==i?this.renderStroke(e[a],t[a]):"gr"==i&&this.renderShape(e[a].it,t[a].it,t[a].gr)},IShapeElement.prototype.buildShapeString=function(e,t,n,a){var i,r="";for(i=1;i<t;i+=1)1===i&&(r+=" M"+a.applyToPointStringified(e.v[0][0],e.v[0][1])),r+=" C"+a.applyToPointStringified(e.o[i-1][0],e.o[i-1][1])+" "+a.applyToPointStringified(e.i[i][0],e.i[i][1])+" "+a.applyToPointStringified(e.v[i][0],e.v[i][1]);return 1===t&&(r+=" M"+a.applyToPointStringified(e.v[0][0],e.v[0][1])),n&&t&&(r+=" C"+a.applyToPointStringified(e.o[i-1][0],e.o[i-1][1])+" "+a.applyToPointStringified(e.i[0][0],e.i[0][1])+" "+a.applyToPointStringified(e.v[0][0],e.v[0][1]),r+="z"),r},IShapeElement.prototype.renderPath=function(e,t){var n,a,i,r,o,s,l=t.elements.length,c=t.lvl;if(e._render)for(s=0;s<l;s+=1)if(t.elements[s].data._render){r=t.sh.mdf||this.firstFrame,i="M0 0";var u=t.sh.paths;if(a=u._length,t.elements[s].lvl<c){for(var d,f=this.mHelper.reset(),h=c-t.elements[s].lvl,p=t.transformers.length-1;h>0;)r=t.transformers[p].mProps.mdf||r,d=t.transformers[p].mProps.v.props,f.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),h--,p--;if(r){for(n=0;n<a;n+=1)(o=u.shapes[n])&&o._length&&(i+=this.buildShapeString(o,o._length,o.c,f));t.caches[s]=i}else i=t.caches[s]}else if(r){for(n=0;n<a;n+=1)(o=u.shapes[n])&&o._length&&(i+=this.buildShapeString(o,o._length,o.c,this.identityMatrix));t.caches[s]=i}else i=t.caches[s];t.elements[s].d+=i,t.elements[s].mdf=r||t.elements[s].mdf}else t.elements[s].mdf=!0},IShapeElement.prototype.renderFill=function(e,t){var n=t.style;(t.c.mdf||this.firstFrame)&&n.pElem.setAttribute("fill","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||this.firstFrame)&&n.pElem.setAttribute("fill-opacity",t.o.v)},IShapeElement.prototype.renderGradient=function(e,t){var n,a,i,r,o,s=t.gf,l=t.of,c=t.s.v,u=t.e.v;if(t.o.mdf||this.firstFrame){var d="gf"===e.ty?"fill-opacity":"stroke-opacity";t.elem.setAttribute(d,t.o.v)}if(t.s.mdf||this.firstFrame){var f=1===e.t?"x1":"cx",h="x1"===f?"y1":"cy";s.setAttribute(f,c[0]),s.setAttribute(h,c[1]),l&&(l.setAttribute(f,c[0]),l.setAttribute(h,c[1]))}if(t.g.cmdf||this.firstFrame){n=t.cst;var p=t.g.c;for(i=n.length,a=0;a<i;a+=1)(r=n[a]).setAttribute("offset",p[4*a]+"%"),r.setAttribute("stop-color","rgb("+p[4*a+1]+","+p[4*a+2]+","+p[4*a+3]+")")}if(l&&(t.g.omdf||this.firstFrame)){n=t.ost;var A=t.g.o;for(i=n.length,a=0;a<i;a+=1)(r=n[a]).setAttribute("offset",A[2*a]+"%"),r.setAttribute("stop-opacity",A[2*a+1])}if(1===e.t)(t.e.mdf||this.firstFrame)&&(s.setAttribute("x2",u[0]),s.setAttribute("y2",u[1]),l&&(l.setAttribute("x2",u[0]),l.setAttribute("y2",u[1])));else if((t.s.mdf||t.e.mdf||this.firstFrame)&&(o=Math.sqrt(Math.pow(c[0]-u[0],2)+Math.pow(c[1]-u[1],2)),s.setAttribute("r",o),l&&l.setAttribute("r",o)),t.e.mdf||t.h.mdf||t.a.mdf||this.firstFrame){o||(o=Math.sqrt(Math.pow(c[0]-u[0],2)+Math.pow(c[1]-u[1],2)));var m=Math.atan2(u[1]-c[1],u[0]-c[0]),_=o*(t.h.v>=1?.99:t.h.v<=-1?-.99:t.h.v),v=Math.cos(m+t.a.v)*_+c[0],g=Math.sin(m+t.a.v)*_+c[1];s.setAttribute("fx",v),s.setAttribute("fy",g),l&&(l.setAttribute("fx",v),l.setAttribute("fy",g))}},IShapeElement.prototype.renderStroke=function(e,t){var n=t.style,a=t.d;a&&a.k&&(a.mdf||this.firstFrame)&&(n.pElem.setAttribute("stroke-dasharray",a.dasharray),n.pElem.setAttribute("stroke-dashoffset",a.dashoffset)),t.c&&(t.c.mdf||this.firstFrame)&&n.pElem.setAttribute("stroke","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||this.firstFrame)&&n.pElem.setAttribute("stroke-opacity",t.o.v),(t.w.mdf||this.firstFrame)&&(n.pElem.setAttribute("stroke-width",t.w.v),n.msElem&&n.msElem.setAttribute("stroke-width",t.w.v))},IShapeElement.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.shapeData=null,this.itemsData=null,this.parentContainer=null,this.placeholder=null},ITextElement.prototype.init=function(){this.lettersChangedFlag=!0,this.dynamicProperties=this.dynamicProperties||[],this.textAnimator=new TextAnimatorProperty(this.data.t,this.renderType,this),this.textProperty=new TextProperty(this,this.data.t,this.dynamicProperties),this._parent.init.call(this),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._parent.prepareFrame.call(this,e),(this.textProperty.mdf||this.textProperty.firstFrame)&&(this.buildNewText(),this.textProperty.firstFrame=!1)},ITextElement.prototype.createPathShape=function(e,t){var n,a,i=t.length,r="";for(n=0;n<i;n+=1)a=t[n].ks.k,r+=this.buildShapeString(a,a.i.length,!0,e);return r},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,a,i){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(a,i,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.buildShapeString=IShapeElement.prototype.buildShapeString,ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){this._parent.destroy.call(this._parent)},createElement(SVGBaseElement,SVGTextElement),extendPrototype(ITextElement,SVGTextElement),SVGTextElement.prototype.createElements=function(){this._parent.createElements.call(this),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=document.createElementNS(svgNS,"text"))},SVGTextElement.prototype.buildNewText=function(){var e,t,n=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:n?n.l.length:0}),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.s);var a=this.globalData.fontManager.getFontByName(n.f);if(a.fClass)this.layerElement.setAttribute("class",a.fClass);else{this.layerElement.setAttribute("font-family",a.fFamily);var i=n.fWeight,r=n.fStyle;this.layerElement.setAttribute("font-style",r),this.layerElement.setAttribute("font-weight",i)}var o=n.l||[],s=this.globalData.fontManager.chars;if(t=o.length){var l,c,u=this.mHelper,d="",f=this.data.singleShape,h=0,p=0,A=!0,m=n.tr/1e3*n.s;if(f&&!s){var _=this.textContainer,v="";switch(n.j){case 1:v="end";break;case 2:v="middle";break;case 2:v="start"}_.setAttribute("text-anchor",v),_.setAttribute("letter-spacing",m);var g=n.t.split(String.fromCharCode(13));for(t=g.length,p=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(l=this.textSpans[e]||document.createElementNS(svgNS,"tspan")).textContent=g[e],l.setAttribute("x",0),l.setAttribute("y",p),l.style.display="inherit",_.appendChild(l),this.textSpans[e]=l,p+=n.lh;this.layerElement.appendChild(_)}else{var y,b,w=this.textSpans.length;for(e=0;e<t;e+=1)s&&f&&0!==e||(l=w>e?this.textSpans[e]:document.createElementNS(svgNS,s?"path":"text"),w<=e&&(l.setAttribute("stroke-linecap","butt"),l.setAttribute("stroke-linejoin","round"),l.setAttribute("stroke-miterlimit","4"),this.textSpans[e]=l,this.layerElement.appendChild(l)),l.style.display="inherit"),u.reset(),s?(u.scale(n.s/100,n.s/100),f&&(o[e].n&&(h=-m,p+=n.yOffset,p+=A?1:0,A=!1),this.applyTextPropertiesToMatrix(n,u,o[e].line,h,p),h+=o[e].l||0,h+=m),c=(y=(b=this.globalData.fontManager.getCharData(n.t.charAt(e),a.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&b.data||{}).shapes?y.shapes[0].it:[],f?d+=this.createPathShape(u,c):l.setAttribute("d",this.createPathShape(u,c))):(l.textContent=o[e].val,l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));f&&l.setAttribute("d",d)}for(;e<this.textSpans.length;)this.textSpans[e].style.display="none",e+=1;this._sizeChanged=!0}},SVGTextElement.prototype.sourceRectAtTime=function(e){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderLetters(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextElement.prototype.renderLetters=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,a,i=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l;for(t=r.length,e=0;e<t;e+=1)r[e].n||(n=i[e],a=this.textSpans[e],n.mdf.m&&a.setAttribute("transform",n.m),n.mdf.o&&a.setAttribute("opacity",n.o),n.mdf.sw&&a.setAttribute("stroke-width",n.sw),n.mdf.sc&&a.setAttribute("stroke",n.sc),n.mdf.fc&&a.setAttribute("fill",n.fc))}},SVGTextElement.prototype.renderFrame=function(e){!1!==this._parent.renderFrame.call(this,e)?(this.hidden&&this.show(),this.firstFrame&&(this.firstFrame=!1),this.renderLetters()):this.hide()},SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,a=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+a+" 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,a,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(a=this.elem.maskManager.masksProperties.length,n=0):a=1+(n=this.filterManager.effectElements[0].p.v-1),(t=document.createElementNS(svgNS,"g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<a;n+=1)e=document.createElementNS(svgNS,"path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var r=document.createElementNS(svgNS,"mask"),o="stms_"+randomString(10);r.setAttribute("id",o),r.setAttribute("mask-type","alpha"),r.appendChild(t),this.elem.globalData.defs.appendChild(r);var s=document.createElementNS(svgNS,"g");s.setAttribute("mask","url("+locationHref+"#"+o+")"),i[0]&&s.appendChild(i[0]),this.elem.layerElement.appendChild(s),this.masker=r,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var t,n,a,i=this.paths.length;for(t=0;t<i;t+=1)if(n=this.elem.maskManager.viewData[this.paths[t].m],a=this.paths[t].p,(e||this.filterManager.mdf||n.prop.mdf)&&a.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p.mdf||this.filterManager.effectElements[4].p.mdf||this.filterManager.effectElements[7].p.mdf||this.filterManager.effectElements[8].p.mdf||n.prop.mdf){var r;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,s=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=a.getTotalLength();r="0 0 0 "+l*o+" ";var c,u=l*(s-o),d=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,f=Math.floor(u/d);for(c=0;c<f;c+=1)r+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";r+="0 "+10*l+" 0 0"}else r="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;a.setAttribute("stroke-dasharray",r)}if((e||this.filterManager.effectElements[4].p.mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p.mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p.mdf)){var h=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*h[0])+","+bm_floor(255*h[1])+","+bm_floor(255*h[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,a=this.filterManager.effectElements[2].p.v,i=a[0]+" "+n[0]+" "+t[0],r=a[1]+" "+n[1]+" "+t[1],o=a[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",r),this.feFuncB.setAttribute("tableValues",o)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=document.createElementNS(svgNS,e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,a,i){for(var r,o,s=0,l=Math.min(e,t),c=Math.max(e,t),u=Array.call(null,{length:256}),d=0,f=i-a,h=t-e;s<=256;)o=(r=s/256)<=l?h<0?i:a:r>=c?h<0?a:i:a+f*Math.pow((r-e)/h,1/n),u[d++]=o,s+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[2].p.mdf||n[3].p.mdf||n[4].p.mdf||n[5].p.mdf||n[6].p.mdf)&&(t=this.getTableValue(n[2].p.v,n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[9].p.mdf||n[10].p.mdf||n[11].p.mdf||n[12].p.mdf||n[13].p.mdf)&&(t=this.getTableValue(n[9].p.v,n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[16].p.mdf||n[17].p.mdf||n[18].p.mdf||n[19].p.mdf||n[20].p.mdf)&&(t=this.getTableValue(n[16].p.v,n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[23].p.mdf||n[24].p.mdf||n[25].p.mdf||n[26].p.mdf||n[27].p.mdf)&&(t=this.getTableValue(n[23].p.v,n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[30].p.mdf||n[31].p.mdf||n[32].p.mdf||n[33].p.mdf||n[34].p.mdf)&&(t=this.getTableValue(n[30].p.v,n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v),this.feFuncA.setAttribute("tableValues",t))}},SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){if((e||this.filterManager.effectElements[4].p.mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p.mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p.mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p.mdf||this.filterManager.effectElements[3].p.mdf){var n=this.filterManager.effectElements[3].p.v,a=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(a),r=n*Math.sin(a);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",r)}}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){var n=document.createElementNS(svgNS,"mask");n.setAttribute("id",t.layerId),n.setAttribute("mask-type","alpha"),n.appendChild(t.layerElement),e.setMatte(t.layerId),t.data.hd=!1,e.globalData.defs.appendChild(n)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=0,n=this.elem.comp.elements.length;t<n;)this.elem.comp.elements[t].data.ind===e&&this.setElementAsMask(this.elem,this.elem.comp.elements[t]),t+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},createElement(SVGBaseElement,ICompElement),ICompElement.prototype.hide=function(){if(!this.hidden){this._parent.hide.call(this);var e,t=this.elements.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].hide()}},ICompElement.prototype.prepareFrame=function(e){if(this._parent.prepareFrame.call(this,e),!1!==this.isVisible||this.data.xt){if(this.tm){var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}else this.renderedFrame=e/this.data.sr;var n,a=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=0;n<a;n+=1)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st)}},ICompElement.prototype.renderFrame=function(e){var t,n=this._parent.renderFrame.call(this,e),a=this.layers.length;if(!1!==n){for(this.hidden&&this.show(),t=0;t<a;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.firstFrame&&(this.firstFrame=!1)}else this.hide()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroy=function(){this._parent.destroy.call(this._parent);var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.checkLayers=SVGRenderer.prototype.checkLayers,ICompElement.prototype.buildItem=SVGRenderer.prototype.buildItem,ICompElement.prototype.buildAllItems=SVGRenderer.prototype.buildAllItems,ICompElement.prototype.buildElementParenting=SVGRenderer.prototype.buildElementParenting,ICompElement.prototype.createItem=SVGRenderer.prototype.createItem,ICompElement.prototype.createImage=SVGRenderer.prototype.createImage,ICompElement.prototype.createComp=SVGRenderer.prototype.createComp,ICompElement.prototype.createSolid=SVGRenderer.prototype.createSolid,ICompElement.prototype.createShape=SVGRenderer.prototype.createShape,ICompElement.prototype.createText=SVGRenderer.prototype.createText,ICompElement.prototype.createBase=SVGRenderer.prototype.createBase,ICompElement.prototype.appendElementInPos=SVGRenderer.prototype.appendElementInPos,ICompElement.prototype.checkPendingElements=SVGRenderer.prototype.checkPendingElements,ICompElement.prototype.addPendingElement=SVGRenderer.prototype.addPendingElement,createElement(SVGBaseElement,IImageElement),IImageElement.prototype.createElements=function(){var e=this.globalData.getAssetsPath(this.assetData);this._parent.createElements.call(this),this.innerElem=document.createElementNS(svgNS,"image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio","xMidYMid slice"),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.maskedElement=this.innerElem,this.layerElement.appendChild(this.innerElem),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},IImageElement.prototype.renderFrame=function(e){!1!==this._parent.renderFrame.call(this,e)?(this.hidden&&this.show(),this.firstFrame&&(this.firstFrame=!1)):this.hide()},IImageElement.prototype.destroy=function(){this._parent.destroy.call(this._parent),this.innerElem=null},createElement(SVGBaseElement,ISolidElement),ISolidElement.prototype.createElements=function(){this._parent.createElements.call(this);var e=document.createElementNS(svgNS,"rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e),this.innerElem=e,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},ISolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,ISolidElement.prototype.destroy=IImageElement.prototype.destroy;var animationManager=function(){var e={},t=[],n=0,a=0,i=!0,r=0;function o(e){for(var n=0,i=e.target;n<a;)t[n].animation===i&&(t.splice(n,1),n-=1,a-=1,i.isPaused||c()),n+=1}function s(e,n){if(!e)return null;for(var i=0;i<a;){if(t[i].elem==e&&null!==t[i].elem)return t[i].animation;i+=1}var r=new AnimationItem;return u(r,e),r.setData(e,n),r}function l(){r+=1,i&&(i=!1,window.requestAnimationFrame(f))}function c(){0==(r-=1)&&(i=!0)}function u(e,n){e.addEventListener("destroy",o),e.addEventListener("_active",l),e.addEventListener("_idle",c),t.push({elem:n,animation:e}),a+=1}function d(e){var r,o=e-n;for(r=0;r<a;r+=1)t[r].animation.advanceTime(o);n=e,i||window.requestAnimationFrame(d)}function f(e){n=e,window.requestAnimationFrame(d)}function h(){window.requestAnimationFrame(f)}return setTimeout(h,0),e.registerAnimation=s,e.loadAnimation=function(e){var t=new AnimationItem;return u(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var i;for(i=0;i<a;i+=1)t[i].animation.setSpeed(e,n)},e.setDirection=function(e,n){var i;for(i=0;i<a;i+=1)t[i].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<a;n+=1)t[n].animation.play(e)},e.moveFrame=function(e,i){var r;for(n=Date.now(),r=0;r<a;r+=1)t[r].animation.moveFrame(e,i)},e.pause=function(e){var n;for(n=0;n<a;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<a;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<a;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var a,i=document.getElementsByClassName("bodymovin"),r=i.length;for(a=0;a<r;a+=1)n&&i[a].setAttribute("data-bm-type",n),s(i[a],e);if(t&&0===r){n||(n="svg");var o=document.getElementsByTagName("body")[0];o.innerHTML="";var l=document.createElement("div");l.style.width="100%",l.style.height="100%",l.setAttribute("data-bm-type",n),o.appendChild(l),s(l,e)}},e.resize=function(){var e;for(e=0;e<a;e+=1)t[e].animation.resize()},e.start=h,e.goToAndStop=function(e,n,i){var r;for(r=0;r<a;r+=1)t[r].animation.goToAndStop(e,n,i)},e.destroy=function(e){var n;for(n=a-1;n>=0;n-=1)t[n].animation.destroy(e)},e}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.pendingElements=0,this.playCount=0,this.prerenderFramesFlag=!0,this.animationData={},this.layers=[],this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=randomString(10),this.scaleMode="fit",this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this.pendingSegment=!1,this._idle=!0,this.projectInterface=ProjectInterface()};function CanvasRenderer(e,t){var n;for(this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",className:t&&t.className||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1},n=0;n<15;n+=1)this.contextData.saved[n]=Array.apply(null,{length:16});this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={className:t&&t.className||""},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0}function CVBaseElement(e,t,n){this.globalData=n,this.data=e,this.comp=t,this.canvasContext=n.canvasContext,this.init()}function CVCompElement(e,t,n){this._parent.constructor.call(this,e,t,n);var a,i={};for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);for(i.renderer=this,i.compHeight=this.data.h,i.compWidth=this.data.w,this.renderConfig={clearCanvas:!0},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1},this.completeLayers=!1,a=0;a<15;a+=1)this.contextData.saved[a]=Array.apply(null,{length:16});this.transformMat=new Matrix,this.parentGlobalData=this.globalData;var o=document.createElement("canvas");i.canvasContext=o.getContext("2d"),this.canvasContext=i.canvasContext,o.width=this.data.w,o.height=this.data.h,this.canvas=o,this.globalData=i,this.layers=e.layers,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,n.frameRate,this.dynamicProperties)),!this.data.xt&&n.progressiveLoad||this.buildAllItems()}function CVImageElement(e,t,n){this.assetData=n.getAssetData(e.refId),this._parent.constructor.call(this,e,t,n),this.globalData.addPendingElement()}function CVMaskElement(e,t){this.data=e,this.element=t,this.dynamicProperties=[],this.masksProperties=this.data.masksProperties,this.viewData=Array.apply(null,{length:this.masksProperties.length});var n,a=this.masksProperties.length;for(n=0;n<a;n++)this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3,this.dynamicProperties,null)}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,e,t,n)}function CVSolidElement(e,t,n){this._parent.constructor.call(this,e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this._parent.constructor.call(this,e,t,n)}function HBaseElement(e,t,n,a,i){this.globalData=n,this.comp=a,this.data=e,this.matteElement=null,this.parentContainer=t,this.layerId=i?i.layerId:"ly_"+randomString(10),this.placeholder=i,this.init()}function HSolidElement(e,t,n,a,i){this._parent.constructor.call(this,e,t,n,a,i)}function HCompElement(e,t,n,a,i){this._parent.constructor.call(this,e,t,n,a,i),this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,n.frameRate,this.dynamicProperties)),this.data.hasMask&&(this.supports3d=!1),this.data.xt&&(this.layerElement=document.createElement("div")),this.buildAllItems()}function HShapeElement(e,t,n,a,i){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,e,t,n,a,i),this.currentBBox={x:999999,y:-999999,h:0,w:0}}AnimationItem.prototype.setParams=function(e){var t=this;e.context&&(this.context=e.context),(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var n=e.animType?e.animType:e.renderer?e.renderer:"svg";switch(n){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;case"hybrid":case"html":default:this.renderer=new HybridRenderer(this,e.rendererSettings)}if(this.renderer.setProjectInterface(this.projectInterface),this.animType=n,""===e.loop||null===e.loop||(!1===e.loop?this.loop=!1:!0===e.loop?this.loop=!0:this.loop=parseInt(e.loop)),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.prerenderFramesFlag=!("prerender"in e)||e.prerender,this.autoloadSegments=!e.hasOwnProperty("autoloadSegments")||e.autoloadSegments,e.animationData)t.configAnimation(e.animationData);else if(e.path){"json"!=e.path.substr(-4)&&("/"!=e.path.substr(-1,1)&&(e.path+="/"),e.path+="data.json");var a=new XMLHttpRequest;-1!=e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.assetsPath=e.assetsPath,this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),a.open("GET",e.path,!0),a.send(),a.onreadystatechange=function(){if(4==a.readyState)if(200==a.status)t.configAnimation(JSON.parse(a.responseText));else try{var e=JSON.parse(a.responseText);t.configAnimation(e)}catch(e){}}}},AnimationItem.prototype.setData=function(e,t){var n={wrapper:e,animationData:t?"object"==typeof t?t:JSON.parse(t):null},a=e.attributes;n.path=a.getNamedItem("data-animation-path")?a.getNamedItem("data-animation-path").value:a.getNamedItem("data-bm-path")?a.getNamedItem("data-bm-path").value:a.getNamedItem("bm-path")?a.getNamedItem("bm-path").value:"",n.animType=a.getNamedItem("data-anim-type")?a.getNamedItem("data-anim-type").value:a.getNamedItem("data-bm-type")?a.getNamedItem("data-bm-type").value:a.getNamedItem("bm-type")?a.getNamedItem("bm-type").value:a.getNamedItem("data-bm-renderer")?a.getNamedItem("data-bm-renderer").value:a.getNamedItem("bm-renderer")?a.getNamedItem("bm-renderer").value:"canvas";var i=a.getNamedItem("data-anim-loop")?a.getNamedItem("data-anim-loop").value:a.getNamedItem("data-bm-loop")?a.getNamedItem("data-bm-loop").value:a.getNamedItem("bm-loop")?a.getNamedItem("bm-loop").value:"";""===i||(n.loop="false"!==i&&("true"===i||parseInt(i)));var r=a.getNamedItem("data-anim-autoplay")?a.getNamedItem("data-anim-autoplay").value:a.getNamedItem("data-bm-autoplay")?a.getNamedItem("data-bm-autoplay").value:!a.getNamedItem("bm-autoplay")||a.getNamedItem("bm-autoplay").value;n.autoplay="false"!==r,n.name=a.getNamedItem("data-name")?a.getNamedItem("data-name").value:a.getNamedItem("data-bm-name")?a.getNamedItem("data-bm-name").value:a.getNamedItem("bm-name")?a.getNamedItem("bm-name").value:"","false"===(a.getNamedItem("data-anim-prerender")?a.getNamedItem("data-anim-prerender").value:a.getNamedItem("data-bm-prerender")?a.getNamedItem("data-bm-prerender").value:a.getNamedItem("bm-prerender")?a.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip),this.animationData.tf=this.totalFrames);var t,n,a=this.animationData.layers,i=a.length,r=e.layers,o=r.length;for(n=0;n<o;n+=1)for(t=0;t<i;){if(a[t].id==r[n].id){a[t]=r[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(i=e.assets.length,t=0;t<i;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.renderFrame(null),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.animationData.tf);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=new XMLHttpRequest,a=this,i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,n.open("GET",i,!0),n.send(),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status)a.includeLayers(JSON.parse(n.responseText));else try{var e=JSON.parse(n.responseText);a.includeLayers(e)}catch(e){}}},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.animationData.tf),this.loadNextSegment()},AnimationItem.prototype.configAnimation=function(e){var t=this;this.renderer&&this.renderer.destroyed||(this.animationData=e,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.animationData.tf=this.totalFrames,this.renderer.configAnimation(e),e.assets||(e.assets=[]),e.comps&&(e.assets=e.assets.concat(e.comps),e.comps=null),this.renderer.searchExtraCompositions(e.assets),this.layers=this.animationData.layers,this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.imagePreloader=new ImagePreloader,this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(e.assets,function(e){e||t.trigger("loaded_images")}),this.loadSegments(),this.updaFrameModifier(),this.renderer.globalData.fontManager?this.waitForFontsLoaded():(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()))},AnimationItem.prototype.waitForFontsLoaded=function(){(function e(){this.renderer.globalData.fontManager.loaded?(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()):setTimeout(e.bind(this),20)}).bind(this)()},AnimationItem.prototype.addPendingElement=function(){this.pendingElements+=1},AnimationItem.prototype.elementLoaded=function(){this.pendingElements--,this.checkLoaded()},AnimationItem.prototype.checkLoaded=function(){0===this.pendingElements&&(expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.isLoaded=!0,this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.subframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.subframeEnabled?this.currentFrame=this.currentRawFrame:this.currentFrame=Math.floor(this.currentRawFrame),this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){!1!==this.isLoaded&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(e){e&&this.name!=e||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!=e||!1===this.isPaused&&(this.isPaused=!0,this.pendingSegment||(this._idle=!0,this.trigger("_idle")))},AnimationItem.prototype.togglePause=function(e){e&&this.name!=e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!=e||(this.pause(),this.currentFrame=this.currentRawFrame=0,this.playCount=0,this.gotoFrame())},AnimationItem.prototype.goToAndStop=function(e,t,n){n&&this.name!=n||(t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(e,t,n){this.goToAndStop(e,t,n),this.play()},AnimationItem.prototype.advanceTime=function(e){if(this.pendingSegment)return this.pendingSegment=!1,this.adjustSegment(this.segments.shift()),void(this.isPaused&&this.play());!0!==this.isPaused&&!1!==this.isLoaded&&this.setCurrentRawFrameValue(this.currentRawFrame+e*this.frameModifier)},AnimationItem.prototype.updateAnimation=function(e){this.setCurrentRawFrameValue(this.totalFrames*e)},AnimationItem.prototype.moveFrame=function(e,t){t&&this.name!=t||this.setCurrentRawFrameValue(this.currentRawFrame+e)},AnimationItem.prototype.adjustSegment=function(e){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.01)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.firstFrame=e[0],this.setCurrentRawFrameValue(0)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e-.01)),this.firstFrame=e,this.totalFrames=t-e,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if("object"==typeof e[0]){var n,a=e.length;for(n=0;n<a;n+=1)this.segments.push(e[n])}else this.segments.push(e);t&&this.adjustSegment(this.segments.shift()),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op-this.animationData.ip+this.animationData.ip*this.frameRate)]),e&&this.adjustSegment(this.segments.shift())},AnimationItem.prototype.checkSegments=function(){this.segments.length&&(this.pendingSegment=!0)},AnimationItem.prototype.remove=function(e){e&&this.name!=e||this.renderer.destroy()},AnimationItem.prototype.destroy=function(e){e&&this.name!=e||this.renderer&&this.renderer.destroyed||(this.renderer.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){if(this.currentRawFrame=e,this.currentRawFrame>=this.totalFrames){if(this.checkSegments(),!1===this.loop)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");if(this.trigger("loopComplete"),this.playCount+=1,!0!==this.loop&&this.playCount==this.loop||this.pendingSegment)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");this.currentRawFrame=this.currentRawFrame%this.totalFrames}else if(this.currentRawFrame<0)return this.checkSegments(),this.playCount-=1,this.playCount<0&&(this.playCount=0),!1===this.loop||this.pendingSegment?(this.currentRawFrame=0,this.gotoFrame(),this.pause(),void this.trigger("complete")):(this.trigger("loopComplete"),this.currentRawFrame=(this.totalFrames+this.currentRawFrame)%this.totalFrames,void this.gotoFrame());this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e==this.assets[t].id)return this.assets[t];t+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getAssets=function(){return this.assets},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.addEventListener=_addEventListener,AnimationItem.prototype.removeEventListener=_removeEventListener,AnimationItem.prototype.triggerEvent=_triggerEvent,extendPrototype(BaseRenderer,CanvasRenderer),CanvasRenderer.prototype.createBase=function(e){return new CVBaseElement(e,this,this.globalData)},CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this,this.globalData)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this,this.globalData)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this,this.globalData)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this,this.globalData)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this,this.globalData)},CanvasRenderer.prototype.ctxTransform=function(e){if(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(e),this.transformMat.transform(this.contextData.cTr.props[0],this.contextData.cTr.props[1],this.contextData.cTr.props[2],this.contextData.cTr.props[3],this.contextData.cTr.props[4],this.contextData.cTr.props[5],this.contextData.cTr.props[6],this.contextData.cTr.props[7],this.contextData.cTr.props[8],this.contextData.cTr.props[9],this.contextData.cTr.props[10],this.contextData.cTr.props[11],this.contextData.cTr.props[12],this.contextData.cTr.props[13],this.contextData.cTr.props[14],this.contextData.cTr.props[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var t=this.contextData.cTr.props;this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])}else this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRenderer.prototype.ctxOpacity=function(e){1!==e&&(this.renderConfig.clearCanvas?(this.contextData.cO*=e<0?0:e,this.canvasContext.globalAlpha=this.contextData.cO):this.canvasContext.globalAlpha*=e<0?0:e)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?(this.contextData.cArrPos=0,this.contextData.cTr.reset(),this.contextData.cO=1):this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.save();var t=this.contextData.cTr.props;null!==this.contextData.saved[this.contextData.cArrPos]&&void 0!==this.contextData.saved[this.contextData.cArrPos]||(this.contextData.saved[this.contextData.cArrPos]=new Array(16));var n,a=this.contextData.saved[this.contextData.cArrPos];for(n=0;n<16;n+=1)a[n]=t[n];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.restore(),this.contextData.cArrPos-=1;var t,n=this.contextData.saved[this.contextData.cArrPos],a=this.contextData.cTr.props;for(t=0;t<16;t+=1)a[t]=n[t];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),n=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=n,this.canvasContext.globalAlpha=n}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){this.animationItem.wrapper?(this.animationItem.container=document.createElement("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className)):this.canvasContext=this.renderConfig.context,this.data=e,this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.totalFrames=Math.floor(e.tf),this.globalData.compWidth=e.w,this.globalData.compHeight=e.h,this.globalData.frameRate=e.fr,this.globalData.frameId=0,this.globalData.compSize={w:e.w,h:e.h},this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.layers=e.layers,this.transformCanvas={},this.transformCanvas.w=e.w,this.transformCanvas.h=e.h,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,document.body),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.addPendingElement=this.animationItem.addPendingElement.bind(this.animationItem),this.globalData.transformCanvas=this.transformCanvas,this.elements=Array.apply(null,{length:e.layers.length}),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t,n,a;if(this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",e*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),r=i[1]||"meet",o=i[0]||"xMidYMid",s=o.substr(0,4),l=o.substr(4);n=e/t,(a=this.transformCanvas.w/this.transformCanvas.h)>n&&"meet"===r||a<n&&"slice"===r?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(a<n&&"meet"===r||a>n&&"slice"===r)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(a<n&&"meet"===r||a>n&&"slice"===r)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(a>n&&"meet"===r||a<n&&"slice"===r)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(a>n&&"meet"===r||a<n&&"slice"===r)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];var c,u=this.elements.length;for(c=0;c<u;c+=1)this.elements[c]&&0===this.elements[c].data.ty&&this.elements[c].resize(this.globalData.transformCanvas)},CanvasRenderer.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e){if(!(this.renderedFrame==e&&!0===this.renderConfig.clearCanvas||this.destroyed||null===e)){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem.firstFrame,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,!0===this.renderConfig.clearCanvas?(this.reset(),this.canvasContext.save(),this.canvasContext.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)):this.save(),this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip();var t,n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=0;t<n;t++)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);for(t=n-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();!0!==this.renderConfig.clearCanvas?this.restore():this.canvasContext.restore()}},CanvasRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!=this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions(),0===this.layers[e].ty&&n.resize(this.globalData.transformCanvas)}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},CanvasRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(document.createElementNS(svgNS,"g"),t=0;t<n;t+=1)if(e[t].xt){var a=this.createComp(e[t],this.globalData.comp,this.globalData);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},extendPrototype(BaseRenderer,HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var a=this.layers[t];if(a.ddd&&this.supports3d)this.addTo3dContainer(n,t);else{for(var i,r,o=0;o<t;)this.elements[o]&&!0!==this.elements[o]&&this.elements[o].getBaseElement&&(r=this.elements[o],i=this.layers[o].ddd?this.getThreeDContainerByPos(o):r.getBaseElement()),o+=1;i?a.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):a.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRenderer.prototype.createBase=function(e){return new SVGBaseElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.layerElement,this.globalData,this):new IShapeElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.layerElement,this.globalData,this):new SVGTextElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.layerElement,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.layerElement,this.globalData,this):new IImageElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.layerElement,this.globalData,this):new ICompElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.layerElement,this.globalData,this):new ISolidElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}},HybridRenderer.prototype.createThreeDContainer=function(e){var t=document.createElement("div");styleDiv(t),t.style.width=this.globalData.compSize.w+"px",t.style.height=this.globalData.compSize.h+"px",t.style.transformOrigin=t.style.mozTransformOrigin=t.style.webkitTransformOrigin="50% 50%";var n=document.createElement("div");styleDiv(n),n.style.transform=n.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",t.appendChild(n),this.resizerElem.appendChild(t);var a={container:n,perspectiveElem:t,startPos:e,endPos:e};return this.threeDElements.push(a),a},HybridRenderer.prototype.build3dContainers=function(){var e,t,n=this.layers.length;for(e=0;e<n;e+=1)this.layers[e].ddd?(t||(t=this.createThreeDContainer(e)),t.endPos=Math.max(t.endPos,e)):t=null},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var n=0,a=this.threeDElements.length;n<a;){if(t<=this.threeDElements[n].endPos){for(var i,r=this.threeDElements[n].startPos;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(i=this.elements[r].getBaseElement()),r+=1;i?this.threeDElements[n].container.insertBefore(e,i):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=document.createElement("div"),n=this.animationItem.wrapper;t.style.width=e.w+"px",t.style.height=e.h+"px",this.resizerElem=t,styleDiv(t),t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="flat",this.renderConfig.className&&n.setAttribute("class",this.renderConfig.className),n.appendChild(t),t.style.overflow="hidden";var a=document.createElementNS(svgNS,"svg");a.setAttribute("width","1"),a.setAttribute("height","1"),styleDiv(a),this.resizerElem.appendChild(a);var i=document.createElementNS(svgNS,"defs");a.appendChild(i),this.globalData.defs=i,this.data=e,this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.frameId=0,this.globalData.compSize={w:e.w,h:e.h},this.globalData.frameRate=e.fr,this.layers=e.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,a),this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e++)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,n,a,i=this.animationItem.wrapper.offsetWidth,r=this.animationItem.wrapper.offsetHeight,o=i/r;this.globalData.compSize.w/this.globalData.compSize.h>o?(e=i/this.globalData.compSize.w,t=i/this.globalData.compSize.w,n=0,a=(r-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(e=r/this.globalData.compSize.h,t=r/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(r/this.globalData.compSize.h))/2,a=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+a+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,a=this.threeDElements.length;for(e=0;e<a;e+=1)this.threeDElements[e].perspectiveElem.style.perspective=this.threeDElements[e].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length,a=document.createElement("div");for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t],a,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},createElement(BaseElement,CVBaseElement),CVBaseElement.prototype.createElements=function(){this.checkParenting()},CVBaseElement.prototype.checkBlendMode=function(e){if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t="";switch(this.data.bm){case 0:t="normal";break;case 1:t="multiply";break;case 2:t="screen";break;case 3:t="overlay";break;case 4:t="darken";break;case 5:t="lighten";break;case 6:t="color-dodge";break;case 7:t="color-burn";break;case 8:t="hard-light";break;case 9:t="soft-light";break;case 10:t="difference";break;case 11:t="exclusion";break;case 12:t="hue";break;case 13:t="saturation";break;case 14:t="color";break;case 15:t="luminosity"}e.canvasContext.globalCompositeOperation=t}},CVBaseElement.prototype.renderFrame=function(e){if(3===this.data.ty)return!1;if(this.checkBlendMode(0===this.data.ty?this.parentGlobalData:this.globalData),!this.isVisible)return this.isVisible;var t;this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var n=this.finalTransform.mat;if(this.hierarchy){var a,i=this.hierarchy.length;for(t=this.finalTransform.mProp.v.props,n.cloneFromProps(t),a=0;a<i;a+=1)this.finalTransform.matMdf=!!this.hierarchy[a].finalTransform.mProp.mdf||this.finalTransform.matMdf,t=this.hierarchy[a].finalTransform.mProp.v.props,n.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}else e?(t=this.finalTransform.mProp.v.props,n.cloneFromProps(t)):n.cloneFromProps(this.finalTransform.mProp.v.props);return e&&(t=e.mat.props,n.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.finalTransform.opacity*=e.opacity,this.finalTransform.opMdf=!!e.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!e.matMdf||this.finalTransform.matMdf),this.data.hasMask&&(this.globalData.renderer.save(!0),this.maskManager.renderFrame(0===this.data.ty?null:n)),this.data.hd&&(this.isVisible=!1),this.isVisible},CVBaseElement.prototype.addMasks=function(e){this.maskManager=new CVMaskElement(e,this,this.globalData)},CVBaseElement.prototype.destroy=function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager&&this.maskManager.destroy()},CVBaseElement.prototype.mHelper=new Matrix,createElement(CVBaseElement,CVCompElement),CVCompElement.prototype.ctxTransform=CanvasRenderer.prototype.ctxTransform,CVCompElement.prototype.ctxOpacity=CanvasRenderer.prototype.ctxOpacity,CVCompElement.prototype.save=CanvasRenderer.prototype.save,CVCompElement.prototype.restore=CanvasRenderer.prototype.restore,CVCompElement.prototype.reset=function(){this.contextData.cArrPos=0,this.contextData.cTr.reset(),this.contextData.cO=1},CVCompElement.prototype.resize=function(e){var t=Math.max(e.sx,e.sy);this.canvas.width=this.data.w*t,this.canvas.height=this.data.h*t,this.transformCanvas={sc:t,w:this.data.w*t,h:this.data.h*t,props:[t,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]};var n,a=this.elements.length;for(n=0;n<a;n+=1)this.elements[n]&&0===this.elements[n].data.ty&&this.elements[n].resize(e)},CVCompElement.prototype.prepareFrame=function(e){if(this.globalData.frameId=this.parentGlobalData.frameId,this.globalData.mdf=!1,this._parent.prepareFrame.call(this,e),!1!==this.isVisible||this.data.xt){var t=e;this.tm&&(t=this.tm.v)===this.data.op&&(t=this.data.op-1),this.renderedFrame=t/this.data.sr;var n,a=this.elements.length;for(this.completeLayers||this.checkLayers(e),n=0;n<a;n+=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(t/this.data.sr-this.layers[n].st),0===this.elements[n].data.ty&&this.elements[n].globalData.mdf&&(this.globalData.mdf=!0));this.globalData.mdf&&!this.data.xt&&(this.canvasContext.clearRect(0,0,this.data.w,this.data.h),this.ctxTransform(this.transformCanvas.props))}},CVCompElement.prototype.renderFrame=function(e){if(!1!==this._parent.renderFrame.call(this,e)){var t;if(this.globalData.mdf)for(t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.data.hasMask&&this.globalData.renderer.restore(!0),this.firstFrame&&(this.firstFrame=!1),this.parentGlobalData.renderer.save(),this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props),this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity),this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas,0,0,this.data.w,this.data.h),this.parentGlobalData.renderer.restore(),this.globalData.mdf&&this.reset()}},CVCompElement.prototype.setElements=function(e){this.elements=e},CVCompElement.prototype.getElements=function(){return this.elements},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e].destroy();this.layers=null,this.elements=null,this._parent.destroy.call(this._parent)},CVCompElement.prototype.checkLayers=CanvasRenderer.prototype.checkLayers,CVCompElement.prototype.buildItem=CanvasRenderer.prototype.buildItem,CVCompElement.prototype.checkPendingElements=CanvasRenderer.prototype.checkPendingElements,CVCompElement.prototype.addPendingElement=CanvasRenderer.prototype.addPendingElement,CVCompElement.prototype.buildAllItems=CanvasRenderer.prototype.buildAllItems,CVCompElement.prototype.createItem=CanvasRenderer.prototype.createItem,CVCompElement.prototype.createImage=CanvasRenderer.prototype.createImage,CVCompElement.prototype.createComp=CanvasRenderer.prototype.createComp,CVCompElement.prototype.createSolid=CanvasRenderer.prototype.createSolid,CVCompElement.prototype.createShape=CanvasRenderer.prototype.createShape,CVCompElement.prototype.createText=CanvasRenderer.prototype.createText,CVCompElement.prototype.createBase=CanvasRenderer.prototype.createBase,CVCompElement.prototype.buildElementParenting=CanvasRenderer.prototype.buildElementParenting,createElement(CVBaseElement,CVImageElement),CVImageElement.prototype.createElements=function(){var e=function(){if(this.globalData.elementLoaded(),this.assetData.w!==this.img.width||this.assetData.h!==this.img.height){var e=document.createElement("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,a=e.getContext("2d"),i=this.img.width,r=this.img.height,o=i/r,s=this.assetData.w/this.assetData.h;o>s?t=(n=r)*s:n=(t=i)/s,a.drawImage(this.img,(i-t)/2,(r-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}}.bind(this),t=function(){this.failed=!0,this.globalData.elementLoaded()}.bind(this);this.img=new Image,this.img.addEventListener("load",e,!1),this.img.addEventListener("error",t,!1);var n=this.globalData.getAssetsPath(this.assetData);this.img.src=n,this._parent.createElements.call(this)},CVImageElement.prototype.renderFrame=function(e){if(!this.failed&&!1!==this._parent.renderFrame.call(this,e)){var t=this.canvasContext;this.globalData.renderer.save();var n=this.finalTransform.mat.props;this.globalData.renderer.ctxTransform(n),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),t.drawImage(this.img,0,0),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},CVImageElement.prototype.destroy=function(){this.img=null,this._parent.destroy.call(this._parent)},CVMaskElement.prototype.prepareFrame=function(e){var t,n=this.dynamicProperties.length;for(t=0;t<n;t+=1)this.dynamicProperties[t].getValue(e),this.dynamicProperties[t].mdf&&(this.element.globalData.mdf=!0)},CVMaskElement.prototype.renderFrame=function(e){var t,n,a,i,r,o=this.element.canvasContext,s=this.data.masksProperties.length,l=!1;for(t=0;t<s;t++)if("n"!==this.masksProperties[t].mode){!1===l&&(o.beginPath(),l=!0),this.masksProperties[t].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compWidth,0),o.lineTo(this.element.globalData.compWidth,this.element.globalData.compHeight),o.lineTo(0,this.element.globalData.compHeight),o.lineTo(0,0)),r=this.viewData[t].v,n=e?e.applyToPointArray(r.v[0][0],r.v[0][1],0):r.v[0],o.moveTo(n[0],n[1]);var c,u=r._length;for(c=1;c<u;c++)n=e?e.applyToPointArray(r.o[c-1][0],r.o[c-1][1],0):r.o[c-1],a=e?e.applyToPointArray(r.i[c][0],r.i[c][1],0):r.i[c],i=e?e.applyToPointArray(r.v[c][0],r.v[c][1],0):r.v[c],o.bezierCurveTo(n[0],n[1],a[0],a[1],i[0],i[1]);n=e?e.applyToPointArray(r.o[c-1][0],r.o[c-1][1],0):r.o[c-1],a=e?e.applyToPointArray(r.i[0][0],r.i[0][1],0):r.i[0],i=e?e.applyToPointArray(r.v[0][0],r.v[0][1],0):r.v[0],o.bezierCurveTo(n[0],n[1],a[0],a[1],i[0],i[1])}l&&o.clip()},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},createElement(CVBaseElement,CVShapeElement),CVShapeElement.prototype.transformHelper={opacity:1,mat:new Matrix,matMdf:!1,opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,!0)},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,elements:[]},a={};if("fl"!=e.ty&&"st"!=e.ty||(a.c=PropertyFactory.getProp(this,e.c,1,255,t),a.c.k||(n.co="rgb("+bm_floor(a.c.v[0])+","+bm_floor(a.c.v[1])+","+bm_floor(a.c.v[2])+")")),a.o=PropertyFactory.getProp(this,e.o,0,.01,t),"st"==e.ty){if(n.lc=this.lcEnum[e.lc]||"round",n.lj=this.ljEnum[e.lj]||"round",1==e.lj&&(n.ml=e.ml),a.w=PropertyFactory.getProp(this,e.w,0,null,t),a.w.k||(n.wi=a.w.v),e.d){var i=PropertyFactory.getDashProp(this,e.d,"canvas",t);a.d=i,a.d.k||(n.da=a.d.dasharray,n.do=a.d.dashoffset)}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),a.style=n,a},CVShapeElement.prototype.createGroupElement=function(e){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e,t){return{transform:{mat:new Matrix,opacity:1,matMdf:!1,opMdf:!1,op:PropertyFactory.getProp(this,e.o,0,.01,t),mProps:PropertyFactory.getProp(this,e,2,null,t)},elements:[]}},CVShapeElement.prototype.createShapeElement=function(e,t){var n={nodes:[],trNodes:[],tr:[0,0,0,0,0,0]},a=4;"rc"==e.ty?a=5:"el"==e.ty?a=6:"sr"==e.ty&&(a=7),n.sh=ShapePropertyFactory.getShapeProp(this,e,a,t),this.shapes.push(n.sh),this.addShapeToModifiers(n),jLen=this.stylesList.length;var i=!1,r=!1;for(j=0;j<jLen;j+=1)this.stylesList[j].closed||(this.stylesList[j].elements.push(n),"st"===this.stylesList[j].type?i=!0:r=!0);return n.st=i,n.fl=r,n},CVShapeElement.prototype.reloadShapes=function(){this.firstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,!0),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},CVShapeElement.prototype.searchShapes=function(e,t,n,a,i){var r,o,s,l,c=e.length-1,u=[],d=[];for(r=c;r>=0;r-=1){if((l=this.searchProcessedElement(e[r]))?t[r]=n[l-1]:e[r]._render=i,"fl"==e[r].ty||"st"==e[r].ty)l?t[r].style.closed=!1:t[r]=this.createStyleElement(e[r],a),u.push(t[r].style);else if("gr"==e[r].ty){if(l)for(s=t[r].it.length,o=0;o<s;o+=1)t[r].prevViewData[o]=t[r].it[o];else t[r]=this.createGroupElement(e[r]);this.searchShapes(e[r].it,t[r].it,t[r].prevViewData,a,i)}else if("tr"==e[r].ty)l||(t[r]=this.createTransformElement(e[r],a));else if("sh"==e[r].ty||"rc"==e[r].ty||"el"==e[r].ty||"sr"==e[r].ty)l||(t[r]=this.createShapeElement(e[r],a));else if("tm"==e[r].ty||"rd"==e[r].ty){if(l)(f=t[r]).closed=!1;else{var f=ShapeModifiers.getModifier(e[r].ty);f.init(this,e[r],a),t[r]=f,this.shapeModifiers.push(f)}d.push(f)}else"rp"==e[r].ty&&(l?(f=t[r]).closed=!0:(f=ShapeModifiers.getModifier(e[r].ty),t[r]=f,f.init(this,e,r,t,a),this.shapeModifiers.push(f),i=!1),d.push(f));this.addProcessedElement(e[r],r+1)}for(c=u.length,r=0;r<c;r+=1)u[r].closed=!0;for(c=d.length,r=0;r<c;r+=1)d[r].closed=!0},CVShapeElement.prototype.addShapeToModifiers=IShapeElement.prototype.addShapeToModifiers,CVShapeElement.prototype.renderModifiers=IShapeElement.prototype.renderModifiers,CVShapeElement.prototype.lcEnum=IShapeElement.prototype.lcEnum,CVShapeElement.prototype.ljEnum=IShapeElement.prototype.ljEnum,CVShapeElement.prototype.searchProcessedElement=IShapeElement.prototype.searchProcessedElement,CVShapeElement.prototype.addProcessedElement=IShapeElement.prototype.addProcessedElement,CVShapeElement.prototype.renderFrame=function(e){!1!==this._parent.renderFrame.call(this,e)&&(this.transformHelper.mat.reset(),this.transformHelper.opacity=this.finalTransform.opacity,this.transformHelper.matMdf=!1,this.transformHelper.opMdf=this.finalTransform.opMdf,this.renderModifiers(),this.renderShape(this.transformHelper,null,null,!0),this.data.hasMask&&this.globalData.renderer.restore(!0))},CVShapeElement.prototype.renderShape=function(e,t,n,a){var i,r,o,s;if(!t)for(t=this.shapesData,r=this.stylesList.length,i=0;i<r;i+=1)this.stylesList[i].d="",this.stylesList[i].mdf=!1;for(n||(n=this.itemsData),o=e,i=r=t.length-1;i>=0;i-=1)if("tr"==t[i].ty){o=n[i].transform;var l=n[i].transform.mProps.v.props;if(o.matMdf=o.mProps.mdf,o.opMdf=o.op.mdf,(s=o.mat).cloneFromProps(l),e){var c=e.mat.props;o.opacity=e.opacity,o.opacity*=n[i].transform.op.v,o.matMdf=!!e.matMdf||o.matMdf,o.opMdf=!!e.opMdf||o.opMdf,s.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])}else o.opacity=o.op.o}else"sh"==t[i].ty||"el"==t[i].ty||"rc"==t[i].ty||"sr"==t[i].ty?this.renderPath(t[i],n[i],o):"fl"==t[i].ty?this.renderFill(t[i],n[i],o):"st"==t[i].ty?this.renderStroke(t[i],n[i],o):"gr"==t[i].ty?this.renderShape(o,t[i].it,n[i].it):t[i].ty;if(a){r=this.stylesList.length;var u,d,f,h,p,A,m,_=this.globalData.renderer,v=this.globalData.canvasContext;for(_.save(),_.ctxTransform(this.finalTransform.mat.props),i=0;i<r;i+=1)if(("st"!==(m=this.stylesList[i].type)||0!==this.stylesList[i].wi)&&this.stylesList[i].data._render){for(_.save(),p=this.stylesList[i].elements,"st"===m?(v.strokeStyle=this.stylesList[i].co,v.lineWidth=this.stylesList[i].wi,v.lineCap=this.stylesList[i].lc,v.lineJoin=this.stylesList[i].lj,v.miterLimit=this.stylesList[i].ml||0):v.fillStyle=this.stylesList[i].co,_.ctxOpacity(this.stylesList[i].coOp),"st"!==m&&v.beginPath(),d=p.length,u=0;u<d;u+=1){for("st"===m&&(v.beginPath(),this.stylesList[i].da?(v.setLineDash(this.stylesList[i].da),v.lineDashOffset=this.stylesList[i].do,this.globalData.isDashed=!0):this.globalData.isDashed&&(v.setLineDash(this.dashResetter),this.globalData.isDashed=!1)),h=(A=p[u].trNodes).length,f=0;f<h;f+=1)"m"==A[f].t?v.moveTo(A[f].p[0],A[f].p[1]):"c"==A[f].t?v.bezierCurveTo(A[f].p1[0],A[f].p1[1],A[f].p2[0],A[f].p2[1],A[f].p3[0],A[f].p3[1]):v.closePath();"st"===m&&v.stroke()}"st"!==m&&v.fill(this.stylesList[i].r),_.restore()}_.restore(),this.firstFrame&&(this.firstFrame=!1)}},CVShapeElement.prototype.renderPath=function(e,t,n){var a,i,r,o;if(n.matMdf||t.sh.mdf||this.firstFrame){var s=t.sh.paths,l=n.mat;o=s._length;var c=t.trNodes;for(c.length=0,r=0;r<o;r+=1){var u=s.shapes[r];if(u&&u.v){for(a=u._length,i=1;i<a;i+=1)1==i&&c.push({t:"m",p:l.applyToPointArray(u.v[0][0],u.v[0][1],0)}),c.push({t:"c",p1:l.applyToPointArray(u.o[i-1][0],u.o[i-1][1],0),p2:l.applyToPointArray(u.i[i][0],u.i[i][1],0),p3:l.applyToPointArray(u.v[i][0],u.v[i][1],0)});1==a&&c.push({t:"m",p:l.applyToPointArray(u.v[0][0],u.v[0][1],0)}),u.c&&a&&(c.push({t:"c",p1:l.applyToPointArray(u.o[i-1][0],u.o[i-1][1],0),p2:l.applyToPointArray(u.i[0][0],u.i[0][1],0),p3:l.applyToPointArray(u.v[0][0],u.v[0][1],0)}),c.push({t:"z"})),t.lStr=c}}if(t.st)for(i=0;i<16;i+=1)t.tr[i]=n.mat.props[i];t.trNodes=c}},CVShapeElement.prototype.renderFill=function(e,t,n){var a=t.style;(t.c.mdf||this.firstFrame)&&(a.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||n.opMdf||this.firstFrame)&&(a.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderStroke=function(e,t,n){var a=t.style,i=t.d;i&&(i.mdf||this.firstFrame)&&(a.da=i.dasharray,a.do=i.dashoffset),(t.c.mdf||this.firstFrame)&&(a.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||n.opMdf||this.firstFrame)&&(a.coOp=t.o.v*n.opacity),(t.w.mdf||this.firstFrame)&&(a.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemData.length=0,this._parent.destroy.call(this._parent)},createElement(CVBaseElement,CVSolidElement),CVSolidElement.prototype.renderFrame=function(e){if(!1!==this._parent.renderFrame.call(this,e)){var t=this.canvasContext;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(CVBaseElement,CVTextElement),extendPrototype(ITextElement,CVTextElement),CVTextElement.prototype.tHelper=document.createElement("canvas").getContext("2d"),CVTextElement.prototype.createElements=function(){this._parent.createElements.call(this)},CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:e.l?e.l.length:0});var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var a,i,r=this.globalData.fontManager.getFontByName(e.f),o=e.l,s=this.mHelper;this.stroke=n,this.values.fValue=e.s+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,i=e.t.length;var l,c,u,d,f,h,p,A,m,_,v=this.data.singleShape,g=e.tr/1e3*e.s,y=0,b=0,w=!0,E=0;for(a=0;a<i;a+=1){for(c=(l=this.globalData.fontManager.getCharData(e.t.charAt(a),r.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&l.data||{},s.reset(),v&&o[a].n&&(y=-g,b+=e.yOffset,b+=w?1:0,w=!1),p=(f=c.shapes?c.shapes[0].it:[]).length,s.scale(e.s/100,e.s/100),v&&this.applyTextPropertiesToMatrix(e,s,o[a].line,y,b),m=Array.apply(null,{length:p}),h=0;h<p;h+=1){for(d=f[h].ks.k.i.length,A=f[h].ks.k,_=[],u=1;u<d;u+=1)1==u&&_.push(s.applyToX(A.v[0][0],A.v[0][1],0),s.applyToY(A.v[0][0],A.v[0][1],0)),_.push(s.applyToX(A.o[u-1][0],A.o[u-1][1],0),s.applyToY(A.o[u-1][0],A.o[u-1][1],0),s.applyToX(A.i[u][0],A.i[u][1],0),s.applyToY(A.i[u][0],A.i[u][1],0),s.applyToX(A.v[u][0],A.v[u][1],0),s.applyToY(A.v[u][0],A.v[u][1],0));_.push(s.applyToX(A.o[u-1][0],A.o[u-1][1],0),s.applyToY(A.o[u-1][0],A.o[u-1][1],0),s.applyToX(A.i[0][0],A.i[0][1],0),s.applyToY(A.i[0][0],A.i[0][1],0),s.applyToX(A.v[0][0],A.v[0][1],0),s.applyToY(A.v[0][0],A.v[0][1],0)),m[h]=_}v&&(y+=o[a].l,y+=g),this.textSpans[E]?this.textSpans[E].elem=m:this.textSpans[E]={elem:m},E+=1}},CVTextElement.prototype.renderFrame=function(e){if(!1!==this._parent.renderFrame.call(this,e)){var t,n,a,i,r,o,s=this.canvasContext,l=this.finalTransform.mat.props;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(l),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),s.font=this.values.fValue,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var c,u=this.textAnimator.renderedLetters,d=this.textProperty.currentData.l;n=d.length;var f,h,p=null,A=null,m=null;for(t=0;t<n;t+=1)if(!d[t].n){if((c=u[t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(c.p),this.globalData.renderer.ctxOpacity(c.o)),this.fill){for(c&&c.fc?p!==c.fc&&(p=c.fc,s.fillStyle=c.fc):p!==this.values.fill&&(p=this.values.fill,s.fillStyle=this.values.fill),i=(f=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),a=0;a<i;a+=1)for(o=(h=f[a]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),r=2;r<o;r+=6)this.globalData.canvasContext.bezierCurveTo(h[r],h[r+1],h[r+2],h[r+3],h[r+4],h[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(c&&c.sw?m!==c.sw&&(m=c.sw,s.lineWidth=c.sw):m!==this.values.sWidth&&(m=this.values.sWidth,s.lineWidth=this.values.sWidth),c&&c.sc?A!==c.sc&&(A=c.sc,s.strokeStyle=c.sc):A!==this.values.stroke&&(A=this.values.stroke,s.strokeStyle=this.values.stroke),i=(f=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),a=0;a<i;a+=1)for(o=(h=f[a]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),r=2;r<o;r+=6)this.globalData.canvasContext.bezierCurveTo(h[r],h[r+1],h[r+2],h[r+3],h[r+4],h[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}c&&this.globalData.renderer.restore()}this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(BaseElement,HBaseElement),HBaseElement.prototype.checkBlendMode=function(){},HBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,HBaseElement.prototype.getBaseElement=function(){return this.baseElement},HBaseElement.prototype.createElements=function(){this.data.hasMask?(this.layerElement=document.createElementNS(svgNS,"svg"),styleDiv(this.layerElement),this.baseElement=this.layerElement,this.maskedElement=this.layerElement):this.layerElement=this.parentContainer,this.transformedElement=this.layerElement,!this.data.ln||4!==this.data.ty&&0!==this.data.ty||(this.layerElement===this.parentContainer&&(this.layerElement=document.createElementNS(svgNS,"g"),this.baseElement=this.layerElement),this.layerElement.setAttribute("id",this.data.ln)),this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.checkParenting()},HBaseElement.prototype.renderFrame=function(e){if(3===this.data.ty)return!1;if(this.currentFrameNum===this.lastNum||!this.isVisible)return this.isVisible;var t;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v,this.firstFrame&&(this.finalTransform.opMdf=!0,this.finalTransform.matMdf=!0);var n=this.finalTransform.mat;if(this.hierarchy){var a,i=this.hierarchy.length;for(t=this.finalTransform.mProp.v.props,n.cloneFromProps(t),a=0;a<i;a+=1)this.finalTransform.matMdf=!!this.hierarchy[a].finalTransform.mProp.mdf||this.finalTransform.matMdf,t=this.hierarchy[a].finalTransform.mProp.v.props,n.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}else this.isVisible&&this.finalTransform.matMdf&&(e?(t=this.finalTransform.mProp.v.props,n.cloneFromProps(t)):n.cloneFromProps(this.finalTransform.mProp.v.props));return this.data.hasMask&&this.maskManager.renderFrame(n),e&&(t=e.mat.props,n.cloneFromProps(t),this.finalTransform.opacity*=e.opacity,this.finalTransform.opMdf=!!e.opMdf||this.finalTransform.opMdf,this.finalTransform.matMdf=!!e.matMdf||this.finalTransform.matMdf),this.finalTransform.matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=n.toCSS(),this.finalMat=n),this.finalTransform.opMdf&&(this.transformedElement.style.opacity=this.finalTransform.opacity),this.isVisible},HBaseElement.prototype.destroy=function(){this.layerElement=null,this.transformedElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},HBaseElement.prototype.getDomElement=function(){return this.layerElement},HBaseElement.prototype.addMasks=function(e){this.maskManager=new MaskElement(e,this,this.globalData)},HBaseElement.prototype.hide=function(){},HBaseElement.prototype.setMatte=function(){},HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,createElement(HBaseElement,HSolidElement),HSolidElement.prototype.createElements=function(){var e=document.createElement("div");styleDiv(e);var t=document.createElementNS(svgNS,"svg");styleDiv(t),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),e.appendChild(t),this.layerElement=e,this.transformedElement=e,this.baseElement=e,this.innerElem=e,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),0!==this.data.bm&&this.setBlendMode();var n=document.createElementNS(svgNS,"rect");n.setAttribute("width",this.data.sw),n.setAttribute("height",this.data.sh),n.setAttribute("fill",this.data.sc),t.appendChild(n),this.data.hasMask&&(this.maskedElement=n),this.checkParenting()},HSolidElement.prototype.hide=SVGBaseElement.prototype.hide,HSolidElement.prototype.show=SVGBaseElement.prototype.show,HSolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,HSolidElement.prototype.destroy=IImageElement.prototype.destroy,createElement(HBaseElement,HCompElement),HCompElement.prototype.createElements=function(){var e=document.createElement("div");if(styleDiv(e),this.data.ln&&e.setAttribute("id",this.data.ln),e.style.clip="rect(0px, "+this.data.w+"px, "+this.data.h+"px, 0px)",this.data.hasMask){var t=document.createElementNS(svgNS,"svg");styleDiv(t),t.setAttribute("width",this.data.w),t.setAttribute("height",this.data.h);var n=document.createElementNS(svgNS,"g");t.appendChild(n),e.appendChild(t),this.maskedElement=n,this.baseElement=e,this.layerElement=n,this.transformedElement=e}else this.layerElement=e,this.baseElement=this.layerElement,this.transformedElement=e;this.checkParenting()},HCompElement.prototype.hide=ICompElement.prototype.hide,HCompElement.prototype.prepareFrame=ICompElement.prototype.prepareFrame,HCompElement.prototype.setElements=ICompElement.prototype.setElements,HCompElement.prototype.getElements=ICompElement.prototype.getElements,HCompElement.prototype.destroy=ICompElement.prototype.destroy,HCompElement.prototype.renderFrame=function(e){var t,n=this._parent.renderFrame.call(this,e),a=this.layers.length;if(!1!==n){for(this.hidden=!1,t=0;t<a;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.firstFrame&&(this.firstFrame=!1)}else this.hide()},HCompElement.prototype.checkLayers=BaseRenderer.prototype.checkLayers,HCompElement.prototype.buildItem=HybridRenderer.prototype.buildItem,HCompElement.prototype.checkPendingElements=HybridRenderer.prototype.checkPendingElements,HCompElement.prototype.addPendingElement=HybridRenderer.prototype.addPendingElement,HCompElement.prototype.buildAllItems=BaseRenderer.prototype.buildAllItems,HCompElement.prototype.createItem=HybridRenderer.prototype.createItem,HCompElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,HCompElement.prototype.createImage=HybridRenderer.prototype.createImage,HCompElement.prototype.createComp=HybridRenderer.prototype.createComp,HCompElement.prototype.createSolid=HybridRenderer.prototype.createSolid,HCompElement.prototype.createShape=HybridRenderer.prototype.createShape,HCompElement.prototype.createText=HybridRenderer.prototype.createText,HCompElement.prototype.createBase=HybridRenderer.prototype.createBase,HCompElement.prototype.appendElementInPos=HybridRenderer.prototype.appendElementInPos,createElement(HBaseElement,HShapeElement);var parent=HShapeElement.prototype._parent;function HTextElement(e,t,n,a,i){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this._parent.constructor.call(this,e,t,n,a,i)}function HImageElement(e,t,n,a,i){this.assetData=n.getAssetData(e.refId),this._parent.constructor.call(this,e,t,n,a,i)}function HCameraElement(e,t,n,a,i){this._parent.constructor.call(this,e,t,n,a,i);var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this.dynamicProperties),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this.dynamicProperties),this.py=r(this,e.ks.p.y,1,0,this.dynamicProperties),this.pz=r(this,e.ks.p.z,1,0,this.dynamicProperties)):this.p=r(this,e.ks.p,1,0,this.dynamicProperties),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this.dynamicProperties)),e.ks.or.k.length&&e.ks.or.k[0].to){var o,s=e.ks.or.k.length;for(o=0;o<s;o+=1)e.ks.or.k[o].to=null,e.ks.or.k[o].ti=null}this.or=r(this,e.ks.or,1,degToRads,this.dynamicProperties),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this.dynamicProperties),this.ry=r(this,e.ks.ry,0,degToRads,this.dynamicProperties),this.rz=r(this,e.ks.rz,0,degToRads,this.dynamicProperties),this.mat=new Matrix}extendPrototype(IShapeElement,HShapeElement),HShapeElement.prototype._parent=parent,HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderFrame,HShapeElement.prototype.createElements=function(){var e=document.createElement("div");styleDiv(e);var t=document.createElementNS(svgNS,"svg");styleDiv(t);var n=this.comp.data?this.comp.data:this.globalData.compSize;if(t.setAttribute("width",n.w),t.setAttribute("height",n.h),this.data.hasMask){var a=document.createElementNS(svgNS,"g");e.appendChild(t),t.appendChild(a),this.maskedElement=a,this.layerElement=a,this.shapesContainer=a}else e.appendChild(t),this.layerElement=t,this.shapesContainer=document.createElementNS(svgNS,"g"),this.layerElement.appendChild(this.shapesContainer);this.data.hd||(this.baseElement=e),this.innerElem=e,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,this.dynamicProperties,0,[],!0),this.buildExpressionInterface(),this.layerElement=e,this.transformedElement=e,this.shapeCont=t,0!==this.data.bm&&this.setBlendMode(),this.checkParenting()},HShapeElement.prototype.renderFrame=function(e){var t=this.firstFrame;if(this._renderShapeFrame(),this.isVisible&&(this.elemMdf||t)){var n=this.shapeCont.getBBox(),a=!1;this.currentBBox.w!==n.width&&(this.currentBBox.w=n.width,this.shapeCont.setAttribute("width",n.width),a=!0),this.currentBBox.h!==n.height&&(this.currentBBox.h=n.height,this.shapeCont.setAttribute("height",n.height),a=!0),(a||this.currentBBox.x!==n.x||this.currentBBox.y!==n.y)&&(this.currentBBox.w=n.width,this.currentBBox.h=n.height,this.currentBBox.x=n.x,this.currentBBox.y=n.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},createElement(HBaseElement,HTextElement),extendPrototype(ITextElement,HTextElement),HTextElement.prototype.createElements=function(){this.isMasked=this.checkMasks();var e=document.createElement("div");if(styleDiv(e),this.layerElement=e,this.transformedElement=e,this.isMasked){this.renderType="svg";var t=document.createElementNS(svgNS,"svg");styleDiv(t),this.cont=t,this.compW=this.comp.data.w,this.compH=this.comp.data.h,t.setAttribute("width",this.compW),t.setAttribute("height",this.compH);var n=document.createElementNS(svgNS,"g");t.appendChild(n),e.appendChild(t),this.maskedElement=n,this.innerElem=n}else this.renderType="html",this.innerElem=e;this.baseElement=e,this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:this.textProperty.currentData.l?this.textProperty.currentData.l.length:0});var t=this.innerElem.style;t.color=t.fill=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)",e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var n,a,i=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.s+"px",t.lineHeight=e.s+"px",i.fClass)this.innerElem.className=i.fClass;else{t.fontFamily=i.fFamily;var r=e.fWeight,o=e.fStyle;t.fontStyle=o,t.fontWeight=r}var s,l,c,u=e.l;a=u.length;var d,f=this.mHelper,h="",p=0;for(n=0;n<a;n+=1){if(this.globalData.fontManager.chars?(this.textPaths[p]?s=this.textPaths[p]:((s=document.createElementNS(svgNS,"path")).setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[p]?c=(l=this.textSpans[p]).children[0]:(l=document.createElement("div"),(c=document.createElementNS(svgNS,"svg")).appendChild(s),styleDiv(l)))):this.isMasked?s=this.textPaths[p]?this.textPaths[p]:document.createElementNS(svgNS,"text"):this.textSpans[p]?(l=this.textSpans[p],s=this.textPaths[p]):(styleDiv(l=document.createElement("span")),styleDiv(s=document.createElement("span")),l.appendChild(s)),this.globalData.fontManager.chars){var A,m=this.globalData.fontManager.getCharData(e.t.charAt(n),i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(A=m?m.data:null,f.reset(),A&&A.shapes&&(d=A.shapes[0].it,f.scale(e.s/100,e.s/100),h=this.createPathShape(f,d),s.setAttribute("d",h)),this.isMasked)this.innerElem.appendChild(s);else if(this.innerElem.appendChild(l),A&&A.shapes){document.body.appendChild(c);var _=c.getBBox();c.setAttribute("width",_.width+2),c.setAttribute("height",_.height+2),c.setAttribute("viewBox",_.x-1+" "+(_.y-1)+" "+(_.width+2)+" "+(_.height+2)),c.style.transform=c.style.webkitTransform="translate("+(_.x-1)+"px,"+(_.y-1)+"px)",u[n].yOffset=_.y-1,l.appendChild(c)}else c.setAttribute("width",1),c.setAttribute("height",1)}else s.textContent=u[n].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(s):(this.innerElem.appendChild(l),s.style.transform=s.style.webkitTransform="translate3d(0,"+-e.s/1.2+"px,0)");this.isMasked?this.textSpans[p]=s:this.textSpans[p]=l,this.textSpans[p].style.display="block",this.textPaths[p]=s,p+=1}for(;p<this.textSpans.length;)this.textSpans[p].style.display="none",p+=1},HTextElement.prototype.hide=SVGTextElement.prototype.hide,HTextElement.prototype.renderFrame=function(e){if(!1!==this._parent.renderFrame.call(this,e)){if(this.hidden&&(this.hidden=!1,this.innerElem.style.display="block",this.layerElement.style.display="block"),this.data.singleShape){if(!this.firstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform.matMdf&&(this.cont.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.cont.style.transform=this.cont.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var t,n,a,i,r,o=0,s=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(n=l.length,t=0;t<n;t+=1)l[t].n?o+=1:(i=this.textSpans[t],r=this.textPaths[t],a=s[o],o+=1,this.isMasked?i.setAttribute("transform",a.m):i.style.transform=i.style.webkitTransform=a.m,i.style.opacity=a.o,a.sw&&r.setAttribute("stroke-width",a.sw),a.sc&&r.setAttribute("stroke",a.sc),a.fc&&(r.setAttribute("fill",a.fc),r.style.color=a.fc));if(this.isVisible&&(this.elemMdf||this.firstFrame)&&this.innerElem.getBBox){var c=this.innerElem.getBBox();this.currentBBox.w!==c.width&&(this.currentBBox.w=c.width,this.cont.setAttribute("width",c.width)),this.currentBBox.h!==c.height&&(this.currentBBox.h=c.height,this.cont.setAttribute("height",c.height)),this.currentBBox.w===c.width+2&&this.currentBBox.h===c.height+2&&this.currentBBox.x===c.x-1&&this.currentBBox.y===c.y-1||(this.currentBBox.w=c.width+2,this.currentBBox.h=c.height+2,this.currentBBox.x=c.x-1,this.currentBBox.y=c.y-1,this.cont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.cont.style.transform=this.cont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}this.firstFrame&&(this.firstFrame=!1)}}else this.hide()},createElement(HBaseElement,HImageElement),HImageElement.prototype.createElements=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;if(this.data.hasMask){var n=document.createElement("div");styleDiv(n);var a=document.createElementNS(svgNS,"svg");styleDiv(a),a.setAttribute("width",this.assetData.w),a.setAttribute("height",this.assetData.h),n.appendChild(a),this.imageElem=document.createElementNS(svgNS,"image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),a.appendChild(this.imageElem),this.layerElement=n,this.transformedElement=n,this.baseElement=n,this.innerElem=n,this.maskedElement=this.imageElem}else styleDiv(t),this.layerElement=t,this.baseElement=t,this.innerElem=t,this.transformedElement=t;t.src=e,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.checkParenting()},HImageElement.prototype.show=HSolidElement.prototype.show,HImageElement.prototype.hide=HSolidElement.prototype.hide,HImageElement.prototype.renderFrame=HSolidElement.prototype.renderFrame,HImageElement.prototype.destroy=HSolidElement.prototype.destroy,createElement(HBaseElement,HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n=this.comp.threeDElements.length;for(e=0;e<n;e+=1)(t=this.comp.threeDElements[e]).perspectiveElem.style.perspective=t.perspectiveElem.style.webkitPerspective=this.pe.v+"px",t.container.style.transformOrigin=t.container.style.mozTransformOrigin=t.container.style.webkitTransformOrigin="0px 0px 0px",t.perspectiveElem.style.transform=t.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this.firstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=!!this.hierarchy[e].finalTransform.mProp.mdf||n;if(n||this.p&&this.p.mdf||this.px&&(this.px.mdf||this.py.mdf||this.pz.mdf)||this.rx.mdf||this.ry.mdf||this.rz.mdf||this.or.mdf||this.a&&this.a.mdf){if(this.mat.reset(),this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var a=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],i=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)),r=[a[0]/i,a[1]/i,a[2]/i],o=Math.sqrt(r[2]*r[2]+r[0]*r[0]),s=Math.atan2(r[1],o),l=Math.atan2(r[0],-r[2]);this.mat.rotateY(l).rotateX(-s)}var c,u;if(this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v),this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)c=this.hierarchy[e].finalTransform.mProp.iv.props,this.mat.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],-c[12],-c[13],c[14],c[15]);for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)(u=this.comp.threeDElements[e]).container.style.transform=u.container.style.webkitTransform=this.mat.toCSS()}this.firstFrame=!1},HCameraElement.prototype.destroy=function(){};var Expressions=function(){var e={initExpressions:function(e){e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer)}};return e}();expressionsPlugin=Expressions,function(){function e(){return this.pv}function t(e,t,n){if(!this.k||!this.keyframes)return this.pv;var a,i,r=this.comp.renderedFrame,o=this.keyframes,s=o[o.length-1].t;if(r<=s)return this.pv;n?i=s-(a=t?Math.abs(s-elem.comp.globalData.frameRate*t):Math.max(0,s-this.elem.data.ip)):((!t||t>o.length-1)&&(t=o.length-1),a=s-(i=o[o.length-1-t].t));var l,c,u,d=this.offsetTime||0;if("pingpong"===e.toLowerCase()){if(Math.floor((r-i)/a)%2!=0)return this.getValueAtTime((a-(r-i)%a+i-d)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var f=this.getValueAtTime(i/this.comp.globalData.frameRate,0),h=this.getValueAtTime(s/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((r-i)%a+i)/this.comp.globalData.frameRate,0),A=Math.floor((r-i)/a);if(this.pv.length){for(c=(u=new Array(f.length)).length,l=0;l<c;l+=1)u[l]=(h[l]-f[l])*A+p[l];return u}return(h-f)*A+p}if("continue"===e){var m=this.getValueAtTime(s/this.comp.globalData.frameRate,0),_=this.getValueAtTime((s-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(c=(u=new Array(m.length)).length,l=0;l<c;l+=1)u[l]=m[l]+(m[l]-_[l])*((r-s)/this.comp.globalData.frameRate)/5e-4;return u}return m+(r-s)/.001*(m-_)}}return this.getValueAtTime(((r-i)%a+i-d)/this.comp.globalData.frameRate,0)}function n(e,t,n){if(!this.k)return this.pv;var a,i,r,o,s,l=time*elem.comp.globalData.frameRate,c=this.keyframes,u=c[0].t,d=this.offsetTime||0;if(l>=u)return this.pv;if(n?i=u+(a=t?Math.abs(elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-u)):((!t||t>c.length-1)&&(t=c.length-1),a=(i=c[t].t)-u),"pingpong"===e){if(Math.floor((u-l)/a)%2==0)return this.getValueAtTime(((u-l)%a+u-d)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var f=this.getValueAtTime(u/this.comp.globalData.frameRate,0),h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime((a-(u-l)%a+u)/this.comp.globalData.frameRate,0),A=Math.floor((u-l)/a)+1;if(this.pv.length){for(o=(s=new Array(f.length)).length,r=0;r<o;r+=1)s[r]=p[r]-(h[r]-f[r])*A;return s}return p-(h-f)*A}if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),_=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(s=new Array(m.length)).length,r=0;r<o;r+=1)s[r]=m[r]+(m[r]-_[r])*(u-l)/.001;return s}return m+(m-_)*(u-l)/.001}}return this.getValueAtTime((a-(u-l)%a+u-d)/this.comp.globalData.frameRate,0)}function a(e){if(this._cachingAtTime||(this._cachingAtTime={lastValue:-99999,lastIndex:0}),e!==this._cachingAtTime.lastFrame){e*=this.elem.globalData.frameRate,e-=this.offsetTime;var t=this._caching.lastFrame<e?this._caching.lastIndex:0,n=this.interpolateValue(e,t,this.pv,this._cachingAtTime);this._cachingAtTime.lastIndex=n.iterationIndex,this._cachingAtTime.value=n.value,this._cachingAtTime.lastFrame=e}return this._cachingAtTime.value}function i(e){if(void 0!==this.vel)return this.vel;var t,n,a=this.getValueAtTime(e),i=this.getValueAtTime(e+-.01);if(a.length)for(t=Array.apply(null,{length:a.length}),n=0;n<a.length;n+=1)t[n]=(i[n]-a[n])/-.01;else t=(i-a)/-.01;return t}function r(e){this.propertyGroup=e}function o(e,t,n){t.x&&(n.k=!0,n.x=!0,n.getValue&&(n.getPreValue=n.getValue),n.getValue=ExpressionManager.initiateExpression.bind(n)(e,t,n))}var s=function(){function t(e,t){return this.textIndex=e+1,this.textTotal=t,this.getValue(),this.v}return function(n,s){this.pv=1,this.comp=n.comp,this.elem=n,this.mult=.01,this.type="textSelector",this.textTotal=s.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],o.bind(this)(n,s,this),this.getMult=t,this.getVelocityAtTime=i,this.kf?this.getValueAtTime=a.bind(this):this.getValueAtTime=e.bind(this),this.setGroupProperty=r}}(),l=PropertyFactory.getProp;PropertyFactory.getProp=function(s,c,u,d,f){var h=l(s,c,u,d,f);2===u?h.dynamicProperties.length?h.getValueAtTime=function(e){console.log("time:",e)}.bind(h):h.getValueAtTime=function(e){}.bind(h):h.kf?h.getValueAtTime=a.bind(h):h.getValueAtTime=e.bind(h),h.setGroupProperty=r,h.loopOut=t,h.loopIn=n,h.getVelocityAtTime=i,h.numKeys=1===c.a?c.k.length:0;var p=h.k;return void 0!==c.ix&&Object.defineProperty(h,"propertyIndex",{get:function(){return c.ix}}),o(s,c,h),!p&&h.x&&f.push(h),h};var c=ShapePropertyFactory.getConstructorFunction(),u=ShapePropertyFactory.getKeyframedConstructorFunction();c.prototype.vertices=function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0));var a,i=n._length,r=n[e],o=n.v,s=Array.apply(null,{length:i});for(a=0;a<i;a+=1)s[a]="i"===e||"o"===e?[r[a][0]-o[a][0],r[a][1]-o[a][1]]:[r[a][0],r[a][1]];return s},c.prototype.points=function(e){return this.vertices("v",e)},c.prototype.inTangents=function(e){return this.vertices("i",e)},c.prototype.outTangents=function(e){return this.vertices("o",e)},c.prototype.isClosed=function(){return this.v.c},c.prototype.pointOnPath=function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var a=this._segmentsLength,i=a.lengths,r=a.totalLength*e,o=0,s=i.length,l=0;o<s;){if(l+i[o].addedLength>r){i[o].segments;var c=o,u=n.c&&o===s-1?0:o+1,d=(r-l)/i[o].addedLength,f=bez.getPointInSegment(n.v[c],n.v[u],n.o[c],n.i[u],d,i[o]);break}l+=i[o].addedLength,o+=1}return f||(f=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),f},c.prototype.vectorOnPath=function(e,t,n){e=1==e?this.v.c?0:.999:e;var a=this.pointOnPath(e,t),i=this.pointOnPath(e+.001,t),r=i[0]-a[0],o=i[1]-a[1],s=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));return"tangent"===n?[r/s,o/s]:[-o/s,r/s]},c.prototype.tangentOnPath=function(e,t){return this.vectorOnPath(e,t,"tangent")},c.prototype.normalOnPath=function(e,t){return this.vectorOnPath(e,t,"normal")},c.prototype.setGroupProperty=r,c.prototype.getValueAtTime=e,u.prototype.vertices=c.prototype.vertices,u.prototype.points=c.prototype.points,u.prototype.inTangents=c.prototype.inTangents,u.prototype.outTangents=c.prototype.outTangents,u.prototype.isClosed=c.prototype.isClosed,u.prototype.pointOnPath=c.prototype.pointOnPath,u.prototype.vectorOnPath=c.prototype.vectorOnPath,u.prototype.tangentOnPath=c.prototype.tangentOnPath,u.prototype.normalOnPath=c.prototype.normalOnPath,u.prototype.setGroupProperty=c.prototype.setGroupProperty,u.prototype.getValueAtTime=function(e){if(this._shapeValueAtTime||(this._lastIndexAtTime=0,this._lastTimeAtTime=-999999,this._shapeValueAtTime=shape_pool.clone(this.pv)),e!==this._lastTimeAtTime){this._lastTimeAtTime=e,e*=this.elem.globalData.frameRate;var t=this.interpolateShape(e,this._lastIndexAtTime,this._shapeValueAtTime,!1);this._lastIndexAtTime=t.iterationIndex}return this._shapeValueAtTime};var d=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,a,i){var r=d(e,t,n,a,i),s=r.k;return void 0!==t.ix&&Object.defineProperty(r,"propertyIndex",{get:function(){return t.ix}}),3===n?o(e,t.pt,r):4===n&&o(e,t.ks,r),!s&&r.x&&a.push(r),r};var f=PropertyFactory.getTextSelectorProp;PropertyFactory.getTextSelectorProp=function(e,t,n){return 1===t.t?new s(e,t,n):f(e,t,n)}}(),TextProperty.prototype.searchProperty=function(){return this.kf=this.searchExpressions()||this.data.d.k.length>1,this.kf},TextProperty.prototype.getExpressionValue=function(e){this.calculateExpression(),this.mdf&&(this.currentData.t=this.v.toString(),this.completeTextData(this.currentData))},TextProperty.prototype.searchExpressions=function(){return!!this.data.d.x&&(this.comp=this.elem.comp,this.getValue&&(this.getPreValue=this.getValue),this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.getValue=this.getExpressionValue,!0)};var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null;function duplicatePropertyValue(e,t){if(t=t||1,"number"==typeof e||e instanceof Number)return e*t;if(e.i)return JSON.parse(JSON.stringify(e));var n,a=Array.apply(null,{length:e.length}),i=e.length;for(n=0;n<i;n+=1)a[n]=e[n]*t;return a}function shapesEqual(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,a=e._length;for(n=0;n<a;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0}function $bm_neg(e){var t=typeof e;if("number"===t||"boolean"===t||e instanceof Number)return-e;if(e.constructor===Array){var n,a=e.length,i=[];for(n=0;n<a;n+=1)i[n]=-e[n];return i}}function sum(e,t){var n=typeof e,a=typeof t;if("string"===n||"string"===a)return e+t;if(("number"===n||"boolean"===n||"string"===n||e instanceof Number)&&("number"===a||"boolean"===a||"string"===a||t instanceof Number))return e+t;if(e.constructor===Array&&("number"===a||"boolean"===a||"string"===a||t instanceof Number))return e[0]=e[0]+t,e;if(("number"===n||"boolean"===n||"string"===n||e instanceof Number)&&t.constructor===Array)return t[0]=e+t[0],t;if(e.constructor===Array&&t.constructor===Array){for(var i=0,r=e.length,o=t.length,s=[];i<r||i<o;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?s[i]=e[i]+t[i]:s[i]=null==t[i]?e[i]:e[i]||t[i],i+=1;return s}return 0}var add=sum;function sub(e,t){var n=typeof e,a=typeof t;if(("number"===n||"boolean"===n||"string"===n||e instanceof Number)&&("number"===a||"boolean"===a||"string"===a||t instanceof Number))return"string"===n&&(e=parseInt(e)),"string"===a&&(t=parseInt(t)),e-t;if(e.constructor===Array&&("number"===a||"boolean"===a||"string"===a||t instanceof Number))return e[0]=e[0]-t,e;if(("number"===n||"boolean"===n||"string"===n||e instanceof Number)&&t.constructor===Array)return t[0]=e-t[0],t;if(e.constructor===Array&&t.constructor===Array){for(var i=0,r=e.length,o=t.length,s=[];i<r||i<o;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||(t[i],Number),1)?s[i]=e[i]-t[i]:s[i]=null==t[i]?e[i]:e[i]||t[i],i+=1;return s}return 0}function mul(e,t){var n,a,i,r=typeof e,o=typeof t;if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&("number"===o||"boolean"===o||"string"===o||t instanceof Number))return e*t;if(e.constructor===Array&&("number"===o||"boolean"===o||"string"===o||t instanceof Number)){for(i=e.length,n=Array.apply(null,{length:i}),a=0;a<i;a+=1)n[a]=e[a]*t;return n}if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&t.constructor===Array){for(i=t.length,n=Array.apply(null,{length:i}),a=0;a<i;a+=1)n[a]=e*t[a];return n}return 0}function div(e,t){var n,a,i,r=typeof e,o=typeof t;if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&("number"===o||"boolean"===o||"string"===o||t instanceof Number))return e/t;if(e.constructor===Array&&("number"===o||"boolean"===o||"string"===o||t instanceof Number)){for(i=e.length,n=Array.apply(null,{length:i}),a=0;a<i;a+=1)n[a]=e[a]/t;return n}if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&t.constructor===Array){for(i=t.length,n=Array.apply(null,{length:i}),a=0;a<i;a+=1)n[a]=e/t[a];return n}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e)),"string"==typeof t&&(t=parseInt(t)),e%t}function clamp(e,t,n){if(t>n){var a=n;n=t,t=a}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);t||(t=helperLengthArray);var n,a=Math.min(e.length,t.length),i=0;for(n=0;n<a;n+=1)i+=Math.pow(t[n]-e[n],2);return Math.sqrt(i)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,a=e[0],i=e[1],r=e[2],o=Math.max(a,i,r),s=Math.min(a,i,r),l=(o+s)/2;if(o==s)t=n=0;else{var c=o-s;switch(n=l>.5?c/(2-o-s):c/(o+s),o){case a:t=(i-r)/c+(i<r?6:0);break;case i:t=(r-a)/c+2;break;case r:t=(a-i)/c+4}t/=6}return[t,n,l,e[3]]}function hslToRgb(e){var t,n,a,i=e[0],r=e[1],o=e[2];if(0==r)t=n=a=o;else{function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var l=o<.5?o*(1+r):o+r-o*r,c=2*o-l;t=s(c,l,i+1/3),n=s(c,l,i),a=s(c,l,i-1/3)}return[t,n,a,e[3]]}function linear(e,t,n,a,i){if(void 0===a||void 0===i)return linear(e,0,1,t,n);if(e<=t)return a;if(e>=n)return i;var r=n===t?0:(e-t)/(n-t);if(!a.length)return a+(i-a)*r;var o,s=a.length,l=Array.apply(null,{length:s});for(o=0;o<s;o+=1)l[o]=a[o]+(i[o]-a[o])*r;return l}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,a=t.length;e||(e=Array.apply(null,{length:a}));var i=Array.apply(null,{length:a}),r=BMMath.random();for(n=0;n<a;n+=1)i[n]=e[n]+r*(t[n]-e[n]);return i}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,a){t=t&&t.length?t:e,n=n&&n.length?n:e;var r=shape_pool.newShape(),o=e.length;for(r.setPathData(a,o),i=0;i<o;i+=1)r.setTripleAt(e[i][0],e[i][1],n[i][0]+e[i][0],n[i][1]+e[i][1],t[i][0]+e[i][0],t[i][1]+e[i][1],i,!0);return r}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,content,effect,thisComp=elem.comp,thisProperty=property;elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,loopIn,loop_in,loopOut,loop_out,toWorld,fromWorld,fromComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,fn=new Function,fn=eval("[function(){"+val+";if($bm_rt.__shapeObject){this.v=shape_pool.clone($bm_rt.v);}else{this.v=$bm_rt;}}]")[0],bindedFn=fn.bind(this),numKeys=property.kf?data.k.length:0,wiggle=function(e,t){var n,a,i=this.pv.length?this.pv.length:1,r=Array.apply(null,{len:i});for(a=0;a<i;a+=1)r[a]=0;var o=Math.floor(5*time);for(n=0,a=0;n<o;){for(a=0;a<i;a+=1)r[a]+=-t+2*t*BMMath.random();n+=1}var s=5*time,l=s-Math.floor(s),c=Array.apply({length:i});if(i>1){for(a=0;a<i;a+=1)c[a]=this.pv[a]+r[a]+(-t+2*t*BMMath.random())*l;return c}return this.pv+r[0]+(-t+2*t*BMMath.random())*l}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut);var loopInDuration=function(e,t){return loopIn(e,t,!0)}.bind(this),loopOutDuration=function(e,t){return loopOut(e,t,!0)}.bind(this);this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],a=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,a,0]}function easeOut(e,t,n){return-(n-t)*e*(e-2)+t}function nearestKey(e){var t,n,a,i=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,a=data.k[0].t;else{for(t=0;t<i-1;t+=1){if(e===data.k[t].t){n=t+1,a=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,a=data.k[t+1].t):(n=t+1,a=data.k[t].t);break}}-1===n&&(n=t+1,a=data.k[t].t)}else n=0,a=0;var r={};return r.index=n,r.time=a/elem.comp.globalData.frameRate,r}function key(e){var t,n,a,i;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);for(e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate},a=(i=e!==data.k.length-1||data.k[e].h?data.k[e].s:data.k[e-1].e).length,n=0;n<a;n+=1)t[n]=i[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random());function executeExpression(){if(_needsRandom&&seedRandom(randSeed),this.frameExpressionId!==elem.globalData.frameId||"textSelector"===this.type){if(this.lock)return this.v=duplicatePropertyValue(this.pv,this.mult),!0;var e,t;if("textSelector"===this.type&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),anchorPoint=transform.anchorPoint),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),this.lock=!0,this.getPreValue&&this.getPreValue(),value=this.pv,time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),bindedFn(),this.frameExpressionId=elem.globalData.frameId,this.mult)if("number"==typeof this.v||this.v instanceof Number||this.v instanceof String||"string"==typeof this.v)this.v*=this.mult;else if(1===this.v.length)this.v=this.v[0]*this.mult;else for(t=this.v.length,value===this.v&&(this.v=2===t?[value[0],value[1]]:[value[0],value[1],value[2]]),e=0;e<t;e+=1)this.v[e]*=this.mult;if(1===this.v.length&&(this.v=this.v[0]),"number"==typeof this.v||this.v instanceof Number||this.v instanceof String||"string"==typeof this.v)this.lastValue!==this.v&&(this.lastValue=this.v,this.mdf=!0);else if(this.v._length)shapesEqual(this.v,this.localShapeCollection.shapes[0])||(this.mdf=!0,this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(shape_pool.clone(this.v)));else for(t=this.v.length,e=0;e<t;e+=1)this.v[e]!==this.lastValue[e]&&(this.lastValue[e]=this.v[e],this.mdf=!0);this.lock=!1}}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),ShapeExpressionInterface=function(){var e={createShapeInterface:function(e,t,a){return n(e,t,a)},createGroupInterface:function(e,t,n){return i(e,t,n)},createTrimInterface:function(e,t,n){return s(e,t,n)},createStrokeInterface:function(e,t,n){return o(e,t,n)},createTransformInterface:function(e,t,n){return l(e,t,n)},createEllipseInterface:function(e,t,n){return c(e,t,n)},createStarInterface:function(e,t,n){return u(e,t,n)},createRectInterface:function(e,t,n){return d(e,t,n)},createRoundedInterface:function(e,t,n){return f(e,t,n)},createRepatearInterface:function(e,t,n){return h(e,t,n)},createPathInterface:function(e,t,n){return p(e,t,n)},createFillInterface:function(e,t,n){return r(e,t,n)}};function t(e,t,n){var a,i=[],r=e?e.length:0;for(a=0;a<r;a+=1)"gr"==e[a].ty?i.push(ShapeExpressionInterface.createGroupInterface(e[a],t[a],n)):"fl"==e[a].ty?i.push(ShapeExpressionInterface.createFillInterface(e[a],t[a],n)):"st"==e[a].ty?i.push(ShapeExpressionInterface.createStrokeInterface(e[a],t[a],n)):"tm"==e[a].ty?i.push(ShapeExpressionInterface.createTrimInterface(e[a],t[a],n)):"tr"==e[a].ty||("el"==e[a].ty?i.push(ShapeExpressionInterface.createEllipseInterface(e[a],t[a],n)):"sr"==e[a].ty?i.push(ShapeExpressionInterface.createStarInterface(e[a],t[a],n)):"sh"==e[a].ty?i.push(ShapeExpressionInterface.createPathInterface(e[a],t[a],n)):"rc"==e[a].ty?i.push(ShapeExpressionInterface.createRectInterface(e[a],t[a],n)):"rd"==e[a].ty?i.push(ShapeExpressionInterface.createRoundedInterface(e[a],t[a],n)):"rp"==e[a].ty&&i.push(ShapeExpressionInterface.createRepatearInterface(e[a],t[a],n)));return i}var n=function(e,n,a){var i;function r(e){if("number"==typeof e)return i[e-1];for(var t=0,n=i.length;t<n;){if(i[t]._name===e)return i[t];t+=1}}return r.propertyGroup=a,i=t(e,n,r),r},a=function(e,n,a){var i,r=function(e){for(var t=0,n=i.length;t<n;){if(i[t]._name===e||i[t].mn===e||i[t].propertyIndex===e||i[t].ix===e||i[t].ind===e)return i[t];t+=1}if("number"==typeof e)return i[e-1]};return r.propertyGroup=function(e){return 1===e?r:a(e-1)},i=t(e.it,n.it,r.propertyGroup),r.numProperties=i.length,r.propertyIndex=e.cix,r},i=function(e,t,n){var i=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return i.content;case"ADBE Vector Transform Group":case 3:default:return i.transform}};i.propertyGroup=function(e){return 1===e?i:n(e-1)};var r=a(e,t,i.propertyGroup),o=ShapeExpressionInterface.createTransformInterface(e.it[e.it.length-1],t.it[t.it.length-1],i.propertyGroup);return i.content=r,i.transform=o,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.numProperties=e.np,i.propertyIndex=e.ix,i.nm=e.nm,i.mn=e.mn,i},r=function(e,t,n){function a(e){return"Color"===e||"color"===e?a.color:"Opacity"===e||"opacity"===e?a.opacity:void 0}return Object.defineProperty(a,"color",{get:function(){return ExpressionValue(t.c,1/t.c.mult,"color")}}),Object.defineProperty(a,"opacity",{get:function(){return ExpressionValue(t.o,100)}}),Object.defineProperty(a,"_name",{value:e.nm}),Object.defineProperty(a,"mn",{value:e.mn}),t.c.setGroupProperty(n),t.o.setGroupProperty(n),a},o=function(t,n,a){function i(t){return 1===t?e:a(t-1)}function r(e){return 1===e?c:i(e-1)}function o(e){Object.defineProperty(c,t.d[e].nm,{get:function(){return ExpressionValue(n.d.dataProps[e].p)}})}var s,l=t.d?t.d.length:0,c={};for(s=0;s<l;s+=1)o(s),n.d.dataProps[s].p.setGroupProperty(r);function u(e){return"Color"===e||"color"===e?u.color:"Opacity"===e||"opacity"===e?u.opacity:"Stroke Width"===e||"stroke width"===e?u.strokeWidth:void 0}return Object.defineProperty(u,"color",{get:function(){return ExpressionValue(n.c,1/n.c.mult,"color")}}),Object.defineProperty(u,"opacity",{get:function(){return ExpressionValue(n.o,100)}}),Object.defineProperty(u,"strokeWidth",{get:function(){return ExpressionValue(n.w)}}),Object.defineProperty(u,"dash",{get:function(){return c}}),Object.defineProperty(u,"_name",{value:t.nm}),Object.defineProperty(u,"mn",{value:t.mn}),n.c.setGroupProperty(i),n.o.setGroupProperty(i),n.w.setGroupProperty(i),u},s=function(e,t,n){function a(e){return 1==e?i:n(--e)}function i(t){return t===e.e.ix||"End"===t||"end"===t?i.end:t===e.s.ix?i.start:t===e.o.ix?i.offset:void 0}return i.propertyIndex=e.ix,t.s.setGroupProperty(a),t.e.setGroupProperty(a),t.o.setGroupProperty(a),i.propertyIndex=e.ix,Object.defineProperty(i,"start",{get:function(){return ExpressionValue(t.s,1/t.s.mult)}}),Object.defineProperty(i,"end",{get:function(){return ExpressionValue(t.e,1/t.e.mult)}}),Object.defineProperty(i,"offset",{get:function(){return ExpressionValue(t.o)}}),Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.mn=e.mn,i},l=function(e,t,n){function a(e){return 1==e?i:n(--e)}function i(t){return e.a.ix===t?i.anchorPoint:e.o.ix===t?i.opacity:e.p.ix===t?i.position:e.r.ix===t?i.rotation:e.s.ix===t?i.scale:e.sk&&e.sk.ix===t?i.skew:e.sa&&e.sa.ix===t?i.skewAxis:"Opacity"===t?i.opacity:"Position"===t?i.position:"Anchor Point"===t?i.anchorPoint:"Scale"===t?i.scale:"Rotation"===t||"ADBE Vector Rotation"===t?i.rotation:"Skew"===t?i.skew:"Skew Axis"===t?i.skewAxis:void 0}return t.transform.mProps.o.setGroupProperty(a),t.transform.mProps.p.setGroupProperty(a),t.transform.mProps.a.setGroupProperty(a),t.transform.mProps.s.setGroupProperty(a),t.transform.mProps.r.setGroupProperty(a),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(a),t.transform.mProps.sa.setGroupProperty(a)),t.transform.op.setGroupProperty(a),Object.defineProperty(i,"opacity",{get:function(){return ExpressionValue(t.transform.mProps.o,1/t.transform.mProps.o.mult)}}),Object.defineProperty(i,"position",{get:function(){return ExpressionValue(t.transform.mProps.p)}}),Object.defineProperty(i,"anchorPoint",{get:function(){return ExpressionValue(t.transform.mProps.a)}}),Object.defineProperty(i,"scale",{get:function(){return ExpressionValue(t.transform.mProps.s,1/t.transform.mProps.s.mult)}}),Object.defineProperty(i,"rotation",{get:function(){return ExpressionValue(t.transform.mProps.r,1/t.transform.mProps.r.mult)}}),Object.defineProperty(i,"skew",{get:function(){return ExpressionValue(t.transform.mProps.sk)}}),Object.defineProperty(i,"skewAxis",{get:function(){return ExpressionValue(t.transform.mProps.sa)}}),Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.ty="tr",i.mn=e.mn,i},c=function(e,t,n){function a(e){return 1==e?r:n(--e)}r.propertyIndex=e.ix;var i="tm"===t.sh.ty?t.sh.prop:t.sh;function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:void 0}return i.s.setGroupProperty(a),i.p.setGroupProperty(a),Object.defineProperty(r,"size",{get:function(){return ExpressionValue(i.s)}}),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(i.p)}}),Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.mn=e.mn,r},u=function(e,t,n){function a(e){return 1==e?r:n(--e)}var i="tm"===t.sh.ty?t.sh.prop:t.sh;function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:void 0:r.innerRadius}return r.propertyIndex=e.ix,i.or.setGroupProperty(a),i.os.setGroupProperty(a),i.pt.setGroupProperty(a),i.p.setGroupProperty(a),i.r.setGroupProperty(a),e.ir&&(i.ir.setGroupProperty(a),i.is.setGroupProperty(a)),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(i.p)}}),Object.defineProperty(r,"rotation",{get:function(){return ExpressionValue(i.r,1/i.r.mult)}}),Object.defineProperty(r,"points",{get:function(){return ExpressionValue(i.pt)}}),Object.defineProperty(r,"outerRadius",{get:function(){return ExpressionValue(i.or)}}),Object.defineProperty(r,"outerRoundness",{get:function(){return ExpressionValue(i.os)}}),Object.defineProperty(r,"innerRadius",{get:function(){return i.ir?ExpressionValue(i.ir):0}}),Object.defineProperty(r,"innerRoundness",{get:function(){return i.is?ExpressionValue(i.is,1/i.is.mult):0}}),Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.mn=e.mn,r},d=function(e,t,n){function a(e){return 1==e?r:n(--e)}var i="tm"===t.sh.ty?t.sh.prop:t.sh;function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t?r.size:void 0}return r.propertyIndex=e.ix,i.p.setGroupProperty(a),i.s.setGroupProperty(a),i.r.setGroupProperty(a),Object.defineProperty(r,"position",{get:function(){return ExpressionValue(i.p)}}),Object.defineProperty(r,"roundness",{get:function(){return ExpressionValue(i.r)}}),Object.defineProperty(r,"size",{get:function(){return ExpressionValue(i.s)}}),Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.mn=e.mn,r},f=function(e,t,n){var a=t;function i(t){if(e.r.ix===t||"Round Corners 1"===t)return i.radius}return i.propertyIndex=e.ix,a.rd.setGroupProperty(function(e){return 1==e?i:n(--e)}),Object.defineProperty(i,"radius",{get:function(){return ExpressionValue(a.rd)}}),Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.mn=e.mn,i},h=function(e,t,n){function a(e){return 1==e?r:n(--e)}var i=t;function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:void 0}return r.propertyIndex=e.ix,i.c.setGroupProperty(a),i.o.setGroupProperty(a),Object.defineProperty(r,"copies",{get:function(){return ExpressionValue(i.c)}}),Object.defineProperty(r,"offset",{get:function(){return ExpressionValue(i.o)}}),Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.mn=e.mn,r},p=function(e,t,n){var a=t.sh;function i(e){if("Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e)return i.path}return a.setGroupProperty(function(e){return 1==e?i:n(--e)}),Object.defineProperty(i,"path",{get:function(){return a.k&&a.getValue(),a}}),Object.defineProperty(i,"shape",{get:function(){return a.k&&a.getValue(),a}}),Object.defineProperty(i,"_name",{value:e.nm}),Object.defineProperty(i,"ix",{value:e.ix}),Object.defineProperty(i,"mn",{value:e.mn}),i};return e}(),TextExpressionInterface=function(e){var t;function n(){}return Object.defineProperty(n,"sourceText",{get:function(){var n=e.textProperty.currentData.t;return void 0!==e.textProperty.currentData.t&&(e.textProperty.currentData.t=void 0,(t=new String(n)).value=n||new String(n)),t}}),n},LayerExpressionInterface=function(){function e(e,t){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var a,i=this._elem.hierarchy.length;for(a=0;a<i;a+=1)this._elem.hierarchy[a].finalTransform.mProp.applyToMatrix(n);return n.applyToPointArray(e[0],e[1],e[2]||0)}return n.applyToPointArray(e[0],e[1],e[2]||0)}function t(e,t){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var a,i=this._elem.hierarchy.length;for(a=0;a<i;a+=1)this._elem.hierarchy[a].finalTransform.mProp.applyToMatrix(n);return n.inversePoint(e)}return n.inversePoint(e)}function n(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,a=this._elem.hierarchy.length;for(n=0;n<a;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}return function(a){var i=TransformExpressionInterface(a.transform);function r(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return r.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return i;case 4:case"ADBE Effect Parade":return r.effect}}return r.toWorld=e,r.fromWorld=t,r.toComp=e,r.fromComp=n,r.sourceRectAtTime=a.sourceRectAtTime.bind(a),r._elem=a,Object.defineProperty(r,"hasParent",{get:function(){return!!a.hierarchy}}),Object.defineProperty(r,"parent",{get:function(){return a.hierarchy[0].layerInterface}}),Object.defineProperty(r,"rotation",{get:function(){return i.rotation}}),Object.defineProperty(r,"scale",{get:function(){return i.scale}}),Object.defineProperty(r,"position",{get:function(){return i.position}}),Object.defineProperty(r,"anchorPoint",{get:function(){return i.anchorPoint}}),Object.defineProperty(r,"transform",{get:function(){return i}}),Object.defineProperty(r,"width",{get:function(){return 0===a.data.ty?a.data.w:100}}),Object.defineProperty(r,"height",{get:function(){return 0===a.data.ty?a.data.h:100}}),Object.defineProperty(r,"source",{get:function(){return a.data.refId}}),Object.defineProperty(r,"index",{get:function(){return a.data.ind}}),Object.defineProperty(r,"_name",{value:a.data.nm}),Object.defineProperty(r,"content",{get:function(){return r.shapeInterface}}),Object.defineProperty(r,"active",{get:function(){return a.isVisible}}),Object.defineProperty(r,"text",{get:function(){return r.textInterface}}),r.registerMaskInterface=function(e){r.mask=new MaskManagerInterface(e,a)},r.registerEffectsInterface=function(e){r.effect=e},r}}(),CompExpressionInterface=function(e){function t(t){for(var n=0,a=e.layers.length;n<a;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return{active:!1}}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.globalData.compSize.h,t.width=e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t},TransformExpressionInterface=function(e){function t(n){switch(n){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity}}return Object.defineProperty(t,"rotation",{get:function(){return e.rotation}}),Object.defineProperty(t,"scale",{get:function(){return e.scale}}),Object.defineProperty(t,"position",{get:function(){return e.position}}),Object.defineProperty(t,"xPosition",{get:function(){return e.xPosition}}),Object.defineProperty(t,"yPosition",{get:function(){return e.yPosition}}),Object.defineProperty(t,"anchorPoint",{get:function(){return e.anchorPoint}}),Object.defineProperty(t,"opacity",{get:function(){return e.opacity}}),Object.defineProperty(t,"skew",{get:function(){return e.skew}}),Object.defineProperty(t,"skewAxis",{get:function(){return e.skewAxis}}),t},ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),EffectsExpressionInterface=function(){function e(n,a,i,r){var o,s=[],l=n.ef.length;for(o=0;o<l;o+=1)5===n.ef[o].ty?s.push(e(n.ef[o],a.effectElements[o],a.effectElements[o].propertyGroup,r)):s.push(t(a.effectElements[o],n.ef[o].ty,r,c));function c(e){return 1===e?u:i(e-1)}var u=function(e){for(var t=n.ef,a=0,i=t.length;a<i;){if(e===t[a].nm||e===t[a].mn||e===t[a].ix)return 5===t[a].ty?s[a]:s[a]();a+=1}return s[0]()};return u.propertyGroup=c,"ADBE Color Control"===n.mn&&Object.defineProperty(u,"color",{get:function(){return s[0]()}}),Object.defineProperty(u,"numProperties",{get:function(){return n.np}}),u.active=0!==n.en,u}function t(e,t,n,a){return e.p.setGroupProperty&&e.p.setGroupProperty(a),function(){return 10===t?n.comp.compInterface(e.p.v):ExpressionValue(e.p)}}return{createEffectsInterface:function(t,n){if(t.effects){var a,i=[],r=t.data.ef,o=t.effects.effectElements.length;for(a=0;a<o;a+=1)i.push(e(r[a],t.effects.effectElements[a],n,t));return function(e){for(var n=t.data.ef,a=0,r=n.length;a<r;){if(e===n[a].nm||e===n[a].mn||e===n[a].ix)return i[a];a+=1}}}}}}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),function(t,n){var a,i=Array.apply(null,{length:t.viewData.length}),r=t.viewData.length;for(a=0;a<r;a+=1)i[a]=new e(t.viewData[a],t.masksProperties[a]);return function(e){for(a=0;a<r;){if(t.masksProperties[a].nm===e)return i[a];a+=1}}}}(),ExpressionValue=function(e,t,n){var a,i,r,o;if(e.k&&e.getValue(),n){if("color"===n){for(r=4,a=Array.apply(null,{length:r}),o=Array.apply(null,{length:r}),i=0;i<r;i+=1)a[i]=o[i]=t&&i<3?e.v[i]*t:1;a.value=o}}else if("number"==typeof e.v||e.v instanceof Number)(a=t?new Number(e.v*t):new Number(e.v)).value=t?e.v*t:e.v;else{for(r=e.v.length,a=Array.apply(null,{length:r}),o=Array.apply(null,{length:r}),i=0;i<r;i+=1)a[i]=o[i]=t?e.v[i]*t:e.v[i];a.value=o}return a.numKeys=e.keyframes?e.keyframes.length:0,a.key=function(t){return a.numKeys?e.keyframes[t-1].t:0},a.valueAtTime=e.getValueAtTime,a.propertyGroup=e.propertyGroup,a};function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(e,t,n){var a=e.ef;this.effectElements=[];var i,r,o=a.length;for(i=0;i<o;i++)r=new GroupEffect(a[i],t,n),this.effectElements.push(r)}function GroupEffect(e,t,n){this.dynamicProperties=[],this.init(e,t,this.dynamicProperties),this.dynamicProperties.length&&n.push(this)}GroupEffect.prototype.getValue=function(){this.mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.mdf=!!this.dynamicProperties[e].mdf||this.mdf},GroupEffect.prototype.init=function(e,t,n){this.data=e,this.mdf=!1,this.effectElements=[];var a,i,r=this.data.ef.length,o=this.data.ef;for(a=0;a<r;a+=1)switch(o[a].ty){case 0:i=new SliderEffect(o[a],t,n),this.effectElements.push(i);break;case 1:i=new AngleEffect(o[a],t,n),this.effectElements.push(i);break;case 2:i=new ColorEffect(o[a],t,n),this.effectElements.push(i);break;case 3:i=new PointEffect(o[a],t,n),this.effectElements.push(i);break;case 4:case 7:i=new CheckboxEffect(o[a],t,n),this.effectElements.push(i);break;case 10:i=new LayerIndexEffect(o[a],t,n),this.effectElements.push(i);break;case 11:i=new MaskIndexEffect(o[a],t,n),this.effectElements.push(i);break;case 5:i=new EffectsManager(o[a],t,n),this.effectElements.push(i);break;case 6:i=new NoValueEffect(o[a],t,n),this.effectElements.push(i)}};var bodymovinjs={};function setLocationHref(e){locationHref=e}function play(e){animationManager.play(e)}function pause(e){animationManager.pause(e)}function togglePause(e){animationManager.togglePause(e)}function setSpeed(e,t){animationManager.setSpeed(e,t)}function setDirection(e,t){animationManager.setDirection(e,t)}function stop(e){animationManager.stop(e)}function moveFrame(e){animationManager.moveFrame(e)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function registerAnimation(e){return animationManager.registerAnimation(e)}function resize(){animationManager.resize()}function start(){animationManager.start()}function goToAndStop(e,t,n){animationManager.goToAndStop(e,t,n)}function setSubframeRendering(e){subframeEnabled=e}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function destroy(e){return animationManager.destroy(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&e>1&&(defaultCurveSegments=e);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if(decodeURIComponent(a[0])==e)return decodeURIComponent(a[1])}}bodymovinjs.play=play,bodymovinjs.pause=pause,bodymovinjs.setLocationHref=setLocationHref,bodymovinjs.togglePause=togglePause,bodymovinjs.setSpeed=setSpeed,bodymovinjs.setDirection=setDirection,bodymovinjs.stop=stop,bodymovinjs.moveFrame=moveFrame,bodymovinjs.searchAnimations=searchAnimations,bodymovinjs.registerAnimation=registerAnimation,bodymovinjs.loadAnimation=loadAnimation,bodymovinjs.setSubframeRendering=setSubframeRendering,bodymovinjs.resize=resize,bodymovinjs.start=start,bodymovinjs.goToAndStop=goToAndStop,bodymovinjs.destroy=destroy,bodymovinjs.setQuality=setQuality,bodymovinjs.inBrowser=inBrowser,bodymovinjs.installPlugin=installPlugin,bodymovinjs.__getFactory=getFactory,bodymovinjs.version="4.13.0";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return bodymovinjs},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory(root)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},nXjO:function(e,t,n){"use strict";var a={OPEN_CLASS:"reply_owner_show",OPEN_BOTTOM_CLASS:"reply_owner_open_bottom",NO_LIMIT_CLASS:"reply_owner_picker_nolimit",CONTAINER_CLASS:"reply_owner_picker_container",PICKER_CLASS:"reply_owner_picker",PICKER_ITEM_CLASS:"reply_owner_option",LOADING_CLASS:"reply_owner_loading",IMAGE_CLASS:"_reply_owner_image",SELECTED_IMAGE_CLASS:"_reply_owner_selected_image",SELECTED_IMAGE_CONTAINER_CLASS:"reply_owner_selected_image",OPTION_CLASS:"reply_owner_option",PICKER_MAX_HEIGHT:null,LOADING_SHOW_TIME:300,container:null,picker:null,clickEvent:"ontouchend"in document.documentElement?"touchend":"click",clickHandler:null,requestHandler:null,request:null,loading:!1,setElements:function(e){this.container=gpeByClass(this.CONTAINER_CLASS,e),this.picker=geByClass1(this.PICKER_CLASS,this.container),this.clickHandler=this.clickHandler||bind(this.onDocumentClick,this),this.requestHandler=this.requestHandler||bind(this.onDocumentClickBeforeLoad,this)},unsetElements:function(){removeEvent(document.body,this.clickEvent,this.clickHandler),removeEvent(document.body,this.clickEvent,this.requestHandler),this.container=this.picker=null},show:function(e){this.setElements(e),addClass(this.OPEN_CLASS,this.container),this.calcPosition()},hide:function(){removeClass(this.OPEN_CLASS,this.container),removeClass(this.OPEN_BOTTOM_CLASS,this.container),this.unsetElements()},toggle:function(){toggleClass(this.OPEN_CLASS,this.container),this.calcPosition(),hasClass(this.OPEN_CLASS,this.container)?(this.scrollToSelected(),addEvent(document.body,this.clickEvent,this.clickHandler)):(this.hide(),this.unsetElements())},calcPosition:function(){var e=ge("mhead").offsetHeight,t=this.picker.getBoundingClientRect(),n=domClosestOverflowHidden(this.picker),a=!0;n&&n.getBoundingClientRect().bottom<this.container.getBoundingClientRect().bottom+this.PICKER_MAX_HEIGHT?a=!1:hasClass(this.LOADING_CLASS,this.container)?a=t.top-e-this.PICKER_MAX_HEIGHT+t.height<0:hasClass(this.OPEN_BOTTOM_CLASS,this.container)||(a=t.top-e<0),toggleClass(this.OPEN_BOTTOM_CLASS,this.container,a)},onDocumentClick:function(e){var t=e.target;t===this.container||gpeByClass(this.CONTAINER_CLASS,t)||this.hide()},onDocumentClickBeforeLoad:function(e){var t=e.target;t===this.container||gpeByClass(this.CONTAINER_CLASS,t)||this.cancelRequest()},cancelRequest:function(){this.request&&(this.request.abort(),this.unsetElements())},getList:function(){var e=this;if(!this.loading){this.PICKER_MAX_HEIGHT=parseInt(getStyle(this.picker,"maxHeight"),10);var t=geBySel1('input[name="from_oid"]',this.container).value,n=geBySel1('input[name="post_oid"]',this.container).value;this.loading=!0;var a=setTimeout(function(){addClass(e.LOADING_CLASS,e.container),e.calcPosition()},this.LOADING_SHOW_TIME);addEvent(document.body,this.clickEvent,this.requestHandler),this.request=ajax.post("/wall.php",{act:"get_reply_clubs_list",oid:t,post_oid:n},{onDone:function(t){clearTimeout(a),e.picker.innerHTML=t,e.onLoadEnd(),e.toggle(e.picker)},onFail:function(){e.onLoadEnd()}})}},onLoadEnd:function(){this.loading=!1,removeClass(this.LOADING_CLASS,this.container),removeEvent(document.body,this.clickEvent,this.requestHandler)},onChange:function(e){var t=gpeByClass(this.OPTION_CLASS,e),n=geByClass1(this.IMAGE_CLASS,t).src;each(geByClass(this.SELECTED_IMAGE_CLASS),function(){this.src=n}),attr(geByClass1("al"+this.SELECTED_IMAGE_CLASS),"href",attr(t,"data-href")),this.hide()},onClick:function(e){this.setElements(e),geByClass(this.PICKER_ITEM_CLASS,this.picker).length?this.toggle():this.getList()},scrollToSelected:function(){var e=gpeByClass(this.OPTION_CLASS,geBySel1(":checked",this.picker));this.PICKER_MAX_HEIGHT||(this.PICKER_MAX_HEIGHT=parseInt(getStyle(this.picker,"maxHeight"),10)),e&&(this.picker.scrollTop=e.offsetTop-this.PICKER_MAX_HEIGHT/2+e.offsetHeight/2)}};window.replyOwnerPicker=a},nggH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("bZ/P")),i=r(n("9y81"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=u(['\n    <div class="','" ',">","</div>\n  "]);return o=function(){return e},e}function s(){var e=u(['\n    <button class="','" aria-label="','" ',"></button>\n  "]);return s=function(){return e},e}function l(){var e=u(['\n    <button class="','" ',">\n      ","\n    </button>\n  "]);return l=function(){return e},e}function c(){var e=u(['\n    <div class="','">\n\n      ','\n\n      <div class="mailActs__counter"></div>\n\n      <div class="mailActs__buttons">\n        <div class="mailActs__buttonsIn">\n          ',"\n          ",'\n        </div>\n        <div class="mailActs__chevron">\n          <div class="mailActs__chevronIn">\n            ',"\n            ","\n            ","\n            ","\n            ",'\n          </div>\n          <div class="mailActs__chevronMore">\n            <div class="mailActs__chevronMoreIcon" ','></div>\n            <div class="mailActs__chevronList">\n              ',"\n              ","\n              ","\n              ","\n              ","\n            </div>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  "]);return c=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=function(e){e||(e={});window.lang;var t=a.default.onClick("MailActs._onMoreClick"),n=(0,i.default)({mix:"mailActs__close",icon:"close12",attrs:a.default.onClick("MailActs._onCloseClick")}),r=f("reply"),o=f("forward"),s=h("edit",e),l=h("pin",e),u=h("important",e),d=h("remove",e),A=h("spam",e),m=p("edit",e),_=p("pin",e),v=p("important",e),g=p("remove",e),y=p("spam",e),b=a.default.class("mailActs",{canPin:e.canPin,pinned:e.isPinned,important:e.isImportant,isChannel:e.isChannel});return a.default.html(c(),b,n,r,o,s,l,u,d,A,t,m,_,v,g,y)};function f(e){var t=window.lang,n=a.default.class("mailActs__button",{type:e}),i=a.default.onClick("MailActs._onButtonClick",e),r="reply"===e?t.mobile_mail_messages_actions_reply:t.mobile_mail_messages_actions_forward;return a.default.html(l(),n,i,r)}function h(e,t){var n,i=window.lang,r=a.default.class("mailActs__icon",{type:e}),o=a.default.onClick("MailActs._onButtonClick",e),l=t.isPinned?i.mobile_mail_messages_actions_unpin:i.mobile_mail_messages_actions_pin,c=t.isImportant?i.mobile_mail_messages_actions_important_off:i.mobile_mail_messages_actions_important;switch(e){case"edit":n=i.mobile_mail_messages_actions_edit;break;case"pin":n=l;break;case"important":n=c;break;case"remove":n=i.mobile_mail_messages_actions_delete;break;case"spam":n=i.mobile_mail_messages_actions_spam}return a.default.html(s(),r,n,o)}function p(e,t){var n,i=window.lang,r=a.default.class("mailActs__chevronListItem",{type:e}),s=a.default.onClick("MailActs._onButtonClick",e),l=t.isPinned?i.mobile_mail_messages_actions_unpin:i.mobile_mail_messages_actions_pin,c=t.isImportant?i.mobile_mail_messages_actions_important_off:i.mobile_mail_messages_actions_important;switch(e){case"edit":n=i.mobile_mail_messages_actions_edit;break;case"pin":n=l;break;case"important":n=c;break;case"remove":n=i.mobile_mail_messages_actions_delete;break;case"spam":n=i.mobile_mail_messages_actions_spam}return a.default.html(o(),r,s,n)}t.default=d},nj7l:function(e,t,n){"use strict";var a=n("UxAg");onDOMReady(function(){addEvent(window,"click",function(e){if((0,a.$$)(".Tooltip").forEach(function(e){return re(e)}),e.target&&e.target.classList.contains("Tooltip")||e.target.closest(".Tooltip")){var t=e.target.getAttribute("tooltip-id");ajax.post("/?act=tooltip_click&id=".concat(t))}})})},nlPs:function(e,t,n){"use strict";var a=r(n("9qLg")),i=r(n("WwUR"));function r(e){return e&&e.__esModule?e:{default:e}}window.isNewLongpoll?window.im=i.default:window.im=a.default},"o+0k":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("z9sQ")),i=r(n("1IPy"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){return{tag:"label",class:a.default.class("VotingForm__bcg",{light:"default"===t.type}),inner:[{class:"VotingForm__bcgPreview",inner:[(0,i.default)({bcg:t,photoHeight:48}),{class:a.default.class("VotingForm__bcgTextGhost",{0:!0})},{class:a.default.class("VotingForm__bcgTextGhost",{1:!0})},{class:a.default.class("VotingForm__bcgTextGhost",{2:!0})},{class:a.default.class("VotingForm__bcgTextGhost",{3:!0})},{class:a.default.class("VotingForm__bcgTextGhost",{4:!0})},{class:a.default.class("VotingForm__bcgTextGhost",{5:!0})}]},{tag:"input",class:"VotingForm__bcgRadio",type:"radio",name:e,checked:t.checked?"checked":null,value:t.id},{class:"VotingForm__bcgControl"}]}};t.default=o},o3gn:function(e,t,n){"use strict";var a=n("d8Vu"),i=n("UuS6"),r=n("sljx");window.Stickers=a.Stickers,window.StickersAnimation=i.StickersAnimation,window.StickersSettings=r.StickersSettings},oHC7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=f(n("TYsd")),i=f(n("j80l")),r=f(n("+cqQ")),o=f(n("3Wjs")),s=n("jk6M"),l=n("fntf"),c=f(n("29dZ")),u=f(n("Y6JH")),d=n("OcsD");function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n,a,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=Stories.getStore(),this.state={authorIndex:a,storyIndex:i},this.date=t.date,this.preview=t.preview_url,this.type=t.type,this.photo_url=t.photo_url,this.video_url=t.video_url,this.first_frame=t.first_frame,this.videoSupport=!!window.HTMLVideoElement,this.views=t.views,this.answers=t.answers,this.link=t.link,this.unread=t.unread,this.raw_id=t.raw_id,this.is_expired=t.is_expired,this.isAds=t.isAds,this.isPromo=t.isPromo,this.promoCaption=t.promoCaption,this.track_code=t.track_code,this.can_comment=t.can_comment,this.can_share=t.can_share,this.can_remove=t.can_remove,this.can_report=!t.can_manage,this.can_ask=t.can_ask,this.can_ask_anonymous=t.can_ask_anonymous,this.isNewQuestions=t.isNewQuestions,this.name=n.name,this.authorId=n.id,this.showPin=n.showPin,this.isOwnerPinned=n.isOwnerPinned,this.firstName=n.firstName,this.avatar=n.photo,this.href=n.href,this.prometheus=n.verify.includes("page_top_author"),this.verified=n.verify.includes("page_verified"),this.authorIcon=this.prometheus||this.verified,this.content=null,this.paused=!0,this.stats=t.stats,this.narrative=t.narrative,this.isNarrativeSlide=this.narrative&&!this.narrative.is_cover,this.isNarrativeMetaStory=!!t.isNarrativeMetaStory,this.isMetaStory=!!t.is_groups_meta_story,this.isOpenNarrativeFromFeed=!!t.isOpenNarrativeFromFeed,this.onAutoPlay=(0,r.default)(),this.onDestroy=(0,r.default)(),this.onVideoBuffering=(0,r.default)(),this.onVideoData=(0,r.default)(),this.onVideoPlayEvent=(0,r.default)(),this.onVideoPauseEvent=(0,r.default)(),this.onVideoEndedEvent=(0,r.default)(),this.reply=t.reply_to,this.reply){var s=this.reply.list;this.reply=extend(this.reply,{onclick:'Stories.openReplies("'.concat(s,'");')})}this.duration=8e3,this.views&&(this.viewsText=this.views),this.answers&&(this.answersText=this.answers.count),this.bookmark_add_hash=t.bookmark_add_hash,this.is_bookmarked=t.is_bookmarked,this.clickable_stickers=t.clickable_stickers,this.stickers=[],this.narrative&&(this.bookmark_add_hash=this.narrative.bookmark_hash,this.is_bookmarked=this.narrative.is_bookmarked),this.StoryMenu=new o.default(extend(t,{can_report:this.can_report,can_bookmark:!!this.bookmark_add_hash,is_bookmarked:this.is_bookmarked})),this.needMenu=this.StoryMenu.needMenu(),this.storyMenuHTML=this.StoryMenu.render()}var t,n,f;return t=e,(n=[{key:"update",value:function(e){var t=Stories.getCurrentStoryIndex(),n=Stories.getCurrentAuthorIndex();this.state.authorIndex===n&&this.state.storyIndex===t?(this.loadContent(e),Stories.setHistory(this.raw_id)):(this.destroy(),val(e,""))}},{key:"getDuration",value:function(){return this.duration}},{key:"getPreview",value:function(){return this.preview}},{key:"hasLink",value:function(){return!!this.link}},{key:"getLinkUrl",value:function(){var e=this.link.url,t=Stories.getFrom(!1);return i.default.make(e,{from:t})}},{key:"loadContent",value:function(e){var t=window.lang;if(this.is_expired){Stories.hideLoading();var n={class:"Story__content_expired",inner:a.default.wrap(t.mobile_stories_error_expired)};val(e,a.default.html(n)),Stories.restoreAudio()}else if("photo"===this.type){this.isNarrativeMetaStory||this.isMetaStory||Stories.showLoading(),this.img=new Image,this.onLoadImgBind=this.onLoadImg.bind(this),this.onLoadStory=this.onLoadStory.bind(this),addEvent(this.img,"load",this.onLoadImgBind),addEvent(this.img,"load",this.onLoadStory),this.img.src=this.photo_url;var i={style:"background-image: url(".concat(this.photo_url,")"),class:"Story__content_image"};this.narrative&&this.narrative.is_cover?val(e,a.default.html(this.renderNarrativeCover())):this.isNarrativeMetaStory?(val(e,""),e&&e.parentNode.insertAdjacentHTML("beforeend",a.default.html(this.renderNarrativeMetaStory())),addEvent(geByClass1("MetaStory__recommendations"),"scroll wheel touchmove",this.handleRecommendationsScroll.bind(this))):this.isMetaStory?(val(e,""),e&&e.parentNode.insertAdjacentHTML("beforeend",a.default.html(this.renderGroupsMetaStory())),addEvent(geByClass1("MetaStory__recommendations-inner"),"scroll touchmove",this.handleRecommendationsScroll.bind(this)),Stories.hideLoading()):val(e,a.default.html(i)),Stories.restoreAudio()}else if("video"===this.type)if(this.videoSupport&&Stories.isAutoplaySupport())Stories.showLoading(),this.video=ce("video",{src:this.video_url,className:"Story__content_video"}),attr(this.video,"autoplay","autoplay"),attr(this.video,"playsinline","playsinline"),attr(this.video,"webkit-playsinline","webkit-playsinline"),attr(this.video,"muted","muted"),this.onCanPlayBind=this.onCanPlay.bind(this),this.onVideoWaitingBind=this.onVideoBuffer.bind(this),this.onVideoLoadedDataBind=this.onVideoLoadedData.bind(this),this.onVideoPlayBind=this.onVideoPlay.bind(this),this.onVideoPauseBind=this.onVideoPause.bind(this),this.onVideoEndedBind=this.onVideoEnded.bind(this),this.onLoadStory=this.onLoadStory.bind(this),addEvent(this.video,"ended",this.onVideoEndedBind),addEvent(this.video,"play",this.onVideoPlayBind),addEvent(this.video,"pause",this.onVideoPauseBind),addEvent(this.video,"canplaythrough",this.onCanPlayBind),addEvent(this.video,"waiting",this.onVideoWaitingBind),addEvent(this.video,"loadedmetadata",this.onVideoLoadedDataBind),addEvent(this.video,"canplaythrough",this.onLoadStory),append(this.video,e),Stories.restoreAudio(),Stories.pauseAudio();else{var r=Stories.getAuthorElems()[this.state.authorIndex];this.renderError(r,e,t.mobile_stories_inline_video_error)}this.isMetaStory||this.markSeen()}},{key:"onLoadStory",value:function(){if(this.clickable_stickers){var e=geByClass1("Story",this.authorElem);e&&this.renderStickersLayer.call(this,e)}this._loadingStartTime&&(this.loadingTime=Date.now()-this._loadingStartTime,Stories._sendViewerStartTime(this.raw_id,this.loadingTime),this._loadingStartTime=0,Stories.sendAnalyticsEvent("view_story",{preloading_duration:this.loadingTime}))}},{key:"markSeen",value:function(){var e=this.raw_id;this.track_code&&(e+="_"+this.track_code),this.store.readedStories[e]=!0,this.store.authors[this.state.authorIndex].items[this.state.storyIndex].unread=!1}},{key:"pause",value:function(){this.paused||(this.paused=!0,this.video&&this.video.pause())}},{key:"play",value:function(){this.paused&&(this.paused=!1,this.video&&this.video.play())}},{key:"onVideoEnded",value:function(){this.onVideoEndedEvent()}},{key:"onVideoPlay",value:function(){this.onVideoPlayEvent()}},{key:"onVideoPause",value:function(){this.onVideoPauseEvent()}},{key:"onLoadImg",value:function(){Stories.hideLoading(),this.onVideoData({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex})}},{key:"onVideoBuffer",value:function(){this.onVideoBuffering()}},{key:"onVideoLoadedData",value:function(){0===this.video.duration?this.duration=16e3:this.duration=1e3*this.video.duration+100,this.onVideoData({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex})}},{key:"onCanPlay",value:function(){Stories.hideLoading(),this.onAutoPlay({paused:this.paused,authorIndex:this.state.authorIndex,storyIndex:this.state.storyIndex}),this.store.isStopped&&this.video.pause()}},{key:"getType",value:function(){return this.type}},{key:"getVideoState",value:function(){return this.video?this.video.readyState:0}},{key:"getVideo",value:function(){if(this.video)return this.video}},{key:"renderError",value:function(e,t,n){var i=this,r={class:"Story__content_expired",inner:a.default.wrap(n)};val(t,a.default.html(r)),Stories.hideLoading(),this.type="broken",addClass(e,l.ERROR_CLASS),requestAnimationFrame(function(){i.onVideoData({paused:i.paused,authorIndex:i.state.authorIndex,storyIndex:i.state.storyIndex})})}},{key:"hasSticker",value:function(e){var t=(this.clickable_stickers||{}).stickers;return!(!t||!isArray(t))&&t.some(function(t){return t.type===e})}},{key:"render",value:function(){var e,t,n=window,i=n.lang,r=n.winToUtf;addEvent(window,"resize",this._onResizeHandle.bind(this));var o=s.isTouch?"ontouchstart":"onmousedown",c=s.isTouch?"ontouchend":"onmouseup";this._onLoadingStart();var u=this.hasSticker(l.StickerTypes.storyReply);return a.default.html({class:"Story",inner:[{class:"Story__header",inner:[this.reply&&!u?{class:"Story__reply",inner:this.reply.is_deleted||this.reply.is_private||this.reply.is_expired?{class:"Story__replyDeleted",inner:{class:"Story__replyDeletedContainer",inner:[{class:Bem.class("Story__icon",{deleted:this.reply.is_deleted,private:this.reply.is_private||this.reply.is_expired})},{class:"Story__replyDeletedTitle",inner:this.reply.is_deleted?i.mobile_stories_reply_deleted_title:this.reply.is_expired?i.mobile_stories_reply_expired_title:i.mobile_stories_reply_private_title}]}}:{class:"Story__replyPreview",onclick:this.reply.onclick,style:"background-image: url(".concat(this.reply.photo_url,")"),inner:{class:"Story__replyTitle",inner:r(this.reply.name)}}}:null,{class:"Story__table",inner:[this.isMetaStory?{tag:"div",onclick:"Stories.openGroupsSettings();",class:"Story__settings"}:{class:"Story__cell Story__cell_header",inner:[{class:"Story__table Story__link al_empty",href:this.href,onclick:"return Stories.clickAuthor();","data-skiponclick":1,inner:[this.isNarrativeSlide?null:{class:"Story__cell Story__cell_avatar",inner:{class:"Story__avatar",src:this.avatar,tag:"img"}},{class:"Story__cell Story__cell_title",inner:[{class:"Story__title",inner:[{class:"Story__name",inner:this.isNarrativeSlide?r(this.narrative.title):r(this.name)},this.authorIcon?{class:"Story__verified",inner:{class:Bem.class("Story__icon",{verified:this.verified,prometheus:this.prometheus})}}:null]},this.isNarrativeSlide?{class:"Story__date",inner:"".concat(this.name," · ").concat(i.global_type_narrative)}:{class:"Story__date",inner:this.isPromo?this.promoCaption:this.isAds?i.mobile_stories_is_promo_title:this.date}]}]}]},!this.isMetaStory&&this.authorId<0&&this.showPin?{class:"Story__cell",inner:{tag:"span",onclick:'Stories.togglePin(this, "'.concat(this.authorId,'")'),class:Bem.class("Story__pinBtn",{unpin:this.isOwnerPinned},"--"),inner:[{tag:"div",class:"StoriesFeatureTooltip StoriesFeatureTooltip--pin",inner:[i.mobile_stories_groups_tooltip,{tag:"span",class:"StoriesFeatureTooltip__arrow"}]}]}}:null,this.isMetaStory?{class:"Story__cell Story__gridTitle Story__gridTitle--hide",inner:i.mobile_stories_groups_grid_title}:null,{class:"Story__cell"+(this.isMetaStory?"":" Story__cell_close"),onclick:"return Stories.clickClose();",inner:{class:"Story__close"+(this.isMetaStory?" Story__close--grid":""),inner:{class:"Story__icon Story__icon_close"}}}]}]},{class:"Story__footer",inner:this.isNarrativeMetaStory||this.isMetaStory||this.is_expired?null:{class:"Story__table",inner:[this.isNarrativeSlide?null:{class:Bem.class("Story__cell",{empty:!!this.link&&!this.answers&&!this.views,hidden:!this.answers&&!this.views&&!this.link,stats:!0}),inner:this.answers||this.views?{class:Bem.class("Story__stats",{new_questions:this.isNewQuestions}),inner:[this.answers?{class:"Story__replies Story__cell",onclick:'Stories.showViews("'.concat(this.raw_id,'")'),inner:[{class:"Story__cell",inner:{class:"Story__icon Story__icon_replies Story__repliesIcon"}},{class:"Story__cell Story__repliesText",inner:this.link?this.answers.count:this.answersText}]}:null,this.views?{class:"Story__views Story__cell",onclick:'Stories.showViews("'.concat(this.raw_id,'")'),inner:[{class:"Story__cell",inner:{class:"Story__icon Story__icon_views Story__viewsIcon"}},{class:"Story__cell Story__viewsText",inner:this.link?this.views:this.viewsText}]}:null]}:null},this.link&&this.link.text?{class:"Story__cell Story__cell_moreLink",inner:{class:"Story__moreLink",inner:[{class:"Story__moreLinkText",inner:r(this.link.text)},{class:"Story__icon Story__icon_topArrow"}],href:this.getLinkUrl(),onclick:"Stories.openCustomButton(event, this); return;","data-skiponclick":1}}:this.can_comment?{class:"Story__cell Story__cell_comment",inner:{class:"Story__commentButton",inner:{class:"Story__commentButtonText",inner:i.mobile_stories_comment_placeholder},onclick:"Stories.showComment();"}}:null,this.can_share?{class:"Story__cell Story__cell_share",inner:{class:"Story__share",onclick:'Stories.share("'.concat(this.narrative?this.narrative.raw_id:this.raw_id,'", ').concat(!!this.narrative,");"),inner:{class:"Story__icon Story__icon_share","data-skiponclick":1}}}:null,this.needMenu?{class:"Story__cell Story__cell_menu",inner:a.default.wrap(this.storyMenuHTML)}:null]}},this.can_comment?{class:"Story__form Story__form_comment",inner:[(e={class:"Story__formOverlay"},p(e,o,"cancelEvent(event);"),p(e,c,"cancelEvent(event);"),p(e,"ontouchmove","cancelEvent(event);"),e),{class:"Story__formPopout",ontouchmove:"cancelEvent(event);",onmousedown:"event.stopPropagation();",ontouchend:"event.stopPropagation();",inner:[{class:"Story__formHeader",inner:this.isNarrativeSlide?i.mobile_stories_comment_narrative_title:i.mobile_stories_comment_title},{class:"Story__formBody",inner:{class:"Story__formTextarea Story__commentTextarea",tag:"textarea",placeholder:i.mobile_stories_comment_textarea,oninput:"Stories.onInputComment(this);"}},{class:"Story__formFooter",inner:[{class:"Story__formSend Story__commentSend",onclick:"Stories.sendComment();",inner:i.mobile_stories_comment_ok},{class:"Story__formCancel",inner:i.mobile_stories_comment_cancel,onclick:"Stories.hideComment();"}]}]}]}:null,this.can_ask?this.renderAskForm():null,(t={class:"Story__overlay"},p(t,o,"cancelEvent(event);"),p(t,c,"cancelEvent(event); Stories.hideMenu();"),p(t,"ontouchmove","cancelEvent(event);"),t),this.clickable_stickers?{class:"Story__stickers"}:null,{class:"Story__body",style:"background-image: url(".concat(this.preview,")")}]})}},{key:"renderAskForm",value:function(){var e,t=window.lang,n=s.isTouch?"ontouchstart":"onmousedown",a=s.isTouch?"ontouchend":"onmouseup",i=(t.mobile_stories_ask_question_anonymous_info||"").replace("{name}",this.firstName);return{class:"Story__form Story__form_question",onClick:"Stories.toggleQuestionTooltip(event, true);",inner:[(e={class:"Story__formOverlay"},p(e,n,"cancelEvent(event);"),p(e,a,"Stories.toggleQuestionTooltip(event, true);"),p(e,"ontouchmove","cancelEvent(event);"),e),{class:"Story__formPopout",ontouchmove:"cancelEvent(event);",onmousedown:"event.stopPropagation();",ontouchend:"event.stopPropagation();",inner:[{class:"Story__formHeader",inner:[this.can_ask_anonymous?{class:"Story__formHeaderInner",inner:[{tag:"button",class:"Btn Btn_theme_none Story__formHeaderBtn",inner:t.mobile_stories_ask_question_own_name,onclick:"Stories.changeAskAnonymous(event);","data-anonymous":0},{class:"QuestionSupport Icon Icon_menu_support",onclick:"Stories.toggleQuestionTooltip(event);",inner:{class:"QuestionSupport__tooltip",inner:i}}]}:{inner:t.mobile_stories_ask_question_own_name}]},{class:"Story__formBody",inner:{class:"Story__formTextarea Story__questionTextarea",tag:"textarea",placeholder:t.mobile_stories_ask_question_placeholder,oninput:"Stories.onInputQuestion(this);",maxlength:80}},{class:"Story__formFooter",inner:[(0,c.default)({class:"Story__questionSend",theme:"regular",inner:t.mobile_stories_ask_question_ok,on_click:["Stories.sendQuestion"],disabled:!0}),(0,c.default)({class:"Story__questionSend",theme:"link",inner:t.mobile_stories_ask_question_cancel,on_click:["Stories.hideAskQuestion"]})]}]}]}}},{key:"_getStickerStyle",value:function(e,t){var n=this.clickable_stickers,a=n.original_width,i=n.original_height,r=e.top,o=e.left,s=e.width,l=e.height,c=e.rotate,u=h(getSize(t),2),d=u[0],f=u[1],p=d,A=f;return f/d>1.77?p=a*f/i:A=i*d/a,"\n      top: ".concat(r*A-(A-f)/2,"px;\n      left: ").concat(o*p-(p-d)/2,"px;\n      width: ").concat(s*p,"px;\n      height: ").concat(l*A,"px;\n      transform: rotate(").concat(c,"deg);\n    ")}},{key:"renderStickersLayer",value:function(e){var t=this,n=geByClass1("Story__stickers",e),i=(isObject(this.clickable_stickers)?this.clickable_stickers:{}).stickers;n&&(n.innerHTML=""),i.forEach(function(i){var r,o=i.type,c=i.style,u=void 0===c?"":c;if([l.StickerTypes.hashtag,l.StickerTypes.mention,l.StickerTypes.question,l.StickerTypes.place,l.StickerTypes.music,l.StickerTypes.storyReply,l.StickerTypes.owner,l.StickerTypes.link,l.StickerTypes.marketItem].includes(o)){var f=s.isTouch?"ontouchstart":"onmousedown",h=s.isTouch?"ontouchend":"onmouseup",A=a.default.elem((p(r={class:"Story__sticker"},f,"Stories.onTouchStart(event);"),p(r,h,"Stories.onTouchEnd(event);"),p(r,"ontouchcancel","Stories.onTouchEnd(event);"),p(r,"style","".concat(t._getStickerStyle(i,e))),r));switch((0,d.domData)(A,"type",o),(0,d.domData)(A,"style",u),o){case l.StickerTypes.hashtag:(0,d.domData)(A,"hashtag",i.hashtag);break;case l.StickerTypes.mention:(0,d.domData)(A,"mention",i.mention);break;case l.StickerTypes.question:(0,d.domData)(A,"question",i.question);break;case l.StickerTypes.place:if(t.store.list==="place"+i.placeId)return;(0,d.domData)(A,"place_id",i.placeId);break;case l.StickerTypes.music:var m=Stories.getCurrentStory(),_=i.audioId,v=i.audioData,g=i.audioRestriction;if(g){var y=t.getVideo();if(y&&m.needMute){var b=Stories.getAuthorElems()[t.state.authorIndex];removeClass(b,l.VIDEO_MUTED_CLASS),y.muted=!0}n.appendChild(a.default.elem({class:"StoryRestriction",inner:{class:"StoryRestriction__inner",inner:[{class:"StoryRestriction__title",inner:g.title},g.buttonUrl?{class:"StoryRestriction__link",href:g.buttonUrl,inner:g.buttonText}:null]}})),(0,d.domData)(A,"disabled",1)}addClass(A,"audio_item"),addClass(A,"audio_item_".concat(_)),(0,d.domData)(A,"id",_),(0,d.domData)(A,"audio",v);try{(0,d.domData)(A,"track-code",JSON.parse(v).track_code)}catch(e){}A.setAttribute("id","audio".concat(_));break;case l.StickerTypes.storyReply:(0,d.domData)(A,"owner-id",i.ownerId),(0,d.domData)(A,"story-id",i.storyId),(0,d.domData)(A,"link",i.link);break;case l.StickerTypes.owner:(0,d.domData)(A,"owner-id",i.ownerId),(0,d.domData)(A,"link",i.link);break;case l.StickerTypes.link:(0,d.domData)(A,"link",i.link),(0,d.domData)(A,"tooltip-text",i.tooltipText);break;case l.StickerTypes.marketItem:(0,d.domData)(A,"photoUrl",i.photoUrl),(0,d.domData)(A,"link",i.link),i.isRestricted&&(0,d.domData)(A,"isRestricted","isRestricted")}n.appendChild(A),t.stickers.push(A)}})}},{key:"_onResizeHandle",value:function(){var e=this,t=geByClass1("Story",this.authorElem),n=(isObject(this.clickable_stickers)?this.clickable_stickers:{}).stickers;isArray(n)&&n.forEach(function(n,a){e.stickers[a]&&setStyle(e.stickers[a],e._getStickerStyle(n,t))})}},{key:"_createStickerLink",value:function(e){var t=intval((0,d.domData)(e,"type")),n=intval((0,d.domData)(e,"disabled"));if(t&&!n){var i,r,o,s="a",c=!0,f=function(){},h={type:t,style:(0,d.domData)(e,"style")};switch(t){case l.StickerTypes.hashtag:var p=(0,d.domData)(e,"hashtag")||"",A=p.replace("#","%23");i="/feed?section=search&q=".concat(A),r=lang.mobile_stories_show_hashtag_link,o="search",h.text=p;break;case l.StickerTypes.mention:var m=((0,d.domData)(e,"mention")||"").slice(1,-1).split("|");i="/".concat(m[0]),r=m[0].startsWith("id")?lang.mobile_stories_go_to_profile:lang.mobile_stories_go_to_group,o="profile";break;case l.StickerTypes.place:var _=(0,d.domData)(e,"place_id"),v=Stories.getFrom();i="/place"+_,r=lang.mobile_stories_go_to_place,this.store.list.includes("place")?c=!0:(i+="?from="+v,f=function(){s="div",c=!1,Stories._hideTooltips(!0),Stories.showLoading(),nav.go(i)}),o="place";break;case l.StickerTypes.music:s="div",r=lang.mobile_stories_music_more,f=function(){var t=(0,d.domData)(e,"id"),n=(0,d.domData)(e,"audio");Stories.openMusicStickerActions(t,n)};break;case l.StickerTypes.storyReply:case l.StickerTypes.owner:var g=this.reply,y=g.is_expired,b=g.list;t===l.StickerTypes.owner||y?(r=(0,d.domData)(e,"owner-id")>0?lang.mobile_stories_go_to_profile:lang.mobile_stories_go_to_group,i=(0,d.domData)(e,"link"),o="profile"):(s="div",r=lang.mobile_stories_go_to_story,f=function(){Stories.openReplies(b)});break;case l.StickerTypes.link:r=(0,d.domData)(e,"tooltip-text"),i=(0,d.domData)(e,"link");break;case l.StickerTypes.marketItem:var w=(0,d.domData)(e,"photoUrl"),E=!!(0,d.domData)(e,"isRestricted");E&&(f=function(e){e.preventDefault(),window.AlertBox(getLang("mobile_stories_market_access_error_text"),getLang("mobile_stories_market_access_error_title"))}),r=a.default.html([w&&!E?{class:"Stories__marketItemThumb",tag:"img",src:w}:{class:"Stories__marketItemThumb Stories__marketItemThumb--stub",inner:(0,u.default)("market","item_stub")},{class:"Stories__marketItemText",tag:"span",inner:getLang("mobile_stories_market_item_more")}]),i=(0,d.domData)(e,"link")}return Stories._requestStickerStat("click",h),Stories.sendAnalyticsEvent("click_on_clickable_sticker"),ce(s,{href:"a"===s?i:null,target:c?"_blank":null,innerHTML:r,className:"Stories__tooltip-link",onclick:function(e){f&&f(e),o&&Stories._requestStickerStat(o,h)}})}}},{key:"_onLoadingStart",value:function(){this._loadingStartTime=new Date}},{key:"renderNarrativeCover",value:function(){var e=this.photo_url||this.first_frame,t=this.narrative.views?" · ".concat(this.narrative.views):"";return{class:"NarrativeCover",inner:[{style:"background-image: url(".concat(e,")"),class:"NarrativeCover__image",onclick:"Stories._showTooltip(event, Stories._createNarrativeTooltipLink());"},{class:"NarrativeCover__views",inner:[{tag:"span",class:"NarrativeCover__label",inner:"".concat(lang.global_type_narrative)},{tag:"span",inner:"".concat(t)}]},{class:"NarrativeCover__title",innerHTML:"".concat(this.narrative.title)},{class:"NarrativeCover__author",inner:"".concat(this.narrative.owner_name)}]}}},{key:"renderGroupsMetaStory",value:function(){var e="groups";window.store.stories[e]||(window.store.stories[e]=Stories._forceSetStore(this.raw_id+"/"+e,e,window.store.storiesLists[e]));var t=window.store.stories[e]&&window.store.stories[e].authors,n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=[];return t&&(this.coverItems=t,this.coverCount=this.coverItems?this.coverItems.length:0,this.coverRowsCount=Math.ceil(this.coverCount/3),this.scrollOffset=0,this.metaStoryGridMarginTop=40.8*n/100,this.coverItems.forEach(function(t){var n=t.items.filter(function(e){return e.unread}),i=!!n.length,r=t.items[0];i&&(r=n[0]);var o={tag:"span",class:"GridStoryPreview",style:"background-image: url(".concat(r.preview_url,")"),onclick:'Stories.openNarrative("'.concat(r.raw_id,"/").concat(e,'")'),inner:[{class:"GridStoryPreview__inner",style:"background-image: url(".concat(r.small_preview,")"),inner:[{tag:"a",href:t.author.href,attrs:{"data-author-id":t.author.id},class:"GridStoryPreview__author".concat(i?" GridStoryPreview__author--unread":""),style:"background-image: url(".concat(t.author.photo,")")},{tag:"span",class:"GridStoryPreview__title",innerHTML:t.author.name}]}]};a.push(o)})),{class:"MetaStory MetaStory--groups",inner:[{class:"MetaStory__infoWrapper",inner:[{class:"MetaStory__info",inner:[{class:"MetaStory__infoTitle",inner:lang.mobile_stories_groups_grid_title},{class:"MetaStory__infoDescription",inner:lang.mobile_stories_groups_grid_text}]}]},a.length?{class:"MetaStory__recommendations",inner:[{class:"MetaStory__recommendations-inner",inner:[{class:"MetaStory__recommendations-items",inner:a}]}]}:null]}}},{key:"renderNarrativeMetaStory",value:function(){var e=this.store.list+"_recommendations",t=window.store.stories[e]&&window.store.stories[e].authors,n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=[];return this.store.list.match(/narrative-?\d+_\d+$/)&&t&&(this.coverItems=t.map(function(e){return e.narrative_cover}),this.coverCount=this.coverItems?this.coverItems.length:0,this.coverRowsCount=Math.ceil(this.coverCount/3),this.elemOffset=0,1===this.coverRowsCount?this.elemOffset=26.4:this.coverRowsCount>1&&(this.elemOffset=26.4*1.5),this.scrollOffset=n/100*this.elemOffset+53,this.coverItems.forEach(function(n){var i={tag:"span",class:"GridStoryPreview",style:"background-image: url(".concat(n.preview_url,")"),onclick:'Stories.openNarrative("'.concat(n.raw_id,"/").concat(e,'", { narrativeId: ').concat(n.narrative.id,", source: 'narrative_recommendations' })"),inner:[{class:"GridStoryPreview__inner",style:"background-image: url(".concat(n.photo_url,")"),inner:[{tag:"a",href:t[0].author.href,class:"GridStoryPreview__author",style:"background-image: url(".concat(t[0].author.photo,")")},{tag:"span",class:"GridStoryPreview__title",innerHTML:n.narrative.title}]}]};a.push(i)})),{class:"MetaStory",inner:[{class:"MetaStory__buttons",style:"padding-bottom: ".concat(this.elemOffset,"vh"),inner:[{class:"MetaStory__button",onclick:"Stories.narrativeReply();",inner:[{class:"MetaStory__circle MetaStory__circle_replay"},{class:"MetaStory__text",inner:lang.mobile_narratives_repeat_bottom}]},this.isOpenNarrativeFromFeed?{class:"MetaStory__button",onclick:"Stories.narrativeGoToStories();",inner:[{class:"MetaStory__circle MetaStory__circle_back"},{class:"MetaStory__text",inner:lang.mobile_narratives_back_bottom}]}:null]},a.length?{class:"MetaStory__recommendations",inner:[{class:"MetaStory__recommendations-inner",inner:[{class:"MetaStory__recommendations-title",inner:lang.mobile_narratives_more_bottom,style:"margin-top: calc(100vh - ".concat(this.elemOffset,"vh - 70px - 53px)")},{class:"MetaStory__recommendations-items",inner:a}]}]}:null]}}},{key:"handleRecommendationsScroll",value:function(){event.stopPropagation&&event.stopPropagation(),event.stopImmediatePropagation&&event.stopImmediatePropagation();var e=geByClass1("MetaStory__recommendations"),t=geByClass1("MetaStory__recommendations-inner");if(t&&e){var n=Math.min(t.scrollTop/(this.scrollOffset/100),70)/100;setStyle(e,{backgroundColor:"rgba(0, 0, 0, ".concat(n,")")}),t.scrollTop?(addClass(e,"scroll"),Stories.pauseStory()):(Stories.playStory(),removeClass(e,"scroll")),this.isMetaStory&&(this.blockHeaderEl||(this.blockHeaderEl=geByClass1("Story__gridTitle")),t.scrollTop>this.metaStoryGridMarginTop?removeClass(this.blockHeaderEl,"Story__gridTitle--hide"):addClass(this.blockHeaderEl,"Story__gridTitle--hide"))}}},{key:"pauseAudio",value:function(){window.Stories.pauseAudio()}},{key:"destroy",value:function(){this.img&&removeEvent(this.video,"load",this.onLoadImgBind),this.video&&(removeEvent(this.video,"ended",this.onVideoEndedBind),removeEvent(this.video,"play",this.onVideoPlayBind),removeEvent(this.video,"pause",this.onVideoPauseBind),removeEvent(this.video,"canplaythrough",this.onCanPlayBind),removeEvent(this.video,"waiting",this.onVideoWaitingBind),removeEvent(this.video,"loadedmetadata",this.onVideoLoadedDataBind),this.video.src="",this.video.load()),this.onDestroy(),this.onAutoPlay.off(),this.onDestroy.off(),this.onVideoBuffering.off(),this.onVideoData.off(),this.onVideoPlayEvent.off(),this.onVideoPauseEvent.off(),this.onVideoEndedEvent.off(),Stories._hideTooltips()}}])&&A(t.prototype,n),f&&A(t,f),e}();t.default=m},ohv3:function(e,t,n){"use strict";n("W9Tc");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r={};function o(e){var t,n,l;o.getQueryREs=Y;var c,u,d,f,h,p,A,m,_,v,g=!1,y=[],b={},w={},E={},k={},S=!1,C=null,M=null,P=null,T=0,D=[],I=null,x=null,O=null,B=!1,L=!1,R=10,N=30,j=[],F=!0,H=!1,V=!1,U=!1,z=0,W=0,q=!1,G={},$=e&&"au_search_field"===e.field&&attr(ge(e.field),"data-newsearch");function Y(e){e=e.replace(/https?:\/\/(m\.)?vk\.com\/([^#]+#\/)?/,"");for(var t,n,a,i=L,r=[e,n=parseRusKeys(e,i)||e,a=parseLatKeys(e,i)||e,parseLat(n),parseCyr(a)],o={},s=[],l=0,c=r.length;l<c;l++)r[l]&&!o[r[l]]&&(o[r[l]]=!0,t=(t=escapeRE(r[l])).replace(/[её]/gi,"[её]").replace(/(e|yo)/gi,"(?:e|yo)"),s.push(new RegExp("(^|\\s|\\(|>)("+t+")","gi")));return s}function Q(e,n,a,i){if(clearTimeout(M),!a)return M=setTimeout(function(){Q(e,n,!0)},10),!1;var r=val(e)||"";if(C===r&&!i)return!1;var o,l="_"+r,u=w[l],d=Y(r);if(!$&&!u&&r.length>2&&w["_"+r.slice(0,-2)]){var f="_"+r.slice(0,-2);w[f]&&k[f]&&!w[f].length&&(!U||U&&!E[f])&&(k[l]=!0,u=w[l]=[],U&&(E[l]=""))}i&&(delete k[l],delete w[l],delete E[l]);var _=0;if(!u){u=[];if(s.isCachedPage)_=(geByClass1("_si_container",c)||c).childNodes.length;if(!r&&y.length)for(var v=T,g=T+Math.min(Math.max(R,_),y.length);v<g;v++)u.push([y[v]]),0;else{var S={},D=0;for(v=0,g=y.length;v<g;v++){var I=y[v];if(b[I]){if(S[I]=!0,(o=X(d,b[I][0]))&&(u.push([I,o]),++D>=N))break;0}}if(D<N)for(var I in b)if(!S[I]&&(o=X(d,b[I][0]))){if(u.push([I,o]),++D>=N)break;0}}k[l]=k[l]||!r&&y.length||u.length>2*R,k[l]=k[l]||U&&u.length>R}return(k[l]||!F&&!U)&&!i||p||function e(n,a,i){var r=$?800:200;clearTimeout(P);if(!i)return P=setTimeout(function(){e(n,a,!0)},r),!1;ajax.post(t,{_ajax:1,q:a},{onDone:function(e,t,i){A&&A.apply(null,arguments);for(var r,o="_"+a,s=w[o]||[],l={},c=Y(a),u=0;u<s.length;u++)l[s[u][0]]=!0;for(var d=0;d<t.length;d++){var f=t[d];l[f]||((r=X(c,e[f][0]))||B||!a)&&s.push([f,r])}k[o]=!0,w[o]=s,U&&(E[o]=i||""),b=extend(e,b),G._cache=b,F=!H||len(b)<H,C===a?(K(s,E[o]),onBodyScrollForce()):delete w[o],F||removeClass("input_loading",n),h&&(F=!1,H=Object.keys(b).length)},onFail:function(){delete w["_"+a],removeClass("input_loading",n)}});geByClass1("al_loading",c)||addClass("input_loading",n)}(e,r),w[l]=u,C=r,K(u,E[l]),m&&m(r),V&&!C&&(z=Math.max(R,_)),onBodyScrollForce(),!1}function X(e,t){if(!t)return!1;"string"!=typeof t&&(t=t.toString());var n=[t],a=/([№])/gi;-1!==t.search(a)&&n.push(t.replace(a,""));for(var i=0;i<n.length;i++)for(var r=0,o=e.length;r<o;r++)if(-1!==n[i].search(e[r]))return e[r];return!1}function K(e,t){var n="";if(x&&c){var r=Object.keys(j).filter(function(e){return!!j[e]}).map(function(e){return e+""});r.length&&""===C&&(e=e.filter(function(e){return!r.includes(String(e[0]))}),r.forEach(function(t){e.unshift([t,!1])}));for(var o=function(t){var r=i(e[t],2),o=r[0],s=r[1];if(!b[o])return"continue";var l=b[o].slice(1);if(s)for(var c in D){var u=D[c];l[u]&&(l[u]=l[u].replace(s,'$1<em class="found">$2</em>'))}n+=x.apply({id:o,q:C,highlight:function(e){if("string"!=typeof e)throw new Error("Highlighting expected string but got ".concat(a(e)));return e.replace(s,'$1<em class="found">$2</em>')},template:function(e,t){var n=this;return e.replace(/%(\d+)%|#(\d+)#/g,function(e,a,i){return i&&t[i-1]?n.highlight(t[i-1]):a&&t[a-1]?t[a-1]:""})}},l)},s=0;s<e.length;s++)o(s);n||k["_"+C]||!F&&!U||p||(removeClass("input_loading",u),removeClass("_si_container_loading",c),n=C?'<div class="al_loading qs_loading">&nbsp;</div>':'<div id="al_loading"></div>'),!n&&O&&(n=O(C)),val(c,I?I(n,C,V,t):n+(t||"")),f&&(C?show(f):hide(f)),!C&&alLoadingFix(),_&&_(C)}}extend(this,{go:function(e){return!u||(Q(u,e,!0,!0),u.blur(),cancelEvent(e),!1)},redraw:function(){var e="_"+C;K(w[e],E[e]),onBodyScrollForce()},clear:function(e,t){return val(u,""),t?elfocus(u):elblur(u),Q(u,e,!0),cancelEvent(e),!1},blur:function(){elblur(u)},toggleAttach:function(e,t){j[e]=t},init:function(e){if(e=e||{},c=ge(e.container)||null,u=ge(e.field)||null,d=ge(e.btn)||null,f=ge(e.clear_btn)||null,C=null,!S||t!=e.action||!e.init_once){w={},E={},k={},t=e.action||"",g=null!==e.next_from,l=e.next_from,n=e.al_action||t,y=e.top_items||[],b=e._cache||{},D=e.hl_fields||[],I=e.tpl||null,x=e.item_tpl||null,O=e.null_tpl||null,B=e.soft_filter||!1,L=e.need_invalid_keys||!1,R=e.top_len||10,H=e.load_limit||!1,A=e.onLoaded||!1,m=e.onFiltered||!1,_=e.onRendered||!1,v=e.onFocusChanged||!1,V=e.al_need||!1,T=!V&&e.init_offset||0,U=e.global_search||!1,p=e.no_search_query||!1,h=e.load_once||!1;var a=e.action+e.container;r[a]?G=r[a]:(G._cache=b,G.top_items=y,r[a]=G),s.isCachedPage&&(y=G.top_items,b=G._cache)}var i=null;t&&c&&u&&x&&(F=!0!==t&&(!H||len(b)<H),addEvent(u,"focus",function(e){e&&e.preventDefault();clearTimeout(i),v&&v.call({q:C},!0),function t(n){!n&&Q(u,e,!0),i=setTimeout(t,100)}(!0)}),addEvent(u,"keydown keypress change blur",function(e){"blur"==e.type&&(clearTimeout(i),v&&v.call({q:C},!1)),Q(u,e,"keydown"!=e.type&&"keypress"!=e.type)}),e._new||d&&!attr(d,"onclick")&&attr(d,"onclick","return qsearch.go(event);"),!V||S&&e.init_once||(z=R,W=len(b),initAutoScroll(function(){var e=(geByClass1("_si_container",c)||c).childNodes;return e[z]||e[e.length-1]},function(){var e=geByClass1("_si_container",c)||c;if(!q&&!C){if(g?!!l:z+R>W&&F)q=!0,addClass(e,"_si_container_loading"),ajax.post(n,{_ajax:1,offset:W,next_from:l},{onDone:function(n,a,i){l=i,A&&A.apply(null,arguments);var r=len(n);if(q=!1,removeClass(e,"_si_container_loading"),H||(y=y.slice(0,W).concat(a),G.top_items=y),W+=r,b=extend(n,b),G._cache=b,F=!0!==t&&(!H&&r||len(b)<H),!C){z+=R;for(var o=[],s=0,c=Math.min(z,y.length);s<c;s++)o.push([y[s]]);K(o,E._),onBodyScrollForce()}},onFail:function(){q=!1,removeClass(e,"_si_container_loading")}});else if(z<y.length){z+=R;for(var a=[],i=0,r=Math.min(z,y.length);i<r;i++)a.push([y[i]]);K(a,E._),onBodyScrollForce()}}})),!e.skip_init_filter&&Q(u,null,!0),S=!0)}}),e&&this.init(e)}var s=new o;window.QuickSearch=o,window.QuickSearchCache=r,window.qsearch=s},ok75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=function(){a||((a=new r.default({id:"mail_user",element:document,focusElement:window,triggerEvents:"mouseover mousedown keypress touchstart",idleTimeout:15e3})).on("unidle",l),a.on("unidle",s));i={},a.start()},t.stop=function(){i=null,a&&a.stop()},t.addAction=function(e,t){if(!a)return;if(!a.is_idle)return void setTimeout(t,0);i[e]=t},t.flushActions=l,t.onUnidle=void 0;var a,i,r=o(n("gF8j"));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,o(n("+cqQ")).default)();function l(){var e=i;i={},Object.keys(e).forEach(function(t){(0,e[t])()})}t.onUnidle=s},omrv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("9y81"))&&a.__esModule?a:{default:a};var r=function(e){var t=e?e.mix:"";return(0,i.default)({mix:"".concat(t," Spinner"),icon:"spinner"})};t.default=r},onYX:function(e,t,n){"use strict";var a;(a=n("+cqQ"))&&a.__esModule;var i="tabs_block",r="mhb_back",o="TopMenu_open",s="TopMenu__switcher_on",l=function(){return geByClass1(i)},c=function(){return geByClass1(r)},u=function(){return geByClass1("TopMenu__switcher")},d=function(){return geByClass1("tab_item_top")},f=!0,h=0;function p(e){stopEvent(e),preventEvent(e),h=300,f&&(toggleClass(s,u()),"touchstart"===e.type&&setTimeout(function(){nav.go(d(),null)},130))}function A(e){gpeByClass(i,e.target)||gpeByClass(r,e.target)||(stopEvent(e),preventEvent(e),removeClass(o,l()),m())}function m(){removeEvent(window,"touchstart mousedown",A)}window.TopMenu={onHeaderClick:function(e){if(!f)return;var t=l();if(stopEvent(e),preventEvent(e),hasClass(o,t))removeClass(o,t);else{var n=c(),a=d();addClass(o,t),geByClass1("_hfixed")&&setStyle(t,"max-height",window.innerHeight-70),append(t,n),addEvent(window,"touchstart mousedown",A),addEvent(a,"touchstart mousedown",p),addEvent(a,"click",function(e){stopEvent(e),preventEvent(e)}),cur.destroy.push(m),cur.destroy.push(function(){return removeEvent(a,"touchstart mousedown",p)})}}},nav.onBeforeGo(function(){f=!1,setTimeout(function(){removeClass(o,l()),h=0,f=!0},h)})},"p/K1":function(e,t,n){"use strict";var a,i=(a=n("wRgB"))&&a.__esModule?a:{default:a};window.landingsSlider=i.default},p5gW:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.PeakAlgorithm=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}var t,n,i;return t=e,(n=[{key:"push",value:function(e){this._max=Math.max(this._max,Math.abs(e))}},{key:"get",value:function(){return this._max}},{key:"clear",value:function(){this._max=0}}])&&a(t.prototype,n),i&&a(t,i),e}();t.PeakAlgorithm=i},p5n7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("sXaZ"))&&a.__esModule?a:{default:a};n("ll1Q");var r=i.default;t.default=r,window.TextInput=i.default},pBF5:function(e,t,n){"use strict";var a=n("UxAg"),i=f(n("TYsd")),r=f(n("z9sQ")),o=f(n("+cqQ")),s=n("jk6M"),l=n("6ng+"),c=n("1dTo"),u=n("jE6c"),d=n("C13D");function f(e){return e&&e.__esModule?e:{default:e}}var h=1e4,p="ad_placeholder",A="ad_mode",m=function(){if(!HTMLAudioElement)return{init:function(){},initAudio:function(){}};var e=!1,t="1"==lsGet("audio_time_left"),n=null,f={},_=!1,v=!1,g=!1,y=[],b=null,w=null,E=!1;function k(e,t){e&&cancelEvent(e);var n=audio.getCurrent(),a=gpeByClass("_audioPlaylist",t),i=n?n.fullId:null;if(!i||!geByClass1("ai_current",a)){var r=(a||ge("mcont")).$(".audio_item");i=r&&r.getAttribute("data-id")}i&&J(e,i)}function S(e){if(e){$$("#lm_player").forEach(function(e){show(e)}),$$("#lm_audio").forEach(function(t){t&&(t.querySelector(".ai_artist").innerHTML=e.performer,t.querySelector(".ai_title").innerHTML=e.title,t.querySelector(".ai_play").style.backgroundImage=e.coverUrl_p?"url(".concat(e.coverUrl_p,")"):""),audio.isAdsPlaying()&&te(e,!0)});var t=I(e.fullId);t&&each(t,function(t,n){V(n,0),U(n,0),H(n,G(0,audio.duration())),z(n,audio.volume()),addClass("ai_current",n),audio.isAdsPlaying()&&ee(e,!0)})}else $$("#lm_player").forEach(function(e){hide(e)})}function C(e){var t=e.fullId,n=e.duration;$$("#lm_audio").forEach(function(e){removeClass("ai_playing",e)});var a=I(t);a&&(each(a,function(e,t){H(t,q(n)),removeClass("ai_playing",t),removeClass("ai_current",t)}),f[t]&&delete f[t],audio.isAdsPlaying()&&ee(e,!1))}function M(e,t,n){var a=I(e),i=W(a[0]);if(a.length){var r=t/n;t<=.01&&n<=1&&(r=0),each(a,function(e,a){B||U(a,r),H(a,m.getFormatedTime(t,n))}),t>1&&(f[e]=1),T(i,audio.played())}}function P(e){var t=x(e);if(!t)return null;if(t.dataset&&t.dataset.playlistId)return t.dataset.playlistId;var n=gpeByClass("AudioPlaylistRoot",t);if(!n)return console.log("no playlist Element found"),null;var a=n.dataset.playlistId;return a||(console.log("no playlist Id found"),null)}function T(e,t){e?(t=Math.round(t)||0)&&!E&&(w={id:e.fullId,audioData:e,listenedTime:t,playlistId:P(e.fullId)},clearTimeout(n),n=setTimeout(function(){return m.playback(e.fullId)},h)):console.log("audio data not found")}function D(e,t){ajax.post("/audio",{act:"block_playlist",block_id:e},{onDone:function(e){if(e){var n=e.map(function(e){return(0,d.asObject)(e)});audio.playlist(n),t&&t(n)}}})}function I(e){return geByClass("audio_item_"+e)}function x(e){return I(e)[0]}function O(e){var t=x(e),n=gpeByClass("audios_list",t)||gpeByClass("AudioBlock",t),a=geByClass("audio_item",n),i=[],r=!1;each(a,function(t,n){var a=JSON.parse(domData(n,"audio"));if(a){var o=(0,d.asObject)(a);i.push(o),o.fullId===e&&(r=!0)}}),audio.playlist(i,{q:attr(n,"data-query")}),r&&audio.play(e)}audio.onPlay(function(e){var t=audio.getCurrent();t&&audio.playing()&&ajax.post("/audio",{act:"start_playback",audio_id:t.id,owner_id:t.ownerId,hash:t.action_hash,uuid:audio.getDeviceId()});b!==e&&b&&m.playback(b);b=e,$$("#lm_audio").forEach(function(e){addClass("ai_playing",e)});var n=I(e);if(!n)return;each(n,function(e,t){addClass("ai_playing",t),addClass("ai_current",t)}),T(t,0),y[y.length-1]!==e&&y.push(e);g?g=!1:(v=_,_=!1,m.onPlay(e))}),audio.onPause(function(e){$$("#lm_audio").forEach(function(e){removeClass("ai_playing",e)});var t=I(e);if(!t.length)return;var n=W(t[0]);each(t,function(e,t){removeClass("ai_playing",t),addClass("ai_current",t)}),T(n,audio.played()),g||m.onPause(e)}),audio.onSelect(S),audio.onDeselect(C),audio.onProgress(Z),audio.onPositionChanged(M),audio.onTimeUpdate(function(e){m.onProgress(e)}),audio.onVolumeChanged(function(e,t){var n=geBySel('.audio_item[data-id="'+e+'"]');n&&(each(n,function(e,n){z(n,t)}),m.onVolume(e,t))}),audio.onEnded(function(e){var t=geBySel('.audio_item[data-id="'+e+'"]');t&&(each(t,function(e,t){U(t,1)}),_=!0,m.onEnded(e))}),audio.onAdStart(function(e){ee(e,!0),te(e,!0)}),audio.onAdComplete(function(e){ee(e,!1),te(e,!1),M(e.id,0,0)}),audio.onNotFoundError(O),audio.onEmptyPlaylistError(O);var B=null,L=null,R=!1,N=!1;function j(e){if(B){var t=gpeByClass("audio_item",B),n=F(B,e);e&&cancelEvent(e);var a=I(attr(t,"data-id"));each(a,function(e,t){R&&U(t,n),N&&(z(t,n),audio.volume(n))}),L=n}}function F(e,t){var n=gpeByClass("Slider__scroll",e),a=hasClass("touch",window.bodyNode)?10:8,i=(t.pageX||t.touches&&t.touches[0]&&t.touches[0].pageX||0)-(n?function(e){return e.getBoundingClientRect().left}(e):getX(e))-a/2,r=e.offsetWidth-a;return r?Math.max(0,Math.min(i/r,1)):0}function H(e,t){if(e){var n=geByClass1("ai_dur",e);val(n,t)}}function V(e,t){if(e){var n=geByClass1("aic_progress_wrap",e),a=geByClass1("aic_load_line",n);a&&(a.style.width=100*Math.max(0,Math.min(t,1))+"%")}}function U(e,t){if(e){var n=geByClass1("aic_progress_wrap",e),a=geByClass1("aic_progress_line",n);a&&(a.style.width=100*t+"%")}}function z(e,t){if(e){var n=geByClass1("aic_volume_wrap",e),a=geByClass1("aic_progress_line",n);a&&(a.style.width=100*t+"%")}}function W(e){if(!(e=ge(e))||!e.dataset.audio)return null;var t=null;try{t=JSON.parse(e.dataset.audio)}catch(e){return null}return(0,d.asObject)(t)}function q(e){var t,n,a,i=e<0;return t=(n=(e=Math.round(i?-e:e))%60)<10?"0"+n:n,t=(a=(e=Math.floor(e/60))%60)+":"+t,(e=Math.floor(e/60))>0&&(a<10&&(t="0"+t),t=e+":"+t),i&&(t="-"+t),t}function G(e,n){return q(t&&n?e-n:e)}function $(e){var t=window.cur;t.deletedAudios||(t.deletedAudios={}),t.deletedAudios[e]=!0}function Y(e){var t=window.cur;t.deletedAudios&&delete t.deletedAudios[e]}function Q(e,t){t?function(e){var t=window.cur;t.addedAudios||(t.addedAudios={}),t.addedAudios[e]=!0}(e):function(e){var t=window.cur;t.addedAudios&&delete t.addedAudios[e]}(e);var n=geBySel('.audio_item[data-id="'+e+'"]');each(n,function(e,n){toggleClass("ai_added",n,t),val(geByClass1("ai_add",n),t?lang.global_delete_audio:lang.global_add_to_audio)});var a=geBySel1('body > [id="ai_menu_'+e+'"]'),i=geByClass1("ai_add",a);val(i,t?lang.global_delete_audio:lang.global_add_to_audio),ActionMenu.update()}function X(e,t){t?$(e):Y(e);var n=geBySel('.audio_item[data-id="'+e+'"]');each(n,function(e,n){toggleClass("ai_deleted",n,t),val(geByClass1("ai_del",n),t?lang.global_add_to_audio:lang.global_delete_audio)});var a=geBySel1('body > [id="ai_menu_'+e+'"]'),i=geByClass1("ai_del",a);val(i,t?lang.global_add_to_audio:lang.global_delete_audio),ActionMenu.update()}function K(){var e=window.audio.getCurrentId(),t=I(e),n=[],a=window.audio.playing();a&&e&&t.length&&t.forEach(function(e){var t=gpeByClass("audios_list",e)||gpeByClass("mcont",e);n.push(t)}),each(geByClass("_AudioPlayStatus"),function(e,t){removeClass("playing",t)}),a&&n.forEach(function(t){geByClass("_AudioPlayStatus",t).forEach(function(t){addClass("playing",t),t.dataset.id=e})})}function J(e,t,n){if(window.isArticleWebView)return Article.audioPlay(audio.getCurrentId(),audio.playlist()),cancelEvent(e),!1;var a=window.lang;if(audio.support){var i=x(t);if(i&&hasClass("ai_deleted",i)&&!hasClass("ai_current",i))return!0;n&&t!=audio.getCurrentId()?O(t):audio.operate(t),K()}else alert(a.mobile_audio_player_not_support);return cancelEvent(e),!1}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=I(e);audio.playing()?(each(a,function(e,t){addClass("ai_playing",t)}),$$("#lm_audio").forEach(function(e){addClass("ai_playing",e)})):(each(a,function(e,t){removeClass("ai_playing",t)}),$$("#lm_audio").forEach(function(e){removeClass("ai_playing",e)})),null!==t&&null!==n&&each(a,function(e,a){V(a,t/n),addClass("ai_current",a)})}function ee(e,t){var n=x(e.fullId);toggleClass(A,n,t);var a=geByClass1("ai_title",n);val(a,t?getLang("global_audio_ad"):e.title),toggleClass(p,a,t)}function te(e,t){geBySel(".audio_item.al_player.ai_playing").forEach(function(n){if(n){var a=geByClass1("ai_title",n);val(a,t?getLang("global_audio_ad"):e.title),toggleClass(p,a,t),toggleClass(A,n,t),toggle(geByClass1("ai_artist"),!t)}})}return addEvent(document,s.isTouch?"touchend touchcancel":"mouseup",function(e){if(!B)return;var t=gpeByClass("audio_item",B),n=F(B,e)||L;e&&cancelEvent(e);var a=geBySel('.audio_item[data-id="'+attr(t,"data-id")+'"]');each(a,function(e,a){R&&(U(a,n),audio.setPosition(n,!0)),N&&z(t,n)}),R&&(g=audio.playing(),m.onSeek(n));B=L=null,R=N=!1}),addEvent(document,s.isTouch?"touchmove":"mousemove",j),{init:function(t){e||(e=!0,window.playerAdapter=new c.MvkPlayerAdapter(audio),new l.AudioStats(window.playerAdapter),onDOMReady(function(){window.nav&&window.audio&&window.audioplayer&&"#player"==nav.hash&&audio.playlist().length&&m.openPlayer(ge("lm_audio"),!0)}))},initAudio:function(){each(geByClass("ai_current"),function(e,t){C(t=W(t))});var e=audio.loaded(),t=audio.getPosition(),n=audio.duration();Z(audio.getCurrentId(),e,n),S(audio.getCurrent()),M(audio.getCurrentId(),t,n),setTimeout(function(){K()},1)},getDOMFromAudio:function(e,t,n){if(!Object.keys(e).length)return'<div class="audio_item audio_item_disabled"></div>';var a=(0,d.asObject)(e);if(!a)return"";var o=(0,u.htsc)("".concat(a.ownerId,"_").concat(a.id)),l=(0,u.htsc)(a.url||""),c=a.duration,f=a.performer,h=a.title,p=a.subTitle,A=a.isExplicit,m=a.canAdd,_=a.canDelete,v=h?'<span class="divider"> &ndash; </span>':"",g=s.isTouch?"ontouchstart":"onmousedown",y=["audio_item_".concat(o)],b="",w=a.coverUrl_p||a.coverUrl_s,E=w?"background-image: url(".concat(w,")"):"",k=a.isClaimed,S=r.default.class("audio_item"),C=(0,u.escapeAttr)(JSON.stringify(e));if(k)return'<div class="audio_item audio_item_disabled"></div>';if(function(e){var t=window.cur;return!!t.deletedAudios&&t.deletedAudios[e]}(o)){if(n)return"";y.push(" ai_deleted")}(function(e){var t=window.cur;return!!t.addedAudios&&t.addedAudios[e]})(o)&&y.push("ai_added"),vk.id&&(_?(y.push("ai_has_btn"),b='<div class="ai_del wia_item" onclick="audioplayer.del(\''.concat(o,"', event);\">").concat(lang.global_delete_audio,"</div>")):m&&(y.push("ai_has_btn"),b='<div class="ai_add wia_item" onclick="audioplayer.add(\''.concat(o,"', false, event);\">").concat(lang.global_add_to_audio,"</div>"))),o===audio.getCurrentId()&&(audio.playing()&&y.push("ai_playing"),y.push("ai_current")),A&&y.push("audio_item_explicit");var M="";b?M='<div class="ai_menu_wrap"><i class="i_pointer"></i><a href="#" class="ai_menu_toggle_button" onclick="ActionMenu.toggleMenu(event, this);"></a>\n  <div class="ai_menu wi_actions" id="ai_menu_'.concat(o,'">').concat(b,"</div>\n</div>"):y.push("ai_no_menu");var P=p?" "+i.default.html({tag:"span",class:"ai_subtitle",inner:p}):"";return'<div\n      data-id="'.concat(o,'"\n      data-audio="').concat(C,'"\n      class="').concat(y.join(" ")," ").concat(S,'"\n      onclick="audioplayer.playPause(event, \'').concat(o,"' ").concat(t?", true":"",');">\n  <div class="ai_info">\n    <div class="ai_play" style="').concat(E,'">\n      <i class="i_play"></i>\n    </div>\n    ').concat(M,'\n    <div class="ai_body">\n      <div class="ai_dur" data-dur="').concat(c,'" onclick="audioplayer.switchTimeFormat(this, event);">\n        ').concat(q(c),'\n      </div>\n      <div class="ai_label">\n        <span class="ai_title">').concat(h).concat(P,"</span>").concat(v,'<span class="ai_artist">').concat(f,'</span>\n      </div>\n      <input type="hidden" value="').concat(l,'">\n    </div>\n  </div>\n  <div class="ai_controls">\n    <table class="row_table">\n      <tr>\n        <td class="aic_progress_wrap">\n          <div class="aic_line" ').concat(g,'="audioplayer.setPosition(this, event);" onclick="cancelEvent(event);">\n            <div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div>\n            <div class="aic_ln aic_load_line" onclick="cancelEvent(event);"></div>\n            <div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);">\n              <div class="aic_ln aic_progress_line" onclick="cancelEvent(event);">\n                <div class="aic_slider" onclick="cancelEvent(event);"></div>\n              </div>\n            </div>\n          </div>\n        </td>\n        <td class="aic_volume_wrap">\n          <div class="aic_line" ').concat(g,'="audioplayer.setVolume(this, event);" onclick="cancelEvent(event);">\n            <div class="aic_ln aic_back_line" onclick="cancelEvent(event);"></div>\n            <div class="aic_ln aic_pl_wrap" onclick="cancelEvent(event);">\n              <div class="aic_ln aic_progress_line" onclick="cancelEvent(event);">\n                <div class="aic_slider" onclick="cancelEvent(event);"></div>\n              </div>\n            </div>\n          </div>\n        </td>\n      </tr>\n    </table>\n  </div>\n</div>')},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,a=x(e);if(!hasClass("ai_ajax",a)){var i=(0,d.asObject)(JSON.parse(a.dataset.audio)),r=hasClass("ai_added",a);Q(e,!r),addClass("ai_ajax",a),m.onAdd(),ajax.post("/audio",{_ajax:1,act:r?"delete":"add",audio:r?attr(a,"data-deleteid"):e,hash:r?attr(a,"data-delete-hash"):i.addHash,access_key:t,track_code:i.trackCode},{redirectToLoginPage:!0,onDone:function(t,n){removeClass("ai_ajax",a),t?(attr(a,"data-deleteid",t),attr(a,"data-delete-hash",n)):Q(e,r)},onFail:function(){removeClass("ai_ajax",a),Q(e,r);var n=Array.prototype.slice.call(arguments),o=n.shift();switch(o){case 2:nav.go("/audio?act=add&audio=".concat(e,"&hash=").concat(r?i.deleteHash:i.addHash,"&access_key=").concat(t))}}}),n&&cancelEvent(n)}},del:function(e,t){var n=x(e);if(n){var a=hasClass("ai_deleted",n);X(e,!a);var i=(0,d.asObject)(JSON.parse(n.dataset.audio));a?Y(e):$(e),m.onDel(),ajax.post("/audio",{_ajax:1,act:a?"restore":"delete",audio:e,playlist_id:P(e),hash:a?i.restoreHash:i.deleteHash},{redirectToLoginPage:!0,onDone:function(t){t||X(e,a)},onFail:function(){X(e,a);var t=Array.prototype.slice.call(arguments),n=t.shift();switch(n){case 2:nav.go("/audio?act=".concat(a?"restore":"delete","&audio=").concat(e,"&hash=").concat(a?i.restoreHash:i.deleteHash))}}}),t&&cancelEvent(t)}},playPause:J,getFormatedTime:G,switchTimeFormat:function(e,n){var a=gpeByClass("audio_item",e);return!(hasClass("ai_current",a)&&!hasClass("ai_select",a))||(t=!t,lsSet("audio_time_left",t?"1":"0"),H(x(audio.getCurrentId()),G(audio.getPosition(),audio.duration())),n&&cancelEvent(n),!1)},setPosition:function(e,t){B||audio.isAdsPlaying()||(B=e,R=!0,j(t))},setVolume:function(e,t){B||(B=e,N=!0,j(t))},playback:function(e){if(w&&w.listenedTime&&w.audioData){clearTimeout(n);var t=w.audioData,a={_ajax:1,act:"playback",audio:e,hash:t.urlHash,state:document.hidden?"background":"app",listened:w.listenedTime,end_stream_reason:"unknown",playlist_id:w.playlistId,from:nav.getQuery("from"),track_code:t.trackCode},i=y.lastIndexOf(e);w=null,v&&(a.auto=1),i&&(a.prev=y[i-1]),ajax.post("/audio",a)}},openPlayer:function(e,t){var n=window.audio,a=nav.path,i=n.getCurrentPlaylistId(),r=nav.params;i&&!r.includes("playlist_id")&&(r=(r?r+"&":"")+"playlist_id=".concat(i));var o=a+(r?"?":"")+r+"#player";return nav.al_go(o,null,{local:!0,target:e,nav:{push:o,path:a,params:r,hash:"#player"},no_push:t})},getCurrentElem:function(){return(0,a.$)(".ai_current")},playFirst:k,hasArticleWebViewClientAudioSupport:function(){return window.clientWebviewAudioSupport},getPlaybackQueue:function(){return y},isAutoPlayed:function(){return v},useNewStats:function(){return E},playBlock:function(e,t,n){n.dataset.id?k(t,n):D(e,function(e){if(e.length){var t=e[0].fullId;audio.select(t),audio.play(t),n.classList.add("playing"),n.dataset.id=t}})},playShuffledBlock:function(e,t){e.preventDefault(),browser.safari&&window.audio.playNothing(),D(t.dataset.blockId,function(e){if(e.length){var t=e[0].fullId;window.audio.play(t)}})},getPlaylistByAudioId:P,onAdd:(0,o.default)(),onDel:(0,o.default)(),onPlay:(0,o.default)(),onPause:(0,o.default)(),onProgress:(0,o.default)(),onVolume:(0,o.default)(),onSeek:(0,o.default)(),onPlaylistChanged:(0,o.default)(),onEnded:(0,o.default)()}}();window.audioplayer=m},pOpT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("Go98"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.BookmarksFilterListItem=i.default},pQDp:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageProxyURL=function(e,t){var n=[];return i(t,function(e,t){switch(e){case"size":a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((""+t).split("x"),2),i=a[0],r=a[1],i=i?o(i):"",r=r?o(r):"",t="".concat(i,"x").concat(r)}var a,i,r;t&&n.push("".concat(e,"=").concat(t))}),n.length?e+"&"+n.join("&"):e};var a=window,i=a.each,r=a.intval;function o(e){return 0<e&&e<1?Math.round(100*e)/100:r(e)}},pWCx:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("HV9n"))&&a.__esModule?a:{default:a}).default;t.default=i},pYST:function(e,t,n){"use strict";var a,i,r=n("UxAg"),o=n("OcsD"),s=(a=n("rUE2"))&&a.__esModule?a:{default:a};function l(){var e=(0,r.$)(".messenger__dialog");i=null,e.innerHTML=""}Object.assign(s.default,{open:function(e){i={},"function"==typeof e.onConfirm&&(i.onConfirm=e.onConfirm,e.onConfirm="");"function"==typeof e.onClose&&(i.onClose=e.onClose,e.onClose="");var t=(0,r.$)(".messenger__dialog"),n=(0,s.default)(e),a=(0,o.ceFromString)(n);i.onConfirm&&((0,r.$)(".mailDialog__confirmButton",a).onclick=function(e){return i.onConfirm(e,t)});i.onClose&&(0,r.$$)(".mailDialog__overlay,.mailDialog__close,.mailDialog__closeButton",a).forEach(function(e){e.onclick=function(e){return i.onClose(e,t)}});t.innerHTML="",t.appendChild(a)},close:l,_onDialogClose:l})},qHA9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isContactPeer=function(e){return e>19e8&&e<=2e9},t.isCommunityPeer=function(e){return e>-1e9&&e<0},t.isChatPeer=function(e){return e>2e9},t.isUser=function(e){return e>0&&e<=19e8},t.formatTime=f,t.wrapLinks=h,t.wrapMention=p,t.wrapCommunityUrl=function(e){var t=i.default.getQuery("community");t&&(e+="&community=".concat(t));return e},t.sendDataToMessage=function(e,t){var n,a,i=store.mail,o=i.cur,s=i.members,l=Date.now()/1e3,c=f(l,o.timeShift),m=e.message||"";"send"!==e.act&&e.id&&(n=store.mail.msgs[e.id]);u||(u=document.createElement("div"));u.textContent=m,m=u.innerHTML,u.textContent="";var _,v={};if(e.media&&0===e.media.indexOf("sticker")){v.sticker=1;var g=+e.media.replace("sticker","");g&&(_={id:g,url:Stickers.getStickerUrl(g,A()),height:d})}else for(var y,b=1;y=e["attach".concat(b,"_type")];b++)v[y]?v[y]+=1:v[y]=1;a=e.attached_messages?(e.attached_messages+"").split(";"):e.mail_edit_attach_fwd&&n?n.forwards.concat():[];var w=!!e.has_reply,E="send"===e.act?"send"+e.random_id:"edit"+e.id,k=m,S=k=(k=k.replace(/\n/g,"<br>")).replace(/(@|\*)(\S+)(?: +\(([^\n]+?)\))?/g,function(e,t,n,a){a||(a=t+n);for(var i=0,r="id",o=Object.keys(s),l=0,c=o.length;l<c;l++){var u=o[l];if(s[u]&&s[u].domain===n){i=u;break}}return"-"===i[0]&&(i=i.slice(1),r="club"),"[".concat(r).concat(i,"|").concat(a,"]")});S=p(S=h(S),!0),S=(0,r.emojiToHTML)(S);var C={id:"send"===e.act?E:e.id,sendId:E,peerId:"send"===e.act?e.to:e.peerId,authorId:o.viewerId,adminId:o.groupId?o.userId:void 0,ts:l,date:c,dateShort:c,text:S,textInput:m,body:k,isUnread:!n||n.isUnread,isOut:!0,edited:"send"!==e.act,canEdit:!1,attaches:v,forwards:w?[]:a,hasReply:w,reply:w?a[0]:void 0,pending:!t,failed:!!t,attachesLoading:!!Object.keys(v).length};o.groupId&&(C.adminName=lang.mobile_mail_you,C.adminUrl=s[o.userId].url);_&&(C.sticker=_);return C},t.getMsgSendId=function(e){return e.edited?"edit"+e.id:"send"+e.randomId},t.mailRequest=function(e,t){return new Promise(function(n,a){(0,o.ajaxRequest)(e,t,function(e){e.error?a({type:"server",code:e.code||0,message:e.message||""}):n(e.result)},function(e,t,n){var i=null,r="unknown",o=0;if(n instanceof XMLHttpRequest){var s=n;0===s.status?r="network":(r="server_status",o=s.status)}else 0===e&&null==t&&null==n?r="response_parsing":e===ajax.RESPONSE_CAPTCHA?(r="captcha",i=n):r="unknown";a({type:r,code:o,message:"",data:i})})})},t.getStickerSize=A,t.prepareKeyboard=function(e){var t=e.keyboard,n=e.authorId,a=e.msgId;if(t.buttons&&t.buttons.length){t=Object.assign(t,{author_id:n,chat_local_id:a});var i=document.createElement("div");t.buttons.forEach(function(e){e.forEach(function(e){var t=e.action.label;i.textContent=t;var n=i.innerHTML;e.action.label=(0,r.emojiToHTML)(n),e.action.rawLabel=t})}),i=null}else t=null;return t},t.isForwardedMessageId=function(e){if(isFinite(e))return!1;if("string"==typeof e&&"~"===e[0])return!1;return!0},t.STICKER_HEIGHT=t.UNKNOWN_ERROR=t.MENTION_CLIENTSIDE_REGEXP=t.MENTION_DOMAIN_REGEXP=t.MENTION_REGEXP=void 0,n("tsGB");var a,i=(a=n("wMVj"))&&a.__esModule?a:{default:a},r=n("9M99"),o=n("OcsD");var s=/\[((id|club)\d+)\|([\S\s]+?)]/g;t.MENTION_REGEXP=s;t.MENTION_DOMAIN_REGEXP=/\[((id|club)\d+)\|@([\S\s]+?)]/g;var l=/\[(().+)\|([\S\s]+?)]/g;t.MENTION_CLIENTSIDE_REGEXP=l;var c=-180;t.UNKNOWN_ERROR=10;var u,d=128;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Date(1e3*e),a=n.getTimezoneOffset(),i=-t/60+c;if(a!==i){var r=60*(i-a)*1e3;n.setTime(1e3*e-r)}var o=n.getHours(),s=n.getMinutes();return o+":"+(s<10?"0":"")+s}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return window.mail.wrapLinks(e,t)}function p(e,t){var n;return n=t?l:s,e.replace(n,function(e,t,n,a){return'<a href="/'.concat(t,'" class="mem_link">').concat(a,"</a>")})}function A(){return hasClass("x2",document.body)?2*d:d}t.STICKER_HEIGHT=d},qsX6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBookmarkState=function(e,t){g.bookmarks[e]=t},t.default=void 0;var a=d(n("wTbK")),i=d(n("JYMJ")),r=d(n("Y6JH")),o=n("VRji"),s=n("Qz23"),l=n("OcsD"),c=n("UxAg"),u=n("j80l");function d(e){return e&&e.__esModule?e:{default:e}}var f="/hints?act=a_json_friends&mobile=1&from=imwrite&case=Nom&qs=1",h="ShareConversations",p="ShareGroups",A=f+h,m=!1,_=0,v=!1,g={bookmarks:{}};function y(e){w(e)}function b(e){nav.go(e),cur.share.destroy({isNavigation:!0})}function w(e){var t=cur.share._els.header,n=e.scrollTop;t.classList.toggle("ShareHeader--scrolled",n>=10)}function E(e,t,n){cur.share._els.content;if(cur.share.blocked)return!1;if(S(!0),cancelEvent(n),hasClass("inline_item_selected",t))return cur.shareSearch.toggleAttach(e,!1),function(e,t){cur.share._els.content;for(var n=0;n<cur.share.selected.length;n++)if(cur.share.selected[n]===e){cur.share.selected.splice(n,1);break}return T(!1),!1}(e);cur.shareSearch.toggleAttach(e,!0);for(var a=!1,i=0;i<cur.share.selected.length;i++)if(cur.share.selected[i]===e){a=!0;break}return a||cur.share.selected.push(e),S(!1),T(!1),I(),!1}function k(e,t,n){if(!cur.share.blocked){e=e.closest(".SharePanelRoot");var a,i=(0,c.$$)(".SharePanel",e);t&&(a=(0,c.$)(".".concat(t),e)),i.forEach(function(e){var t=e===a;e.setAttribute("aria-hidden",!t),e.classList.toggle("SharePanel--active",t),t?e.removeAttribute("tabindex"):e.setAttribute("tabindex",-1),(0,c.$$)("input, ul",e).forEach(function(e){e.setAttribute("aria-hidden",!t),t?(e.removeAttribute("disabled"),e.setAttribute("tabindex",0)):(e.setAttribute("disabled",!0),e.setAttribute("tabindex",-1))})});var r=(0,c.$)("input",a);r&&n&&r.focus(),setStyle(e,{height:a?a.clientHeight:0})}}function S(e){var t=(0,c.$)(".ShareModal");t&&t.classList.toggle("ShareModal--disableAnimations",!e)}function C(e){var t=cur.share._els,n=t.header,a=t.content,i=t.bottom;a.classList.add("ShareLists--transition"),S(!0),k(n,e?"ShareHeaderGroupsPanel":"ShareHeaderConversationsPanel"),k(a,e?"ShareGroups":"ShareConversations"),k(i,e?"":"ActionsPanel"),setTimeout(function(){a.classList.remove("ShareLists--transition")},300),(0,c.$)(".SharePanel--active ul",a).focus(),I(),w(e?(0,c.$)("#ShareGroups .ShareList__container"):(0,c.$)("#ShareConversations .ShareList__container"))}function M(e){var t=cur.share._els,n=t.header,a=(t.content,t.bottom),i=D();m=!0,v=e,I(e),S(!1),k(a,e?"":i),e&&k(n,"ShareHeaderConversationsSearchPanel",!0),I(e),setTimeout(function(){browser.ios&&(0,l.scrollTop)(document.activeElement),m=!1},500)}function P(){var e=cur.share._els,t=e.content,n=e.bottom,a=e.messageTextarea;m=!0,k(n,"ExpandedMessagePanel"),t.classList.add("ShareLists--transition"),I(!1),a.focus({preventScroll:!0})}function T(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=cur.share,n=t.selected,a=t._els;ge(h)&&(!function(){if(!cur.share)return;var e=cur.share.cache._cache,t=(0,c.$)(".ShareHeaderConversationsPanel"),n=(0,c.$)(".ShareHeaderConversationsPanel .SharePanel-headerText__receivers",t),a=cur.share.selected,i=a.length;t.classList.toggle("ShareHeaderConversationsPanel--hasReceivers",i>0);var r="";if(1===i){r=getLang("mobile_share_box_to_single");var o=e[a[0]][0];r=r.replace("{name}",o)}else if(2===i){r=getLang("mobile_share_box_to_couple");var s=e[a[0]][6]||e[a[0]][0],l=e[a[1]][6]||e[a[1]][0];r=r.replace("{name1}",s).replace("{name2}",l)}else if(i>2){r=getLang("mobile_share_box_to_many");var u=e[a[0]][6]||e[a[0]][0];r=r.replace("{name}",u).replace("{count}",i-1)}n.innerHTML=r}(),x());var i,r,o=D();k(a.bottom,o,e),i=n.length>1,r=cur.share._els.messagePanel,(0,c.$)(".Btn",r).innerHTML=i?getLang("mobile_share_message_many"):getLang("mobile_share_message_single")}function D(){var e=cur.share,t=e.selected,n=e.content;return"ShareHeaderGroupsSearchPanel"===(0,c.$)(".SharePanel--active",n).getAttribute("data-name")?"":t.length>0?"MessagePanel":"ActionsPanel"}function I(e){if(cur.share&&cur.share._els){var t=cur.share._els,n=t.header,a=t.bottom,i=t.content,r=t.groupsList;if(n&&a&&i){var o=(0,c.$)(".ShareModal"),s=400;(e=v||e)&&(s+=cur.share.lastBottomHeight-(0,l.getH)(a)),a.clientHeight&&(cur.share.lastBottomHeight=a.clientHeight);var u=[n,a].reduce(function(e,t){var n=(0,c.$)(".SharePanel--active",t);return n&&(e+=n.clientHeight,setStyle(t,{height:n.clientHeight})),e},0),d=Math.min(s,innerHeight-u);(m||cur.share.blocked)&&(browser.ios||browser.ipad||browser.safari)&&(d=Math.min(s,document.body.clientHeight-u));var f=u+d!==_;f||(S(!1),i.classList.remove("ShareLists--transition")),setStyle(r,{bottom:-a.clientHeight}),o.classList.contains("ModalMenu--focused")||setStyle(i,{height:d}),f||S(!0),_=u+d}}}function x(){cur.share&&each(geByClass("inline_item",(0,c.$)("ShareConversations__container")),function(e,t){if(cur.share){var n=intval((t.id||"").substr(4)),a=-1!==cur.share.selected.indexOf(n);toggleClass("inline_item_selected",t,a),t.setAttribute("aria-selected",a);var i=(0,c.$)('input[type="checkbox"]',t);i&&(i.checked=a)}})}function O(e){var t=cur.share._els.bookmarkButton;if(t){var n=(0,c.$)(".ActionsPanel-button__icon",t),a=(0,c.$)(".ActionsPanel-button__label",t);t.setAttribute("aria-pressed",e),e?(n.innerHTML=Wd.html((0,r.default)("wall","favorite_28")),a.innerHTML=getLang("mobile_share_target_bookmark_active")):(n.innerHTML=Wd.html((0,r.default)("wall","favorite_outline_28")),a.innerHTML=getLang("mobile_share_target_bookmark")),window.thover.clear()}}function B(e){var t=cur.share._els,n=t.bottom,a=t.processingPanel,i=this.mail_hash,o=this.object,s=this.list,l=this.appId,u=(0,c.$)(".ExpandedMessagePanel__textareaWrap textarea");S(!0),e&&cancelEvent(e),k(n,"ProcessingPanel"),cur.share.blocked=!0,(o.startsWith("story")||o.startsWith("narrative"))&&Stories.sendAnalyticsEvent("share_to_message"),setTimeout(function(){I()}),setTimeout(function(){I()},350),ajax.post("/mail?act=send",{_ajax:1,from:"share_box",hash:i,media:o,list:s,message:u.value,to:cur.share.selected.join(","),app_id:l},{onDone:function(e){S(!0);var t=(0,c.$)(".ProcessingPanel__icon",a),n=(0,c.$)(".ProcessingPanel__label",a);t.classList.remove("ProcessingPanel__icon--loading");var i=e.error;t.innerHTML=Wd.html(i?(0,r.default)("wall","error_circle_40"):(0,r.default)("wall","done_circle_40")),n.innerText=i?getLang("mobile_share_state_error"):getLang("mobile_share_state_success"),setTimeout(function(){cur.app&&(i&&cur.app.hasOwnProperty("vkMiniAppShareFail")?cur.app.vkMiniAppShareFail():!i&&window.isFunction(cur.app.vkMiniAppShareSuccess)&&cur.app.vkMiniAppShareSuccess(0)),cur.share&&cur.share.destroy({isFail:i})},1e3)}})}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,l.preventEvent)(e);var a,i,r,o=cur.share._els.header;if("group"===t?(a=ge("ShareHeaderGroupsSearchPanel__input"),i="ShareHeaderGroupsPanel",r=cur.shareGroupSearch):"peers"===t&&(a=ge("ShareHeaderConversationsSearchPanel__input"),i="ShareHeaderConversationsPanel",r=cur.shareSearch),S(!1),a.value){if(n)return void S(!0);r.clear()}else"peers"===t?(k(o,i),M(!1)):(k(o,i),S(!0))}function R(){var e=/^([a-z_]+)(-?\d+)_(\d+)$/.exec(cur.share.options.object),t=e[1],n=e[2],a=e[3],i=cur.share.options.object;"app"===t&&"0"===a&&(i="app".concat(n)),cur.share.options.list&&(i+="?list="+cur.share.options.list),i=i.replace("wall_reply","wall"),i=cur.share.options.external_url||i;var r=navigator.share({url:i});if(!r)return(0,l.statlogsValueEvent)("mvk_share_external",t);r.then(function(){cur.share&&(0,l.statlogsValueEvent)("mvk_share_external",t)})}var N=function(e,t,n){var r=t.can_to_own,d=void 0===r||r,_=t.can_to_club,v=void 0===_||_,w=t.can_bookmark,D=t.is_bookmarked,N=t.from,j=t.post_from,F=t.list,H=(t.message,t.targetOwnOnClick),V=t.appId;cur.share&&cur.share.destroy();var U=V?f+"&app_id=".concat(V)+h:A;t.withoutScrollView||(0,s.preventDocumentScroll)(),D=void 0!==g.bookmarks[e]?g.bookmarks[e]:D,t.is_bookmarked=D,cancelEvent(n);var z=!!navigator.share,W=browser.ios?"iOS":"Android",q=(0,a.default)({on_overlay_click:"cur.share.destroy()",class:"ShareModal",attached:!0,body:(0,i.default)({targetOwnOnClick:!!H&&"cur.share.toOwnWall()",can_to_own:d,can_to_club:v,supportsExternalShare:z,platform:W,can_bookmark:w,is_bookmarked:D,list:F,from:N,post_from:j,object:t.object,isVKApp:t.isVKApp})}),G=t.withoutHash?null:"share";a.default.open(Wd.elem(q),!0,G,{swipeDown:!0,onClose:function(){cur.share&&cur.share.destroy({closeModal:!1})}});var $=(0,c.$)(".ShareModal"),Y=(0,c.$)(".ShareHeader"),Q=(0,c.$)(".ShareLists"),X=(0,c.$)(".ShareBottom"),K=(0,c.$)(".ActionsPanel-button--bookmark"),J=(0,c.$)(".ActionsPanel-button--group");!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cur.shareSearch=new QuickSearch;var t=e.appId?f+"&app_id=".concat(e.appId):f;cur.shareSearch.init({action:t,field:"ShareHeaderConversationsSearchPanel__input",container:h,top_len:20,tpl:function(e,t){return'<ul aria-multiselectable="true" aria-hidden="false" class="ScrollView ShareConversations__container ShareList__container" onscroll="cur.share.onScroll(this)">'.concat(e,"</ul>")},item_tpl:function(e,t){if(cur.share){var n=cur.share.cache._cache[this.id][0],a=-1!==cur.share.selected.indexOf(+this.id)?"inline_item_selected":"";return'\n        <label aria-label="'.concat(n,'" tabindex="0" role="checkbox" id="peer').concat(this.id,'" onclick="cur.share.select(').concat(this.id,', this)" class="inline_item active ').concat(a,'">\n          <input type="checkbox" style="display: none;">\n            <img aria-hidden="true" class="ii_img" src="').concat(t,'" />\n            <div class="ii_body">\n              <div class="ii_owner">\n                 ').concat(this.highlight(n),"\n              </div>\n            </div>\n          </input>\n        </label>\n      ")}},null_tpl:function(e){var t=getLang("mobile_friends_search_not_found").replace("%s",htsc(e));return e||(t=getLang("mobile_share_list_no_friends")),'<div class="service_msg_box"><div class="service_msg service_msg_null">'.concat(t,"</div></div>")}}),x()}({appId:V}),addEvent(K,"click",function(e,t,n){var a=e.split("_"),i=31,r=5,o=[i,r].includes((0,l.toInt)(t.bookmark_type));ajax.post("/bookmarks.php",{_ajax:1,wide:2===t.bookmark_type?1:0,from:"share_box",star:o?1:0,act:t.is_bookmarked?"bookmark_remove":"bookmark_add",item_type:t.bookmark_type,item_oid:a[0],item_id:a[1],hash:t.bookmark_hash},{onDone:function(e,t){var n=(0,c.$)(".".concat(e)),a=(0,l.ceFromString)(t);n&&(0,l.replace)(a,n.parentNode)}}),t.bookmark_type===r&&Article.toggleButton(e,!t.is_bookmarked);if(t.bookmark_type===i){var s=(0,c.$)(".StoryMenu__button");Stories.toggleBookmark(s,!0)}t.is_bookmarked=!t.is_bookmarked,g.bookmarks[e]=t.is_bookmarked,n()}.bind(this,e,t,function(){O(t.is_bookmarked)}),{passive:!0}),addEvent(J,"click",function(){C(!0)},{passive:!0});var Z=(0,c.$)(".ExpandedMessagePanel textarea"),ee=(0,c.$)(".MessagePanel__input input");Z.value=t.message||"",ee.value=t.message||"",(0,o.initAutogrow)(Z),addEvent(Z,"input blur focus",function(){ee.value=Z.value.replace(/\n/gi," "),S(!1)}),addEvent((0,c.$)(".ExpandedMessagePanelSend"),"click",function(){cur.share.sendMessage()},{capture:!0}),addEvent(Z,"input",function(){S(!1),I(!browser.ios),setTimeout(function(){S(!0)},150)}),addEvent(Z,"touchmove",function(e){stopEvent(e)},{capture:!0}),addEvent(Z,"focus",function(e){var t=cur.share._els.content;cancelEvent(e),!0,t.classList.remove("ShareLists--transition"),$.classList.add("ModalMenu--blocked"),S(!1),I(!1),setTimeout(function(){I(!1),0===(0,l.scrollTop)()||browser.ios||($.classList.add("ModalMenu--focused"),(0,l.scrollTop)(document.body.clientHeight))},300)}),addEvent(Z,"blur",function(){$.classList.remove("ModalMenu--blocked"),S(!1),!1,setTimeout(function(){$.classList.remove("ModalMenu--focused"),document.activeElement&&document.activeElement.blur(),T(),I(!1),m=!1},100),setTimeout(function(){document.activeElement&&document.activeElement.blur(),I(!1)},250)}),addEvent(Z,"keydown",function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey&&browser.mac)&&cur.share.sendMessage(e)});var te={act:"publish_box",object:"null"};V&&(te.app_id=V),t.object&&(te.object=t.object,t.list&&(te.list=t.list));var ne=(0,u.makeUrl)("/like",te);cur.share={open:!0,onClose:befall(),go:b,options:t,externalShare:R,actionBox:ne,blocked:!1,_els:{actionsPanel:(0,c.$)(".ActionsPanel"),messagePanel:(0,c.$)(".MessagePanel"),processingPanel:(0,c.$)(".ProcessingPanel"),groupsList:ge("ShareGroups"),conversationsList:ge("ShareConversations"),bookmarkButton:K,messageTextarea:Z,header:Y,content:Q,bottom:X},selected:[],cache:QuickSearchCache[U],expandMessage:P,toggleGroupsPanel:C,toggleConversationsSearch:M,select:E,clearSearch:L,setActivePanel:k,onScroll:y,sendMessage:B.bind(t),lastBottomHeight:X.clientHeight,destroy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=extend({closeModal:!0,isFail:!0,isNavigation:!1},e);var t=(0,c.$)(".ShareModal");e.isFail&&cur.app&&cur.app.vkMiniAppShareFail&&cur.app.vkMiniAppShareFail(),t&&e.closeModal&&a.default.close(t),cur.share&&(cur.share.onClose(e.isNavigation),cur.share.open=!1),cur.share.options.withoutScrollView||(0,s.restoreDocumentScroll)(),delete cur.share,delete cur.shareSearch,delete cur.shareGroupSearch}},H&&(cur.share.toOwnWall=H),function(){cur.shareGroupSearch=new QuickSearch;var e=Icon({icon:"chevron_right"});cur.shareGroupSearch.init({load_once:!0,field:"ShareHeaderGroupsSearchPanel__input",container:p,action:cur.share.actionBox,tpl:function(e,t){return'<ul aria-hidden="true"  class="ScrollView ShareGroups__container ShareList__container" onscroll="cur.share.onScroll(this)">'.concat(e,"</ul>")},item_tpl:function(t,n){var a=function(){if(!cur.share)return{};var e=cur.share.actionBox+p;return QuickSearchCache[e]}()._cache[this.id][0],i=cur.share.options,r=i.object,o=i.list,s=i.from,l=i.post_from,c={act:"add",share_box:"1"};r&&(c=extend(c,{object:r,list:o,from:s,post_from:l})),cur.share.options.isVKApp&&(c.is_vk_app=+cur.share.options.isVKApp);var d=(0,u.makeUrl)("/wall".concat(this.id),c);return'\n        <li aria-label="'.concat(a,'" tabindex="0" role="link" id="group').concat(this.id,'" onclick="cur.share.go(\'').concat(d,"', ").concat(cur.share.options.isVKApp,')" class="inline_item " xmlns="http://www.w3.org/1999/html">\n          <img aria-hidden="true" class="ii_img" src="').concat(n,'" />\n          <div class="ii_body">\n            <div class="ii_owner">\n               ').concat(this.highlight(a),'\n            </div>\n            <div class="ii_go">\n               ').concat(e,"\n            </div>\n          </div>\n        </li>\n      ")},null_tpl:function(e){var t=getLang("mobile_groups_no_groups_found");return e||(t=getLang("mobile_share_list_no_groups")),'<div class="service_msg_box"><div class="service_msg service_msg_null">'.concat(t,"</div></div>")}})}(),O(D),I(),Y.closest(".Share").focus(),onBodyResize(function(){$.classList.contains("ModalMenu--focused")||(I(),setTimeout(function(){S(!0)},150))})};t.default=N},"r/ag":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"POPUP_DISAPPEAR_TIME",{enumerable:!0,get:function(){return r.POPUP_DISAPPEAR_TIME}}),Object.defineProperty(t,"POPUP_NAV_PREFIX",{enumerable:!0,get:function(){return r.POPUP_NAV_PREFIX}}),t.default=void 0;var a,i=(a=n("Po+v"))&&a.__esModule?a:{default:a},r=n("TAKr");window.Popup=i.default;var o=i.default;t.default=o},r2Pq:function(e,t,n){"use strict";var a,i=n("UxAg"),r=(a=n("z9sQ"))&&a.__esModule?a:{default:a};window.AudioSerp={setView:function(e){return l("view",e)},setTab:function(e){return l("tab",e)},toggleTabs:function(e){(0,i.$)(s.serp).classList.toggle(o.noTabs,!e)},setFoundHtml:function(e){(0,i.$)(s.found).outerHTML=e},getFoundHtml:function(){return(0,i.$)(s.found).outerHTML}};var o={serpMod:function(e){return"AudioSerp_".concat(e)},noTabs:"AudioSerp_noTabs"},s={serp:".AudioSerp",found:".AudioSerp__found"};function l(e,t){var n=(0,i.$)(s.serp);r.default.setMod(n,o.serpMod(e),t)}},rEJs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;t.events={CURRENT_CHANGED:"curr",PLAY:"start",PLAY_REQUESTED:"request_play",PAUSE:"pause",STOP:"stop",UPDATE:"update",LOADED:"loaded",ENDED:"ended",FAILED:"failed",BUFFERED:"buffered",PROGRESS:"progress",VOLUME:"volume",PLAYLIST_CHANGED:"plchange",ADDED:"added",REMOVED:"removed",FREQ_UPDATE:"freq",SEEK:"seek",PLAY_NEXT:"play_next",AD_READY:"ad_ready",AD_DEINITED:"ad_deinit",AD_STARTED:"ad_started",AD_COMPLETED:"ad_completed",START_LOADING:"start_load",CAN_PLAY:"actual_start"}},rKUZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("NSb7"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("eR1x");var r=a.default;t.default=r,window.Typing=a.default,Object.assign(window,{Typing_renderNames:a.TypingRenderNames,Typing_isEmpty:a.TypingIsEmpty})},rKp0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("FZH1"))&&a.__esModule?a:{default:a};n("UH2D");var r=i.default;t.default=r,window.MailScrap=i.default},rUE2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("bZ/P"))&&a.__esModule?a:{default:a};function r(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(['\n    <div class="','">\n      <div class="mailDialog__overlay" ','></div>\n      <div class="mailDialog__wrap">\n        <div class="mailDialog__content">\n          <div class="mailDialog__close" ',"></div>\n          ",'\n          <div class="mailDialog__body">','</div>\n          <div class="mailDialog__footer">\n            <div class="mailDialog__button mailDialog__confirmButton" ',">",'</div>\n            <div class="mailDialog__button mailDialog__button_secondary mailDialog__closeButton" ',">","</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "]);return r=function(){return e},e}var o=function(e){var t=e.onClose||i.default.onClick("MailDialog._onDialogClose"),n=i.default.class(e.class,"mailDialog",{}),a="";e.title&&(a='<div class="mailDialog__title">'.concat(e.title,"</div>"));return i.default.html(r(),n,t,t,a,e.body,e.onConfirm,e.confirmText,t,e.cancelText)};t.default=o},rudk:function(e,t,n){"use strict";n.r(t),n.d(t,"parseFwd",function(){return o}),n.d(t,"convertKludgesToAttaches",function(){return s}),n.d(t,"isReservedPeer",function(){return l}),n.d(t,"isUserPeer",function(){return c}),n.d(t,"isChatPeer",function(){return u}),n.d(t,"convertAttachesToPhpMedia",function(){return d});var a=n("jE6c");function i(e,t){void 0===t&&(t=[]);var n=e.split("_");return[n[0],n[1],t]}var r={};function o(e){if(r[e])return r[e];for(var t=e?e.length:0,n=[],a=[],o="",s=0;s<t;s++){var l=e[s],c=l.charCodeAt(0);c>=48&&c<=57||"_"===l||"-"===l?o+=l:"("!==l&&")"!==l&&":"!==l&&","!==l||(""!==o&&(a.push(o),n.push("id"),o=""),a.push(l),n.push(l))}o.length>0&&(a.push(o),n.push("id"));var u=function e(t,n,a,r){if(void 0===a&&(a=0),void 0===r&&(r=0),r>50)return[[],t.length];for(var o=[],s="";a<t.length;){var l=t[a];if("id"===l)s=n[a];else if(","===l&&s)o.push(i(s)),s="";else if("("===l){var c=e(t,n,a+1,r+1),u=c[0];a=c[1],o.push(i(s,u)),s=""}else if(")"===l)return""!==s&&o.push(i(s)),[o,a];a++}return s&&o.push(i(s)),[o,a]}(n,a)[0];return Object.keys(r).length>300&&(r={}),r[e]=u,u}function s(e,t){var n=[];e.fwd_count?n.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&n.push({type:"mail",id:-t,object:{fwd_count:o(e.fwd).length}});for(var i=1;e["attach"+i+"_type"];++i)"call"===e["attach"+i+"_type"]?n.push({type:e["attach"+i+"_type"],id:e["attach"+i],initiatorId:Object(a.intval)(e["attach"+i+"_call_initiator_id"]),state:e["attach"+i+"_call_state"],duration:Object(a.intval)(e["attach"+i+"_call_duration"]),receiverId:Object(a.intval)(e["attach"+i+"_call_receiver_id"])}):n.push({type:e["attach"+i+"_type"],id:e["attach"+i],kind:e["attach"+i+"_kind"],productId:e["attach"+i+"_product_id"]});return e.geo&&n.push({type:"geo",id:e.geo}),n}function l(e){return 0==e}function c(e){return e>0&&e<2e9}function u(e){return e>2e9}function d(e){return e.map(function(e){var t="audiomsg"===e[2]?"audio_message":e[2];return e[0]+":"+e[1]+":"+t}).join(",")}},rulp:function(e,t,n){"use strict";var a,i=(a=n("r/ag"))&&a.__esModule?a:{default:a};window.Podcast={toggleFave:function(e,t,n){var a="snippet__favorite_active",i=hasClass(e,a);ajax.post("fave.php",{act:"fave_podcast",add:!i,hash:n,audio_id:t,ref:cur.module}),i?removeClass(e,a):addClass(e,a)},onOpenClick:function(e,t){var n=$(".snippet__popup",e.closest(".snippet")),a="";cur&&cur.module?a=cur.module:nav&&"/feed"===nav.cur?a="feed":!nav||"/feed?section=podcasts"!==nav.cur&&"/feed/podcasts"!==nav.cur||(a="feed_podcasts"),statlogsValueEvent("mvk_podcasts_actions","mvk_open_popup",t,a),i.default.open(n,!0)}}},s0Xw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("gfsL"))&&a.__esModule?a:{default:a};n("gmHQ");var r=i.default;t.default=r,window.Cart=i.default},s0aB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t=i();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=a?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=e[r]}}n.default=e,t&&t.set(e,n);return n}(n("NJSj"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}n("82vK");var r=a.default;t.default=r,window.Convo=a.default,window.Convo__online=a.Convo__online},s53I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("W9Tc"),i=n("TxR4"),r=n("S6+Z"),o=n("jE6c");function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=Object.entries(r.EMOJI_HINTS).map(function(e){var t=l(e,2),n=t[0],a=l(t[1],2),i=(a[0],a[1]);return[new RegExp("(\\s|^)(".concat((0,o.escapeRE)(i)).concat(i.endsWith(")")||i.endsWith("(")?"+":"",")([\\s\\.,]|$)"),"gi"),n]}),u={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":"."};browser.mac?u["\\"]="ё":u["`"]="ё";var d=new RegExp("[".concat((0,o.escapeRE)(Object.keys(u).join("")),"]"),"gi"),f=function(e){return e.replace(d,function(e){return u[e]})},h=Object.entries(u).reduce(function(e,t){var n=l(t,2),a=n[0];return e[n[1]]=a,e}),p=new RegExp("[".concat((0,o.escapeRE)(Object.keys(h).join("")),"]"),"gi"),A=function(e){return e.replace(p,function(e){return h[e]})},m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={mvk:!1,peerId:null,maxInputLength:256},this.setConfig(t)}var t,n,r;return t=e,(n=[{key:"setConfig",value:function(e){Object.assign(this.config,e)}},{key:"getQueries",value:function(e){if(!e||e.length>this.config.maxInputLength)return[""];var t=window.Wall&&window.Wall.replyNamesRE||window.post&&window.post.replyNamesRE;if(t){var n=t();n&&(e=e.replace(n,""))}e=e.toLowerCase(),e=(e=c.reduce(function(e,t){var n=l(t,2),a=n[0],r=n[1];return e.replace(a,function(e,t,n,a){return(t||"")+(0,i.emojiByteHexToSymbol)(r)+(a||"")})},e)).replace(/^[\s\uFEFF\xA0]+|\n+$/g,"");var r=[e=(0,i.emojiRemoveSkinToneModifiers)(e)];if((0,a.partConfigEnabled)("stickers_suggestions_convert_layout"))for(var o=0,s=[].concat(r);o<s.length;o++){var u=s[o];r.push(f(u)),r.push(A(u))}for(var d=0,h=[].concat(r);d<h.length;d++){var p=h[d];r.push(p.replace(/ё/g,"е")),r.push(p.replace(/е/g,"ё"))}for(var m=0,_=[].concat(r);m<_.length;m++){var v=_[m];r.push(v.replace(/[.!?]+$/,""))}return Object.keys(r.reduce(function(e,t){return e[t]=1,e},{}))}},{key:"isBotLinkEnabled",value:function(){return(0,a.partConfigEnabled)("stickers_bot_link")&&-184940019!==this.config.peerId}},{key:"getBotLinkUrl",value:function(){return this.config.mvk?"/mail?act=show&peer=".concat(-184940019):"/im?sel=".concat(-184940019)}},{key:"getBotLinkImageUrl",value:function(e){return"/images/stickers_suggestions_bot_light_".concat(e,".png")}},{key:"getBotLinkClickStatName",value:function(){return"stickers_suggestions_bot_link"}},{key:"getBotLinkClickStatKeys",value:function(){return[]}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=m},sVNd:function(e,t,n){"use strict";var a,i=n("Qz23"),r=(a=n("+cqQ"))&&a.__esModule?a:{default:a};function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=function(){var e={UP:38,DOWN:40,RETURN:13,ESC:27},t="MentionContainer_opened",n="Mention_inited",a="Mention_noScroll",s="MentionItem_active",l={},c={},u=!1;function d(){l={ignoredTerm:null,curValue:"",curTerm:"",curPos:"",input:{}},c={container:null,scroll:null,index:{},cache:{},shown:[],lastQ:null,text:null,requestTimer:null,opts:{}}}d();var f=!0;function h(){f=!1}function p(){var e,t,n,a,i,r=val(l.input),o=Math.max(r.lastIndexOf("@"),r.lastIndexOf("*")),s=!1;if(o>-1){var u=function(e){if(void 0!==e.selectionStart)return e.selectionStart!==e.selectionEnd?e.selectionEnd:e.selectionStart;if(void 0!==window.getSelection){var t=window.getSelection();if(!t||!t.rangeCount)return 0;var n=t.getRangeAt(0),a=n.cloneRange(),i=ce("div");return a.selectNodeContents(e),a.setEnd(n.startContainer,n.startOffset),i.appendChild(a.cloneContents()),val(i).replace(/\n$/,"").length}return 0}(l.input),d=r.substr(0,u);o=Math.max(d.lastIndexOf("@"),d.lastIndexOf("*"));var f=d.match(/(^|[\s.,:\'\"\u00BB\u00AB;>\)\(]|\#[\w_\.\u0400-\u04FF]+)[@\*]([^,@\*\(\)\?\!\s\n\r \u00A0]*)$/);f&&"."!==f[2].substr(-1)&&(s=f[2])}!1===s&&delete l.ignoredTerm,void 0!==l.ignoredTerm&&s==l.ignoredTerm&&(s=!1),l.curValue=r,l.curTerm=s,l.curPos=o,c.text=s,!1===l.curTerm?_():(k(!1,l.curTerm),m(),e=ge("mhead").offsetHeight,t=c.container.getBoundingClientRect(),n=l.input.offsetHeight,a=parseInt(getStyle(c.scroll,"maxHeight"),10),i=!1,i=hasClass("Mention_openToBottom",c.container)?t.top-n-a<e:t.bottom-a<e,getXY(l.input)[1]>=e+a&&(i=!1),toggleClass("Mention_openToBottom",c.container,i),toggleClass("Mention_openToBottom",c.opts.appendTo,i))}function A(e){l.input=e}function m(){D(),document.addEventListener("click",v,!0),addClass(t,c.opts.appendTo),show(c.container),function(){if(!u){var e=browser.ipad?"touchend":"click";u=!0,addEvent(window,e,_),addEvent(window,"touchmove",h),nav.onBeforeGo(_)}}()}function _(e){!browser.ipad||f?e&&e.target&&gpeByClass(n,e.target)&&!gpeByClass("uMailWrite__button",e.target)&&!hasClass("uMailWrite__button",e.target)||hasClass(t,c.opts.appendTo)&&(removeClass(t,c.opts.appendTo),hide(c.container),function(){if(u){var e=browser.ipad?"touchend":"click";removeEvent(window,e,_),removeEvent(window,"touchmove",h),nav.onBeforeGo.off(_),u=!1}}()):f=!0}function v(e){var t=e.target;t&&!gpeByClass(n,t)&&(e.preventDefault(),e.stopImmediatePropagation(),_()),document.removeEventListener("click",v,!0)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c.opts=extend(c.opts,e),y(),k(!0)}function y(){var e,t,n=c.opts.defaultItems,a=c.opts.items,i=[];for(e=0,t=n.length;e<t;++e)i.push(e);for(c.cache[""]=i,e=0,t=a.length;e<t;++e)b(e,a[e])}function b(e,t){var n,a,i,r="",o=c.opts.searchKeys,s={};for(n=0,i=o.length;n<i;++n)r+=" "+(t[o[n]]||"").replace(c.opts.delimeter," ").replace(/<[^>]*>/g,"");for(r+=(parseLat(r)||"")+(parseCyr(r)||""),r=trim(r.toLowerCase()).split(/\s+/),n=0;n<r.length;n++)for(a=1;a<=c.opts.wholeIndex;a++){var l=r[n].substr(0,a);s[l]||(c.index[l]||(c.index[l]=[]),c.index[l].push(e),s[l]=1)}}function w(){var e=trim(c.text);e&&ajax.post(c.opts.url,extend({str:e,mobile:1},c.opts.params||{}),{onDone:function(t){c.cache[e]=E(e).concat(t),S(c.cache[e],!0)}})}function E(e){if(!(e=trim(e.toLowerCase().replace(c.opts.delimeter," "))))return c.cache[""];var t=c.opts.wholeIndex;if(e.length<=t&&-1===e.indexOf(" "))return c.index[e]||[];var n,a,i=0,r="";for(n=0,a=(e=e.split(" ")).length;n<a;++n){var o=e[n].substr(0,t),s=c.index[o];if((!r||!s||s.length<i)&&(i=s?s.length:0,r=o),!i)return[]}var l=[],u=c.opts.searchKeys,d=u.length,f=e.length;for(n=0,a=c.index[r].length;n<a;++n){for(var h=c.index[r][n],p=c.opts.items[h],A=!1,m="",_=0;_<d;++_)m+=" "+(p[u[_]]||"").replace(c.opts.delimeter," ").replace(/<[^>]*>/g,"");m=(m+=(parseLat(m)||"")+(parseCyr(m)||"")).toLowerCase();for(var v=0;v<f;++v)if(-1===m.indexOf(" "+e[v])){A=!0;break}A||l.push(h)}return l}function k(e,t){if(c.cache[""])if(t=void 0!==t?t:trim(c.text),c.lastQ!==t||e){c.lastQ=t,clearTimeout(c.requestTimer);var n=c.cache[t];n?S(n,!0):(S(n=E(t),!c.opts.url),c.opts.url&&(c.requestTimer=setTimeout(w,c.opts.requestWait)))}else m()}function S(e,t){var n=[];c.shown=[];for(var r=e.slice(0,c.opts.maxItems),o=0,s=r.length;o<s;++o){var l=r[o];isArray(l)||(l=c.opts.items[l]),c.shown[l[0]]||(c.shown[l[0]]=l,n.push(C(l)))}c.container&&c.opts.appendTo.contains(c.container)||(c.container=ce("div"),addClass("Mention",c.container),c.scroll=ce("div"),addClass("ScrollView Mention__scroll",c.scroll),(0,i.setScrollView)(c.scroll,{topBanner:!1}),c.opts.appendTo.appendChild(c.container),c.container.appendChild(c.scroll),addEvent(c.scroll,"touchmove",function(e){hasClass(a,c.scroll)&&preventEvent(e)})),toggleClass("Mention_empty",c.container,!n.length),val(c.scroll,n.join("")),c.scroll.scrollTop=0,P(),setTimeout(function(){toggleClass(a,c.scroll,!function(){if(!browser.ios&&!browser.ipad)return!0;if(c.scroll.scrollHeight>c.scroll.offsetHeight)return!0;return!1}())},0)}function C(e){var t=o(e,4),n=t[0],a=t[1],i=t[2],r=t[3];return'<div class="MentionItem" onclick="Mention.onSelect(\''.concat(n,'\');" onmouseover="Mention.onItemHover(this);">\n              <div class="MentionItem__cell">\n                <img src="').concat(r,'" class="MentionItem__img"/>\n              </div>\n              <div class="MentionItem__cell MentionItem__cell_name">\n                <div class="MentionItem__name">').concat(a,'</div>\n                <div class="MentionItem__tag">').concat(i,"</div>\n              </div>\n            </div>")}function M(){var e=geByClass1(s,c.container),t=e.offsetTop;c.scroll.scrollTop=t-e.offsetHeight-parseInt(getStyle(c.scroll,"paddingTop"),10)}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=geByClass("MentionItem",c.container);if(t.length){var n=t.find(function(e){return hasClass(s,e)});e?(removeClass(s,n),addClass(s,e)):n||addClass(s,t[0])}}function T(e,t){setTimeout(function(){A(t),p()},0)}var D=(0,r.default)();return{onKeyUp:function(t,n){t.keyCode!==e.UP&&t.keyCode!==e.DOWN&&(k(!0),A(n),p())},onKeyDown:function(n,a){var i;hasClass(t,c.opts.appendTo)&&(n.keyCode===e.UP?(!function(){var e=geByClass1(s,c.container);if(e){var t=domPS(e);t&&(P(t),M())}else P(),M()}(),n.preventDefault()):n.keyCode===e.DOWN?(!function(){var e=geByClass1(s,c.container);if(e){var t=domNS(e);t&&(P(t),M())}else P(),M()}(),n.preventDefault()):n.keyCode===e.RETURN?(i=geByClass1(s,c.container))&&(i.click(),1)&&n.preventDefault():n.keyCode===e.ESC&&(_(),n.preventDefault()))},onFocus:T,onClick:T,onSelect:function(e){var t=c.shown[e];t&&function(e){if(!e)return!1;var t,n=e[2].replace("@",""),a=l.curValue.substr(0,l.curPos),i=l.curValue.substr(l.curPos),r=!!a.match(/\#[\w_\.\u0400-\u04FF]+$/i);c.opts.preferDomain&&e[9]&&(r=!0);r||(t=replaceEntities(e[8]||e[1]));var o=new RegExp("^(@|\\*)"+escapeRE(l.curTerm)+"(?:\\s+\\((?:(.*?)\\))?\\s*)?","");i=i.replace(o,function(e,a,i){var o=a+n+" ";return r||(o+="("+t.replace(/[\(\)\]\[]/g,"")+") "),o}),r||!a||a.match(/[\.\(\)\?\!\s\n\r\'\"\u00BB\u00AB \u00A0]$/)||(i=" "+i);_(),val(l.input,a+i),elfocus(l.input),c.opts.afterInsert&&c.opts.afterInsert(l.input)}(t),_()},onItemHover:function(e){P(e)},onOpen:D,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(),c.opts=extend({appendTo:document.body,url:"hints",params:{act:"a_json_friends",from:"composer"},delimeter:/[\s\(\)\.,\-]+/g,requestWait:300,wholeIndex:2,maxItems:51,searchKeys:[1,4],preferDomain:!1,defaultItems:[],items:[],afterInsert:function(){}},e),addClass("Mention_inited",c.opts.appendTo),c.scroll&&removeClass(a,c.scroll),y()},update:g,addItems:function(e){e=c.opts.defaultItems.concat(e);var t={};e.filter(function(e){return!t[e[0]]&&(t[e[0]]=!0,!0)}),g({defaultItems:e,items:e})}}}();window.Mention=s},sWID:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getAppropriateImage=function(e,t,n){var a=[];if(o(e,function(e,t){n&&-1==["w","z","y","x","m","s"].indexOf(e)||a.push(t)}),!a.length)return[!1];a.sort(function(e,t){return e[1]-t[1]}),t*=window.devicePixelRatio>=2?2:1;var i=a[a.length-1];return o(a,function(e,n){if(n[1]>=t)return i=n,!1}),i},t.preloadImage=function(e,t){if(!0===s[e])return t&&t(),!0;if(isArray(s[e]))return s[e].push(t),!1;s[e]=[t];var n=new Image;return n.onload=function(){var t=s[e];s[e]=!0,o(t,function(e,t){t&&t()})},n.src=e,!1},t.mailruStatsPixel=function(e,t){if(isObject(t)&&!isEmpty(t)){var n="https://vk-callback.go.mail.ru/longread_pxl?action=".concat(e);o(t,function(e,t){n+="&".concat(e,"=").concat(t)}),(new Image).src=n}},t.getUrlParam=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},t.changeHeightInstagramEmbed=function(e){if(!/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(e.origin))return;var t=function(e){for(var t,n=document.getElementsByTagName("iframe"),a=n.length-1;a>=0;a--){var i=n[a];if(i.contentWindow===e.source){t=i;break}}return t}(e);if(!t)return;try{e=JSON.parse(e.data)}catch(e){}if("object"!=a(e)||"string"!=typeof e.type||"object"!=a(e.details))return;setTimeout(function(){if("MEASURE"===e.type){var n=e.details.height;t.setAttribute("height",n)}},100)},t.ArticleStatsEvents=t.ObjectResizeType=t.ResizableObjectTypes=t.ParagraphType=void 0;var i={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectPodcast:104,ObjectAudio:105,ObjectTwitter:106,ObjectFacebook:107,ObjectInstagram:108,ObjectVK:109,ObjectTelegram:110,ObjectPoll:111,ObjectMarketItem:112,ObjectAliExpressProduct:113};t.ParagraphType=i;var r=[i.ObjectPhoto,i.ObjectGIF,i.ObjectVideo,i.ObjectTwitter,i.ObjectFacebook,i.ObjectInstagram,i.ObjectVK,i.ObjectTelegram];t.ResizableObjectTypes=r;t.ObjectResizeType={Normal:0,Float:1,Medium:2,Large:3};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t.call(e[n],n,e[n]))break;return e}t.ArticleStatsEvents={clickOnVideo:"click_on_video",clickOnAudio:"click_on_audio",clickOnPhoto:"click_on_photo",clickOnExternalLink:"external_link_click",clickOnCarouselNext:"click_on_carousel_next",clickOnCarouselPrev:"click_on_carousel_prev",clickOnMentions:"click_on_mentions",nightModeOn:"night_mod_on",nightModeOff:"night_mod_off",close:"close"};var s={}},sXAB:function(e,t,n){"use strict";var a=n("UxAg"),i=n("OcsD"),r=(0,i.need)("ajax"),o=(0,i.need)("onDOMReady"),s=(0,i.need)("onBodyResize");window.CookiePolicy={},o(c),CookiePolicy._onHideClick=d;var l={body:"body",fixedHeader:"._hfixed",cookiePolicy:".CookiePolicy"};function c(){(0,a.$)(l.cookiePolicy)&&(u(),s(u))}function u(){if((0,a.$)(l.fixedHeader)){var e=(0,a.$)(l.body),t=(0,a.$)(l.cookiePolicy).offsetHeight,n=parseInt(getComputedStyle(e).paddingBottom,10);e.style.paddingBottom="".concat(n+t+7,"px")}}function d(e,t){e.preventDefault();var n=t.getAttribute("href");t.closest(l.cookiePolicy).style.display="none",s("__clear",u),r.post(n,{_ajax:1})}},sXaZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("z9sQ"))&&a.__esModule?a:{default:a};var r=function(e){var t=e.style||[],n=e.class||e.mix,a=e.prefix,r=e.postfix,o=function(e){var t=[];isArray(e.on_key_down)?(e.on_key_down.push("event"),t=e.on_key_down):e.on_key_down&&(t=[e.on_key_down,"event"]);return{class:"TextInput__native",id:e.id,tag:"input",type:e.type,name:e.name,value:e.value,spellcheck:e.spellcheck+"",placeholder:e.placeholder,autocapitalize:!1===e.autocapitalize?"off":null,autocomplete:!1===e.autocomplete?"off":null,tabindex:e.tabindex,readonly:e.readonly,disabled:e.disabled,oninput:e.on_change,onkeydown:t,onblur:e.onblur,onfocus:e.onfocus,maxlength:e.maxlength}}(e);return{class:[i.default.class("TextInput",{style_stretch:t.stretch,prefixed:!!a,hidden:"hidden"===e.type,error:t.error}),n],tag:"label",onclick:e.on_click,inner:a||r?[a?{class:i.default.class("TextInput__prefix",{rightPadding:a.with_right_padding,gray:a.gray}),inner:a.text}:null,{class:"TextInput__nativeWrap",inner:o},r?{class:"TextInput__postfix",inner:r.text}:null]:o}};t.default=r},sZWN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideHeader=k,t.showHeader=S;var a,i,r,o,s,l=n("OcsD"),c=".basis__header",u="basis__header_noshadow",d="basis__header_noshadowAnim",f="basis__header_noTransition",h="basis__header_hidden",p="BottomMenu__updateButton_offset",A=5,m=20,_=200,v=!1,g=(0,l.scrollTop)(),y=56,b=!1,w=!1,E=[];function k(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:P()).classList.add(h)}function S(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:P()).classList.remove(h)}function C(){if(v&&(clearInterval(s),(0,l.onBodyScroll)("__clear",i),removeEvent(window,"touchend",r),E.forEach(function(e){removeEvent(e,"blur",r)}),v=!1),!v){a=P(),y=parseInt((0,l.getStyle)(a,"height"),10),g=(0,l.scrollTop)();var e=$(".BottomMenu__updateButton");a&&(a.classList.add(f),S(a),e&&e.classList.remove(p)),M(a,(0,l.scrollTop)()),i=function(){b=!0},r=function(){clearInterval(o),o=setTimeout(function(){var t=(0,l.ge)("mcont");if(t){var n=Math.max(t.scrollHeight,parseInt((0,l.getStyle)(t,"height"),10));window.innerHeight>n&&n&&(S(a),e&&e.classList.remove(p))}},100)},setTimeout(function(){b=!1},0),setTimeout(function(){a&&a.classList.remove(f)},200),v||(s=setInterval(function(){b&&(function(){var e=(0,l.scrollTop)();if(a){M(a,e);var t=(0,l.ge)("mcont");if(t){var n=$(".BottomMenu__updateButton"),i=Math.max(t.scrollHeight,parseInt((0,l.getStyle)(t,"height"),10));if(w&&e)return;if(Math.abs(g-e)<=y)return;e>g+m&&e>y?(k(a),n&&n.classList.add(p),w=!0,setTimeout(function(){w=!1},_)):e+window.innerHeight<i&&(S(a),n&&n.classList.remove(p))}g=e}}(),b=!1)},250),(0,l.onBodyScroll)(i),addEvent(window,"touchend",r),(E=Array.from($$("input, textarea")||[])).forEach(function(e){addEvent(e,"blur",r)}),v=!0)}}function M(e,t){t<=A&&e&&e.classList.contains(u)?e.classList.add(d):e&&e.classList.remove(d)}function P(){return $(c)}function T(){(a=P())&&(S(a),M(a,(0,l.scrollTop)()))}onDOMReady(function(){C(),window.page.onChange(C),onBodyResize(T),addEvent(window,"orientationchange",T),addEvent(window,"blur",T)})},saGk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("nJnv"))&&a.__esModule?a:{default:a},r=n("DM2o");var o=window.isMVK?"mvk":"web",s={start:function(e,t){var n=this;if(t.stopPropagation(),t.preventDefault(),this.id=window.domData(e,"id"),this.id&&((0,r.statlogsValueEvent)("special_event","click",o,this.id),!this.timeoutHandle)){var a=Number(window.domData(e,"v"))||0;this.duration||(this.duration=Number(window.domData(e,"duration"))||0),this.duration&&(!this.animationData||!this.animationData.v||"number"==typeof this.v&&this.v!==a?(this.v=a,this._getAnimation().then(function(e){n.animationData=JSON.parse(e),n._play()})):this._play())}},_getAnimation:function(){var e=this;return new Promise(function(t){var n=new XMLHttpRequest;n.open("GET","/images/stickers/special/".concat(e.id,"/animation.json?v=").concat(e.v),!0),n.send(),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)}})},_play:function(){var e=this;this.frame||(this.frame=document.createElement("div"),this.frame.className="special_event_frame",document.body.appendChild(this.frame)),this.frame.style.display="block";var t=i.default.loadAnimation({container:this.frame,renderer:"svg",loop:!0,autoplay:!0,animationData:this.animationData});this.timeoutHandle=setTimeout(function(){t.stop(),t.destroy(),e.frame.style.display="none",e.timeoutHandle=null,(0,r.statlogsValueEvent)("special_event","showed",o,e.id)},this.duration)}};t.default=s},sc7o:function(e,t,n){"use strict";var a,i=(a=n("+cqQ"))&&a.__esModule?a:{default:a};window.uVK={onReady:(0,i.default)(),onResize:(0,i.default)(),onOrientationChange:(0,i.default)()},onDOMReady(function(){if(window.isNewMail&&document.body){uVK.onReady();var e=document.body.getAttribute("onresize"),t=document.body.getAttribute("onorientationchange");document.body.setAttribute("onresize","uVK.onResize(); ".concat(e)),document.body.setAttribute("onorientationchange","uVK.onOrientationChange(); ".concat(t))}})},seaN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SearchHeader=o,t.default=void 0;var a=n("n9zS"),i=n("NJ1W"),r=n("Q47q");function o(e){return{inner:[(0,i.Row)({inner:[(0,i.Col)({inner:[(0,i.Row)({inner:[(0,i.Col)({inner:[(0,r.Search)({header:!0})]}),(0,i.Offset)({small:!0}),(0,i.Col)({inner:[(0,a.Circle)({header:!0,size:20})],auto:!0})]})],flexColumn:!0})]})],class:"SkeletonSearchHeader",tag:"div"}}var s=o;t.default=s},sljx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StickersSettings=void 0;var a={autoplay:0,setAutoplay:function(e){this.autoplay=e},getAutoplay:function(){return a.autoplay}};t.StickersSettings=a},sn7E:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;s(n("bZ/P"));var a=s(n("29dZ")),i=s(n("Y6JH")),r=s(n("TYsd")),o=s(n("z9sQ"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.keyboard,n=e.msgId;return{class:"BotsKeyboard__main",inner:t.buttons.map(function(e){return function(e,t,n){return{class:"BotsKeyboard__row",inner:e.map(function(e){return function(e,t,n){var s,l=window.lang,u=e.action.type,d=o.default.class("BotsKeyboard__button",{primary:"primary"===e.color||"vkpay"===u,positive:"positive"===e.color,negative:"negative"===e.color},"--"),f=["uMailWrite._onKeyboardButtonClick","this","event",{action:c(c(JSON.stringify(e.action))),authorId:t.author_id,inline:t.inline,msgId:n}];s="vkpay"===u?[{class:"BotsKeyboard__buttonInner",inner:[r.default.wrap(l.mobile_mail_keyboard_label_vkpay),r.default.wrap("&nbsp;"),r.default.wrap("&nbsp;"),(0,i.default)("mail/bot_buttons","vkpay")]}]:"location"===u?[{class:"BotsKeyboard__buttonInner",inner:[{tag:"span",class:"BotsKeyboard__leadingIcon",inner:(0,i.default)("mail/bot_buttons","place_24")},r.default.wrap("&nbsp;"),{class:"BotsKeyboard__buttonLabelWrapped",inner:[r.default.wrap(l.mobile_mail_keyboard_label_location)]}]}]:"open_app"===u?[{class:"BotsKeyboard__buttonInner",inner:[{tag:"span",class:"BotsKeyboard__leadingIcon",inner:(0,i.default)("mail/bot_buttons","service_24")},r.default.wrap("&nbsp;"),{class:"BotsKeyboard__buttonLabelWrapped",inner:[r.default.wrap(e.action.label)]}]}]:"open_link"===u?[{class:"BotsKeyboard__buttonInner",inner:[{class:"BotsKeyboard__buttonLabelWrapped",inner:[r.default.wrap(e.action.label)]},r.default.wrap("&nbsp;"),(0,i.default)("mail/bot_buttons","open_link_16")]}]:[r.default.wrap(e.action.label)];return(0,a.default)({class:d,on_click:f,use_native_onclick:!0,inner:s,theme:"none",size:"normal",type:"button"})}(e,t,n)})}}(e,t,n)})}};function c(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;")}t.default=l},t7Ww:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalMenuBtn=function(e){var t=e.class?" ".concat(e.class):"";return(0,i.default)({url:e.url,class:"ModalMenu__btn ModalMenu__item".concat(t),theme:e.theme?e.theme:"none",size:e.size?e.size:"",inner:e.inner,on_click:e.onclick,use_native_onclick:!0,attrs:e.attrs})},t.default=void 0;var a=r(n("r/ag")),i=r(n("29dZ"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.attached?"ModalMenu--attached":"",n=window.lang,r=[];if(e.title&&r.push({class:"ModalMenu__title",inner:e.title}),e.body&&r.push({class:"ModalMenu__body",inner:e.body}),isArray(e.items)){var o=e.items.map(function(e){return e});r.push(o)}return e.close&&r.push((0,i.default)({class:"ModalMenu__btn ModalMenu__cancel",theme:"secondary",size:"large",inner:e.closeText?e.closeText:n.mobile_cancel,on_click:e.onClose?e.onClose:["ModalMenu.close","this"],use_native_onclick:!0})),(0,a.default)({class:"ModalMenu ".concat(e.class," ").concat(t),on_overlay_click_native:e.on_overlay_click?e.on_overlay_click:["ModalMenu.close","this"],content:r})};t.default=o},tMHi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audioUnmaskSource=function(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){var t,n,a=e.split("?extra=")[1].split("#"),o=""===a[1]?"":r(a[1]);if(a=r(a[0]),"string"!=typeof o||!a)return e;for(var s=(o=o?o.split(String.fromCharCode(9)):[]).length;s--;){if(n=o[s].split(String.fromCharCode(11)),t=n.splice(0,1,a)[0],!i[t])return e;a=i[t].apply(null,n)}if(a&&"http"===a.substr(0,4))return a}return e};var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",i={v:function(e){return e.split("").reverse().join("")},r:function(e,t){var n;e=e.split("");for(var i=a+a,r=e.length;r--;)~(n=i.indexOf(e[r]))&&(e[r]=i.substr(n-t,1));return e.join("")},s:function(e,t){var n=e.length;if(n){var a=function(e,t){var n=e.length,a=[];if(n){var i=n;for(t=Math.abs(t);i--;)t=(n*(i+1)^t+i)%n,a[i]=t}return a}(e,t),i=0;for(e=e.split("");++i<n;)e[i]=e.splice(a[n-1-i],1,e[i])[0];e=e.join("")}return e},i:function(e,t){return i.s(e,t^vk.id)},x:function(e,t){var n=[];return t=t.charCodeAt(0),each(e.split(""),function(e,a){n.push(String.fromCharCode(a.charCodeAt(0)^t))}),n.join("")}};function r(e){if(!e||e.length%4==1)return!1;for(var t,n,i=0,r=0,o="";n=e.charAt(r++);)~(n=a.indexOf(n))&&(t=i%4?64*t+n:n,i++%4)&&(o+=String.fromCharCode(255&t>>(-2*i&6)));return o}},tgcV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addStatic=c,t.preloadStaticForNavigation=function(e){var t=window.vk.stNavMap||{};for(var n in t){if(t.hasOwnProperty(n))if(new RegExp(n).test(e)){c(t[n]||{});break}}},t.initStaticManager=function(){o(),window.stManager={done:l,staticFiles:[],registerLoadedScript:r}};var a=n("j3An"),i=[];function r(e){window.stManager.staticFiles[e]=Promise.resolve()}function o(){window.vk&&window.vk.stFiles?(Object.keys(window.vk.stFiles).forEach(function(e){return r(e)}),window.vk.stFiles=[]):setTimeout(o,0)}function s(e,t){var n=window.stManager.staticFiles[e];return n||(e.includes(".js")?function(e,t){var n=e+"?"+t;if(e.includes("cmodules/mobile/b-"))return(0,a.loadScript)(n,function(t){t||(window.stManager.staticFiles[e]=Promise.resolve())}),Promise.resolve();var r=new Promise(function(t,r){(0,a.loadScript)(n,function(t){t&&(window.stManager.staticFiles[e]=null,r(t))}),i[e]=function(){t(),i[e]=null}}).catch(function(){return Promise.resolve()});return window.stManager.staticFiles[e]=r,r}(e,t):e.includes(".css")?function(e,t){var n=((0,a.supportsOnload)()?a.loadStyle:a.addStyleSheetOldBrowser)(e+"?"+t).catch(function(){return window.stManager.staticFiles[e]=null,Promise.resolve()});return window.stManager.staticFiles[e]=n,n}(e,t):Promise.resolve())}function l(e){i[e]&&i[e]()}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.all(Object.keys(e).map(function(t){return s(t,e[t])}))}},ti65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Msg__restoreInner=B,t.Msg__reply=N,t.Msg__authorName=W,t.Msg__replyAttach=V,t.Msg__replyLink=U,t.Msg__textPreview=j,t.Msg__attachPreview=F,t.Msg__gifWrapper=function(e,t){return a.default.html(A(),t,e)},t.Msg_makeReplyLink=L,t.Msg_detailed=function(e){var t=x(e),n=e.keyboard?z(e):"",i=(0,o.default)({mix:"msg__avatar",url:e.authorUrl,photos:[e.authorPhoto],size:40}),r=function(e){var t=window.lang,n=store.mail,a=n.msgs[e.id],i=n.peers[a.peerId],r="";if((0,u.isChatPeer)(a.peerId)){var o=(0,u.wrapCommunityMailUrl)("/mail?act=show&peer=".concat(a.peerId)),s='<a href="'.concat(o,'">').concat(i.title,"</a>");r=t.mobile_mail_message_to_chat.replace("{chat}",s)}return r}(e);return a.default.html(S(),i,e.authorUrl,e.authorName,r,e.date,t,n)},t.default=void 0;var a=d(n("bZ/P")),i=d(n("TYsd")),r=d(n("9y81")),o=d(n("KMpi")),s=d(n("u33z")),l=d(n("B+U2")),c=d(n("BoyB")),u=n("fdw3");function d(e){return e&&e.__esModule?e:{default:e}}function f(){var e=D(['\n    <div class="msg__keyboard">\n      ',"\n    </div>\n  "]);return f=function(){return e},e}function h(){var e=D(['\n    <a class="','"\n      href="','"\n      ',"\n      ",'\n      style="width: ',"px; height: ",'px;"\n    >\n      <img class="msg__stickerImg sticker_img" height="','" src="','">\n    </a>\n  ']);return h=function(){return e},e}function p(){var e=D(['\n    <div class="msg__stickerWrap">\n      ',"\n    </div>\n  "]);return p=function(){return e},e}function A(){var e=D(['\n    <div class="msg__gifWrapper">\n      <div style="padding-top: ','%;"></div>\n      <div class="msg__gifWrapperCont">',"</div>\n    </div>\n  "]);return A=function(){return e},e}function m(){var e=D(['\n    <a href="','" class="msg__replyLink" ',">\n      ","\n    </a>\n  "]);return m=function(){return e},e}function _(){var e=D(['\n    <div class="msg__replyAttach">',"</div>\n  "]);return _=function(){return e},e}function v(){var e=D(['\n    <div class="msg__bodyPreview">\n      ',"\n      ","\n    </div>\n  "]);return v=function(){return e},e}function g(){var e=D(['\n    <div class="msg__reply">\n      ','\n      <div class="msg__replyInner">\n        <div class="msg__replyHead">\n          <div class="msg__replyHeadRow">\n            <div class="msg__replyName">','</div>\n            <div class="msg__replyDate">','</div>\n          </div>\n        </div>\n        <div class="msg__replyBody">\n          ',"\n        </div>\n      </div>\n    </div>\n  "]);return g=function(){return e},e}function y(){var e=D(['\n    <div class="msg__info msg__restoreText msg__restoreText_remove">\n      ','\n      <span class="msg__restoreText msg__infoLink" ',">\n        ",'\n      </span>\n    </div>\n    <div class="msg__info msg__restoreText msg__restoreText_spam">\n      ','\n      <span class="msg__restoreText msg__infoLink" ',">\n        ","\n      </span>\n    </div>\n  "]);return y=function(){return e},e}function b(){var e=D(['\n    <span class="msg__edited">\n      <span class="msg__editedMiddot">&middot;</span><span class="msg__editedText">',"</span>\n    </span>\n  "]);return b=function(){return e},e}function w(){var e=D(['\n    <div class="msg__admin">\n      (<a class="msg__adminLink" href="','">',"</a>)\n    </div>\n  "]);return w=function(){return e},e}function E(){var e=D(['\n    <div class="msg__actions">\n      ',"\n    </div>\n  "]);return E=function(){return e},e}function k(){var e=D(['\n    <div class="msg_item','">\n      <div class="mi_header">\n        ','\n        <a class="msg__author" href="','">','</a>\n        <div class="msg__date">',"</div>\n        ","\n      </div>\n      ","\n      ","\n      ","\n      ","\n    </div>\n  "]);return k=function(){return e},e}function S(){var e=D(['\n    <div class="msg__detailed">\n      <div class="msg__detailedHead">\n        ','\n        <div class="msg__detailedInfo">\n          <div class="msg__detailedRow">\n            <a class="msg__detailedAuthor" href="','">','</a>\n            <span class="msg__detailedPeer">','</span>\n          </div>\n          <div class="msg__detailedRow">\n            <div class="msg__date">','</div>\n          </div>\n        </div>\n      </div>\n      <div class="msg__content">\n        <div class="msg__text">\n          ',"\n        </div>\n        ","\n      </div>\n    </div>\n  "]);return S=function(){return e},e}function C(){var e=D(['\n    <div class="msg_item _msg single_msg_item msg__text">\n      <div class="msg__giftMedia">',"</div>\n      ","\n    </div>\n  "]);return C=function(){return e},e}function M(){var e=D(['\n    <div class="msg_item _msg single_msg_item msg__text">\n      <div class="mi_cont">\n        <div class="mi_body">\n          ',"\n          ","\n          ","\n          ","\n        </div>\n      </div>\n    </div>\n  "]);return M=function(){return e},e}function P(){var e=D(["\n    ",'\n    <div class="msg__content">\n      <div class="msg__head">\n        <a class="msg__author" href="','">',"</a>\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n      </div>\n      ",'\n      <div class="msg__text">\n        ',"\n      </div>\n      ",'\n    </div>\n    <div class="msg__restore">\n      ',"\n    </div>\n  "]);return P=function(){return e},e}function T(){var e=D(['\n    <div class="','" ',">\n      ","\n    </div>\n  "]);return T=function(){return e},e}function D(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var I=function(e){var t=e.id,n=e.removed,i=e.service,l=function(e){var t=window.lang;if(e.service)return e.text;var n,i=(0,o.default)({mix:"msg__avatar",url:e.authorUrl,photos:[e.authorPhoto],size:40}),l=(0,r.default)({mix:"msg__check",icon:"check"}),c=(0,r.default)({mix:"msg__star",icon:"star",blue:!0}),u=!!e.attaches.gift,d=store.mail.msgs[e.id];d&&d.authorId===d.peerId&&(n=store.mail.peers[d.peerId]);var f,h=e.admin?(S=e.admin,a.default.html(w(),S.url,S.name)):"",p=e.removed?B(e.id):"",A=e.edited?O():"",m=e.pending||e.failed?"":'<div class="msg__date">'.concat(e.date,"</div>"),_=e.pending?'<div class="msg__pending"></div>':"",v=e.failed?'<div class="msg__error">'.concat(t.mobile_mail_send_error,"</div>"):"",g=e.channel?(b=e.id,k=(0,s.default)({class:"msg__actionForward",onClick:a.default.onClick("Msg._onActionClick","event","forward",b)}),a.default.html(E(),k)):"",y=u&&n?'<div class="msg__giftHead">'.concat(langSex(n.sex,t.mobile_mail_sent_gift),"</div>"):"";var b,k;var S;f=u?function(e){var t=e.text,n=e.attachesHTML;t&&(t='<div class="msg__giftText">'.concat(t,"</div>"));return a.default.html(C(),n,t)}(e):x(e);var M=e.keyboard?z(e):"";return a.default.html(P(),i,e.authorUrl,e.authorName,y,m,_,v,A,h,l,c,g,f,M,p)}(e),c=!i&&!(!e.attaches||!e.attaches.gift),u=a.default.class("msg",{id:t,service:i,unread:e.unread&&!e.failed,important:e.important,removed:!!n,spam:"spam"===n,pending:e.pending,failed:e.failed,gift:c}),d="";i||(d=e.pending||e.failed?a.default.onClick("Msg._onPendingClick","event","this",t,e.sendId||"",!!e.failed):a.default.onClick("Msg._onClick","event","this",t));return a.default.html(T(),u,d,l)};function x(e){var t,n,i=window.lang,r=e.text,s=0;e.attachesHTML?t=e.attachesHTML:e.attaches.sticker&&e.sticker?(n=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=Date.now(),c=Math.random(),u="".concat(l).concat(c),d="msg__sticker",f="";s&&(d+=" sticker_animation",f='\n      data-animation-path="'.concat(s,'"\n      data-uniq-id="').concat(u,'"\n      data-sticker-id="').concat(e,'"\n      data-loop-count="3"\n      ontouchstart="StickersAnimation.touchStartSticker(this);"\n      ontouchend="StickersAnimation.touchEndSticker(this);"\n    '));var p=a.default.onClick("Msg._onStickerClick","event","this",r,i);return a.default.html(h(),d,o,p,f,t,t,t,n)}(e.sticker.id,e.sticker.height,e.sticker.url),t=a.default.html(p(),n)):G(e)&&Object.keys(e.attaches).length&&(s+=1,t=H(F(e),!e.failed&&1===s));var l,c=e.forwards;c.length&&(G(e)&&q(c)?(s+=1,l=H(langNumeric(c.length,i.mobile_mail_N_forwards),!e.failed&&1===s)):l=(l=c.map(function(t){return function e(t,n,i){var r=window.lang;var s=store.mail;var l=s.forwards[t]||s.msgs[t];if(!l)return"";var c=s.members[l.authorId];var u=l.peerId;s.peers[u];var d=W(c,u,s.cur.userId);var f=l.edited;var h=c.avatar;var p=c.url;var A=d;var m=l.date;var _=l.text;var v=l.attachesHTML;var g=l.forwards;var y=l.reply;var b=(0,o.default)({mix:"mi_author_photo",photos:[h],size:36});var w=f?O():"";var E;if(i>0){for(var S=[],C=g.length,M=0;M<C;M++){var P=e(g[M],n,i-1);S.push(P)}E=S.join("")}else if(g.length){var T=langNumeric(g.length,r.mobile_mail_N_forwards);E='<a href="/mail?act=msg&id='.concat(n,'" class="msg__fwdsLink">').concat(T,"</a>")}v&&(v=v.replace(/%top_msg_id%/g,n),v='<div class="mi_medias">'.concat(v,"</div>"));E&&(E='<div class="mi_forwarded">'.concat(E,"</div>"));_&&(_='<div class="mi_text">'.concat(_,"</div>"));var D=y?R(y,n):"";var I=!!l.attaches.gift;var x=I?" msg__forwardGift":"";return a.default.html(k(),x,b,p,A,m,w,D,_,v,E)}(t,e.id,e.maxDepth-1)})).join(""));var d,f=e.reply;f&&(G(e)&&(q([f])||!function(e){var t=store.mail;return(0,u.isForwardedMessageId)(e)?!!t.replies[e]:!!t.pendingReplies[e]}(f))?(s+=1,d=H(i.mobile_mail_in_reply_to,!e.failed&&1===s)):d=R(f,e.id));return t&&(t='<div class="mi_medias">'.concat(t,"</div>")),l&&(l='<div class="mi_forwarded">'.concat(l,"</div>")),r&&(r='<div class="mi_text">'.concat(r,"</div>")),a.default.html(M(),d,r,t,l)}function O(){var e=window.lang;return a.default.html(b(),e.mobile_mail_edited_short)}function B(e){var t=window.lang,n=a.default.onClick("Msg._onRestoreClick","event",e);return a.default.html(y(),t.mobile_msg_mail_message_deleted,n,t.mobile_restore,t.mobile_msg_mail_message_marked_as_spam,n,t.mobile_restore)}function L(e,t,n){var a="/mail?act=msg";return t?(a=(0,u.concatValues)(a,"&id=".concat(t,"&reply=true")),n&&(a=(0,u.concatValues)(a,"&reply_id=".concat(n)))):a=(0,u.concatValues)(a,"&id=".concat(e)),(0,u.wrapCommunityMailUrl)(a)}function R(e,t){var n=store.mail.forwards[e]||store.mail.msgs[e],a=store.mail.replies[e]||store.mail.pendingReplies[e];return U(N(n,W(store.mail.members[n.authorId],n.peerId,store.mail.cur.userId),a.preview_url),a.msg_id,t,e)}function N(e,t,n){var i=e.body?j(e.body):V(e),r="";return(e.attaches.photo||e.attaches.video||e.attaches.doc)&&(r=n?'<div class="msg__replyPreview"\n        style="background-image: url('.concat(n,')"></div>'):e.attaches.doc?'<div class="msg__replyPreview msg__replyPreview_icon">\n        <div class="msg__replyPreviewDoc"></div>\n      </div>':'<div class="msg__replyPreview msg__replyPreview_empty"></div>'),a.default.html(g(),r,t,e.date,i)}function j(e){return e=e.replace(/<br>/g,"\n"),e=(0,u.mailReplaceDomainMentions)(e,"@$3"),e=(0,u.mailReplaceMentions)(e,"$3"),e=(0,u.emojiToHTML)(e)}function F(e){var t,n=window.lang,a=Object.keys(e.attaches),i=a.length;if(i>1){for(var r=0,o=a.length,s=0;s<o;s++)r+=0|e.attaches[a[s]];t=langNumeric(r,n.mobile_mail_attachments)}else if(1===i){var l=a[0],c=e.attaches[l];if(1===c)switch(l){case"poll":t=n.mobile_mail_added_poll;break;case"article":t=n.global_article;break;case"photo":t=n.mobile_mail_added_photo;break;case"video":t=n.mobile_mail_added_video;break;case"audio":t=n.mobile_mail_added_audio;break;case"audio_playlist":t=n.mobile_mail_added_audio_playlist;break;case"money_transfer":t=n.mobile_mail_added_money_transfer;break;case"podcast":t=n.mobile_mail_added_podcast;break;case"money_request":t=n.mobile_mail_added_money_request;break;case"vkpay":t=n.mobile_mail_added_vkpay;break;case"story":t=n.mobile_mail_added_story;break;case"graffiti":t=n.mobile_mail_added_graffiti;break;case"audiomsg":t=n.mobile_mail_added_audiomsg;break;case"doc":t=n.mobile_mail_added_doc;break;case"geo":case"map":t=n.mobile_mail_added_geo;break;case"wall":t=n.mobile_mail_added_wall;break;case"wall_reply":t=n.mobile_mail_added_wall_reply;break;case"gift":t=n.mobile_mail_added_gift;break;case"link":t=n.mobile_mail_added_link;break;case"sticker":t=n.mobile_mail_added_sticker;break;case"market":t=n.mobile_mail_added_market_item;break;case"call":t=n.mobile_mail_added_call}else if(c>1)switch(l){case"photo":t=langNumeric(c,n.mobile_mail_added_photos);break;case"video":t=langNumeric(c,n.mobile_mail_added_videos);break;case"audio":t=langNumeric(c,n.mobile_mail_added_audios);break;case"doc":t=langNumeric(c,n.mobile_mail_added_docs)}}var u=e.forwards&&e.forwards.length||e.hasReply;return!t&&u&&(t=e.hasReply?langNumeric(1,n.mobile_mail_messages):langNumeric(e.forwards.length,n.mobile_mail_N_forwards)),t||""}function H(e,t){var n;return t&&(n=(0,c.default)({large:!0}),n='<div class="msg__loading">'.concat(n,"</div>")),a.default.html(v(),e,n)}function V(e){var t=F(e);return a.default.html(_(),t)}function U(e,t,n,i){var r=L(t,n,i),o=a.default.onClick("Msg._onReplyClick","event",t,n,i);return a.default.html(m(),r,o,e)}function z(e){var t=i.default.render((0,l.default)({keyboard:e.keyboard,msgId:e.id}));return a.default.html(f(),t)}function W(e,t,n){return t>2e9?e.name:t>-2e9&&t<0?e.id===n?e.firstName:e.name:e.firstName}function q(e){for(var t=store.mail.msgs,n=store.mail.members,a=store.mail.forwards,i=e.length,r=0;r<i;r++){var o=e[r];if((0,u.isForwardedMessageId)(o)){var s=a[o];if(!s)return!0;if(!s.authorId||!n[s.authorId])return!0}else{var l=t[o];if(!l)return!0;if(!l.authorId||!n[l.authorId])return!0}}return!1}function G(e){return e.pending||e.failed||e.waiting}t.default=I},"tlL+":function(e,t,n){"use strict";window.FriendsRecommendedSlider={init:function(){window.cur&&(w($(".".concat(A))),cur.destroy.push(function(){g=null,y=null,b=null}))},hideRecommended:function(e,t,n,o){var s=gpeByClass(r,e);if(!s)return o&&cancelEvent(o);var l=S(s),c=domData(s,"code")||domData(l,"code"),u=domData(l,"ref");!function(e){var t=S(e);remove(e),b=null,y=null,E().length||k(t)}(s);var d=a+obj2qs({act:i,hash:n,id:t,track_code:c,ref:u});return ajax.post(d,{_ajax:1}),o&&cancelEvent(o)},hideBlock:k,acceptFriend:function(e,t,n,a){if(hasClass(o,e))return a&&cancelEvent(a);var i=gpeByClass(r,e),l=S(e),f=domData(i,"code")||domData(l,"code"),h=domData(l,"ref");return addClass(s,e),lockButton(e),Friends.accept(t,n,"user_rec",0,h,f,function(t){var n=t||getLang(c);unlockButton(e),removeClass(s,e),addClass(o,e),e.textContent=n,function(e){var t=function(e){var t=domCA(e,p);if(!t)return;return geByClass1(u,t)}(e);addClass(d,t)}(e)},function(t,n){t===v&&nav.hard_go(n),removeClass(s,e),unlockButton(e)}),a&&cancelEvent(a)},onOpenUser:function(e){var t=gpeByClass(r,e);if(!t)return;var n=S(t),a=domData(t,"uid")||"",i=domData(t,"code")||domData(n,"code"),o=domData(n,"ref");FriendsStats.log(FriendsStats.EVENTS.EVENT_OPEN_USER,{uid:a,ref:o,trackCode:i})},onScroll:throttle(w,50)};var a="/friends",i="hide_possible",r="prettyCard",o="prettyCard__button_accepted",s="prettyCard__button_loading",l="recommended_carousel",c="mobile_friends_feed_recom_got_notification",u="prettyCard__closeButton",d="prettyCard__closeButton_hidden",f="Slider__line",h="Slider__scroll",p=".prettyCard",A="friendsRecommendedSliderWrap",m=500,_=3,v=2,g=null,y=null,b=null;function w(e){if(!g&&e&&(g=S(e)),g&&(g._lastScroll=g.scrollLeft,!e.ajaxIsRunning)){var t=g.scrollLeft,n=function(){if(y)return y;if(!g)return{};var e=getSize(g)[0],t=getX(g),n=E(),a=getX(n[0])-t,i=getSize(n[0])[0],r=getX(n[1])-t-a-i,o=Math.floor(i/3);return y={width:e,itemWidth:i+r,leftMargin:a,part:o,scrollWidth:g.scrollWidth}}(),i=Math.max(0,Math.floor((t-n.leftMargin)/n.itemWidth)),r=Math.max(0,Math.floor((t+n.width-n.leftMargin)/n.itemWidth));i*n.itemWidth+n.itemWidth-n.part<t&&i++,r*n.itemWidth+n.part>t+n.width&&r--;var o=E();i=Math.max(0,i),r=Math.min(o.length,r);for(var s=domData(g,"ref"),c=domData(g,"code"),u=i;u<=r;u++){var d=o[u];if(d&&!d.viewed){d.viewed=!0;var h=domData(d,"uid")||"",p=domData(d,"code")||c;FriendsStats.log(FriendsStats.EVENTS.EVENT_VIEW_USER,{uid:h,pos:u,ref:s,trackCode:p})}}!e.allLoaded&&t+n.width>=n.scrollWidth/2&&function(e){(e=S(e)).currentPage=e.currentPage||1;var t=domData(e,"next")||"";if(e.allLoaded||!t||e.currentPage++>=_)return void(e.allLoaded=!0);var n=domData(e,"code")||"",i=domData(e,"ref")||"",r=intval(domData(e,"friend-id")),o=a+obj2qs({act:l,next:t,ref:i,friendId:r,track_code:n});e.ajaxIsRunning=!0,ajax.post(o,{_ajax:1},{onDone:function(t,n){if(t){var a=geByClass1(f,e),i=cdf(t);append(i,a),y=null,b=null}domData(e,"next",n||null),e.allLoaded=!n,e.ajaxIsRunning=!1},onFail:function(){setTimeout(function(){return e.ajaxIsRunning=!1},m)}})}(e)}}function E(){return b||(g&&(b=geByClass(r,g)),b||[])}function k(e,t){var n=gpeByClass(A,e);if(!n)return t&&cancelEvent(t);var a=g;if(!a&&e&&(a=S(n)),a){var i=domData(a,"code"),r=domData(a,"ref");FriendsStats.log(FriendsStats.EVENTS.EVENT_HIDE_BLOCK,{ref:r,trackCode:i})}if(remove(n)){var o=nav.getQuery();delete o.recs,nav.go(location.pathname+obj2qs(o),!1,{replace:!0,push_only:!0})}return t&&cancelEvent(t)}function S(e){var t;return hasClass(e,h)?t=e:(t=geByClass1(h,e))||(t=gpeByClass(h,e)),t}},tqgD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"QRPhotoPosting",{enumerable:!0,get:function(){return a.QRPhotoPosting}}),Object.defineProperty(t,"QRPhotoPostingButton",{enumerable:!0,get:function(){return a.QRPhotoPostingButton}}),Object.defineProperty(t,"show",{enumerable:!0,get:function(){return i.show}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return i.close}}),Object.defineProperty(t,"back",{enumerable:!0,get:function(){return i.back}}),Object.defineProperty(t,"getQRPhotoButton",{enumerable:!0,get:function(){return i.getQRPhotoButton}}),Object.defineProperty(t,"appendQRPhotoButton",{enumerable:!0,get:function(){return i.appendQRPhotoButton}});var a=n("IrFw"),i=n("xwOv");window.QRPhotoPosting=a.QRPhotoPosting,extend(a.QRPhotoPosting,{show:i.show,close:i.close,back:i.back,getQRPhotoButton:i.getQRPhotoButton,QRPhotoPosting:a.QRPhotoPosting,QRPhotoPostingButton:a.QRPhotoPostingButton,appendQRPhotoButton:i.appendQRPhotoButton})},tqja:function(e,t,n){"use strict";var a,i,r=(a="_locked",i={1:"SEND_EMAIL",2:"CALL_PHONE",6:"OPEN_GROUP_APP"},{processButton:function(e,t,n,r,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.classList.contains(a))return!1;var l=!0;return i[t]&&(l=!1),e.classList.add(a),ajax.post("/groups",{_ajax:1,act:"proxy_cta_button",action:t,resource:n,group_id:r,hash:o},{onDone:function(){if(e.classList.remove(a),s)s();else if(l){var t=attr(e,"href");nav.go(t)}}}),!l}});window.GroupActionButton=r},tsGB:function(e,t,n){"use strict";n("UxAg");var a=n("jk6M"),i=n("OcsD"),r=function(){var e={},t={},n=null,c=!1,u={},d={},f={},h=null;function p(){if(n){var t=[],a=!1;if(each(geByClass("_unread"),function(){var e=+attr(this,"data-id");e&&t.push(e),a=r.getPeerByMsg(e),replaceClass("_unread","_read",this)}),a){var i=ge("messages"+a);i&&e[a]&&(e[a].messages=val(i))}t.length&&r.sendMarkAsRead(n,t)}}function A(e,t){t?(addClass("lvi",e),toggleClass("mlvi",e,!!a.mobPlatforms[t])):(removeClass("lvi",e),removeClass("mlvi",e))}function m(e){(0,e.updater)(document.body),each(e.caches,function(t,n){var a=n.storage,i=n.getter,r=function(e,t){var n,a=t.split("."),i=a.length,r=e;for(n=0;n<i;n++)if(!(r=r[a[n]]))return null;return r}(a,i);if(r){var o="string"==typeof r;o&&(r=ce("div",{innerHTML:r})),e.updater(r),function(e,t,n){var a,i,r=t.split("."),o=r.length-1,s=e;for(i=0;i<o;i++)s=s[a=r[i]]||(s[a]={});s[r[o]]=n}(a,i,o?r.innerHTML:r)}})}return!window.isNewMail&&window.nav&&window.nav.onBeforeGo(function(e,t,n){if(nav.getQuery("community")&&(!n||!n.ignore_cur_process)&&"/mail"===("string"==typeof e?e:attr(e,"href")||attr(e,"data-href")))return nav.go(e,t,{ignore_cur_process:!0}),!0}),!window.isNewMail&&window.nav&&window.nav.onBeforeGo(function(){if(nav.getQuery("community"))var e=ajax.post("/",{_ajax:1,act:"ping"},{onDone:function(){try{var t=JSON.parse(e.response),n=t&&t[1]&&t[1][2];r.actualizeMessagesCornerCounter(n)}catch(e){}}})}),{wrapLinks:l,wrapMention:s,onShowDialogFromCache:(0,i.se)(),onShowWritePageFromCache:(0,i.se)(),onShowDialogsPageFromCache:(0,i.se)(),onMessagesRepainted:(0,i.se)(),init:function(t,i){var o=window.im;window.cur.destroy.push(function(){AudioMessagePlayer.detachPlayer()}),i&&(cur.ref=i.ref,cur.refSource=i.ref_source),t&&(n=t,i&&(r.saveDialog(i,t),e[t])),c||(c=!0,addEvent(document,a.isTouch?"touchstart":"mousedown",p)),setTimeout(function(){o.on()})},unpinMessage:function(t){m({caches:[{storage:e,getter:t+".write_form"}],updater:function(e){e.$$(".cm_unpin").forEach(hide),e.$$(".head_actions_wrap").forEach(function(e){return e.classList.remove("head_actions_has_pinned")}),e.$$(".pinnedMsg_peer_".concat(t)).forEach(function(e){return e.classList.add("pinnedMsg_hidden")})}})},pinMessage:function(t,n){m({caches:[{storage:e,getter:t+".write_form"}],updater:function(e){e.$$(".cm_unpin").forEach(show),e.$$(".head_actions_wrap").forEach(function(e){return e.classList.add("head_actions_has_pinned")}),$$(".pinnedMsg_peer_".concat(t)).forEach(function(e){return e.outerHTML=n})}})},clear:function(){nav.clear();var i=window.im;e={},t={},u={},n=null,removeEvent(document,a.isTouch?"touchstart":"mousedown",p),c=!1,i.off()},send:function(e,t){if(mediaUpload&&!mediaUpload.checkUploading())return!1;var n=ajax.click(e,extend({clear:!0,save:!0},Dialog),{lock:!0,url_params:{ref_source:cur.refSource,ref:cur.ref}});return cur.ref=void 0,cur.refSource=void 0,n},save:function(t){each(t,function(t,n){e[t]&&n.last_msg==e[t].last_msg&&delete n.messages,r.saveDialog(n,t)})},saveDialog:function(t,n){e[n]||(e[n]={});var a=e[n];extend(a,t),a.msgs&&each(a.msgs,function(e,t){u[t]=n})},getPeerByMsg:function(e){return u[e]||!1},cacheDialogsPage:function(){nav.getQuery("community")&&nav.getQuery("tab")||(t.page=val("m"),nav.getQuery().act?t.link=o("/mail"):t.link=nav.cur)},keyup:function(e,t,n){var a=h||"",i=e.value||"";a.length==i.length&&a==i||(r.myTyping(t,n),h=i)},myTyping:function(e,t){if(!(e<=-2e9)){var n=vkNow();f[e]&&n-f[e]<5e3||(f[e]=n,ajax.post("/mail",{_ajax:1,act:"typing",peer:e,hash:t,community:nav.getQuery("community")}))}},typing:function(e,t){t=t||e;e>2e9?(d[e]||(d[e]={}),d[e][t]=vkNow()):d[e]=vkNow(),r.updateTyping(e)},updateTyping:function(e){var t=function(e,t){return e.getAttribute&&e.getAttribute(t)},n=window.lang,a=ge("dialog_near"+e),i=geByClass1("di_current_peer",a),o=geByClass1("di_typing",a);if(a){var s=[],l=vkNow();if(e>2e9)each(d[e]||{},function(e,n){t(o,"data-u"+e)&&n&&l-n<6e3&&s.push(e)});else{var c=d[e];t(o,"data-u"+e)&&c&&l-c<6e3&&s.push(e)}if(s.length){if(1==s.length){var u=s[0],f=t(o,"data-u"+u),h=t(o,"data-s"+u);val(o,'<i class="i_typing"></i>'+(n.mobile_mail_typing[h]||"").replace("{user}",f))}else{each(s,function(e,n){s[e]=t(o,"data-u"+n)});var p=s.pop();val(o,'<i class="i_typing"></i>'+(n.mobile_mail_multi_typing||"").replace("{users}",s.join(", ")).replace("{last_user}",p))}i.offsetWidth&&setStyle(o,"minWidth",i.offsetWidth),addClass("di_typing_now",a),setTimeout(function(){addClass("di_typing_animated",a)},10),setTimeout(function(){r.updateTyping(e)},2e3)}else val(o,""),setStyle(o,"minWidth",0),removeClass("di_typing_animated",a),removeClass("di_typing_now",a)}},updateOnline:function(t,n){var a=ge("messages"+t);if(a&&remove(geByClass1("di_activity",a)),each(geByClass("_lv"+t,"mcont"),function(e,t){A(t,n)}),e[t]){if(e[t].write_form){var i=ce("div",{innerHTML:e[t].write_form});each(geByClass("_lv"+t,i),function(e,t){A(t,n)}),e[t].write_form=val(i)}if(e[t].messages){i=ce("div",{innerHTML:e[t].messages});remove(geByClass1("di_activity",i)),e[t].messages=val(i)}}},updateImportantMessages:function(n,a,i){m({caches:[{storage:t,getter:"page"},{storage:nav.page_get(o("/mail")),getter:"html"}],updater:function(e){var t=geByClass1("dialogs_filter_button_important",e);if(t){var n=intval(val(t))+i;val(t,n),toggleClass("dialogs_filter_without_important",geByClass1("dialogs_filter",e),0===n)}}}),m({caches:[{storage:e,getter:n+".messages"}],updater:function(e){var t=geByClass1("_msg"+a,e);t&&toggleClass("msg_item_important",t,1===i)}})},updateImportantDialog:function(e,n){nav.getQuery("community")&&m({caches:[{storage:t,getter:"page"},{storage:nav.page_get(o("/mail")),getter:"html"}],updater:function(t){var a=geByClass1("_peer".concat(e),t);a&&toggleClass("dialog_item_important",a,n)}})},markAsListened:function(t){var a=+t.getAttribute("data-msg");if(a&&n){var i=e[n];i&&i.hash&&ajax.post("/mail",{_ajax:1,act:"listen_audiomsg",msg_id:a,hash:i.hash},{onDone:function(){var e=$$('.audio-msg-track[data-msg="'.concat(a,'"]'));if(e&&(e.forEach(function(e){e.closest(".im_msg_audiomsg").classList.add("im_msg_audiomsg_listened")}),i&&i.messages)){var t=ce("div",{innerHTML:i.messages}),n=geByClass1("_msg"+a,t),r=$('.audio-msg-track[data-msg="'.concat(a,'"]'),n);r&&r.closest(".im_msg_audiomsg").classList.add("im_msg_audiomsg_listened"),i.messages=val(t)}}})}},sendMarkAsRead:function(t,n){isArray(n)||(n=[n]);var a=e[t];a&&a.hash&&ajax.post("/mail",{_ajax:1,act:"mark_read",peer:t,msgs:n.join(","),hash:a.hash,community:nav.getQuery("community")},{onDone:function(e){e&&each(n,function(e,n){r.markAsRead(t,n)})}})},markAsRead:function(t,n){window.im;var a=ge("messages"+t);if(a){var i=geByClass1("_msg"+n,a);hasClass("_read",i)||removeClass("mi_unread",i);var r=e[t];if(r&&r.messages){var o=ce("div",{innerHTML:r.messages});i=geByClass1("_msg"+n,o);hasClass("_read",i)||removeClass("mi_unread",i),r.messages=val(o)}}},markPeerAsRead:function(n,a,i){var r=ge("messages"+n);if(r&&(each(geByClass("msg_item",r),function(){if(!i==!hasClass("_unread",this))return!0;+attr(this,"data-id")<=a&&!hasClass("_read",this)&&removeClass("mi_unread",this)}),(u=e[n])&&u.messages)){var s=ce("div",{innerHTML:u.messages});each(geByClass("msg_item",s),function(){if(!i==!hasClass("_unread",this))return!0;+attr(this,"data-id")<=a&&!hasClass("_read",this)&&removeClass("mi_unread",this)}),u.messages=val(s)}var l=ge("dialogs"),c=i?"di_unread_outbox":"di_unread_inbox";if(l)(u=geByClass1("_peer"+n,l))&&hasClass(c,u)&&(removeClass(c,u),remove(geByClass1("di_unread_cnt",u)));else if(t.page){var u;s=ce("div",{innerHTML:t.page});(u=geByClass1("_peer"+n,s))&&hasClass(c,u)&&(removeClass(c,u),remove(geByClass1("di_unread_cnt",u))),t.page=val(s)}m({caches:[{storage:nav.page_get(o("/mail")),getter:"html"}],updater:function(e){var t=geByClass1("_peer"+n,e);t&&hasClass(c,t)&&(removeClass(c,t),remove(geByClass1("di_unread_cnt",t)))}})},markAsDeleted:function(t,n){var a=ge("messages"+t);if(a){remove(geByClass1("_msg"+n,a));var i=e[t];if(i&&i.messages){var r=ce("div",{innerHTML:i.messages});remove(geByClass1("_msg"+n,r)),i.messages=val(r)}}ajax.click(o(nav.path),extend({no_scroll:!0},Dialogs))},addMessage:function(t,n,a,i){if(window.isNewNavigation||nav.clear(),t<2e9?delete d[t]:d[t]&&delete d[t][a],r.updateTyping(t),!0!==i){if(t&&n&&(u[n]=t),!geByClass1("_msg"+n)){var s=e[t];if(s&&s.messages){s.msgs&&s.msgs.push(n);var l=ce("div",{innerHTML:s.messages});(f=geByClass1("di_activity",l))?(after(cdf(i),f),s.messages=val(l)):s.messages=i+s.messages,(c=ge("messages"+t))&&(val(c,s.messages),r.onMessagesRepainted(!0))}else{var c,f;if(c=ge("messages"+t))(f=geByClass1("di_activity",c))?after(cdf(i),f):val(c,i+val(c))}}}else if(ge("dialogs")&&"/mail"==nav.path){var h=nav.getQuery();h.act||h.offset||h.q||ajax.click(o(nav.path),extend({no_scroll:!0},Dialogs))}},replaceMessage:function(t,n,a,i){var r=ge("messages"+t),o=e[t];if(o&&o.messages){var s=ce("div",{innerHTML:o.messages}),l=geByClass1("_msg"+n,s);l&&(l.outerHTML=i),o.messages=val(s),val(r,o.messages)}else geByClass1("_msg"+n).outerHTML=i},getMsgHTML:function(t,n,a,i,s,l,c,u){var d=window,f=d.vk,h=d.lang,p=2&n?f.id:c&&c.from||a;if(!p)return!1;if(!ge("messages"+a))return!0;if(c.attach1||c.fwd||c.geo||c.emoji)return!1;if(c.source_act)return!1;if(!e[a]||!e[a].hash)return!1;var A="_u"+p,m=geByClass1(A,"mcont","a"),_=stripTags(attr(m,"data-name")||val(m)||""),v=getHref(m),g=geByClass1(A,"mcont","img"),y=g&&g.src||"";if(!_||!v||!y)return!1;a=intval(a),t=intval(t),s=s&&-1==s.toString().indexOf(" ... ")&&a<2e9?s:"";var b,w,E,k=1&n?" mi_unread":"";return!(2&n)&&1&n&&(k+=k?" _unread":""),l=r.wrapLinks(l,n),l=r.wrapMention(l),'<a name="msg{{msgId}}"></a><div  class="msg_item _msg{{msgId}}{{msgClass}}"  data-id="{{msgId}}"  onclick="return MessagesActions.onMessageClick(event);">  <div class="mi_iwrap">    <a class="al{{cl}}" href="{{href}}">      <img src="{{photo}}" class="mi_img {{cl}}" />    </a>  </div>  <div class="mi_cont">    <div class="mi_head">      <a class="mi_date" href="'.concat(o("/mail?act=msg&id={{msgId}}").replace(/\&/g,"&amp;"),'">        {{time}}      </a>      {{edited}}\n      <a class="mi_author al{{cl}} {{cl}}" href="{{href}}" data-name="{{dataName}}">        {{name}}      </a>    </div>    <div class="mi_body">      {{mi_title}}      <div class="mi_text">{{text}}</div>    </div>  </div></div>').replace(/{{msgId}}/g,t).replace(/{{cl}}/g,A).replace(/{{href}}/g,v).replace("{{msgClass}}",k).replace("{{edited}}",u?'<span class="mi_edited">'.concat(h.mobile_mail_edited,"</span>"):"").replace("{{photo}}",y).replace("{{time}}",(b=new Date(1e3*i),w=b.getHours(),E=b.getMinutes(),w+":"+(E<10?"0":"")+E)).replace("{{dataName}}",escapeAttr(_)).replace("{{name}}",_.split(" ").shift()).replace("{{mi_title}}",s?'<div class="mi_title">'+s+"</div>":"").split("{{text}}").join(l)},updateStickers:function(){var t=window.cur,a=window.post,i=e[n];if(i){var r=i.write_form?(t.sticker_panel||"").split("mail-0").join("mail"+n):"",o=ge("stickers_panel");o&&(replace(cdf(r),o),o=null,a.stickersInit())}},showDialog:function(a,i,o){var s=window.cur,l=window,c=l.MessagesActions,u=l.Mention,d=l.Dialog,f=window.post;if(c.hasFwdMessages())return c.attachFwdMessages(i),!1;t.scroll_top=scrollTop();var p=e[i];if(p){var A=ce("div",{innerHTML:val("m")}),m=geByClass1("mhb_back",A);if(m&&p.header){var _=ce("div");val(_,p.header),before(_.firstElementChild,m),remove(m)}var v=p.write_form?(s.sticker_panel||"").split("mail-0").join("mail"+i):"";val(geByClass1("pcont",geByClass1("mcont",A)),p.write_form+v+(i?'<div id="messages'+i+'" class="messages bl_cont">'+(p.messages||"")+'<div id="al_loading"></div></div>':"")),val("m",A.innerHTML),f.stickersInit(),ajax.refreshLinks(p.fv_link,p.app_link),alLoadingFix(),n=i,p;var g=getHref(a);nav.go(g,null,{push_only:!0,no_push:o}),i?(h=null,r.updateTyping(i),ajax.click(g,extend({save:i},d),{scroll:!0})):r.onShowWritePageFromCache(!0),r.onShowDialogFromCache(!0),scrollTop(0,10)}else nav.al_go(p&&p.cur_link||getHref(a)||nav.cur);nav.getQuery("community")&&"unread"===nav.getQuery("ctab")&&removeClass("al_back",geByClass1("mhb_back"));var y=geByClass1("MentionContainer"),b=parseJSON(attr(y,"data-mentions"))||[];return b.length&&u.init({url:!1,appendTo:y,defaultItems:b,items:b,preferDomain:!0}),AudioMessagePlayer.events.on("listened",r.markAsListened),!1},backToDialogs:function(e){if(t.page)nav.go(t.link,null,{push_only:!0,no_push:e}),ajax.click(t.link,extend({no_scroll:!0},Dialogs)),val("m",t.page),ajax.refreshLinks(attr("fv_link","href")||attr("fv_link","data-href"),"vkontakte://vk.com/mail"),n=null,scrollTop(t.scroll_top||0),r.onShowDialogsPageFromCache(!0);else{var a=o(t.link||"/mail");nav.go(a,null,{push_only:!0,no_push:e}),nav.al_go(a)}},actualizeMessagesCornerCounter:function(e){m({caches:[{storage:t,getter:"page"},{storage:nav.page_get(o("/mail")),getter:"html"}],updater:function(t){var n=geByClass1("mhi_notify",t),a=geByClass1("mh_notify_counter",n);a||(a=ce("em",{className:"mh_notify_counter"}),append(a,n)),e?a.innerText=e:n.innerHTML="&nbsp;"}})}}}();function o(e){var t=window.nav.getQuery(),n=t.community,a=t.ctab,i=n&&-1===e.indexOf("community=")?"community=".concat(n):"",r=n&&a&&-1===e.indexOf("ctab=")?"&ctab=".concat(a):"";return i?e+(e.indexOf("?")>=0?"&":"?")+i+r:e}function s(e){return e.replace(/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,function(e,t,n,a,i){return'<a href="/'.concat(t+n,'" class="mem_link">').concat(i,"</a>")})}function l(e,t){var n=32768&t;return e=(e=e.replace(/([a-zA-Z\-_\.0-9]+@[a-zA-Z\-_0-9]+\.[a-zA-Z\-_\.0-9]+[a-zA-Z\-_0-9]+)/g,function(e){return'<a href="mailto:'+e+'">'+e+"</a>"})).replace(/(https?:\/\/)?(([A-Za-zА-Яа-яЁё0-9@][A-Za-zА-Яа-яЁё0-9@\-\_\.]*[A-Za-zА-Яа-яЁё0-9@])(\/([A-Za-zА-Яа-я0-9@\-\_#%&?+\/\.=;:~]*[^\.\,;\(\)\?<\&\s:])?)?)/gi,function(){var e=arguments[3],t=arguments[2],a=arguments[0],i=arguments[1]||"http://";if(-1==e.indexOf(".")||-1!=e.indexOf(".."))return a;var r=e.split(".").pop();if(r.length>7||-1==indexOf("place,camera,info,name,academy,aero,arpa,coop,media,museum,mobi,travel,xxx,asia,biz,com,net,org,gov,mil,edu,int,tel,ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,bd,be,bf,bg,bh,bi,bj,bm,bn,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,ck,cl,cm,cn,co,cr,cu,cv,cx,cy,cz,de,dj,dk,dm,do,dz,ec,ee,eg,eh,er,es,et,eu,fi,fj,fk,fm,fo,fr,ga,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gu,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,il,im,in,io,iq,ir,is,it,je,jm,jo,jp,ke,kg,kh,ki,km,kn,kp,kr,kw,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,na,nc,ne,nf,ng,ni,nl,no,np,nr,nu,nz,om,pa,pe,pf,pg,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,ru,rs,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,um,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,ye,yt,yu,za,zm,zw,рф,укр,сайт,онлайн,срб,cat,pro,local".split(","),r))return a;if(-1!=a.indexOf("@"))return a;try{a=decodeURIComponent(a)}catch(e){}return a.length>55&&(a=a.substr(0,53)+".."),a=htsc(a),!n&&e.match(/^([a-zA-Z0-9\.\_\-]+\.)?(vkontakte\.ru|vk\.com|vkadre\.ru|vshtate\.ru|userapi\.com|vk\.me)$/)?'<a href="'+(i+(t=replaceEntities(t).replace(/([^a-zA-Z0-9#%;_\-.\/?&=\[\]])/g,encodeURIComponent))).replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'">'+a+"</a>":'<a href="/away?to='+encodeURIComponent(i+replaceEntities(t))+'" target="_blank">'+a+"</a>"})}window.mail=r,window.makeUrl=o},"u+Ht":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={rollback:{onDone:function(e){var t=e.html,n=e.post;e.hash;cur.restored=0;var a=ge("".concat(n,"__message-archived"));if(t){var i="".concat(n,"__message-rollback"),r=ce("div",{className:["post_message_item",a.className].join(" "),innerHTML:t,id:i});hide(a),ge(r)||after(r,a)}else{var o=ge("".concat(n,"__message-rollback"));show(a),remove(o)}}},set:{onStart:function(){var e=this.link;e.classList.contains("wia_item")&&addClass(e,"wia_item--loading")},onDone:function(e){var t=e.html,n=e.post,a=e.restored,i=e.rollback_hash,r=this.link;cur.restored||(cur.restored=0),a&&"profile"===cur.module&&cur.restored++,removeClass(r,"wia_item--loading");var o=ge(n),s=ge("".concat(n,"_replies"));if(t){if(cur.restored>3){var l="".concat(o.id,"?act=rollback_archive&hash=").concat(i);t+=Wd.html({class:"service_msg_row",inner:{tag:"a",href:l,onclick:"return ajax.click(this, Archive.rollback)",inner:getLang("mobile_archive_restore_bulk")}})}var c="".concat(o.id,"__message-archived"),u=ce("div",{className:["post_message_item",o.className].join(" "),innerHTML:t,id:c});hide(o),hide(s),ge(c)||after(u,o)}else if(n){var d=ge("".concat(n,"__message-archived")),f=ge("".concat(n,"_replies"));show(n),show(f),remove(d)}}}};t.default=a},u33z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("+CUd"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.MailButton=i.default},u4EO:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var i=35;void 0===window.isTouch&&(window.isTouch=!1);var r=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("No element was provided for Slider");t=ge(t),this.options=n||{size:1},void 0===this.options.logfbase&&(this.options.logfbase=i),this.options.backValue=this.options.backValue||0;var a=100*this.options.backValue,r='<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> '+(this.options.withBackLine?'<div class="slider_back" style="width:'+a+'%"></div>':"")+' <div class="slider_amount"></div> <div class="slider_handler"></div> </div>';this._el=ce("div",{innerHTML:r,className:"slider",id:t.getAttribute("id")||""});var o=this;if(t.classList)for(var s=t.classList,l=0,c=s.length;l<c;l++)addClass(this._el,s[l]);else this._el.className=t.className;each(this._el.attributes,function(e,t){"id"==t.name&&"class"==t.name||o._el.setAttribute(t.name,t.value)}),t.parentNode.replaceChild(this._el,t),this._amountEl=geByClass1("slider_amount",this._el),this._handlerEl=geByClass1("slider_handler",this._el),this._slideEl=geByClass1("slider_slide",this._el),this._backEl=geByClass1("slider_back",this._el),this._progressEl=geByClass1("slider_loading_bar",this._el),this.options.color&&(setStyle(this._amountEl,{backgroundColor:this.options.color}),setStyle(this._handlerEl,{backgroundColor:this.options.color})),this.options.backColor&&setStyle(this._slideEl,{backgroundColor:this.options.backColor}),addClass(this._el,"slider_size_"+this.options.size),this.options.debounce&&(this._onValueChangeDebounced=debounce(this._onValueChange,this.options.debounce)),!isTouch&&n.formatHint&&(addEvent(this._el,"mousemove",this._ev_onMouseOver=this._onMouseOver.bind(this)),addEvent(this._el,"mouseleave",this._ev_onMouseLeave=this._onMouseLeave.bind(this))),addEvent(this._el,isTouch?"touchstart":"mousedown",this._ev_onMouseDown=this._onMouseDown.bind(this)),addEvent(this._el,"click",cancelEvent),this.setValue(this.options.value||0,!this.options.fireChangeEventOnInit,!1),this.setBackValue(this.options.backValue)}var t,n,r;return t=e,(n=[{key:"toggleLoading",value:function(e){e=!!e,toggle(this._progressEl,e),setStyle(this._progressEl,"opacity",e?1:0)}},{key:"destroy",value:function(){!isTouch&&this.options.formatHint&&(removeEvent(this._el,"mousemove",this._ev_onMouseOver),removeEvent(this._el,"mouseleave",this._ev_onMouseLeave),removeEvent(this._el,"mousedown",this._ev_onMouseDown));var e=window.re||window.remove;e(this._el),e(this._currHintEl)}},{key:"_updateHint",value:function(e,t){this._currHintEl||(this._currHintEl=ce("div",{className:"slider_hint",id:"slider_hint"}),this.options.hintClass&&addClass(this._currHintEl,this.options.hintClass),this._el.appendChild(this._currHintEl));var n=this._getPos(),a=Math.round((e.pageX||e.touches[0].pageX)-n[0]),i=this._width;if((a=t?Math.min(Math.max(0,a),i):a)>=0&&a<=i){var r=a/i;this._currHintEl.innerHTML=this.options.formatHint?this.options.formatHint.call(this,r):r;var o=this._currHintEl.getBoundingClientRect();setStyle(this._currHintEl,{left:this._slideEl.offsetLeft+a-(o.right-o.left)/2,top:this._slideEl.offsetTop-(o.bottom-o.top)-10}),!t&&this._toggleHint(!0)}else!t&&this._toggleHint(!1);this.options.formatHint||this._toggleHint(!1)}},{key:"_toggleHint",value:function(e){toggleClass(this._currHintEl,"visible",e)}},{key:"_onMouseOver",value:function(t){e._currenSliderDrag||hasClass(this._el,"active")||this._updateHint(t)}},{key:"_onMouseLeave",value:function(e){hasClass(this._el,"active")||this._toggleHint(!1)}},{key:"_onMouseDown",value:function(t){(0==t.button||t.touches)&&(delete cur._sliderMouseUpNowEl,addEvent(window,isTouch?"touchmove":"mousemove",this._ev_onMouseMove=this._onMouseMove.bind(this)),addEvent(window,isTouch?"touchend touchcancel":"mouseup",this._ev_onMouseUp=this._onMouseUp.bind(this)),this._onMouseMove(t),e._currenSliderDrag=this,addClass(this._el,"active"),cancelEvent(t))}},{key:"_onMouseUp",value:function(t){cur._sliderMouseUpNowEl=this._el,removeEvent(window,isTouch?"touchmove":"mousemove",this._ev_onMouseMove),removeEvent(window,isTouch?"touchend touchcancel":"mouseup",this._ev_onMouseUp),this._onValueChange(),removeClass(this._el,"active"),e._currenSliderDrag=!1,this._toggleHint(!1),this.options.onEndDragging&&this.options.onEndDragging(this._currValue),cancelEvent(t)}},{key:"_onMouseMove",value:function(e){var t=this._getPos(),n=t[0];n=void 0!==e.touches&&e.touches.length>0?e.touches[0].pageX:e.pageX,n=Math.max(n,t[0]),n=Math.min(n,t[0]+this._width),n-=t[0],this.setValue(n/this._width,!0,!0),this._onValueChangeDebounced?this._onValueChangeDebounced():this._onValueChange(),this._toggleHint(!0),this._updateHint(e,!0),cancelEvent(e)}},{key:"_getPos",value:function(){return this._slidePos=getXY(this._slideEl)}},{key:"_logf",value:function(e){if(!this.options.log)return e;var t=this.options.logfbase;return(Math.pow(t,e)-1)/(t-1)}},{key:"_unlogf",value:function(e){if(!this.options.log)return e;var t,n,a=this.options.logfbase;return t=a,n=1+e*(a-1),Math.log(n)/Math.log(t)}},{key:"setValue",value:function(e,t,n){if(!hasClass(this._el,"active")||n){var a=n?this._logf(e):e;if(this._currValue!=a){this._currValue=a;var i=n?e:this._unlogf(e);i=100*i+"%",setStyle(this._amountEl,{width:i}),setStyle(this._handlerEl,{left:i}),!t&&this._onValueChange()}}}},{key:"setBackValue",value:function(e){toggleClass(this._backEl,"slider_back_transition",e>this._backValue),this._backValue=e;var t=100*e+"%";setStyle(this._backEl,{width:t})}},{key:"_onValueChange",value:function(){this._lastValue=this._lastValue||0,this._lastValue!=this._currValue&&(this._lastValue=this._currValue,this.options.onChange&&this.options.onChange(this._currValue))}},{key:"_width",get:function(){if(!this._widthCache){var e=this._el.getBoundingClientRect();this._widthCache=e.right-e.left}return this._widthCache}}])&&a(t.prototype,n),r&&a(t,r),e}();t.Slider=r},uQjJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("4O8T"))&&a.__esModule?a:{default:a};window.EventEmitter=i.default;var r=i.default;t.default=r},uU5W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdsPlayerAdapter=void 0;var a=n("rEJs"),i=n("OcsD");function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioPage=t}var t,n,o;return t=e,(n=[{key:"notify",value:function(e){var t=this.audioPage.getCurrent();switch(e){case a.events.AD_STARTED:this.audioPage.onAdStart(t);break;case a.events.AD_COMPLETED:this.audioPage.onAdComplete(t);break;case a.events.PLAY:this.audioPage.onPlay(t.id);break;case a.events.PAUSE:this.audioPage.onPause(t.id);break;case a.events.PROGRESS:var n=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];isNaN(n)||isNaN(i)||this.audioPage.onPositionChanged(t.id,n*i,i)}}},{key:"setIsPlaying",value:function(e){this.audioPage.setIsPlaying(e)}},{key:"getVolume",value:function(){var e=(0,i.ssGet)("audio_vol");return null===e?1:e}},{key:"_getPlayingContextSection",value:function(){return window.playerAdapter.getContext()}}])&&r(t.prototype,n),o&&r(t,o),e}();t.AdsPlayerAdapter=o},uZo4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pad=c,t.default=void 0;var a=l(n("UWnA")),i=l(n("8ZMO")),r=l(n("KiYr")),o=l(n("z9sQ")),s=(n("fdw3"),n("TYsd"));function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.content_only)return{outerHTML:u(e.content)};var t=e.title,n=e.corner,s=e.inner||e.content,l=e.anchor,c=e.alert,f=e.style||{},h=e.attrs||{};return{tag:e.tag,class:[e.class||e.mix,o.default.class("Pad",{empty:d(s),noCapsTitle:e.no_caps_for_title,style_extraTopPadding:f.extra_top_padding,style_extraBottomPadding:f.extra_bottom_padding})],attrs:h,"data-id":e.name||e.id,inner:[l?(0,i.default)({mix:"Pad__anchor",id:l}):null,c?(0,a.default)({inner:[(0,r.default)({inner:[c],class:"Pad__alert",theme:e.alert_theme})],style:{tiny_padding_bottom:!0}}):null,t?(0,a.default)({inner:[{inner:[t],class:"Pad__title",tag:"h3"},n?{inner:[n.text],href:n.url,onClick:n.onclick,attrs:n.attrs,class:["Pad__corner",n.class],tag:"a"}:null],class:"Pad__header"}):null,t?{inner:[s],class:["Pad__content",e.content_mix],tag:"div"}:s]}}function u(e){var t=[e];return Array.isArray(e)&&(t=(0,s._Wd_toFlatArray)(e).map(s._Wd_innerItemToString)),t.join("")}function d(e){var t=u(e);return!t||"<div></div>"===t}var f=c;t.default=f},uk5P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIO_PLAYER_ENUMS=void 0;t.AUDIO_PLAYER_ENUMS={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_INDEX_NEW_STATS:23,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<a role="button" class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</a>',LOG_LS_KEY:"audiolog"}},uo4j:function(e,t,n){"use strict";ownerPhotoUpload.onUploadedDone(function(e){var t=geByClass1(a);if(t){var n=geByClass1(i,t),l=geByClass1(o,t),f=geByClass1(r,t),h=geByClass1(s,t);(function(e,t){if(window.Image){var n=new Image;n.onload=function(){return d(e,t)},n.src=e}else d(e,t)})(e=function(e){return e.replace(/"/g,"").replace(/'/g,"").replace(/</g,"").replace(/>/g,"")}(e),n),f&&(f.textContent=getLang(c)),l&&(l.textContent=getLang(u)),FeedAssistance.setFilled(t),remove(h)}}),FeedAssistanceStats.registerTrackingCls("feedAssistance_profilePhoto");var a="feedAssistance_profilePhoto",i="feedAssistanceProfilePhotoContent__avatar",r="feedAssistanceProfilePhotoContent__title",o="feedAssistanceProfilePhotoContent__desc",s="feedAssistance__footerButton",l="feedAssistanceProfilePhotoContent__avatar_uploaded",c="mobile_assistance_profile_photo_uploaded_title",u="mobile_assistance_profile_photo_uploaded_desc";function d(e,t){var n;t&&(addClass(l,t),setStyle(t,"background-image","url(".concat(e,")"))),n=e,geByClass("al_u"+vk.id).forEach(function(e){domData(e,"photo")&&domData(e,"photo",n);var t=geByClass1("_u"+vk.id,e);t&&"IMG"===t.tagName&&(t.src=n)})}},"v+Uj":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"scrollToElem",{enumerable:!0,get:function(){return r.scrollToElem}}),Object.defineProperty(t,"_onWheel",{enumerable:!0,get:function(){return r._onWheel}}),t.default=void 0;var a,i=(a=n("/T2O"))&&a.__esModule?a:{default:a},r=n("E7VD");var o=i.default;t.default=o,window.Slider=i.default,extend(i.default,{scrollToElem:r.scrollToElem,_onWheel:r._onWheel})},"v/ER":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submit=s,t.default=void 0;var a,i=(a=n("Po+v"))&&a.__esModule?a:{default:a},r=n("W9Tc");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t,n,a,s){"string"==typeof s&&(s=JSON.parse(s));var l=$("#mcont");setStyle(l,{"pointer-events":"none"}),ajax.post(e,o({_ajax:1,reason:n},s)),"story"===s.type&&Stories.sendAnalyticsEvent("claim"),(0,r.partConfigEnabled)("mvk_new_info_snackbar")||Snackbar.init({text:getLang("mobile_msg_reported")}),$$(".Confirm").forEach(function(e){return i.default.close(e)})}t.default=function(e,t,n,a,i,r,o){n?Confirm(t,"ReportConfirm.submit('".concat(i,"', false, ").concat(a,", '").concat(r,"', ").concat(JSON.stringify(o),")"),"",{title:e,id:"confirm-".concat(a)}):s(i,!0,a,r,JSON.stringify(o))}},vOib:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("uZo4"))&&a.__esModule?a:{default:a}).default;t.default=i},vOyG:function(e,t){e.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"]},vTE6:function(e,t,n){"use strict";var a,i=l(n("+cqQ")),r=n("DkIl"),o=l(n("B5sG")),s=n("3dm1");function l(e){return e&&e.__esModule?e:{default:e}}function c(){store.mail&&store.mail.cur&&(store.mail.cur.peerId&&u())}function u(){var e=store.mail.cur;(e?e.peerId:null)?a=setTimeout(function(){p(),u()},3e4):d()}function d(){a&&clearTimeout(a)}function f(){$$(".mailHat").forEach(function(e){return e.outerHTML=(0,o.default)()})}function h(){}function p(){var e=window.lang,t=store.mail,n=t.cur,a=t.peers,i=n?n.peerId:null;if(i){var r=a[i];if(r.lastActionTime&&!r.isOnline){var o=n.timeShift,l=function(e,t){var n=window.lang,a="";e+=t;var i=parseInt(Date.now()/1e3)-e;if(i>7776e3)return"";if(i<60)a=n.mobile_profile_status_just_now;else if(i<3600){var r=intval(i/60);a=langWordNumeric(r,n.mobile_profile_status_word_mins_ago,n.mobile_profile_status_mins_ago)}else if(i<14400){var o=intval(i/3600);a=langWordNumeric(o,n.mobile_profile_status_word_hours_ago,n.mobile_profile_status_hours_ago)}else a=function(e){var t=1e3*e,n=new Date(t),a=new Date,i=window.lang;return n.getFullYear()!=a.getFullYear()&&n.getTime()<a.getTime()-1728e5||Math.abs(n.getTime()-a.getTime())>157248e5?langDate(t,i.mobile_mail_date,0,i.months_sm_of,!1):langDate(t,i.mobile_mail_short_date_time,0,i.months_sm_of,!1)}(e);return a}(r.lastActionTime,o);r.offlineText=l?langSex(r.sex,e.mobile_mail_last_activity_tip).replace("{time}",l):""}else r.canSeeOnline||(r.offlineText=(0,s.getLastSeenByStatus)(r.onlineStatus,r.sex));f()}}Object.assign(o.default,{onUnreadClick:(0,i.default)(),onBackClick:(0,i.default)(),onBackToDialogClick:(0,i.default)(),onCancelEditing:(0,i.default)(),setModifiers:r.MailHat_convo.setModifiers,redrawCounter:function(){var e=store.mail.cur.countUnread;if(!nav.getQuery("community")){var t=geBySel1(".mmi_mail .mm_counter2");t&&(e>0?(t.innerText=e,attr(t,"style","display: inline")):hide(t))}window.isNewNavigation?Tabbar.setCounter(Tabbar.TAB_ID_MESSAGES,e):r.MailHat_main.setUnreadCount(e)},redrawOnline:p,redraw:f,startStatusUpdate:u,cancelStatusUpdate:d}),r.MailHat_main.onUnreadClick(o.default.onUnreadClick),r.MailHat_main.onBurgerClick(menu.open),r.MailHat_main.onCancelForwardTap(o.default.onBackToDialogClick),r.MailHat_convo.onBackTap(o.default.onBackClick),r.MailHat_convo.onCancelEditingTap(o.default.onCancelEditing),uVK.onReady(c),uVK.onReady(h),page.onChange(h)},vZUn:function(e,t,n){"use strict";var a=function(){var e,t,n,i,r,o,s,l,c,u,d,f,h,p,A=1,m=!1,_={},v={},g={},y=null,b=null,w=!1,E=null,k=null,S=!0,C=0,M=!1;function P(){if(!(e=geByClass1("photo_view","m")))return nav.al_go(nav.cur),!1;if(t=geByClass1("pv_summary",e),geByClass1("photo_msg",e),d=geByClass1("pv_tag_wrap",e),r=geByClass1("pv_body",e),o=geByClass1("thumb_item",r),i=geByClass1("pv_nav",r),c=geByClass1("pv_photo_wrap",o),s="a"==tag(o)&&o,l=geByTag1("img",o),u=geByClass1("pv_footer",e),(n=geByClass1("summary_loading",t))||(n=ce("div",{innerHTML:'<i class="i_loading"></i>',className:"summary_loading"},{display:"none"}),t.appendChild(n)),m=hasClass("pv_touch_full",r),i){var a=geByClass1("pv_nav_left",i),A=geByClass1("pv_nav_z",i),_=geByClass1("pv_nav_right",i);f=geByClass1("pv_nav_link",a),p=geByClass1("pv_nav_link",A),h=geByClass1("pv_nav_link",_),attr(f,"onclick","return photo.prev(event);"),attr(h,"onclick","return photo.next(event);"),attr(s,"onclick",!m&&"return photo.next(event);"),ajax.prepare_click([f,h,s])}return removeEvent(window,"orientationchange",R),addEvent(window,"orientationchange",R),!0}function T(){var t=window.photoview;return!!t&&(!!M||(M=!0,t.onPhotoChange=function(e,t){C=e,j(e,t)},t.onUpdate=function(){},t.onClose=function(t){if(uRegisterFloatBtn.show(),!function(e){var t=qs2obj(nav.params);if(delete t.z,!e.local&&!e.crop){if(nav.tryHistoryBack())return!1;var n=nav.path+obj2qs(t)+nav.hash;nav.go(n,null,{push_only:!0})}return!0}(t))return!0;var n=qs2obj(nav.params);e&&n.list==b&&N(C,!0)},!0))}function D(e){var t=window.photoview,n=[];return each(e,function(e,t){if(!t)return!0;n.push(_[t.id]=t)}),y&&t&&t.saveSource(B(y)),n}function I(e){return _[e]||{}}function x(e,t,n){if(null!==t){v[e]||(v[e]=new Array(n||len(t))),D(t);var a=v[e];w&&a.reverse(),extend(a,t),w?(y=copy(a),a.reverse()):y=a}else delete v[e]}function O(e){if("string"!=typeof e)return e;var t=v[e]||[];return w?copy(t).reverse():t}function B(e){var t=O(e),n=new Array(t.length),a=qs2obj(nav.params);for(var i in delete a.z,t){var r=y[i],o="",s="";r.hash&&(s=obj2qs({hash:r.hash,mp4:!0})),r.isDoc?(o="doc"+r.id+s,n[i]={id:r.id,photo_url:"/"+o,src:r.original_src,isDoc:!0,hasVideo:r.hasVideo}):(o="photo"+r.id+"?list="+b+(w?"&rev=1":"")+(k?"&from="+k:""),n[i]={id:r.id,photo_url:"/"+o,like_url:"/like?act="+(r.likes_me?"del":"add")+"&object=photo"+r.id+"&from="+encodeURIComponent(o)+"&list="+b+"&hash="+r.like_hash,likes_me:r.likes_me,src:r.original_src,max_src:r.max_src,tags:r.tags,caption:r.caption,likes_cnt:r.likes_cnt,replies_cnt:r.replies_cnt,market_tags:r.market_tags})}return n}function L(e,t){for(var n in t||(t=y),t)if(y[n].id==e)return+n;return-1}function R(){nav.hash||onDOMReady(function(){if(geByClass1("photo_view")){var e=scrollTop();r&&getY(r)<e&&scrollToEl(r)}})}function N(n,i,o){var _=window.cur,v=window.lang,b=y[n],M=1==y.length;if(b){nav.hash?scrollToHash(nav.hash):R();var P={};E&&(P.list=E),w&&(P.rev=1),k&&(P.from=k);var T=obj2qs(P),D="photo"+b.id+T,I=b.photo,x=(H(n-1)||{}).id,O=(H(n+1)||{}).id;if(M||(s.href="/photo"+O+T,f&&(f.href="/photo"+x+T),h&&(h.href="/photo"+O+T),ajax.prepare_click([f,h,s])),m){var B="photo"+b.id+"/"+E+(w?"/rev":""),L=extend({},P,{z:B}),N="/photo"+b.id+obj2qs(L);if(zlayer._lastNav){var j=zlayer._lastNav;(L=qs2obj(j.params)).z=B,N=j.path+obj2qs(L)+j.hash}p&&(p.href=N),ajax.prepare_click(p),attr(p,"onclick","return photo.fullscreen('"+escapeAttr(N)+"', event);")}if(l&&l.src!=I){l.onload=null,remove(l);var F="";each(b.tags,function(e,t){if(!e||0==e)return!0;var n=t[0][0],a=t[0][1],i=t[0][2],r=t[0][3];F+='<div class="pv_tag" style="left: '+n+"%; top: "+a+"%; width: "+i+"%; height: "+r+'%;" id="pv_tag'+e+'" onclick="return photo.selectTag('+e+', event, true);"><div class="fill"></div></div>'}),val(c,'<img src="'+I+'" alt="" class="ph_img" />'+F),l=geByTag1("img",c)}toggleClass("photo_deleted",e,!!b.deleted),toggleClass("pv_one_photo",r,1==y.length),val(t,(v.mobile_photos_photo_header||"").replace("%s",C+1).replace(/%s|{count}/,y.length)),val(d,b.tag_info||"");var U="",z=(_.sticker_panel||"").split("photo-0_0").join("photo"+b.id),W=(b.comments_html||"").split("\x3c!--stickers_panel--\x3e").join(z);if(b.caption&&(U+='<div class="mv_description">'+b.caption+"</div>"),b.tags_list&&(U+='<dl class="pv_tags_list si_row"><dt>'+v.mobile_photos_on_this_photo+"</dt><dd>"+b.tags_list+"</dd></dl>"),b.was_edited&&(U+='<dl class="si_row"><dt>'+v.mobile_photos_photo_was_edited+"</dt></dl>"),b.album_link&&(U+='<dl class="si_row"><dt>'+v.mobile_photos_photo_album_label+"</dt><dd>"+b.album_link+"</dd></dl>"),b.author_link&&(U+='<dl class="si_row"><dt>'+v.mobile_photos_photo_author_label+"</dt><dd>"+b.author_link+"</dd></dl>"),(b.date||b.likes||b.publish)&&(U+='<div class="vi_values">'+(b.date||"")+(b.likes||"")+(b.publish||"")+"</div>"),val(u,'<div class="like_box bl_cont"><div class="photo_msg bl_none">'+(b.deleted||"")+'</div><div class="mv_details">'+U+'</div><ul class="mv_actions">'+(b.actions||"")+'</ul></div><div class="comments_wrap bl_cont">'+W+"</div>"),post.stickersInit(),_.replyTo=0,ajax.refreshLinks(b.fv_link,b.app_link),a.closeTags(),!i){var q="/"+D;nav.go(q,null,{no_push:i,push_only:!0,replace:o}),window.isNewNavigation&&page.save(q,{st:scrollTop(),page:ge("m"),state:page.stash(),cur:window.cur,options:{replacePrevPage:!0}},!1)}}S||(V(),function(){for(var e=0,t=C+1;e<A;e++){var n=H(e+t),a=n&&n.photo;if(a&&!g[a]){var i=g[a]=new Image;i.src=a,i.onload=function(){g[a]=!0}}}}())}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isDoc,a=t.hash,i=t.hasVideo,r=window.photoview,o=y[e];y.length;if(o){var s=qs2obj(nav.params);if(s.z=n?"doc"+o.id+"/"+a:"photo"+o.id+"/"+E+(w?"/rev":""),t.no_open||r.open(e,B(y),{local:t.local,isDoc:n,hasVideo:i}),!t.local&&!t.crop){var l=nav.path+obj2qs(s)+nav.hash;nav.go(l,null,{no_push:t.no_push,push_only:!0,replace:t.replace,nav_init:!t.no_open,nav_incr:!0})}}t.local||t.crop||V(!0,n)}var F=!1;function H(e){return e>0?e%=y.length:e=(100*y.length+e)%y.length,y[e]}function V(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!F){for(var a=window.photoview,i=!1,r=1,o=0;o<5;o++){if(!(l=H(s=o+C))||!l.owner_id){i=s,r=1;break}}if(!1===i)for(o=-1;o>-3;o--){var s,l;if(!(l=H(s=o+C))||!l.owner_id){i=s,r=-1;break}}if(!1!==i){var c=H(C);if(c){F=!0,show(n);var u=window.cur,d=c.owner_id||(c.id||"").split("_")[0],f=Gif.isMp4Supports()&&c.hasVideo,h=s==C&&c.id?(t?"/doc":"/photo")+c.id+(c.hash?"?hash="+c.hash:"")+(f?"&mp4":""):"/photos.php",p={_ajax:1,oid:d,list:b,offset:i,direction:r,rev:w?1:0};u.stickers||(p.need_stickers=1),nav.getQuery("community")&&(p.community=nav.getQuery("community")),ajax.post(h,p,{onDone:function(t,i,r,o){hide(n),F=!1,r&&(u.replyNames||(u.replyNames={}),extend(u.replyNames,r)),o&&extend(u,o),x(b,t,i||y.length),e?a&&a.saveSource(B(b),!1,!0):N(C,!0)}})}}}}function U(e,t,n,a,i){if(y=[],e){var r=gpeByClass("thumbs_list",e)||gpeByClass("wiki_body",e);r&&each(geByTag("img",r),function(){var e=attr(this,"data-id"),t=attr(this,"data-src_big");if(!e||!t)return!0;var n=(t=t.split("|"))[0],a=+t[1]||0,i=+t[2]||0;y.push({id:e,original_src:n,width:a,height:i})})}y.length||y.push({id:t,original_src:!0,isDoc:n,hasVideo:a,hash:i})}function z(){addClass("pv_icons_hide",r)}return{save:D,get:I,saveSource:x,getSource:O,clear:function(){removeEvent(window,"orientationchange",R)},open:function(e,t,n,a,i){if(checkEvent(n))return!0;if(!P())return!0;if(w=!1,"/rev"==t.substr(-4)&&(t=t.slice(0,-4),w=!0),k=a||null,t)b=t;else{var r=I(e);b=r.album?"album"+r.album:""}if(E=b,y=O(b),-1===(C=L(e,y))){if(!(r=I(e)).id)return!1;y=[r],C=0}S=y.length<2,!1;var o=y[C]&&e!=y[C].id;return N(C,i&&!o,o),!1},prev:function(e){return!!checkEvent(e)||!(F&&!H(C-1))&&(!P()||(S?a.close():(--C<0&&(C=y.length-1),N(C),z(),!1)))},next:function(e){return!!checkEvent(e)||!(F&&!H(C+1))&&(!P()||!S&&(++C>=y.length&&(C=0),N(C),z(),!1))},close:function(e,t){return!!checkEvent(e)},fullscreen:function(e,t){return!!hasClass("pv_photo_tags_selected",r)||nav.go(unescapeAttr(e),t,{need_restore:!0})},showIcons:function(){var e=geByClass1("photo_view","m");if(!e)return!1;var t=geByClass1("pv_body",e);if(!t)return!1;setTimeout(function(){removeClass("pv_hidden_icons",t),setTimeout(function(){addClass("pv_icons_hide",t)},2e3)},10)},selectTag:function(e,t,n){if(n&&!hasClass("pv_photo_tags_selected",r))return!0;var a=ge("pv_tag"+e),i=geByClass1("pv_tag_selected","pv_photo_tags_wrap"),o=ge("pv_tag_label"+e),s=geByClass1("pv_tag_label_selected","pv_tags_list");return hasClass("pv_tag_selected",a)||(removeClass("pv_tag_selected",i),addClass("pv_tag_selected",a)),hasClass("pv_tag_label_selected",o)?nav.go(o,t):(removeClass("pv_tag_label_selected",s),addClass("pv_tag_label_selected",o),addClass("pv_photo_tags_selected",r),cancelEvent(t),!1)},closeTags:function(e){if(!hasClass("pv_photo_tags_selected",r))return!0;var t=geByClass1("pv_tag_selected","pv_photo_tags_wrap"),n=geByClass1("pv_tag_label_selected","pv_tags_list");return t&&removeClass("pv_tag_selected",t),n&&removeClass("pv_tag_label_selected",n),removeClass("pv_photo_tags_selected",r),cancelEvent(e),!1},init:function(e,t,n,i,r,o,s){A=isUndefined(s.preload)?1:s.preload,w=!!r,a.saveSource(e,t,n),onDOMReady(function(){a.open(i,e+(r?"/rev":""),null,o,!0)})},zopen:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(checkEvent(t))return!0;var r=i.isDoc,o=i.hasVideo,s=i.hash;T(),w=!1,"/rev"==a.substr(-4)&&(a=a.slice(0,-4),w=!0);var l=qs2obj(nav.params);if(delete l.z,k=i.from||!1,a)b=a;else{var c=I(n);b=c.album?"album"+c.album:""}if(E=b,(y=O(b))[0]&&y[0].isDoc&&y[0].hasVideo!==o&&(y=[]),y.length||U(e,n,r,o,s),-1===(C=L(n,y))&&(U(e,n,r,o,s),C=L(n,y)),-1===C){if(!(c=I(n)).id)return!0;y=[c],C=0}S=y.length<2,!1;var u=y[C]&&n!=y[C].id;return j(C,{no_push:i.no_push&&!u,replace:u,local:i.local,isDoc:r,hasVideo:o,hash:s}),uRegisterFloatBtn.hide(),cancelEvent(t),!1},zclose:function(e,t){return uRegisterFloatBtn.show(),!!checkEvent(e)}}}();window.photo=a},vfU8:function(e,t,n){"use strict";var a,i=(a=n("EMnU"))&&a.__esModule?a:{default:a};Object.assign(i.default,{toggleActive:function(e){e.classList.toggle(r.active)}});var r={active:"Icon_active"}},vkUM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.open=function(e){r.default.open({body:d(e),confirmText:lang.mobile_mail_delete_popup_delete,cancelText:lang.mobile_mail_delete_popup_cancel,onConfirm:a.default.onClick("MsgDeleteDialog.onConfirmDelete"),onClose:a.default.onClick("MsgDeleteDialog.close")})},t.close=function(){var e=$("."+l);e&&(c=e.checked,lsSet("delete_message_for_all_checked",c));r.default.close()},t.isDeleteMessagesForAll=function(){var e=$("."+l);return!!e&&e.checked},t.onConfirmDelete=void 0;var a=o(n("bZ/P")),i=o(n("+cqQ")),r=o(n("iS9e"));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    ","\n    ","\n  "]);return s=function(){return e},e}var l="MsgDeleteDialog__checkboxInput",c=null,u=(0,i.default)();function d(e){var t,n,i=e.isEditing,r=e.canDeleteForAll;if(i)t=lang.mobile_mail_dialog_msg_delete_for_all;else{var o=Object.keys(store.mail.cur.msgSelected).length;t=langNumeric(o,lang.mobile_mail_dialog_msg_delete_N)}if(!i&&r){var u=lang.mobile_mail_delete_for_all,d=function(){if("boolean"!=typeof c){var e=!!lsGet("delete_message_for_all_checked");c=e}return c}()?"checked":"";n='\n      <div class="MsgDeleteDialog__checkbox">\n        <label class="MsgDeleteDialog__checkboxIn">\n          <input type="checkbox" class="'.concat(l,'" ').concat(d,'>\n          <span class="MsgDeleteDialog__checkboxLabel">').concat(u,"</span>\n        </label>\n      </div>\n    ")}return a.default.html(s(),t,n)}t.onConfirmDelete=u},vkmG:function(e,t,n){"use strict";function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.escape=r,t.encodeHTMLEntities=function(e){return r(e).replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#".concat(e.charCodeAt(0),";")})},t.symbols=void 0;var i=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function r(e){return i.reduce(function(e,t){var n=a(t,2),i=n[0],r=n[1];return e.replace(new RegExp(r,"ig"),i)},e)}t.symbols=i},vpQl:function(e,t,n){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=((a=n("mmza"))&&a.__esModule?a:{default:a}).default;t.default=i},vys4:function(e,t,n){"use strict";var a=n("f9C2"),i=n("y6KD"),r=n("w+Cc"),o=n("WS06"),s=n("OcsD"),l=n("W9Tc");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){var e,t="_BottomMenu__icon_js",n="BottomMenu__icon_active",u="BottomMenu__counter",d="BottomMenu__updateButton",f="BottomMenu",h="vk_tabbar_hidden",p="data-tabbar",A="data-counter",m="feed",_="recommend",v="messages",g="notification",y="menu",b=Math.max(window.innerHeight,window.innerWidth),w=[m,_,v,g,y],E="",k={},S=(c(e={},m,0),c(e,_,0),c(e,v,0),c(e,g,0),c(e,y,0),e);function C(e){var t=geBySel1("[".concat(p,'="').concat(e,'"]'));return attr(t,"data-default")}function M(e){each(geBySel("[".concat(p,"]")),function(n,a){var i=geByClass1(t,a),r=geByClass1(u,i),o=attr(a,A),s=attr(a,p);e({i:n,tabId:s,counter:o,$link:a,$icon:i,$counter:r})})}function P(){M(function(e){var t=e.$counter,n=e.$icon,a=(e.$link,e.tabId),i=S[a];if(i&&0!==i)if(t)val(t,i);else{var r=ce("div",{className:u,innerHTML:i});append(r,n)}else val(n,"")})}function T(e){setTimeout(function(){D()},0),val(geByClass1("mcont",e),'<div class="pcont bl_cont"><div id="al_loading" class="BottomMenu__preloader"></div></div>')}function D(){var e=$(".".concat(d));remove(e)}return{setCurrentId:function(e){E=e},setHistory:function(e){k=extend({},e)},setCounter:function(e,t){S[e]=t?parseInt(t,10):0,P()},getCurrentId:function(){return E},getDefaultURL:C,getTabCounter:function(e){return S[e]?S[e]:0},drawUI:function(){M(function(e){var t=e.$icon,a=e.$link,i=e.tabId,r=k[i];if(r){var o=r.filter(function(e){return!0===e.current})||[];o.length&&i!==v&&attr(a,"href",o[0].a);var s=attr(a,"href");i!==E||!o.length||o[0].a!==s&&o[0].d!==s||attr(a,"href",C(i))}toggleClass(n,t,i===E)}),P()},drawUICounters:P,drawLoader:T,drawSkeletonLoader:function(e,t){if(hasClass(document.querySelector(".vk"),"vk_flex_yes")&&(0,l.partConfigEnabled)("mvk_skeleton_animation"))switch(setTimeout(function(){D()},0),t){case m:$(".mcont",e).innerHTML=Wd.html((0,r.Feed)());break;case v:$(".mcont",e).innerHTML=Wd.html((0,i.Messages)());break;case g:$(".mcont",e).innerHTML=Wd.html((0,o.Notifications)());break;case _:$(".mcont",e).innerHTML=Wd.html((0,a.Recommended)());break;case y:default:T(e)}else T(e)},showUpdateButton:function(e){var t=window.lang,n=Wd.html({class:d,inner:{class:"BottomMenu__updateButton_container",inner:{class:"BottomMenu__updateButton_wrap",onclick:["nav.updateCurrentPage"],inner:[{class:"BottomMenu__updateButton_icon",inner:{class:"Icon Icon_whiteArrowTop"}},{class:"BottomMenu__updateButton_text",inner:t.mobile_menu_refresh_button}]}}}),a=hasClass("vk_custom_scroll",geByTag1("body")),i=e.$(a?".basis":".upanel");i.$(".".concat(d))||i.insertBefore(ceFromString(n),i.firstChild)},removeUpdateButton:D,onFocusIn:function(e){var t=geBySel1(".".concat(f)),n=e&&e.target;if(n&&t&&browser.android){var a=!1;"textarea"===n.tagName.toLowerCase()&&(a=!0),"input"!==n.tagName.toLowerCase()||["checkbox","radio"].includes(n.type)||(a=!0),"select"===n.tagName.toLowerCase()&&(a=!0),a&&t.classList.add(h)}},onFocusOut:function(){var e=geBySel1(".".concat(f));e&&e.classList.remove(h)},onResize:function(){var e=window.bodyNode;$(".Skeleton")&&($(".mcont").innerHTML='<div class="pcont bl_cont"><div id="al_loading"></div></div>',(0,s.alLoadingFix)()),e&&e.classList.contains("vk_tabbar_bottom")&&0===Math.abs(window.orientation)&&b-180>window.innerHeight?e.classList.add(h):e&&e.classList.remove(h)},setDefaultCounters:function(){M(function(e){var t=e.tabId,n=e.counter;S[t]=n?parseInt(n,10):0}),P()},TAB_ID_FEED:m,TAB_ID_RECOMMEND:_,TAB_ID_MESSAGES:v,TAB_ID_NOTIFICATION:g,TAB_ID_MENU:y,TAB_IDS:w}}();window.Tabbar=u,window.isNewNavigation&&(page.onRestore(u.drawUI),page.onChange(u.drawUI),onDOMReady(function(){var e;u.setDefaultCounters(),addEvent(window,"resize",function(){u.onResize(),clearTimeout(e),e=setTimeout(function(){u.onResize()},300)})}))},"w+Cc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Feed=l,t.default=void 0;var a=n("CjAb"),i=n("/zOt"),r=n("zLYz"),o=n("hrk0"),s=n("/xuI");function l(e){for(var t=Math.ceil((window.innerHeight-s.HEADER_HEIGHT-180)/210),n=[],l=0;l<t;l++)n.push((0,i.WallBlock)());return{inner:[(0,a.Header)(),(0,r.StoriesBlock)(),(0,o.NewPostBlock)(),n],class:"SkeletonFeed Skeleton",tag:"div"}}var c=l;t.default=c},w1QQ:function(e,t,n){"use strict";window.FeedAssistance={hide:function(e,t,n){var r=domCA(e,o),l=hasClass(r,s);remove(r),l||function(e,t,n){var r=FeedAssistanceStats.getFromRef(e);ajax.post(a,{_ajax:1,type:t,hash:n,act:i,from:r})}(e,t,n);return!1},setFilled:function(e){var t=hasClass(e,r)?e:domCA(e,o);addClass(s,t)}};var a="/feed",i="hide_assistance",r="feedAssistance",o="."+r,s="feedAssistance_filled"},wCFN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlertBox=l;var a=n("OcsD"),i=s(n("TYsd")),r=s(n("Po+v")),o=s(n("z9sQ"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=(0,a.ceFromString)(i.default.html((0,r.default)({id:o.id,class:"AlertBox",scrollable:!0,header:{title:t||getLang("mobile_warning_header")},content:[e,{class:"Popup__buttons",inner:[c(getLang("mobile_close"),"secondary",n||"Popup.close(this)")]}]})));domInsert(document.body,s),r.default.open(s,!0)}function c(e,t,n){return{class:["Popup__button",o.default.class("Btn",{theme:t||"regular"})],tag:"button",inner:e,onclick:n}}page.onChange(function(){$$(".AlertBox").forEach(function(e){return r.default.close(e)})}),window.AlertBox=l},wMVj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("UxAg"),i=u(n("+cqQ")),r=u(n("jk6M")),o=(n("OcsD"),function(e){if(e&&e.__esModule)return e;var t=c();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("a0wW"))),s=(u(n("K0hv")),n("eGQV")),l=n("izth");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=!(!window.history||!history.pushState),t=se(function(){return c});onDOMReady(function(){o.default.setFlag(o.FLAG_SUPPORTS_HISTORY_API,e)});var n={},c=null,u=[],f=!1,h=20,p=30;function A(){Tabbar.setHistory(n)}function m(e){var t=window.Tabbar;if(e.lm&&e.lm.tab&&e.lm.is_tab_page||e.options&&e.options.forceSetCurrent){var n=t.getCurrentId(),a=e.lm&&e.lm.tab||e.options.tab;t.setCurrentId(a),n!==a&&A()}else e.lm&&!e.lm.tab&&(e.lm.tab=t.getCurrentId())}function _(e){return!!n[e]&&n[e]}function v(){return _(Tabbar.getCurrentId())}function g(e,t){var n=(e||[]).filter(function(e){return e.d===t||e.h===t});return!(!n||!n[0])&&n[0]}function y(){var e=(v()||[]).filter(function(e){return!0===e.current});return!(!e||!e[0])&&e[0]}function b(e,t,a){var i;t.options&&t.options.is_fast&&t.options.prev_tab?i=_(t.options.prev_tab):(m(t),i=v(),t.lm&&t.lm.is_tab_page&&(i=!1));var r=function(){var e=y();return e&&e.d&&e.d.options&&e.d.options.replaceState}()||function(e){return e&&e.options&&e.options.replacePrevPage}(t),o=!1;if(i){for(var s=-1,l=i.length-1;l>=0;l--)if(i[l].h===e||i[l].a===e){s=l;break}s>-1&&i.splice(s+1,i.length);for(var c=i.length-1;c>=0;c--){var u=i[c];u.h===e||u.a===e?(i[c]={h:e,d:t,a:a,current:!0},o=!0):i[c].current=!1}}if(!o){var d={h:e,d:t,a:a,current:!0};if(i){var f=i[i.length-1],p=f&&f.d&&f.d.options&&f.d.options.removeAfterNextResponse;(r||p)&&i.pop(),i.push(d),i.length>h&&i.shift()}else{var A=Tabbar.getCurrentId(),g=y();if(g&&g.d&&g.d.options&&g.d.options.need_check_updates&&d.d.lm.check_updates){var b=d.d.html,w=g.d.page;d.d.page=w,d.d.newHTML=b}n[A]=[d]}}if(isArray(i)){for(var E=-1,k=i.length-1;k>=0;k--)if(!0===i[k].current){E=k;break}if(E>0){var S=E-1;i[S].h.includes("/like?act=publish")&&function(e,t){e.splice(t,1)}(i,S)}}}function w(e){var t;if(t=/^(https?:)\/\/([^:\/]+)?(?::(\d+))?\/?(.*)$/i.exec(e)){if(t[1]!=location.protocol)return!1;if(t[2]&&t[2]!=location.hostname)return!1;if(t[3]&&t[3]!=location.port)return!1;e=(t[4]||"").replace(/^\/+/,"/")}return e}function E(e,t,n){if(checkEvent(t))return!0;if(n&&n.push_only)return!0;if(n&&n.replace)location.replace(e);else if(e){var a=getHref(e);a===location.href.replace(location.origin,"")?location.reload():location.href=a}return!0}function k(e,t,n){var a=window.al;cancelEvent(t);var i=getHref(e);if(window.al&&a.ver){if(n&&n.push_only)return!0;if(ajax.nav(i,n))return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!0}E(i,t,n)}function S(t,n,a){var i,r,o=window.Tabbar;if(t&&t.href){if(/vk\.com\/vkui\/([a-zA-Z_]+)/.test(t.href))return E(t.href,n,a),!1;if(r=t.href,t.getAttribute&&t.getAttribute("data-change-location-with-post-away")){var s={};return(i=I(t)).post_id&&(s.post=i.post_id,i.ad_data&&(s.post_ad_data=i.ad_data),i.post_click_cc_key&&(s.cc_key=i.post_click_cc_key),r="/away.php?to="+encodeURIComponent(r)+"&"+obj2qs(s).substr(1)),E(r,n,a),!1}}if(t&&t.href&&t.dataset&&t.dataset.setFrom&&(t.href=Url.make(t.href,{from:d.cur})),d.onBeforeGo(t,n,a))return!1;if(a=extend({no_push:!1,push_only:!1,replace:!1},a),checkEvent(n))return!stopEvent(n);if(!t)return!0;e&&(a.no_push||a.need_restore)&&(f=!1);var c=t,u="",h="",p="";function A(e){return"a"===tag(e)?e:gpeByTag("a",e)}!t.href&&t.getAttribute&&(c=t.getAttribute("data-href"));var _=n&&A(n.target)||t&&t.tagName&&A(t);if(("input"==tag(t)||"button"==tag(t))&&("submit"==t.type||"image"==t.type)&&t.form){if(t.disabled)return!0;var v=t.form,g={},y=v.action||"",b=!1;if(each(v,function(e,n){return!(n.name&&!n.disabled)||("radio"===n.type&&!n.checked||("button"===n.type||("submit"===n.type&&n!==t||("image"===n.type&&n!==t||("file"===n.type?(b=!0,!1):"checkbox"===n.type?(g[n.name]=n.checked?1:0,!0):void(g[n.name]=n.value))))))}),"image"==t.type&&(g[t.name]=t.value,g[t.name+".x"]=1,g[t.name+".y"]=1),b||"multipart/form-data"==attr(v,"enctype"))return function(e){var t=ce("iframe");attr(t,"id","upload_iframe"),attr(t,"name","upload_iframe"),attr(t,"width","0"),attr(t,"height","0"),attr(t,"border","0"),attr(t,"style","width:0;height:0;border:none;position:absolute;left:-1000px;"),append(t,e.parentNode),window.frames.upload_iframe.name="upload_iframe",t=ge("upload_iframe");var n=!1;return each(e,function(e,t){if("submit"===t.type)return n=t,!1}),addEvent(t,"load",function e(){removeEvent(t,"load",e),setTimeout(function(){remove(t),unlockButton(n)},2e3)}),(0,l.setDocumentDomain)(),attr(e,"target","upload_iframe"),attr(e,"method","post"),attr(e,"enctype","multipart/form-data"),attr(e,"encoding","multipart/form-data"),append(ce("input",{type:"hidden",id:"__extra",name:"__extra",value:1}),e),e.submit(),lockButton(n),setTimeout(function(){remove("__extra")},0),!1}(v);if(!(c=w(y)))return!0;v.method&&"get"!=v.method?a.params=g:c=c.split("?",1).shift()+obj2qs(g)}if(hasClass("al_need_login",t)&&(a.redirectToLoginPage=!0),"string"!=typeof c){if(!c)return!0;"/"!==(u=(c.pathname||"").replace(/^\/+/,"/")).substr(0,1)&&(u="/"+u),h=c.search.substr(1),p=c.hash,c=u+c.search+p;if(/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/.test(u.substr(1))&&window.cur&&window.cur.module){var S=window.cur.module;if("feed"===S)"search"===qs2obj(d.params).section&&(S="feed_search");h+="&ref=".concat(S)}}else{var M=c.split("#"),T=M.shift();p=M.length?"#"+M.join("#"):"",u=(T=T.split("?")).shift(),h=T.join("?"),!p&&!h||u||(u=d.path,T||(h=d.params),c=u+(h?"?"+h:"")+p)}var D=qs2obj(h);function x(e,t,n){var a=n&&D[t];return!(!e||a)&&(D[t]=e,!0)}if(x((i=I(_,!!D._post_click_type)).post_id,"_post",!0),x(i.post_click_type,"_post_click_type",!0),D._post_click_type&&(x(i.post_click_mention_id,"_post_click_mention_id",!0),x(i.post_click_cc_key,"_post_click_cc_key",!0),x(i.post_click_url,"_post_click_url",!0),x(i.ad_data,"_post_ad_data",!0)&&x(i.ad_block_unique_id,"_post_ad_block_unique_id")),0!==location.pathname.indexOf("/app")&&0===u.indexOf("/app")&&D&&D.act&&"app_r"===D.act)return!!n||(E(t,n,a),!1);if(h=obj2qs(D).substr(1),n&&c.split("#").shift()==d.cur.split("#").shift()&&p&&!a.force&&(scrollToHash(p),a.push_only=!0),a.no_push&&d.cur==c&&!a.force)return!1;if(a.push_only)return P(extend(a,{nav:{push:c,path:u,params:h,hash:p}})),!1;if(addClass("active",a.link||t),hasClass("al_back_history",t)){if(window.isNewNavigation)return addClass("al_back",a.link||t),removeClass("al_back_history",a.link||t),d.backToTabHistory(a.link||t);if(d.tryBack())return!1}if(window.isNewNavigation&&(y||a.isForm)&&(a.removeAfterNextResponse=null==a.removeAfterNextResponse||a.removeAfterNextResponse),window.isNewNavigation&&(hasClass("al_tab",t)||hasClass("SliderTabs__tab",t)||hasClass("replaceState",t))&&(a.replaceState=!0),hasClass("al_back",t)){var O=D.act;window.isNewMail&&"/mail"===location.pathname&&!O||"show"===O&&!geByClass1("messenger")?a.need_restore=!1:a.need_restore=!0}if(window.isNewNavigation){var B=attr(t,"data-tabbar");if(B){var L=o.getCurrentId();L!==B?(B!==o.TAB_ID_MESSAGES&&0===o.getTabCounter(B)&&(a.need_restore=!0),B===o.TAB_ID_FEED&&"/feed"===c&&(a.need_check_updates=!0),a.tab=B,a.prev_tab=L,a.forceSetCurrent=!0):(a.tab=B,a.prev_tab=B,a.replace=!0),m({lm:{tab:B,is_tab_page:!0}})}else if(a.tab)a.native_prev=o.getCurrentId(),a.is_native_back=!0,a.forceSetCurrent=!0,m({lm:{tab:a.tab,is_tab_page:!0}});else{var R=o.getCurrentId();a.tab=R;var N=!(!this||!isString(this.cur))&&this.cur.substr(1);o.TAB_IDS.includes(N)?a.prev_tab=N:a.prev_tab=R}}var j=function(e){var t=window.cur,n=window.menu,a=qs2obj(e.nav.params),i=qs2obj(d.params);if((i.z||a.z)&&i.z!=a.z){if(d.path==e.nav.path){var r=copy(a),o=copy(i);if(delete r.z,delete o.z,r=obj2qs(r),o=obj2qs(o),r==o)return C(a.z,!1,e),P(e),n.close(null,!0),!1}e.zProcess=function(t,n){C(a.z,t,extend({},e,{no_push:!0}),n)}}if(e.onPreNav=function(){e.zProcess&&(e.zProcess(),delete e.zProcess)},!e.ignore_cur_process&&t.processNav&&t.processNav(e))return P(e),n.close(null,!0),!1;return k(e.nav.push,null,e),!1}(extend(a,t.tagName?{target:t}:{},{nav:{push:c,path:u,params:h,hash:p}}));return j||cancelEvent(n),j}function C(e,t,n,a){var i,r=window.photo,o=window.zlayer;if(e){if(i=/^photo(-?\d+_\d+)(?:\/([a-z0-9_-]+(\/rev)?)?)?$/i.exec(e)){if(!0===a)return!1;var s=i[1]||"",l=i[2]||"";return r.zopen(!1,null,s,l,{no_push:(n||{}).no_push}),o&&!1!==t&&void 0!==t&&(o._st=t),QRPhotoPosting&&QRPhotoPosting.close(),!0}if(i=/^story(-?\d+_\d+)(\/?([a-z0-9_-]+))(\/?[a-z0-9_:]+)?$/i.exec(e)){var c=window.Stories;if(!0===a)return!1;if(!c.opened){var u=i[1]+(i[2]?i[2]:"/".concat(i[1]))+(i[4]?i[4]:"");c.init(u)}return!0}if(i=/^\/?narrative(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e)){var d=window.Stories;return!0!==a&&(d.init("".concat(i[1],"/narrative").concat(i[1],"_").concat(i[2]),{source:"narrative_link"}),!0)}if(i=/^\/?doc(-?\d+)_(\d+)(\/?([a-z0-9_-]+))?$/i.exec(e))return!0!==a&&(r.zopen(null,null,"".concat(i[1],"_").concat(i[2]),"",{no_push:(n||{}).no_push,isDoc:!0,hasVideo:!1,hash:i[4]}),o&&!1!==t&&void 0!==t&&(o._st=t),!0);if(i=/^\/?publish_photo(-?\d+)?$/i.exec(e)){if(!0===a)return!1;QRPhotoPosting&&QRPhotoPosting.show()}}return!1!==a&&(o&&o.close(),Stories&&Stories.opened&&Stories.close({isPopState:!0,closeAll:!0}),QRPhotoPosting&&QRPhotoPosting.close(),!0)}function M(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e){if(window.isNewNavigation)return void function(e,t,n){var a=window.Tabbar.getCurrentId(),i={nav:{tab:t.tab||a,prev_tab:t.prev_tab}};window.isNewMail?t.replace?history.replaceState(extend({},n,i),null,e):history.pushState(extend({},n,i),null,e):t.replace?history.replaceState(i,null,e):history.pushState(i,null,e)}(t,n,a);t="/"==t.substr(0,1)?t:"/"+t,window.isNewMail?n.replace?history.replaceState(a,null,t):history.pushState(a,null,t):n.replace?history.replaceState(null,null,t):history.pushState(null,null,t)}else{var i="/"==t.substr(0,1)?t:"/"+t,r="#"+i,o=location.pathname+location.search+r;ge("base").href=i,n.replace?location.replace(o):(c=r,location.href=o)}}function P(t){if(!t.no_push&&d.cur!=t.nav.push){if((0,s.isOfflineCapable)()&&!1===navigator.onLine&&!t.push_only)return E(t.nav.push,null,t);try{window.isNewMail?M(t.nav.push,t,t.historyState):M(t.nav.push,t),e&&!t.no_push&&(t.nav_init||t.nav_incr)?(t.nav_init&&(f=0),t.nav_incr&&!1!==f&&f++,f>p&&(f=!1)):f=!1}catch(e){return E(t.nav.push,null,t)}}d.cur!==t.nav.push&&(d.prev_cur=d.cur,d.prev_fv_link=d.fv_link),d.cur=t.nav.push,d.path=t.nav.path,d.params=t.nav.params,d.hash=t.nav.hash,d.path&&0!==d.path.indexOf("/")&&(d.path="/"+d.path)}if(e)addEvent(window,"popstate",function(e){if(window.isNewMail&&d.onPopState())return preventEvent(e),void stopEvent(e);var t=extend({no_push:!0,need_restore:!0});if(window.isNewNavigation&&e.state&&e.state.nav){var n=e.state.nav,a=n.tab,i=n.prev_tab;t=extend(t,{tab:a,prev_tab:i})}S(location,null,t)});else{var T=location.hash||"";"#/"==T.substr(0,2)&&E(T.substr(1),null,{replace:!0});var D=function(e){(e=(e||"").substr(1))&&"/"==e.substr(0,1)||(e=location),S(e,null,{no_push:!0,need_restore:!0})};"onhashchange"in window?addEvent(window,"hashchange",function(){D(location.hash||"")}):(!function e(){var n=location.hash||"";c!==n&&(c=n,t(!0)),setTimeout(e,100)}(),t(function(e){D(e)}))}function I(e,t){var n=!(!e||!e.getAttribute),a={};if(!n)return a;var i=e.getAttribute("data-post-id");i&&(a.post_id=i);var r=e.getAttribute("data-post-click-type");r&&(a.post_click_type=r);var o=e.getAttribute("mention_id");o&&(a.post_click_mention_id=o);var s=e.getAttribute("data-post-click-cc-key");s&&(a.post_click_cc_key=s);var l=[e.getAttribute("href"),e.getAttribute("data-href")];if(each(l,function(e,t){if(t&&"#"!==t)return a.post_click_url=t,!1}),!!r||t){var c=gpeByClass("_ads_block_data_w",e),u=(c=c||gpeByClass("_ads_promoted_post_data_w",e))&&c.getAttribute("data-ad"),d=c&&c.getAttribute("data-ad-block-uid");u&&(a.ad_data=u),d&&(a.ad_block_unique_id=d)}return a}var x=(location.pathname||"").replace(/^\/+/,"/"),O=location.search||"",B=location.hash||"";return{onBeforeGo:(0,i.default)(),onBeforeGo2:(0,i.default)("path","queryObject","fullUrl","opts"),onPopState:(0,i.default)(),go:S,al_go:k,app_go:function(e,t,n){if(!n)return!0;if(checkEvent(t))return!0;remove("app_go_frame");var a=getHref(e),i=ce("iframe",{id:"app_go_frame",src:n,onload:function(){remove("app_go_frame"),a&&d.hard_go(a)}},{display:"none"});return window.bodyNode.appendChild(i),!1},hard_go:E,go_after:function(e,t){var n=window.al;return!window.al||!n.ver||(!!checkNav(t.target,{skip_onclick:!0,skip_clicable:!0})||!1!==e&&(d.go(e,t)||cancelEvent(t),!1))},page_set:function(e,t,n){if(window.isNewNavigation)b(e,t,n);else{for(var a=u.length-1;a>=0;--a)if(u[a].h==e||u[a].a==e)return void(u[a]={h:e,d:t,a:n});u.push({h:e,d:t,a:n}),u.length>h&&u.shift()}},page_get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tabbar.getCurrentId();if(window.isNewNavigation)return function(e,t){for(var n=_(t),a=n.length-1;a>=0;--a){var i=n[a];if(i.h===e||i.a===e)return i.d}return!1}(e,t);for(var n=u.length-1;n>=0;--n)if(u[n].h==e||u[n].a==e)return(u=u.slice(0,n+1))[n].d;return!1},saveScrollPosition:function(){var e=y();e&&e.d&&(e.d.st=scrollTop())},set:P,checkUrl:w,tryHistoryBack:function(){var e=f;return e&&history.go(-e),f=!1,!!e},zInit:function(){var e=qs2obj(d.params);e.z&&C(e.z)},getPostParams:I,cur:x+O+B,path:x,params:O.substr(1),hash:B,clear:function(){window.isNewNavigation?(n={},d.initStore(),u=[],Tabbar.setHistory(n)):u=[]},hasUpdate:function(e,t,n){if(!e||!e.need_check_updates||!window.isNewNavigation)return!1;var a=t,i=g(_(e.tab),a);if(!i||!n.html)return!1;var r=i.d.lm.check_updates,o=n.lm.check_updates;return!(!r&&!o)&&(o!==r&&{currentCache:i})},needUpdate:function(e,t,n){if(!e||!e.need_check_updates||!window.isNewNavigation)return!0;var a=t,i=g(_(e.tab),a);if(!i||!n.html)return!0;var r=i.d.lm.check_updates,o=n.lm.check_updates;return!r&&!o||o!==r},updateCurrentPage:function(){var e=y();page.set(e.h,e.d,{forceUpdate:!0})},isTabHaveCache:function(e,t){var n=_(e);return!!n&&!!g(n,t)},getQuery:function(e){var t=qs2obj(d.params);return e?t[e]||null:t},getNotifierScrollTop:function(){var e=u.find(function(e){return"/settings?act=notifier"===e.h});return e?e.d.st:null},reload:function(){return d.go(d.cur)},tryBack:function(){var e=u.slice(-2)[0];return!!e&&(d.go(e.h,null,{need_restore:!0}),!0)},backToTabHistory:function(e){var t=v(),a=t.findIndex(function(e){return!0===e.current}),i=e&&hasClass("al_back",e),r=attr(e,"href"),o=t[a-1];if(o)return t.splice(a,t.length),d.go(o.h,null,{need_restore:i});if(r)return d.go(r);var s=Tabbar.getCurrentId(),l=Tabbar.getDefaultURL(s);return n[s]=[],d.go(l)},openInNativeApp:function(e,t,n){var a=this;if(this._openAppInProgress)return!1;cancelEvent(t);var i={android:"https://vk.cc/android",iphone:"https://vk.cc/iphone"},o="vk://vk.com"+(window.isNewNavigation&&ge("vk_wrap").offsetWidth<882&&d.prev_cur?d.prev_cur:d.cur),s=r.default.mi?1500:300;r.default.safari&&(s=r.default.ios>10?0:1100);var l=Date.now(),c=setTimeout(function(){a._openAppInProgress=!1,Date.now()-l>s+200||!document.hasFocus()||(n&&n.href?d.hard_go(n.href):d.hard_go(i[e]))},s);if(addEvent(window,"blur",function e(){clearTimeout(c),a._openAppInProgress=!1,removeEvent(window,"blur",e)}),r.default.ios){addEvent(window,"focus",function e(){window.menu&&window.menu.close(),removeEvent(window,"focus",e)})}else window.menu&&window.menu.close();return this._openAppInProgress=!0,d.hard_go(o),statlogsValueEvent("mvk_open_in_native_link",1,e),!1},initOpenInNativeAppBtn:function(){if(!isVkWebView()){var e=geByClass1("mmi_open_in_app");e&&addClass("supported",e)}},initStore:function(){window.store.tabs=n},getPageJs:function(){var e=(0,a.$)("#page_script");return e?e.innerText:u.length&&u[u.length-1].d.js||""},onMenuItemClick:function(e){var t=window.isNewNavigation?"tabbar":"left_menu",n=getW("vk_wrap")>=882?"full_version":"mobile";if(statlogsValueEvent("mvk_navigation_pages","click",t,e,n),"/wall"===d.cur.substr(0,5)&&"add"===d.getQuery("act")){var i=(0,a.$)("#feed_add_form"),r=qs2obj(i.action.split("?")[1]),o=i.getAttribute("data-hash")||r.hash;o&&post.saveDraft(null,o)}},setFvLink:function(e){d.fv_link=e}}}();onDOMReady(function(){d.initOpenInNativeAppBtn(),d.initStore()}),window.nav||(window.nav=d);var f=d;t.default=f},wRgB:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),isObject(n)||(n={items:n}),this.opts=extend({slideClassName:"",onStartChange:!1,onChange:!1,pointsWrap:!1,slideContFn:!1,shownSlidesNum:1},n),this.wrap=ge(t),this.parseItems(n.items),this.init()}var t,n,i;return t=e,(n=[{key:"parseItems",value:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];"string"==typeof a&&(a={className:a}),a=extend({html:"",className:"",pos:t.length},a),t.push(a)}this.items=t}},{key:"init",value:function(){if(addClass("landings_slider_wrap",this.wrap),addEvent(this.wrap,"touchstart mousedown",this.touchStart.bind(this)),this.opts.pointsWrap){var e="";for(var t in this.items)e+='<div class="landings_slider_point"></div>';addClass("landings_slider_points",this.opts.pointsWrap),val(this.opts.pointsWrap,e)}this.changeSlide(0)}},{key:"getTouchX",value:function(e){return e.targetTouches&&e.targetTouches.length>0?e.targetTouches[0].pageX:e.pageX}},{key:"getTouchY",value:function(e){return e.targetTouches&&e.targetTouches.length>0?e.touches[0].pageY:e.pageY}},{key:"touchStart",value:function(e){var t=this.getTouchX(e),n=this.getTouchY(e),a=this,i=!1,r=!1,o=vkNow(),s=0,l=this.getTouchX(e),c=getW(this.wrap);function u(e){if(!r)if(!i&&Math.abs(a.getTouchY(e)-n)>20)r=!0;else{a.lock&&(i=!0,t=a.getTouchX(e),o=vkNow(),a.changeSlide(a.newPos),cancelEvent(e),a.lock=0,clearTimeout(a.changeTimeout));var u=a.getTouchX(e),d=t-u;(Math.abs(d)>20||i)&&(cancelEvent(e),i||(t=a.getTouchX(e),d=0,i=!0),s=d,l=u,d=-(100+d/c*100),d-=100*a.opts.shownSlidesNum-100,setStyle(a.helper,"transform","translateX("+d+"%)"))}}function d(e){if(removeEvent(bodyNode,"mousemove touchmove",u),removeEvent(bodyNode,"mouseup touchend touchcancel",d),!a.lock)if(a.lock=1,Math.abs(s)>50){var n=s<0?"prev":"next",i=Math.abs(l-t)/(o/vkNow());i+=.2*i;var r=100*a.opts.shownSlidesNum;r="next"==n?100+r:r-100,setStyle(a.helper,{transition:"transform "+i+"ms",transform:"translateX(-"+r+"%)"});var c=a.items.length-1,f="prev"==n?a.pos-1:a.pos+1;f<0?f=c:f>c&&(f=0),a.opts.onStartChange&&a.opts.onStartChange(f,n),a.newPos=f,a.changeTimeout=setTimeout(function(){a.lock=0,a.changeSlide(f)},i)}else setStyle(a.helper,{transition:"transform 200ms",transform:"translateX(-"+100*a.opts.shownSlidesNum+"%)"}),setTimeout(function(){a.lock=0},200)}removeEvent(bodyNode,"mousemove touchmove",u),removeEvent(bodyNode,"mouseup touchend touchcancel",d),addEvent(bodyNode,"mousemove touchmove",u),addEvent(bodyNode,"mouseup touchend touchcancel",d)}},{key:"makeItem",value:function(e){var t=this.pos==e.pos?"_active_slide ":"",n=this.opts.slideContFn?this.opts.slideContFn(e):e.html;return'<div class="landings_slider_item '+t+e.className+" "+this.opts.slideClassName+'">'+n+"</div>"}},{key:"getSlidesHtml",value:function(e){for(var t=this.opts.shownSlidesNum,n=this.items.length-1,a="",i=e,r=0;r<t;r++)--i<0&&(i=n),a=this.makeItem(this.items[i])+a;a+=this.makeItem(this.items[e]),i=e;for(var o=0;o<t;o++)++i>n&&(i=0),a+=this.makeItem(this.items[i]);return a}},{key:"changeSlide",value:function(e){if(this.pos=Math.max(0,Math.min(e,this.items.length-1)),this.replaceHtml(this.getSlidesHtml(this.pos)),this.opts.onChange&&this.opts.onChange(this.pos),this.opts.pointsWrap){var t=ge(this.opts.pointsWrap);removeClass("selected",geByClass1("selected",t)),addClass("selected",t.children[this.pos])}}},{key:"replaceHtml",value:function(e){val(this.wrap,'<div class="landings_slider_helper">'+e+"</div>"),this.helper=geByClass1("landings_slider_helper",this.wrap),setStyle(this.helper,"transform","translateX(-"+100*this.opts.shownSlidesNum+"%)")}},{key:"toSlide",value:function(e,t){this.lock=1;var n=this.makeItem(this.items[this.pos]),a=this.makeItem(this.items[e]);e>this.pos?n+=a:n=a+n,this.replaceHtml(n),t||(t=e>this.pos?"next":"prev");var i="next"==t?0:-100;setStyle(this.helper,"transform","translateX("+i+"%)"),this.opts.onStartChange&&this.opts.onStartChange(e,t);var r=this;clearTimeout(this.toSlideTimer),this.toSlideTimer=setTimeout(function(){i="next"==t?-100:0,setStyle(r.helper,{transition:"transform 200ms",transform:"translateX("+i+"%)"}),r.toSlideTimer=setTimeout(function(){r.lock=0,r.changeSlide(e)},200)},10)}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=i},wTbK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"open",{enumerable:!0,get:function(){return r.open}}),Object.defineProperty(t,"close",{enumerable:!0,get:function(){return r.close}}),t.default=void 0;var a,i=(a=n("t7Ww"))&&a.__esModule?a:{default:a},r=n("ACAL");var o=i.default;t.default=o,window.ModalMenu=i.default,extend(i.default,{open:r.open,close:r.close})},wZhO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{attrs:{"data-playlist-id":e.playlist_id},inner:e.inner,class:"AudioPlaylistRoot"}};t.default=a},wZtc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadMessage=function(e){s(e)};var a=n("qHA9"),i=null,r=null;function o(e){if(r&&(clearTimeout(r),r=null),i&&(i=Object.assign({},i,{fails:0})),"online"===e.type&&i){var t=i;i=null,s(t)}}function s(e){if(!1!==navigator.onLine)return(0,a.mailRequest)("/mail",{act:"message",message_id:e.msgId,forcePinned:e.forcePinned}).then(function(t){e.onResult(t)}).catch(function(t){if(e.onTryError&&e.onTryError(t),!1!==navigator.onLine){var n=Math.min(1+(0|e.fails),6),a=Math.pow(2,Math.max(n-2,0));i=Object.assign({},e,{fails:n}),r=setTimeout(function(){r=null,s(i)},1e3*a)}else i=Object.assign({},e,{fails:0})});i=Object.assign({},e,{fails:0})}window.addEventListener("online",o),window.addEventListener("offline",o)},wcVR:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={_def_opts:{enableHighAccuracy:!0,maximumAge:3e5,timeout:6e4},_provider:null,initW3C:function(){i._provider=navigator.geolocation,i.getCurrentPosition=function(e,t,n){i._provider.getCurrentPosition(function(t){void 0!==t.latitude?e(extend(t,{coords:extend(t.coords||{},{latitude:t.latitude,longitude:t.longitude})})):e(t)},t,n)}},initGears:function(){var e=window.google;i._provider=e.gears.factory.create("beta.geolocation")},initSymbian:function(){var e=window.device;i._provider=e.getServiceObject("Service.Location","ILocation"),i.getCurrentPosition=function(e,t){i._provider.ILocation.GetLocation({LocationInformationClass:"BasicLocationInformation"},function(n,a,i){4==a?t({code:2,message:"Position unavailable"}):e({timestamp:null,coords:{latitude:i.ReturnValue.Latitude,longitude:i.ReturnValue.Longitude,altitude:i.ReturnValue.Altitude,heading:i.ReturnValue.Heading}})})}},initPalm:function(){i.getCurrentPosition=function(e,t,n){var a={};n&&(n.enableHighAccuracy&&1==n.enableHighAccuracy&&(a.accuracy=1),n.maximumAge&&(a.maximumAge=n.maximumAge),n.responseTime&&(n.responseTime<5?a.responseTime=1:n.responseTime<20?a.responseTime=2:a.timeout=3)),new window.Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:a,onSuccess:function(t){e({timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,heading:t.heading}})},onFailure:function(e){1==e.errorCode?t({code:3,message:"Timeout"}):2==e.errorCode?t({code:2,message:"Position unavailable"}):t({code:0,message:"Unknown Error: webOS-code"+e.errorCode})}})}},getCurrentPosition:function(e,t,n){i._provider.getCurrentPosition(e,t,extend(i._def_opts,n||{}))},init:function(){var e=window,t=e.google,n=e.device,r=e.Mojo;try{var o="undefined";if(a(navigator.geolocation)!==o)i.initW3C();else if(a(window.google)!==o&&a(t.gears)!==o)i.initGears();else if(a(n)!==o&&a(n.getServiceObject)!==o)i.initSymbian();else{if(a(r)===o||"Mojo.Service.Request"==typeof r.Service.Request)return!1;i.initPalm()}}catch(e){return!1}return!0}};window.geo=i;var r=i;t.default=r},whJg:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.AverageAlgorithm=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}var t,n,i;return t=e,(n=[{key:"push",value:function(e){this._count++,this._accum+=e}},{key:"get",value:function(){return this._accum/this._count}},{key:"clear",value:function(){this._count=0,this._accum=0}}])&&a(t.prototype,n),i&&a(t,i),e}();t.AverageAlgorithm=i},wyHI:function(e,t,n){"use strict";var a=window,i=a.gpeByClass,r=a.hasClass,o=a.addClass,s=a.removeClass,l=a.geByClass1,c=a.setStyle,u=a.tooltip,d=a.ajax;window.Fave={showActionsTT:function(e,t){cancelEvent(t);var n=i("FaveArticles__row",e);if(r(n,"wi_actions_opened"))Fave.hideActionsTT();else{var a=l("wi_actions_wrap",n),s=l("FaveArticles__row_actions",n);c(a,"top",e.offsetTop+e.offsetHeight+"px"),o(n,"wi_actions_opened"),u.addHandler(Fave.hideActionsTT),u.show(a,s)}},hideActionsTT:function(){s("wi_actions_opened",l("wi_actions_opened")),u.hide()},removeArticle:function(e,t,n){Fave.hideActionsTT();var a=i("FaveArticles__row",e);o(a,"removed"),d.post("fave.php",{act:"defave_article",link:t,hash:n},{onFail:function(){return s(a,"removed")}})},restoreArticle:function(e,t,n){var a=i("FaveArticles__row",e);s(a,"removed"),d.post("fave.php",{act:"enfave_article",link:t,hash:n},{onFail:function(){return o(a,"removed")}})}}},xk4V:function(e,t,n){var a=n("4fRq"),i=n("I2ZF");e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||i(o)}},xwOv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.back=function(){window.history?window.history.back():window.location="/"},t.close=function(){a&&o.default.close(a)},t.show=function(){var e=f(),t="https://vk.com/fest?publish_photo=".concat(e.photo),n=s.default.createQR(t,271,"QRPhotoPosting__svg",{isShowLogo:!0});a=o.default.open(i.default.elem((0,l.QRPhotoPosting)({svg:n,title:lang.mobile_photo_qr_popup_title})),!0),nav.go("".concat(nav.path,"?z=publish_photo").concat(e.photo),null,{push_only:!0,nav_init:!1,nav_incr:!0})},t.getQRPhotoButton=h,t.appendQRPhotoButton=function(e){var t=(0,u.$)("#z_photoview .zpv_values"),n=i.default.elem(h(e));(0,r.append)(n,t)};var a,i=d(n("TYsd")),r=n("OcsD"),o=d(n("r/ag")),s=d(n("wZQE")),l=n("tqgD"),c=n("W9Tc"),u=n("UxAg");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=/photo(-?\d+)_(\d+)/i.exec(e||nav.cur);return Array.isArray(t)||(t=["",0,0]),{album:(0,r.intval)(t[1]),photo:(0,r.intval)(t[2])}}function h(e){return-86529522===f(e).album&&(0,c.partConfigEnabled)("mvk_photo_fest_qr_sharing")?(0,l.QRPhotoPostingButton)():""}},y6KD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=s,t.default=void 0;var a=n("DPXh"),i=n("CjAb"),r=n("4Oey"),o=n("/xuI");function s(e){for(var t=Math.ceil((window.innerHeight-o.HEADER_HEIGHT)/70),n=[],s=0;s<t;s++)n.push((0,a.ChatBlock)());return{inner:[(0,i.Header)(),(0,r.SearchBlock)(),n],class:"SkeletonMessages Skeleton",tag:"div"}}var l=s;t.default=l},yEBz:function(e,t,n){"use strict";var a=n("UxAg");window.Settings={_privacy:{}},Settings._privacy.onRadioChange=o;var i={pad:function(e){return'.Settings__privacyPad[data-privacy="'.concat(e,'"]')},submit:".Settings__privacySubmitRow",form:".Settings__privacyForm",forbid:".Settings__privacySelectForbiddenLink"},r={padVisible:"Settings__privacyPad_visible",submitVisible:"Settings__privacySubmitRow_visible"};function o(e,t){if("none"===e)s("allowed",!1),s("forbidden",!1),l(!0);else if("allowed"===e)s("allowed",!0),s("forbidden",!1),l(!1);else if("forbidden"===e){s("allowed",!1),s("forbidden",!0),l(!0);var n=(0,a.$)(i.form),r=(0,a.$)(i.forbid),o=t.name,c=t.value,u=n.getAttribute("action"),d="".concat(u,"&").concat(o,"=").concat(c,"&forbid");r.setAttribute("href",d)}}function s(e,t){(0,a.$)(i.pad(e)).classList.toggle(r.padVisible,t)}function l(e){(0,a.$)(i.submit).classList.toggle(r.submitVisible,e)}},yNeG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("B5sG"))&&a.__esModule?a:{default:a};n("vTE6");var r=i.default;t.default=r,window.uMailHat=i.default},yVRv:function(e,t,n){"use strict";var a,i=(a=n("9CLW"))&&a.__esModule?a:{default:a};function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=["touchstart","touchend","touchmove","touchcancel"];i.default.onIframeReady(function(e){e.is_api&&registeredEvents.forEach(function(e){var t=r(e,3),n=t[0],a=t[1],i=t[2];o.indexOf(a)>=0&&removeEvent(n,a,i)})})},yVgc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Square=o,t.default=void 0;var a,i=n("/xuI"),r=(a=n("z9sQ"))&&a.__esModule?a:{default:a};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.getRandomId)("skeleton-line"),n=(0,i.stylesObjectToString)({width:"".concat(e.size,"px"),height:"".concat(e.size,"px")})+(e.style||""),a=[r.default.class("SkeletonSquare",{}),e.class].filter(function(e){return e}).join(" ");return(0,i.applyAnimation)(t),{id:t,class:a,style:n,tag:"div"}}var s=o;t.default=s},yXty:function(e,t,n){"use strict";var a=n("sZWN"),i=(n("qHA9"),need("Voting")),r=function(){var e,t,n=[],r=!1,s=!1,l={};function c(e){return function(){if(!r)return e.apply(this,arguments)}}function u(e){return"A"===e.tagName}function d(){s=n.length>0,toggleClass("vk_messages_actions_visible",document.body,s)}function f(){s&&(l={},each(n,function(e,t){removeClass("mi_selected",geByClass1("_msg"+t))}),r=!1,n=[],d())}function h(){return!!window.getSelection&&window.getSelection().toString().length>0}function p(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r=!0,lockButton(e),im.off(),ajax.click("/mail",{},{url_params:{act:i?"spam":"delete",peer:t,hash:a,ids:n.join(","),community:o()}})}function A(){return Boolean(e)}function m(){ge("dialogs")&&A()?addClass("vk_dialogs_forwarding",document.body):e="",f()}return page.onChange(m),mail.onShowDialogsPageFromCache(m),mail.onShowDialogFromCache(m),mail.onShowDialogsPageFromCache(a.showHeader),mail.onShowDialogFromCache(a.showHeader),mail.onMessagesRepainted(function(){each(n,function(e,t){addClass("mi_selected",geByClass1("_msg"+t))})}),{onMessageClick:c(function(e){var t=e.target,a=e.currentTarget,r=u(t)||u(t.parentNode);t.closest(".".concat(i.cls))?e.stopPropagation():(r&&f(),browser.uc_mini||h()||r||setTimeout(function(){var e,t,i;h()||(e=a,t=attr(e,"data-id"),(i=n.indexOf(t))>=0?(n.splice(i,1),removeClass("mi_selected",e),delete l[t]):(n.push(t),addClass("mi_selected",e),l[t]=hasClass("msg_item_important",e)),d(),function(){var e=window.lang,t=Math.max(n.length,1);val(geByClass1("messagesActions__row_counter"),langNumeric(t,e.mobile_mail_messages_selected).replace("{count}",t))}())},40))}),remove:c(p),reply:c(function(e,t,a){r=!0,lockButton(e),ajax.click("/attachments",{},{url_params:{act:"add",target:"mail"+t,hash:a,object:"mail"+n.join(";"),community:o()}})}),forward:c(function(a,i){r=!0,lockButton(a),e="mail"+n.join(";"),t=i;var s=o(),l=s?"?community=".concat(s):"";nav.go(location.pathname+l,null,{ignore_cur_process:!0})}),spam:c(function(e,t,n){p(e,t,n,!0)}),close:c(f),toggleImportant:c(function(e){var t,a=n.length,i=0;for(t=0;t<a;t++)if(!l[n[t]]){i=1;break}for(t=0;t<a;t++)toggleClass("msg_item_important",geByClass1("_msg"+n[t]),1===i);ajax.post("/mail",{_ajax:1,act:"mark_important",ids:n,val:i,hash:e}),f()}),hasFwdMessages:A,attachFwdMessages:function(n){ajax.click("/attachments",{},{url_params:{act:"add",target:"mail"+n,hash:t,object:e,community:o()}}),e=""}}}();function o(){return nav.getQuery("community")}window.MessagesActions=r},yZoT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("Qz23")),i=o(n("aiw/"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;var t=r();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}}return n.default=e,t&&t.set(e,n),n}var s=function(){function e(){window.isCustomScroll&&(document.body.classList.contains("vk__page_mail")||a.restoreDocumentScroll())}return{init:function(){if(window.isCustomScroll&&!document.body.classList.contains("vk__page_mail")){var t=ge("mcont");t&&t.classList.contains("ScrollView")?a.init():e(),i.onClose()}},restore:e}}(),l=s;t.default=l,onDOMReady(function(){s.init(),page.onChange(function(){s.init()})}),window.ContentScrollView=s},yguo:function(e,t,n){"use strict";var a=n("UxAg"),i=c(n("+cqQ")),r=c(n("jk6M")),o=c(n("ZoJ6")),s=function(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=a?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i]}}n.default=e,t&&t.set(e,n);return n}(n("aiw/"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function u(e){requestAnimationFrame(function(){var t=e.value;h(e.value),o.default.onChange(t)})}function d(){s.onOpen("top")}function f(e){var t=e.closest(".mailFilter").$(".mailFilter__input"),n=document.activeElement===t;(r.default.ios?setTimeout:requestAnimationFrame)(function(){h(""),t.value="",n&&t.focus(),o.default.onClear(),o.default.onChange("")})}function h(e){(0,a.$$)(".mailFilter").forEach(function(t){return t.classList.toggle("mailFilter_hasQuery",!!e)})}Object.assign(o.default,{onChange:(0,i.default)("query"),onClear:(0,i.default)(),setQuery:function(e){var t=(0,a.$)(".mailFilter__input");t&&t.value!==e&&(t.value=e,o.default.onChange(e),h(e))},setQuerySilently:function(e){var t=(0,a.$)(".mailFilter__input");t&&t.value!==e&&(t.value=e,h(e))}}),o.default._onInput=u,o.default._onClearMouseDown=f,o.default._onFocus=d},ylz1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("29dZ"))&&a.__esModule?a:{default:a};t.default=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.address="",this.comment="",this.setAddress=function(e){t.address=e.value},this.setComment=function(e){t.comment=e.value},this.doOrder=function(e,n,a){var r=a.$btn;i.default.setLoading(r,!0),ajax.post("market.php",{act:"cart_do_order",group_id:e,hash:n,address:t.address,comment:t.comment},{onDone:function(){i.default.setLoading(r,!1)},onFail:function(){i.default.setLoading(r,!1)}})}}},yqpO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emojiToHTML=function(e,t){if(browser.ipad||browser.iphone)return e;e=(e+"").replace(/&nbsp;/g," ").replace(/<br>/g,"\n");for(var n=0;n<2;n++)Object.keys(a.EMOJI_PREFIXED_REPLACES).forEach(function(t){e.replace(a.EMOJI_PREFIXED_REPLACES[t],function(e,n,a,i){return(n||"")+o(t)+(i||"")})});Object.keys(a.EMOJI_REPLACES).forEach(function(t){e=e.replace(a.EMOJI_REPLACES[t],function(e,n,a){return o(t)+(a||"")})}),e=e.replace(/\n/g,"<br>"),t&&(e=e.replace(/\uFE0F/g,"").replace((0,a.emojiRegex)(),s));return e},t.getEmojiHTML=o,t.emojiReplace=s;var a=n("S6+Z"),i=n("TxR4"),r=n("vkmG");function o(e,t,n,a){if(!n&&t)return t;if(a){var i=t?' title="'.concat(t,'"'):"";return'<i class="emoji @'.concat(e,'" emoji="').concat(e,'"').concat(i,"></i>")}var r=window.devicePixelRatio>=2?"_2x":"",o=browser.msie&&Number(browser.version)>8?' contenteditable="false"':"",s=t?' alt="'.concat(t,'"'):"";return'<img class="emoji" src="/emoji/e/'.concat(e).concat(r,'.png"').concat(s).concat(o,">")}function s(e){return o((0,i.emojiSymbolToByteHex)(e),(0,r.encodeHTMLEntities)(e),!0)}},yuVR:function(e,t,n){"use strict";var a=1e4,i="friendsStat.events",r="/friends",o="stats",s=null;function l(){clearTimeout(s);var e=lsGet(i)||[];if(e.length){lsSet(i);var t,n={act:o};n=extend(n,(t={},each(e,function(){t[this.type]?t[this.type].push(this.data):t[this.type]=[this.data]}),t)),ajax.post(r,n)}}window.FriendsStats={log:function(e,t){var n=function(e,t){var n=[],a=(new Date).getTime();switch(e){case FriendsStats.EVENTS.EVENT_VIEW_USER:n=[t.uid,a,t.pos,t.ref,t.blockType,t.trackCode];break;case FriendsStats.EVENTS.EVENT_HIDE_BLOCK:n=[a,t.ref,t.trackCode];break;case FriendsStats.EVENTS.EVENT_OPEN_USER:n=[t.uid,a,t.ref,t.trackCode]}return n.join("|")}(e,t);if(!n)return;var r=lsGet(i)||[];r.push({type:e,data:n}),lsSet(i,r),clearTimeout(s),s=setTimeout(l,a)},EVENTS:{EVENT_VIEW_USER:"show_user_rec",EVENT_HIDE_BLOCK:"hide_block",EVENT_OPEN_USER:"open_user"}},s=setTimeout(l,a)},ywff:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initPhotoCarousel=function(e,t){var n=domQuery1("[data-sizes]",e),r=JSON.parse(domData(n,"sizes")),o=(domData(n,"media-links")||"").split(",");if(r.length<=1||domData(e,"carousel-inited"))return;if(domData(e,"carousel-inited",1),t.mobile)return function(e,t){var n,r,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=geByClass1("article_photo_carousel__controls",t),c=geByClass1("article_photo_carousel__counter",t),u=domData(c,"counter-lang")||getLang("global_article_carousel_counter"),d=getSize(geByClass1("article_figure_content",t)),f=geByClass1("article_photo_carousel_inner",t),h=s.onClick,p=0,A=0,m=!1,_=0,v=0,g=!1,y=!1;l.addEventListener("touchstart",function(e){r=e.touches[0].pageX,n=e.touches[0].pageY,addClass(f,"--no_trans"),m=!0,clearTimeout(o)});var b,w=!1;function E(n,a,r){if(!a||!m){if(m=!0,a)return f.style.transform="translateX(-50px)",void(o=setTimeout(function(){f.style.transform="translateX(0px)"},700));clearTimeout(o),p=void 0===p?Math.min(e.length-1,Math.max(0,p+n)):r,domData(t,"photo-carousel-index",p),i(p,t),c.innerHTML=u.replace("{counter}",p+1).replace("{total}",e.length),f.style.transform="translateX(-".concat(p*d[0],"px)")}}return l.addEventListener("touchmove",function(t){if(y||!(Math.abs(t.touches[0].pageY-n)>5||g)){if(A=t.touches[0].pageX-r,!(Math.abs(A)<10)||w){y||window.addEventListener("touchmove",b=function(e){return cancelEvent(e)},{passive:!1}),y=!0,w=!0;var a=Math.min(e.length-1,Math.max(0,p+(A<0?1:-1))),i=0===a&&0===p,o=a===e.length-1&&p===e.length-1;_=a;var s=-p*d[0];s+=i||o?.2*A:A,f.style.transform="translateX(".concat(s,"px)")}}else g=!0}),l.addEventListener("touchend",function(){w=!1,g=!1,y=!1,v=p,removeClass(f,"--no_trans"),b&&window.removeEventListener("touchmove",b),Math.abs(A)<50||(p=_),E(0,!1,_),isFunction(h)&&v!==_&&h(v<_?a.ArticleStatsEvents.clickOnCarouselNext:a.ArticleStatsEvents.clickOnCarouselPrev)}),E}(r,e,t);var s=function(e,t,n,r){var o,s=0,l=geByClass1("article_photo_carousel__controls",t),c=geByClass1("article_photo_carousel__counter",t),u=domData(c,"counter-lang")||getLang("global_article_carousel_counter"),d=getSize(geByClass1("article_figure_content",t)),f=geByClass1("article_photo_carousel_inner",t),h=geByClass1("article_photo_carousel__left",t),p=geByClass1("article_photo_carousel__right",t),A=n.onClick,m=!1;function _(a,l){if(!l||!m){if(m=!0,l)return f.style.transform="translateX(-50px)",void(o=setTimeout(function(){f.style.transform="translateX(0px)"},700));clearTimeout(o),s=Math.min(e.length-1,Math.max(0,s+a));if(n.moderDeletePhoto){var A=r[s];'<a href="'.concat(A,'" target="_blank" rel="noopener" class="flat_button article_photo_moder_open">Открыть</a>')}f.style.transform="translateX(-".concat(s*d[0],"px)"),c.innerHTML=u.replace("{counter}",s+1).replace("{total}",e.length),toggle(h,s>0),toggle(p,s<e.length-1),domData(t,"photo-carousel-index",s),i(s,t)}}return p.addEventListener("click",function(e){return _(1),A&&A(a.ArticleStatsEvents.clickOnCarouselNext),cancelEvent(e)}),h.addEventListener("click",function(e){return _(-1),A&&A(a.ArticleStatsEvents.clickOnCarouselPrev),cancelEvent(e)}),t.addEventListener("mousemove",function(){l.style.opacity=1}),t.addEventListener("mouseleave",function(){l.style.opacity=0}),_}(r,e,t,o);return data(e,"changePhotoFunction",s),s};var a=n("sWID");function i(e,t){var n=geByTag1("figcaption",t),a=[];n&&((a=domData(n,"captions"))&&(a=JSON.parse(a)),n.innerHTML=a[e]||"")}},z8PJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gemiusTrackPage=function(){if((0,a.partConfigEnabled)("geminus_counter")){var e="pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";if(window.pp_gemius_identifier)window.pp_gemius_hit(e);else{window.pp_gemius_identifier=e;var t=function(e){window[e]=window[e]||function(){var t=window[e+"_pdata"]=window[e+"_pdata"]||[];t[t.length]=arguments}};t("gemius_hit"),t("gemius_event"),t("pp_gemius_hit"),t("pp_gemius_event"),function(e,t){try{var n=e.createElement(t),a=e.getElementsByTagName(t)[0],i="http"+("https:"==location.protocol?"s":"");n.setAttribute("async","async"),n.setAttribute("defer","defer"),n.src=i+"://galv.hit.gemius.pl/xgemius.js",a.parentNode.insertBefore(n,a)}catch(e){}}(document,"script")}}};var a=n("W9Tc")},z9sQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n("iHpm"))&&a.__esModule?a:{default:a};var r=i.default;t.default=r,window.Bem=i.default},zEUu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("OcsD"),i={cachedProgress:{}},r={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.srand)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return this.radius=t,{component:this._getLoader(e,i.cachedProgress[e]),id:e}},update:function(e,t){var n=$('[data-loader-id="'.concat(e,'"] circle'));if(n){var a=this.radius,r=Math.PI*(2*a);i.cachedProgress[e]=t;var o=(100-Math.max(5,t))/100*r;n.setAttribute("stroke-dashoffset",o)}},ready:function(e){var t=$('[data-loader-id="'.concat(e,'"]'));re(t)},_getLoader:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.radius,a=Math.PI*(2*n),i=(100-Math.max(5,t))/100*a;return{class:"Loader",inner:[{class:"Loader__progress","data-loader-id":e,inner:{tag:"svg",viewPort:"0 0 100 100",inner:{tag:"circle",r:n,cx:"30",cy:"30","stroke-dashoffset":i,"stroke-dasharray":a}}}]}}};t.default=r},zGVo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("jIm5")),i=r(n("Jd+f"));function r(e){return e&&e.__esModule?e:{default:e}}a.default.addToCart=i.default;var o=a.default;t.default=o,window.MarketItem=a.default},zHNa:function(e,t,n){"use strict";var a=need("Control"),i=need("Popup"),r={init:function(){var e=geByClass1("_adultConfirm"),t=geByClass1("_adultConfirm__submit",e),n=geByClass1("adultConfirm__checkbox",e);toggleClass("adultConfirm__submit_disabled",t,!a.isChecked(n))},toggle:function(e){var t=gpeByClass("_adultConfirm",e.$control),n=geByClass1("_adultConfirm__submit",t);toggleClass("adultConfirm__submit_disabled",n,!e.checked)},submit:function(e,t){if(cancelEvent(e),!hasClass("adultConfirm__submit_disabled",t)){var n=gpeByClass("_adultConfirm",t),a=geByClass1("_adultConfirm__form",n),r={_ajax:1};each(geByTag("input",a),function(e,t){var n=t.type.toLowerCase(),a=t.name.toLowerCase();"hidden"!==n&&"checkbox"!==n&&"radio"!==n||(r[a]=t.value)});var o=attr(a,"action");ajax.post(o,r),i.close()}},back:function(e){cancelEvent(e),window.history?window.history.back():window.location="/"}};window.AdultConfirm=r},zLYz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoriesBlock=r,t.default=void 0;var a=n("0ONw"),i=n("NJ1W");function r(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e=Math.ceil(window.innerWidth/76),t=[],n=0;n<e;n++)t.push((0,i.Col)({inner:[(0,a.Story)()],auto:!0})),t.push((0,i.Offset)({small:!0}));return{inner:[(0,i.Row)({inner:[t]})],class:"SkeletonStoriesBlock",tag:"div"}}var o=r;t.default=o},zb1z:function(e,t,n){"use strict";var a,i=(a=n("SRbS"))&&a.__esModule?a:{default:a};Object.assign(i.default,{html:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var i="";return e.forEach(function(e,t){var a=n[t];i+=e+(a||0===a?a:"")}),i}})},zouF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Confirm=l;var a=n("OcsD"),i=s(n("TYsd")),r=s(n("Po+v")),o=s(n("z9sQ"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=(0,a.ceFromString)(i.default.html((0,r.default)({id:o.id,class:"Confirm",scrollable:!0,header:{title:o.title||getLang("mobile_warning_header")},content:[e,{class:"Popup__buttons",inner:[c(getLang("mobile_continue"),"regular",t),c(getLang("mobile_cancel"),"secondary",n||"Popup.close(this)")]}]})));r.default.open(s,!0)}function c(e,t,n){return{class:["Popup__button",o.default.class("Btn",{theme:t||"regular"})],tag:"button",inner:e,onclick:n}}page.onChange(function(){$$(".Confirm").forEach(function(e){return r.default.close(e)})}),window.Confirm=l},zq7H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DESKTOP_WIDTH=void 0;t.DESKTOP_WIDTH=882}});